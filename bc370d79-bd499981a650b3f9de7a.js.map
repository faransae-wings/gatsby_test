{"version":3,"file":"bc370d79-bd499981a650b3f9de7a.js","mappings":"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","sources":["webpack://gatsby-starter-default/./node_modules/ag-grid-enterprise/dist/ag-grid-enterprise.cjs.js"],"sourcesContent":["/**\n * ag-grid-enterprise - ag-Grid Enterprise Features * @version v24.1.0\n * @link http://www.ag-grid.com/\n' * @license Commercial\n */\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar agGridCommunity = require('ag-grid-community');\nvar __extends = undefined && undefined.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar LicenseManager = /** @class */function (_super) {\n  __extends(LicenseManager, _super);\n  function LicenseManager() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.watermarkMessage = undefined;\n    return _this;\n  }\n  LicenseManager_1 = LicenseManager;\n  LicenseManager.prototype.validateLicense = function () {\n    if (agGridCommunity._.missingOrEmpty(LicenseManager_1.licenseKey)) {\n      this.outputMissingLicenseKey();\n    } else if (LicenseManager_1.licenseKey.length > 32) {\n      var _a = LicenseManager_1.extractLicenseComponents(LicenseManager_1.licenseKey),\n        md5 = _a.md5,\n        license = _a.license,\n        version = _a.version,\n        isTrial = _a.isTrial;\n      if (md5 === this.md5.md5(license)) {\n        if (agGridCommunity._.exists(version) && version) {\n          this.validateLicenseKeyForVersion(version, !!isTrial, license);\n        } else {\n          this.validateLegacyKey(license);\n        }\n      } else {\n        this.outputInvalidLicenseKey();\n      }\n    } else {\n      this.outputInvalidLicenseKey();\n    }\n  };\n  LicenseManager.extractExpiry = function (license) {\n    var restrictionHashed = license.substring(license.lastIndexOf('_') + 1, license.length);\n    return new Date(parseInt(LicenseManager_1.decode(restrictionHashed), 10));\n  };\n  LicenseManager.extractLicenseComponents = function (licenseKey) {\n    // when users copy the license key from a PDF extra zero width characters are sometimes copied too\n    // carriage returns and line feeds are problematic too\n    // all of which causes license key validation to fail - strip these out\n    var cleanedLicenseKey = licenseKey.replace(/[\\u200B-\\u200D\\uFEFF]/g, '');\n    cleanedLicenseKey = cleanedLicenseKey.replace(/\\r?\\n|\\r/g, '');\n    var hashStart = cleanedLicenseKey.length - 32;\n    var md5 = cleanedLicenseKey.substring(hashStart);\n    var license = cleanedLicenseKey.substring(0, hashStart);\n    var _a = LicenseManager_1.extractBracketedInformation(cleanedLicenseKey),\n      version = _a[0],\n      isTrial = _a[1];\n    return {\n      md5: md5,\n      license: license,\n      version: version,\n      isTrial: isTrial\n    };\n  };\n  LicenseManager.prototype.getLicenseDetails = function (licenseKey) {\n    var _a = LicenseManager_1.extractLicenseComponents(licenseKey),\n      md5 = _a.md5,\n      license = _a.license,\n      version = _a.version,\n      isTrial = _a.isTrial;\n    var valid = md5 === this.md5.md5(license);\n    var expiry = null;\n    if (valid) {\n      expiry = LicenseManager_1.extractExpiry(license);\n      valid = !isNaN(expiry.getTime());\n    }\n    return {\n      licenseKey: licenseKey,\n      valid: valid,\n      expiry: valid ? LicenseManager_1.formatDate(expiry) : null,\n      version: version ? version : 'legacy',\n      isTrial: isTrial\n    };\n  };\n  LicenseManager.prototype.isDisplayWatermark = function () {\n    return !agGridCommunity._.missingOrEmpty(this.watermarkMessage);\n  };\n  LicenseManager.prototype.getWatermarkMessage = function () {\n    return this.watermarkMessage;\n  };\n  LicenseManager.formatDate = function (date) {\n    var monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n    var day = date.getDate();\n    var monthIndex = date.getMonth();\n    var year = date.getFullYear();\n    return day + ' ' + monthNames[monthIndex] + ' ' + year;\n  };\n  LicenseManager.getGridReleaseDate = function () {\n    return new Date(parseInt(LicenseManager_1.decode(LicenseManager_1.RELEASE_INFORMATION), 10));\n  };\n  LicenseManager.decode = function (input) {\n    var keystr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    var t = '';\n    var n, r, i;\n    var s, o, u, a;\n    var f = 0;\n    var e = input.replace(/[^A-Za-z0-9+/=]/g, '');\n    while (f < e.length) {\n      s = keystr.indexOf(e.charAt(f++));\n      o = keystr.indexOf(e.charAt(f++));\n      u = keystr.indexOf(e.charAt(f++));\n      a = keystr.indexOf(e.charAt(f++));\n      n = s << 2 | o >> 4;\n      r = (o & 15) << 4 | u >> 2;\n      i = (u & 3) << 6 | a;\n      t = t + String.fromCharCode(n);\n      if (u != 64) {\n        t = t + String.fromCharCode(r);\n      }\n      if (a != 64) {\n        t = t + String.fromCharCode(i);\n      }\n    }\n    t = LicenseManager_1.utf8_decode(t);\n    return t;\n  };\n  LicenseManager.utf8_decode = function (input) {\n    input = input.replace(/rn/g, 'n');\n    var t = '';\n    for (var n = 0; n < input.length; n++) {\n      var r = input.charCodeAt(n);\n      if (r < 128) {\n        t += String.fromCharCode(r);\n      } else if (r > 127 && r < 2048) {\n        t += String.fromCharCode(r >> 6 | 192);\n        t += String.fromCharCode(r & 63 | 128);\n      } else {\n        t += String.fromCharCode(r >> 12 | 224);\n        t += String.fromCharCode(r >> 6 & 63 | 128);\n        t += String.fromCharCode(r & 63 | 128);\n      }\n    }\n    return t;\n  };\n  LicenseManager.setLicenseKey = function (licenseKey) {\n    LicenseManager_1.licenseKey = licenseKey;\n  };\n  LicenseManager.extractBracketedInformation = function (licenseKey) {\n    var matches = licenseKey.split('[').filter(function (v) {\n      return v.indexOf(']') > -1;\n    }).map(function (value) {\n      return value.split(']')[0];\n    });\n    if (!matches || matches.length === 0) {\n      return [null, null];\n    }\n    var isTrial = matches.filter(function (match) {\n      return match === 'TRIAL';\n    }).length === 1;\n    var version = matches.filter(function (match) {\n      return match.indexOf(\"v\") === 0;\n    }).map(function (match) {\n      return match.replace(/^v/, \"\");\n    })[0];\n    return [version, isTrial];\n  };\n  LicenseManager.prototype.validateLicenseKeyForVersion = function (version, isTrial, license) {\n    switch (version) {\n      case \"2\":\n        if (isTrial) {\n          this.validateForTrial(license);\n        } else {\n          this.validateLegacyKey(license);\n        }\n        break;\n    }\n  };\n  LicenseManager.prototype.validateLegacyKey = function (license) {\n    var gridReleaseDate = LicenseManager_1.getGridReleaseDate();\n    var expiry = LicenseManager_1.extractExpiry(license);\n    var valid = false;\n    var current = false;\n    if (!isNaN(expiry.getTime())) {\n      valid = true;\n      current = gridReleaseDate < expiry;\n    }\n    if (!valid) {\n      this.outputInvalidLicenseKey();\n    } else if (!current) {\n      var formattedExpiryDate = LicenseManager_1.formatDate(expiry);\n      var formattedReleaseDate = LicenseManager_1.formatDate(gridReleaseDate);\n      this.outputIncompatibleVersion(formattedExpiryDate, formattedReleaseDate);\n    }\n  };\n  LicenseManager.prototype.validateForTrial = function (license) {\n    var expiry = LicenseManager_1.extractExpiry(license);\n    var now = new Date();\n    var valid = false;\n    var current = false;\n    if (!isNaN(expiry.getTime())) {\n      valid = true;\n      current = expiry > now;\n    }\n    if (!valid) {\n      this.outputInvalidLicenseKey();\n    } else if (!current) {\n      var formattedExpiryDate = LicenseManager_1.formatDate(expiry);\n      this.outputExpiredTrialKey(formattedExpiryDate);\n    }\n  };\n  LicenseManager.prototype.outputInvalidLicenseKey = function () {\n    console.error('*****************************************************************************************************************');\n    console.error('***************************************** ag-Grid Enterprise License ********************************************');\n    console.error('********************************************* Invalid License ***************************************************');\n    console.error('* Your license for ag-Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *');\n    console.error('*****************************************************************************************************************');\n    console.error('*****************************************************************************************************************');\n    this.watermarkMessage = \"Invalid License\";\n  };\n  LicenseManager.prototype.outputExpiredTrialKey = function (formattedExpiryDate) {\n    console.error('****************************************************************************************************************');\n    console.error('***************************************** ag-Grid Enterprise License *******************************************');\n    console.error('*****************************************   Trial Period Expired.    *******************************************');\n    console.error(\"* Your license for ag-Grid Enterprise expired on \" + formattedExpiryDate + \".                                                *\");\n    console.error('* Please email info@ag-grid.com to purchase a license.                                                         *');\n    console.error('****************************************************************************************************************');\n    console.error('****************************************************************************************************************');\n    this.watermarkMessage = \"Trial Period Expired\";\n  };\n  LicenseManager.prototype.outputMissingLicenseKey = function () {\n    console.error('****************************************************************************************************************');\n    console.error('***************************************** ag-Grid Enterprise License *******************************************');\n    console.error('****************************************** License Key Not Found ***********************************************');\n    console.error('* All ag-Grid Enterprise features are unlocked.                                                                *');\n    console.error('* This is an evaluation only version, it is not licensed for development projects intended for production.     *');\n    console.error('* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *');\n    console.error('****************************************************************************************************************');\n    console.error('****************************************************************************************************************');\n    this.watermarkMessage = \"For Trial Use Only\";\n  };\n  LicenseManager.prototype.outputIncompatibleVersion = function (formattedExpiryDate, formattedReleaseDate) {\n    console.error('****************************************************************************************************************************');\n    console.error('****************************************************************************************************************************');\n    console.error('*                                             ag-Grid Enterprise License                                                   *');\n    console.error('*                           License not compatible with installed version of ag-Grid Enterprise.                           *');\n    console.error('*                                                                                                                          *');\n    console.error(\"* Your ag-Grid License entitles you to all versions of ag-Grid that we release within the time covered by your license     *\");\n    console.error(\"* - typically we provide one year licenses which entitles you to all releases / updates of ag-Grid within that year.       *\");\n    console.error(\"* Your license has an end (expiry) date which stops the license key working with versions of ag-Grid released after the    *\");\n    console.error(\"* license end date. The license key that you have expires on \" + formattedExpiryDate + \", however the version of ag-Grid you    *\");\n    console.error(\"* are trying to use was released on \" + formattedReleaseDate + \".                                                               *\");\n    console.error('*                                                                                                                          *');\n    console.error('* Please contact info@ag-grid.com to renew your subscription to new versions and get a new license key to work with this   *');\n    console.error('* version of ag-Grid.                                                                                                      *');\n    console.error('****************************************************************************************************************************');\n    console.error('****************************************************************************************************************************');\n    this.watermarkMessage = \"License Expired\";\n  };\n  var LicenseManager_1;\n  LicenseManager.RELEASE_INFORMATION = 'MTYwMjA3NjI1MjU3OA==';\n  __decorate([agGridCommunity.Autowired('md5')], LicenseManager.prototype, \"md5\", void 0);\n  __decorate([agGridCommunity.PreConstruct], LicenseManager.prototype, \"validateLicense\", null);\n  LicenseManager = LicenseManager_1 = __decorate([agGridCommunity.Bean('licenseManager')], LicenseManager);\n  return LicenseManager;\n}(agGridCommunity.BeanStub);\nvar __extends$1 = undefined && undefined.__extends || function () {\n  var _extendStatics2 = function extendStatics(d, b) {\n    _extendStatics2 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics2(d, b);\n  };\n  return function (d, b) {\n    _extendStatics2(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MD5 = /** @class */function (_super) {\n  __extends$1(MD5, _super);\n  function MD5() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.ieCompatibility = false;\n    return _this;\n  }\n  MD5.prototype.init = function () {\n    this.ieCompatibility = this.md5('hello') != '5d41402abc4b2a76b9719d911017c592';\n  };\n  MD5.prototype.md5cycle = function (x, k) {\n    var a = x[0],\n      b = x[1],\n      c = x[2],\n      d = x[3];\n    a = this.ff(a, b, c, d, k[0], 7, -680876936);\n    d = this.ff(d, a, b, c, k[1], 12, -389564586);\n    c = this.ff(c, d, a, b, k[2], 17, 606105819);\n    b = this.ff(b, c, d, a, k[3], 22, -1044525330);\n    a = this.ff(a, b, c, d, k[4], 7, -176418897);\n    d = this.ff(d, a, b, c, k[5], 12, 1200080426);\n    c = this.ff(c, d, a, b, k[6], 17, -1473231341);\n    b = this.ff(b, c, d, a, k[7], 22, -45705983);\n    a = this.ff(a, b, c, d, k[8], 7, 1770035416);\n    d = this.ff(d, a, b, c, k[9], 12, -1958414417);\n    c = this.ff(c, d, a, b, k[10], 17, -42063);\n    b = this.ff(b, c, d, a, k[11], 22, -1990404162);\n    a = this.ff(a, b, c, d, k[12], 7, 1804603682);\n    d = this.ff(d, a, b, c, k[13], 12, -40341101);\n    c = this.ff(c, d, a, b, k[14], 17, -1502002290);\n    b = this.ff(b, c, d, a, k[15], 22, 1236535329);\n    a = this.gg(a, b, c, d, k[1], 5, -165796510);\n    d = this.gg(d, a, b, c, k[6], 9, -1069501632);\n    c = this.gg(c, d, a, b, k[11], 14, 643717713);\n    b = this.gg(b, c, d, a, k[0], 20, -373897302);\n    a = this.gg(a, b, c, d, k[5], 5, -701558691);\n    d = this.gg(d, a, b, c, k[10], 9, 38016083);\n    c = this.gg(c, d, a, b, k[15], 14, -660478335);\n    b = this.gg(b, c, d, a, k[4], 20, -405537848);\n    a = this.gg(a, b, c, d, k[9], 5, 568446438);\n    d = this.gg(d, a, b, c, k[14], 9, -1019803690);\n    c = this.gg(c, d, a, b, k[3], 14, -187363961);\n    b = this.gg(b, c, d, a, k[8], 20, 1163531501);\n    a = this.gg(a, b, c, d, k[13], 5, -1444681467);\n    d = this.gg(d, a, b, c, k[2], 9, -51403784);\n    c = this.gg(c, d, a, b, k[7], 14, 1735328473);\n    b = this.gg(b, c, d, a, k[12], 20, -1926607734);\n    a = this.hh(a, b, c, d, k[5], 4, -378558);\n    d = this.hh(d, a, b, c, k[8], 11, -2022574463);\n    c = this.hh(c, d, a, b, k[11], 16, 1839030562);\n    b = this.hh(b, c, d, a, k[14], 23, -35309556);\n    a = this.hh(a, b, c, d, k[1], 4, -1530992060);\n    d = this.hh(d, a, b, c, k[4], 11, 1272893353);\n    c = this.hh(c, d, a, b, k[7], 16, -155497632);\n    b = this.hh(b, c, d, a, k[10], 23, -1094730640);\n    a = this.hh(a, b, c, d, k[13], 4, 681279174);\n    d = this.hh(d, a, b, c, k[0], 11, -358537222);\n    c = this.hh(c, d, a, b, k[3], 16, -722521979);\n    b = this.hh(b, c, d, a, k[6], 23, 76029189);\n    a = this.hh(a, b, c, d, k[9], 4, -640364487);\n    d = this.hh(d, a, b, c, k[12], 11, -421815835);\n    c = this.hh(c, d, a, b, k[15], 16, 530742520);\n    b = this.hh(b, c, d, a, k[2], 23, -995338651);\n    a = this.ii(a, b, c, d, k[0], 6, -198630844);\n    d = this.ii(d, a, b, c, k[7], 10, 1126891415);\n    c = this.ii(c, d, a, b, k[14], 15, -1416354905);\n    b = this.ii(b, c, d, a, k[5], 21, -57434055);\n    a = this.ii(a, b, c, d, k[12], 6, 1700485571);\n    d = this.ii(d, a, b, c, k[3], 10, -1894986606);\n    c = this.ii(c, d, a, b, k[10], 15, -1051523);\n    b = this.ii(b, c, d, a, k[1], 21, -2054922799);\n    a = this.ii(a, b, c, d, k[8], 6, 1873313359);\n    d = this.ii(d, a, b, c, k[15], 10, -30611744);\n    c = this.ii(c, d, a, b, k[6], 15, -1560198380);\n    b = this.ii(b, c, d, a, k[13], 21, 1309151649);\n    a = this.ii(a, b, c, d, k[4], 6, -145523070);\n    d = this.ii(d, a, b, c, k[11], 10, -1120210379);\n    c = this.ii(c, d, a, b, k[2], 15, 718787259);\n    b = this.ii(b, c, d, a, k[9], 21, -343485551);\n    x[0] = this.add32(a, x[0]);\n    x[1] = this.add32(b, x[1]);\n    x[2] = this.add32(c, x[2]);\n    x[3] = this.add32(d, x[3]);\n  };\n  MD5.prototype.cmn = function (q, a, b, x, s, t) {\n    a = this.add32(this.add32(a, q), this.add32(x, t));\n    return this.add32(a << s | a >>> 32 - s, b);\n  };\n  MD5.prototype.ff = function (a, b, c, d, x, s, t) {\n    return this.cmn(b & c | ~b & d, a, b, x, s, t);\n  };\n  MD5.prototype.gg = function (a, b, c, d, x, s, t) {\n    return this.cmn(b & d | c & ~d, a, b, x, s, t);\n  };\n  MD5.prototype.hh = function (a, b, c, d, x, s, t) {\n    return this.cmn(b ^ c ^ d, a, b, x, s, t);\n  };\n  MD5.prototype.ii = function (a, b, c, d, x, s, t) {\n    return this.cmn(c ^ (b | ~d), a, b, x, s, t);\n  };\n  MD5.prototype.md51 = function (s) {\n    var n = s.length;\n    var state = [1732584193, -271733879, -1732584194, 271733878];\n    var i;\n    for (i = 64; i <= s.length; i += 64) {\n      this.md5cycle(state, this.md5blk(s.substring(i - 64, i)));\n    }\n    s = s.substring(i - 64);\n    var tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    for (i = 0; i < s.length; i++) {\n      tail[i >> 2] |= s.charCodeAt(i) << (i % 4 << 3);\n    }\n    tail[i >> 2] |= 0x80 << (i % 4 << 3);\n    if (i > 55) {\n      this.md5cycle(state, tail);\n      for (i = 0; i < 16; i++) {\n        tail[i] = 0;\n      }\n    }\n    tail[14] = n * 8;\n    this.md5cycle(state, tail);\n    return state;\n  };\n  /* there needs to be support for Unicode here, * unless we pretend that we can redefine the MD-5\n   * algorithm for multi-byte characters (perhaps by adding every four 16-bit characters and\n   * shortening the sum to 32 bits). Otherwise I suthis.ggest performing MD-5 as if every character\n   * was two bytes--e.g., 0040 0025 = @%--but then how will an ordinary MD-5 sum be matched?\n   * There is no way to standardize text to something like UTF-8 before transformation; speed cost is\n   * utterly prohibitive. The JavaScript standard itself needs to look at this: it should start\n   * providing access to strings as preformed UTF-8 8-bit unsigned value arrays.\n   */\n  MD5.prototype.md5blk = function (s) {\n    var md5blks = [];\n    /* Andy King said do it this way. */\n    for (var i = 0; i < 64; i += 4) {\n      md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n    }\n    return md5blks;\n  };\n  MD5.prototype.rhex = function (n) {\n    var hex_chr = '0123456789abcdef'.split('');\n    var s = '',\n      j = 0;\n    for (; j < 4; j++) {\n      s += hex_chr[n >> j * 8 + 4 & 0x0F] + hex_chr[n >> j * 8 & 0x0F];\n    }\n    return s;\n  };\n  MD5.prototype.hex = function (x) {\n    for (var i = 0; i < x.length; i++) {\n      x[i] = this.rhex(x[i]);\n    }\n    return x.join('');\n  };\n  MD5.prototype.md5 = function (s) {\n    return this.hex(this.md51(s));\n  };\n  MD5.prototype.add32 = function (a, b) {\n    return this.ieCompatibility ? this.add32Compat(a, b) : this.add32Std(a, b);\n  };\n  /* this function is much faster, so if possible we use it. Some IEs are the only ones I know of that\n   need the idiotic second function, generated by an if clause.  */\n  MD5.prototype.add32Std = function (a, b) {\n    return a + b & 0xFFFFFFFF;\n  };\n  MD5.prototype.add32Compat = function (x, y) {\n    var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n      msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n    return msw << 16 | lsw & 0xFFFF;\n  };\n  __decorate$1([agGridCommunity.PostConstruct], MD5.prototype, \"init\", null);\n  MD5 = __decorate$1([agGridCommunity.Bean('md5')], MD5);\n  return MD5;\n}(agGridCommunity.BeanStub);\nvar __extends$2 = undefined && undefined.__extends || function () {\n  var _extendStatics3 = function extendStatics(d, b) {\n    _extendStatics3 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics3(d, b);\n  };\n  return function (d, b) {\n    _extendStatics3(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$2 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar WatermarkComp = /** @class */function (_super) {\n  __extends$2(WatermarkComp, _super);\n  function WatermarkComp() {\n    return _super.call(this, \"<div class=\\\"ag-watermark\\\">\\n                    <div ref=\\\"eLicenseTextRef\\\" class=\\\"ag-watermark-text\\\"></div>\\n               </div>\") || this;\n  }\n  WatermarkComp.prototype.postConstruct = function () {\n    var _this = this;\n    var show = this.shouldDisplayWatermark();\n    agGridCommunity._.addOrRemoveCssClass(this.getGui(), 'ag-hidden', !show);\n    if (show) {\n      this.eLicenseTextRef.innerText = this.licenseManager.getWatermarkMessage();\n      window.setTimeout(function () {\n        return _this.addCssClass('ag-opacity-zero');\n      }, 0);\n      window.setTimeout(function () {\n        return _this.addCssClass('ag-hidden');\n      }, 5000);\n    }\n  };\n  WatermarkComp.prototype.shouldDisplayWatermark = function () {\n    var isDisplayWatermark = this.licenseManager.isDisplayWatermark();\n    var isWhiteListURL = location.hostname.match('^127\\.0\\.0\\.1|localhost|www\\.ag-grid\\.com$') != null;\n    var isForceWatermark = location.search.indexOf('forceWatermark') !== -1;\n    return isForceWatermark || isDisplayWatermark && !isWhiteListURL;\n  };\n  __decorate$2([agGridCommunity.Autowired('licenseManager')], WatermarkComp.prototype, \"licenseManager\", void 0);\n  __decorate$2([agGridCommunity.RefSelector('eLicenseTextRef')], WatermarkComp.prototype, \"eLicenseTextRef\", void 0);\n  __decorate$2([agGridCommunity.PostConstruct], WatermarkComp.prototype, \"postConstruct\", null);\n  return WatermarkComp;\n}(agGridCommunity.Component);\nvar EnterpriseCoreModule = {\n  moduleName: agGridCommunity.ModuleNames.EnterpriseCoreModule,\n  beans: [LicenseManager, MD5],\n  agStackComponents: [{\n    componentName: 'AgWatermark',\n    componentClass: WatermarkComp\n  }]\n};\nvar __extends$3 = undefined && undefined.__extends || function () {\n  var _extendStatics4 = function extendStatics(d, b) {\n    _extendStatics4 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics4(d, b);\n  };\n  return function (d, b) {\n    _extendStatics4(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$3 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ExpandState;\n(function (ExpandState) {\n  ExpandState[ExpandState[\"EXPANDED\"] = 0] = \"EXPANDED\";\n  ExpandState[ExpandState[\"COLLAPSED\"] = 1] = \"COLLAPSED\";\n  ExpandState[ExpandState[\"INDETERMINATE\"] = 2] = \"INDETERMINATE\";\n})(ExpandState || (ExpandState = {}));\nvar PrimaryColsHeaderPanel = /** @class */function (_super) {\n  __extends$3(PrimaryColsHeaderPanel, _super);\n  function PrimaryColsHeaderPanel() {\n    return _super.call(this, PrimaryColsHeaderPanel.TEMPLATE) || this;\n  }\n  PrimaryColsHeaderPanel.prototype.postConstruct = function () {\n    var _this = this;\n    this.createExpandIcons();\n    this.addManagedListener(this.eExpand, 'click', this.onExpandClicked.bind(this));\n    this.addManagedListener(this.eExpand, 'keydown', function (e) {\n      if (e.keyCode === agGridCommunity.KeyCode.SPACE) {\n        _this.onExpandClicked();\n      }\n    });\n    this.addManagedListener(this.eSelect.getInputElement(), 'click', this.onSelectClicked.bind(this));\n    this.eFilterTextField.onValueChange(function () {\n      return _this.onFilterTextChanged();\n    });\n    this.addManagedListener(this.eFilterTextField.getInputElement(), 'keypress', this.onMiniFilterKeyPress.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED, this.showOrHideOptions.bind(this));\n    this.eSelect.setInputAriaLabel('Toggle Select All Columns');\n    this.eFilterTextField.setInputAriaLabel('Filter Columns Input');\n  };\n  PrimaryColsHeaderPanel.prototype.init = function (params) {\n    this.params = params;\n    if (this.columnController.isReady()) {\n      this.showOrHideOptions();\n    }\n  };\n  PrimaryColsHeaderPanel.prototype.createExpandIcons = function () {\n    this.eExpand.appendChild(this.eExpandChecked = agGridCommunity._.createIconNoSpan('columnSelectOpen', this.gridOptionsWrapper));\n    this.eExpand.appendChild(this.eExpandUnchecked = agGridCommunity._.createIconNoSpan('columnSelectClosed', this.gridOptionsWrapper));\n    this.eExpand.appendChild(this.eExpandIndeterminate = agGridCommunity._.createIconNoSpan('columnSelectIndeterminate', this.gridOptionsWrapper));\n    this.setExpandState(ExpandState.EXPANDED);\n  };\n  // we only show expand / collapse if we are showing columns\n  PrimaryColsHeaderPanel.prototype.showOrHideOptions = function () {\n    var showFilter = !this.params.suppressColumnFilter;\n    var showSelect = !this.params.suppressColumnSelectAll;\n    var showExpand = !this.params.suppressColumnExpandAll;\n    var groupsPresent = this.columnController.isPrimaryColumnGroupsPresent();\n    var translate = this.gridOptionsWrapper.getLocaleTextFunc();\n    this.eFilterTextField.setInputPlaceholder(translate('searchOoo', 'Search...'));\n    agGridCommunity._.setDisplayed(this.eFilterTextField.getGui(), showFilter);\n    agGridCommunity._.setDisplayed(this.eSelect.getGui(), showSelect);\n    agGridCommunity._.setDisplayed(this.eExpand, showExpand && groupsPresent);\n  };\n  PrimaryColsHeaderPanel.prototype.onFilterTextChanged = function () {\n    var _this = this;\n    if (!this.onFilterTextChangedDebounced) {\n      this.onFilterTextChangedDebounced = agGridCommunity._.debounce(function () {\n        var filterText = _this.eFilterTextField.getValue();\n        _this.dispatchEvent({\n          type: \"filterChanged\",\n          filterText: filterText\n        });\n      }, PrimaryColsHeaderPanel.DEBOUNCE_DELAY);\n    }\n    this.onFilterTextChangedDebounced();\n  };\n  PrimaryColsHeaderPanel.prototype.onMiniFilterKeyPress = function (e) {\n    var _this = this;\n    if (agGridCommunity._.isKeyPressed(e, agGridCommunity.KeyCode.ENTER)) {\n      // we need to add a delay that corresponds to the filter text debounce delay to ensure\n      // the text filtering has happened, otherwise all columns will be deselected\n      setTimeout(function () {\n        return _this.onSelectClicked();\n      }, PrimaryColsHeaderPanel.DEBOUNCE_DELAY);\n    }\n  };\n  PrimaryColsHeaderPanel.prototype.onSelectClicked = function () {\n    this.dispatchEvent({\n      type: this.selectState ? 'unselectAll' : 'selectAll'\n    });\n  };\n  PrimaryColsHeaderPanel.prototype.onExpandClicked = function () {\n    this.dispatchEvent({\n      type: this.expandState === ExpandState.EXPANDED ? 'collapseAll' : 'expandAll'\n    });\n  };\n  PrimaryColsHeaderPanel.prototype.setExpandState = function (state) {\n    this.expandState = state;\n    agGridCommunity._.setDisplayed(this.eExpandChecked, this.expandState === ExpandState.EXPANDED);\n    agGridCommunity._.setDisplayed(this.eExpandUnchecked, this.expandState === ExpandState.COLLAPSED);\n    agGridCommunity._.setDisplayed(this.eExpandIndeterminate, this.expandState === ExpandState.INDETERMINATE);\n  };\n  PrimaryColsHeaderPanel.prototype.setSelectionState = function (state) {\n    this.selectState = state;\n    this.eSelect.setValue(this.selectState);\n  };\n  PrimaryColsHeaderPanel.DEBOUNCE_DELAY = 300;\n  PrimaryColsHeaderPanel.TEMPLATE = \"<div class=\\\"ag-column-select-header\\\" role=\\\"presentation\\\" tabindex=\\\"-1\\\">\\n            <div ref=\\\"eExpand\\\" class=\\\"ag-column-select-header-icon\\\" tabindex=\\\"0\\\"></div>\\n            <ag-checkbox ref=\\\"eSelect\\\" class=\\\"ag-column-select-header-checkbox\\\"></ag-checkbox>\\n            <ag-input-text-field class=\\\"ag-column-select-header-filter-wrapper\\\" ref=\\\"eFilterTextField\\\"></ag-input-text-field>\\n        </div>\";\n  __decorate$3([agGridCommunity.Autowired('gridOptionsWrapper')], PrimaryColsHeaderPanel.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$3([agGridCommunity.Autowired('columnController')], PrimaryColsHeaderPanel.prototype, \"columnController\", void 0);\n  __decorate$3([agGridCommunity.RefSelector('eExpand')], PrimaryColsHeaderPanel.prototype, \"eExpand\", void 0);\n  __decorate$3([agGridCommunity.RefSelector('eSelect')], PrimaryColsHeaderPanel.prototype, \"eSelect\", void 0);\n  __decorate$3([agGridCommunity.RefSelector('eFilterTextField')], PrimaryColsHeaderPanel.prototype, \"eFilterTextField\", void 0);\n  __decorate$3([agGridCommunity.PostConstruct], PrimaryColsHeaderPanel.prototype, \"postConstruct\", null);\n  return PrimaryColsHeaderPanel;\n}(agGridCommunity.Component);\nvar ColumnModelItem = /** @class */function () {\n  function ColumnModelItem(displayName, columnOrGroup, dept, group, expanded) {\n    if (group === void 0) {\n      group = false;\n    }\n    this.eventService = new agGridCommunity.EventService();\n    this.displayName = displayName;\n    this.dept = dept;\n    this.group = group;\n    if (group) {\n      this.columnGroup = columnOrGroup;\n      this.expanded = expanded;\n      this.children = [];\n    } else {\n      this.column = columnOrGroup;\n    }\n  }\n  ColumnModelItem.prototype.isGroup = function () {\n    return this.group;\n  };\n  ColumnModelItem.prototype.getDisplayName = function () {\n    return this.displayName;\n  };\n  ColumnModelItem.prototype.getColumnGroup = function () {\n    return this.columnGroup;\n  };\n  ColumnModelItem.prototype.getColumn = function () {\n    return this.column;\n  };\n  ColumnModelItem.prototype.getDept = function () {\n    return this.dept;\n  };\n  ColumnModelItem.prototype.isExpanded = function () {\n    return this.expanded;\n  };\n  ColumnModelItem.prototype.getChildren = function () {\n    return this.children;\n  };\n  ColumnModelItem.prototype.isPassesFilter = function () {\n    return this.passesFilter;\n  };\n  ColumnModelItem.prototype.setExpanded = function (expanded) {\n    if (expanded === this.expanded) {\n      return;\n    }\n    this.expanded = expanded;\n    this.eventService.dispatchEvent({\n      type: ColumnModelItem.EVENT_EXPANDED_CHANGED\n    });\n  };\n  ColumnModelItem.prototype.setPassesFilter = function (passesFilter) {\n    this.passesFilter = passesFilter;\n  };\n  ColumnModelItem.prototype.addEventListener = function (eventType, listener) {\n    this.eventService.addEventListener(eventType, listener);\n  };\n  ColumnModelItem.prototype.removeEventListener = function (eventType, listener) {\n    this.eventService.removeEventListener(eventType, listener);\n  };\n  ColumnModelItem.EVENT_EXPANDED_CHANGED = 'expandedChanged';\n  return ColumnModelItem;\n}();\nvar __extends$4 = undefined && undefined.__extends || function () {\n  var _extendStatics5 = function extendStatics(d, b) {\n    _extendStatics5 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics5(d, b);\n  };\n  return function (d, b) {\n    _extendStatics5(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$4 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ToolPanelColumnGroupComp = /** @class */function (_super) {\n  __extends$4(ToolPanelColumnGroupComp, _super);\n  function ToolPanelColumnGroupComp(modelItem, allowDragging, eventType, focusWrapper) {\n    var _this = _super.call(this) || this;\n    _this.modelItem = modelItem;\n    _this.allowDragging = allowDragging;\n    _this.eventType = eventType;\n    _this.focusWrapper = focusWrapper;\n    _this.processingColumnStateChange = false;\n    _this.modelItem = modelItem;\n    _this.columnGroup = modelItem.getColumnGroup();\n    _this.columnDept = modelItem.getDept();\n    _this.allowDragging = allowDragging;\n    return _this;\n  }\n  ToolPanelColumnGroupComp.prototype.init = function () {\n    this.setTemplate(ToolPanelColumnGroupComp.TEMPLATE);\n    this.eDragHandle = agGridCommunity._.createIconNoSpan('columnDrag', this.gridOptionsWrapper);\n    agGridCommunity._.addCssClass(this.eDragHandle, 'ag-drag-handle');\n    agGridCommunity._.addCssClass(this.eDragHandle, 'ag-column-select-column-group-drag-handle');\n    this.cbSelect.getGui().insertAdjacentElement('afterend', this.eDragHandle);\n    this.displayName = this.columnController.getDisplayNameForOriginalColumnGroup(null, this.columnGroup, this.eventType);\n    if (agGridCommunity._.missing(this.displayName)) {\n      this.displayName = '>>';\n    }\n    this.eLabel.innerHTML = this.displayName ? this.displayName : '';\n    this.setupExpandContract();\n    this.addCssClass('ag-column-select-indent-' + this.columnDept);\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.onColumnStateChanged.bind(this));\n    this.addManagedListener(this.eLabel, 'click', this.onLabelClicked.bind(this));\n    this.addManagedListener(this.cbSelect, agGridCommunity.AgCheckbox.EVENT_CHANGED, this.onCheckboxChanged.bind(this));\n    this.addManagedListener(this.modelItem, ColumnModelItem.EVENT_EXPANDED_CHANGED, this.onExpandChanged.bind(this));\n    this.addManagedListener(this.focusWrapper, 'keydown', this.handleKeyDown.bind(this));\n    this.setOpenClosedIcons();\n    this.setupDragging();\n    this.onColumnStateChanged();\n    this.addVisibilityListenersToAllChildren();\n    this.refreshAriaExpanded();\n    this.refreshAriaLabel();\n    agGridCommunity.CssClassApplier.addToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(), this.getGui(), this.gridOptionsWrapper, null, this.columnGroup);\n  };\n  ToolPanelColumnGroupComp.prototype.handleKeyDown = function (e) {\n    switch (e.keyCode) {\n      case agGridCommunity.KeyCode.LEFT:\n        e.preventDefault();\n        this.modelItem.setExpanded(false);\n        break;\n      case agGridCommunity.KeyCode.RIGHT:\n        e.preventDefault();\n        this.modelItem.setExpanded(true);\n        break;\n      case agGridCommunity.KeyCode.SPACE:\n        e.preventDefault();\n        if (this.isSelectable()) {\n          this.onSelectAllChanged(!this.isSelected());\n        }\n        break;\n    }\n  };\n  ToolPanelColumnGroupComp.prototype.addVisibilityListenersToAllChildren = function () {\n    var _this = this;\n    this.columnGroup.getLeafColumns().forEach(function (column) {\n      _this.addManagedListener(column, agGridCommunity.Column.EVENT_VISIBLE_CHANGED, _this.onColumnStateChanged.bind(_this));\n      _this.addManagedListener(column, agGridCommunity.Column.EVENT_VALUE_CHANGED, _this.onColumnStateChanged.bind(_this));\n      _this.addManagedListener(column, agGridCommunity.Column.EVENT_PIVOT_CHANGED, _this.onColumnStateChanged.bind(_this));\n      _this.addManagedListener(column, agGridCommunity.Column.EVENT_ROW_GROUP_CHANGED, _this.onColumnStateChanged.bind(_this));\n    });\n  };\n  ToolPanelColumnGroupComp.prototype.setupDragging = function () {\n    var _this = this;\n    if (!this.allowDragging) {\n      agGridCommunity._.setDisplayed(this.eDragHandle, false);\n      return;\n    }\n    var dragSource = {\n      type: agGridCommunity.DragSourceType.ToolPanel,\n      eElement: this.eDragHandle,\n      dragItemName: this.displayName,\n      getDragItem: function getDragItem() {\n        return _this.createDragItem();\n      }\n    };\n    this.dragAndDropService.addDragSource(dragSource, true);\n    this.addDestroyFunc(function () {\n      return _this.dragAndDropService.removeDragSource(dragSource);\n    });\n  };\n  ToolPanelColumnGroupComp.prototype.createDragItem = function () {\n    var visibleState = {};\n    this.columnGroup.getLeafColumns().forEach(function (col) {\n      visibleState[col.getId()] = col.isVisible();\n    });\n    return {\n      columns: this.columnGroup.getLeafColumns(),\n      visibleState: visibleState\n    };\n  };\n  ToolPanelColumnGroupComp.prototype.setupExpandContract = function () {\n    this.eGroupClosedIcon.appendChild(agGridCommunity._.createIcon('columnSelectClosed', this.gridOptionsWrapper, null));\n    this.eGroupOpenedIcon.appendChild(agGridCommunity._.createIcon('columnSelectOpen', this.gridOptionsWrapper, null));\n    this.addManagedListener(this.eGroupClosedIcon, 'click', this.onExpandOrContractClicked.bind(this));\n    this.addManagedListener(this.eGroupOpenedIcon, 'click', this.onExpandOrContractClicked.bind(this));\n    var touchListener = new agGridCommunity.TouchListener(this.eColumnGroupIcons, true);\n    this.addManagedListener(touchListener, agGridCommunity.TouchListener.EVENT_TAP, this.onExpandOrContractClicked.bind(this));\n    this.addDestroyFunc(touchListener.destroy.bind(touchListener));\n  };\n  ToolPanelColumnGroupComp.prototype.onLabelClicked = function () {\n    var nextState = !this.cbSelect.getValue();\n    this.onChangeCommon(nextState);\n  };\n  ToolPanelColumnGroupComp.prototype.onCheckboxChanged = function (event) {\n    this.onChangeCommon(event.selected);\n  };\n  ToolPanelColumnGroupComp.prototype.getVisibleLeafColumns = function () {\n    var childColumns = [];\n    var extractCols = function extractCols(children) {\n      children.forEach(function (child) {\n        if (!child.isPassesFilter()) {\n          return;\n        }\n        if (child.isGroup()) {\n          extractCols(child.getChildren());\n        } else {\n          childColumns.push(child.getColumn());\n        }\n      });\n    };\n    extractCols(this.modelItem.getChildren());\n    return childColumns;\n  };\n  ToolPanelColumnGroupComp.prototype.onChangeCommon = function (nextState) {\n    this.refreshAriaLabel();\n    if (this.processingColumnStateChange) {\n      return;\n    }\n    this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(), nextState, this.eventType);\n  };\n  ToolPanelColumnGroupComp.prototype.refreshAriaLabel = function () {\n    var state = this.cbSelect.getValue() ? 'visible' : 'hidden';\n    agGridCommunity._.setAriaLabel(this.focusWrapper, this.displayName + \" column group toggle visibility (\" + state + \")\");\n  };\n  ToolPanelColumnGroupComp.prototype.onColumnStateChanged = function () {\n    var selectedValue = this.workOutSelectedValue();\n    var readOnlyValue = this.workOutReadOnlyValue();\n    this.processingColumnStateChange = true;\n    this.cbSelect.setValue(selectedValue);\n    this.cbSelect.setReadOnly(readOnlyValue);\n    agGridCommunity._.addOrRemoveCssClass(this.getGui(), 'ag-column-select-column-group-readonly', readOnlyValue);\n    this.processingColumnStateChange = false;\n  };\n  ToolPanelColumnGroupComp.prototype.workOutSelectedValue = function () {\n    var _this = this;\n    var pivotMode = this.columnController.isPivotMode();\n    var visibleLeafColumns = this.getVisibleLeafColumns();\n    var checkedCount = 0;\n    var uncheckedCount = 0;\n    visibleLeafColumns.forEach(function (column) {\n      if (!pivotMode && column.getColDef().lockVisible) {\n        return;\n      }\n      if (_this.isColumnChecked(column, pivotMode)) {\n        checkedCount++;\n      } else {\n        uncheckedCount++;\n      }\n    });\n    if (checkedCount > 0 && uncheckedCount > 0) {\n      return undefined;\n    } else {\n      return checkedCount > 0;\n    }\n  };\n  ToolPanelColumnGroupComp.prototype.workOutReadOnlyValue = function () {\n    var pivotMode = this.columnController.isPivotMode();\n    var colsThatCanAction = 0;\n    this.columnGroup.getLeafColumns().forEach(function (col) {\n      if (pivotMode) {\n        if (col.isAnyFunctionAllowed()) {\n          colsThatCanAction++;\n        }\n      } else {\n        if (!col.getColDef().lockVisible) {\n          colsThatCanAction++;\n        }\n      }\n    });\n    return colsThatCanAction === 0;\n  };\n  ToolPanelColumnGroupComp.prototype.isColumnChecked = function (column, pivotMode) {\n    if (pivotMode) {\n      var pivoted = column.isPivotActive();\n      var grouped = column.isRowGroupActive();\n      var aggregated = column.isValueActive();\n      return pivoted || grouped || aggregated;\n    } else {\n      return column.isVisible();\n    }\n  };\n  ToolPanelColumnGroupComp.prototype.onExpandOrContractClicked = function () {\n    var oldState = this.modelItem.isExpanded();\n    this.modelItem.setExpanded(!oldState);\n  };\n  ToolPanelColumnGroupComp.prototype.onExpandChanged = function () {\n    this.setOpenClosedIcons();\n    this.refreshAriaExpanded();\n  };\n  ToolPanelColumnGroupComp.prototype.setOpenClosedIcons = function () {\n    var folderOpen = this.modelItem.isExpanded();\n    agGridCommunity._.setDisplayed(this.eGroupClosedIcon, !folderOpen);\n    agGridCommunity._.setDisplayed(this.eGroupOpenedIcon, folderOpen);\n  };\n  ToolPanelColumnGroupComp.prototype.refreshAriaExpanded = function () {\n    agGridCommunity._.setAriaExpanded(this.focusWrapper, this.modelItem.isExpanded());\n  };\n  ToolPanelColumnGroupComp.prototype.getDisplayName = function () {\n    return this.displayName;\n  };\n  ToolPanelColumnGroupComp.prototype.onSelectAllChanged = function (value) {\n    var cbValue = this.cbSelect.getValue();\n    var readOnly = this.cbSelect.isReadOnly();\n    if (!readOnly && (value && !cbValue || !value && cbValue)) {\n      this.cbSelect.toggle();\n    }\n  };\n  ToolPanelColumnGroupComp.prototype.isSelected = function () {\n    return this.cbSelect.getValue();\n  };\n  ToolPanelColumnGroupComp.prototype.isSelectable = function () {\n    return !this.cbSelect.isReadOnly();\n  };\n  ToolPanelColumnGroupComp.prototype.setSelected = function (selected) {\n    this.cbSelect.setValue(selected, true);\n  };\n  ToolPanelColumnGroupComp.TEMPLATE = \"<div class=\\\"ag-column-select-column-group\\\" aria-hidden=\\\"true\\\">\\n            <span class=\\\"ag-column-group-icons\\\" ref=\\\"eColumnGroupIcons\\\" >\\n                <span class=\\\"ag-column-group-closed-icon\\\" ref=\\\"eGroupClosedIcon\\\"></span>\\n                <span class=\\\"ag-column-group-opened-icon\\\" ref=\\\"eGroupOpenedIcon\\\"></span>\\n            </span>\\n            <ag-checkbox ref=\\\"cbSelect\\\" class=\\\"ag-column-select-checkbox\\\"></ag-checkbox>\\n            <span class=\\\"ag-column-select-column-label\\\" ref=\\\"eLabel\\\"></span>\\n        </div>\";\n  __decorate$4([agGridCommunity.Autowired('columnController')], ToolPanelColumnGroupComp.prototype, \"columnController\", void 0);\n  __decorate$4([agGridCommunity.Autowired('dragAndDropService')], ToolPanelColumnGroupComp.prototype, \"dragAndDropService\", void 0);\n  __decorate$4([agGridCommunity.Autowired('gridOptionsWrapper')], ToolPanelColumnGroupComp.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$4([agGridCommunity.Autowired('modelItemUtils')], ToolPanelColumnGroupComp.prototype, \"modelItemUtils\", void 0);\n  __decorate$4([agGridCommunity.RefSelector('cbSelect')], ToolPanelColumnGroupComp.prototype, \"cbSelect\", void 0);\n  __decorate$4([agGridCommunity.RefSelector('eLabel')], ToolPanelColumnGroupComp.prototype, \"eLabel\", void 0);\n  __decorate$4([agGridCommunity.RefSelector('eGroupOpenedIcon')], ToolPanelColumnGroupComp.prototype, \"eGroupOpenedIcon\", void 0);\n  __decorate$4([agGridCommunity.RefSelector('eGroupClosedIcon')], ToolPanelColumnGroupComp.prototype, \"eGroupClosedIcon\", void 0);\n  __decorate$4([agGridCommunity.RefSelector('eColumnGroupIcons')], ToolPanelColumnGroupComp.prototype, \"eColumnGroupIcons\", void 0);\n  __decorate$4([agGridCommunity.PostConstruct], ToolPanelColumnGroupComp.prototype, \"init\", null);\n  return ToolPanelColumnGroupComp;\n}(agGridCommunity.Component);\nvar __extends$5 = undefined && undefined.__extends || function () {\n  var _extendStatics6 = function extendStatics(d, b) {\n    _extendStatics6 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics6(d, b);\n  };\n  return function (d, b) {\n    _extendStatics6(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$5 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ToolPanelColumnComp = /** @class */function (_super) {\n  __extends$5(ToolPanelColumnComp, _super);\n  function ToolPanelColumnComp(column, columnDept, allowDragging, groupsExist, focusWrapper) {\n    var _this = _super.call(this) || this;\n    _this.column = column;\n    _this.columnDept = columnDept;\n    _this.allowDragging = allowDragging;\n    _this.groupsExist = groupsExist;\n    _this.focusWrapper = focusWrapper;\n    _this.processingColumnStateChange = false;\n    return _this;\n  }\n  ToolPanelColumnComp.prototype.init = function () {\n    this.setTemplate(ToolPanelColumnComp.TEMPLATE);\n    this.eDragHandle = agGridCommunity._.createIconNoSpan('columnDrag', this.gridOptionsWrapper);\n    agGridCommunity._.addCssClass(this.eDragHandle, 'ag-drag-handle');\n    agGridCommunity._.addCssClass(this.eDragHandle, 'ag-column-select-column-drag-handle');\n    this.cbSelect.getGui().insertAdjacentElement('afterend', this.eDragHandle);\n    this.displayName = this.columnController.getDisplayNameForColumn(this.column, 'toolPanel');\n    var displayNameSanitised = agGridCommunity._.escapeString(this.displayName);\n    this.eLabel.innerHTML = displayNameSanitised;\n    // if grouping, we add an extra level of indent, to cater for expand/contract icons we need to indent for\n    var indent = this.columnDept;\n    if (this.groupsExist) {\n      this.addCssClass('ag-column-select-add-group-indent');\n    }\n    this.addCssClass(\"ag-column-select-indent-\" + indent);\n    this.setupDragging();\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.onColumnStateChanged.bind(this));\n    this.addManagedListener(this.column, agGridCommunity.Column.EVENT_VALUE_CHANGED, this.onColumnStateChanged.bind(this));\n    this.addManagedListener(this.column, agGridCommunity.Column.EVENT_PIVOT_CHANGED, this.onColumnStateChanged.bind(this));\n    this.addManagedListener(this.column, agGridCommunity.Column.EVENT_ROW_GROUP_CHANGED, this.onColumnStateChanged.bind(this));\n    this.addManagedListener(this.column, agGridCommunity.Column.EVENT_VISIBLE_CHANGED, this.onColumnStateChanged.bind(this));\n    this.addManagedListener(this.focusWrapper, 'keydown', this.handleKeyDown.bind(this));\n    this.addManagedListener(this.gridOptionsWrapper, 'functionsReadOnly', this.onColumnStateChanged.bind(this));\n    this.addManagedListener(this.cbSelect, agGridCommunity.AgCheckbox.EVENT_CHANGED, this.onCheckboxChanged.bind(this));\n    this.addManagedListener(this.eLabel, 'click', this.onLabelClicked.bind(this));\n    this.onColumnStateChanged();\n    this.refreshAriaLabel();\n    agGridCommunity.CssClassApplier.addToolPanelClassesFromColDef(this.column.getColDef(), this.getGui(), this.gridOptionsWrapper, this.column, null);\n  };\n  ToolPanelColumnComp.prototype.handleKeyDown = function (e) {\n    if (e.keyCode === agGridCommunity.KeyCode.SPACE) {\n      e.preventDefault();\n      if (this.isSelectable()) {\n        this.onSelectAllChanged(!this.isSelected());\n      }\n    }\n  };\n  ToolPanelColumnComp.prototype.onLabelClicked = function () {\n    if (this.gridOptionsWrapper.isFunctionsReadOnly()) {\n      return;\n    }\n    var nextState = !this.cbSelect.getValue();\n    this.onChangeCommon(nextState);\n  };\n  ToolPanelColumnComp.prototype.onCheckboxChanged = function (event) {\n    this.onChangeCommon(event.selected);\n  };\n  ToolPanelColumnComp.prototype.onChangeCommon = function (nextState) {\n    // ignore lock visible columns\n    if (this.cbSelect.isReadOnly()) {\n      return;\n    }\n    this.refreshAriaLabel();\n    // only want to action if the user clicked the checkbox, not if we are setting the checkbox because\n    // of a change in the model\n    if (this.processingColumnStateChange) {\n      return;\n    }\n    this.modelItemUtils.setColumn(this.column, nextState, 'toolPanelUi');\n  };\n  ToolPanelColumnComp.prototype.refreshAriaLabel = function () {\n    var state = this.cbSelect.getValue() ? 'visible' : 'hidden';\n    agGridCommunity._.setAriaLabel(this.focusWrapper, this.displayName + \" column toggle visibility (\" + state + \")\");\n  };\n  ToolPanelColumnComp.prototype.setupDragging = function () {\n    var _this = this;\n    if (!this.allowDragging) {\n      agGridCommunity._.setDisplayed(this.eDragHandle, false);\n      return;\n    }\n    var dragSource = {\n      type: agGridCommunity.DragSourceType.ToolPanel,\n      eElement: this.eDragHandle,\n      dragItemName: this.displayName,\n      getDragItem: function getDragItem() {\n        return _this.createDragItem();\n      }\n    };\n    this.dragAndDropService.addDragSource(dragSource, true);\n    this.addDestroyFunc(function () {\n      return _this.dragAndDropService.removeDragSource(dragSource);\n    });\n  };\n  ToolPanelColumnComp.prototype.createDragItem = function () {\n    var visibleState = {};\n    visibleState[this.column.getId()] = this.column.isVisible();\n    return {\n      columns: [this.column],\n      visibleState: visibleState\n    };\n  };\n  ToolPanelColumnComp.prototype.onColumnStateChanged = function () {\n    this.processingColumnStateChange = true;\n    var isPivotMode = this.columnController.isPivotMode();\n    if (isPivotMode) {\n      // if reducing, checkbox means column is one of pivot, value or group\n      var anyFunctionActive = this.column.isAnyFunctionActive();\n      this.cbSelect.setValue(anyFunctionActive);\n    } else {\n      // if not reducing, the checkbox tells us if column is visible or not\n      this.cbSelect.setValue(this.column.isVisible());\n    }\n    var checkboxReadOnly;\n    if (isPivotMode) {\n      // when in pivot mode, the item should be read only if:\n      //  a) gui is not allowed make any changes\n      var functionsReadOnly = this.gridOptionsWrapper.isFunctionsReadOnly();\n      //  b) column is not allow any functions on it\n      var noFunctionsAllowed = !this.column.isAnyFunctionAllowed();\n      checkboxReadOnly = functionsReadOnly || noFunctionsAllowed;\n    } else {\n      // when in normal mode, the checkbox is read only if visibility is locked\n      checkboxReadOnly = !!this.column.getColDef().lockVisible;\n    }\n    this.cbSelect.setReadOnly(checkboxReadOnly);\n    agGridCommunity._.addOrRemoveCssClass(this.getGui(), 'ag-column-select-column-readonly', checkboxReadOnly);\n    var checkboxPassive = isPivotMode && this.gridOptionsWrapper.isFunctionsPassive();\n    this.cbSelect.setPassive(checkboxPassive);\n    this.processingColumnStateChange = false;\n  };\n  ToolPanelColumnComp.prototype.getDisplayName = function () {\n    return this.displayName;\n  };\n  ToolPanelColumnComp.prototype.onSelectAllChanged = function (value) {\n    if (value !== this.cbSelect.getValue()) {\n      if (!this.cbSelect.isReadOnly()) {\n        this.cbSelect.toggle();\n      }\n    }\n  };\n  ToolPanelColumnComp.prototype.isSelected = function () {\n    return this.cbSelect.getValue();\n  };\n  ToolPanelColumnComp.prototype.isSelectable = function () {\n    return !this.cbSelect.isReadOnly();\n  };\n  ToolPanelColumnComp.prototype.isExpandable = function () {\n    return false;\n  };\n  ToolPanelColumnComp.prototype.setExpanded = function (value) {\n    console.warn('ag-grid: can not expand a column item that does not represent a column group header');\n  };\n  ToolPanelColumnComp.TEMPLATE = \"<div class=\\\"ag-column-select-column\\\" aria-hidden=\\\"true\\\">\\n            <ag-checkbox ref=\\\"cbSelect\\\" class=\\\"ag-column-select-checkbox\\\"></ag-checkbox>\\n            <span class=\\\"ag-column-select-column-label\\\" ref=\\\"eLabel\\\"></span>\\n        </div>\";\n  __decorate$5([agGridCommunity.Autowired('gridOptionsWrapper')], ToolPanelColumnComp.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$5([agGridCommunity.Autowired('columnController')], ToolPanelColumnComp.prototype, \"columnController\", void 0);\n  __decorate$5([agGridCommunity.Autowired('dragAndDropService')], ToolPanelColumnComp.prototype, \"dragAndDropService\", void 0);\n  __decorate$5([agGridCommunity.Autowired('modelItemUtils')], ToolPanelColumnComp.prototype, \"modelItemUtils\", void 0);\n  __decorate$5([agGridCommunity.RefSelector('eLabel')], ToolPanelColumnComp.prototype, \"eLabel\", void 0);\n  __decorate$5([agGridCommunity.RefSelector('cbSelect')], ToolPanelColumnComp.prototype, \"cbSelect\", void 0);\n  __decorate$5([agGridCommunity.PostConstruct], ToolPanelColumnComp.prototype, \"init\", null);\n  return ToolPanelColumnComp;\n}(agGridCommunity.Component);\nvar __extends$6 = undefined && undefined.__extends || function () {\n  var _extendStatics7 = function extendStatics(d, b) {\n    _extendStatics7 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics7(d, b);\n  };\n  return function (d, b) {\n    _extendStatics7(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$6 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ColumnModel = /** @class */function () {\n  function ColumnModel(items) {\n    this.items = items;\n  }\n  ColumnModel.prototype.getRowCount = function () {\n    return this.items.length;\n  };\n  ColumnModel.prototype.getRow = function (index) {\n    return this.items[index];\n  };\n  return ColumnModel;\n}();\nvar PrimaryColsListPanel = /** @class */function (_super) {\n  __extends$6(PrimaryColsListPanel, _super);\n  function PrimaryColsListPanel() {\n    var _this = _super.call(this, PrimaryColsListPanel.TEMPLATE) || this;\n    _this.destroyColumnItemFuncs = [];\n    return _this;\n  }\n  PrimaryColsListPanel.prototype.destroyColumnTree = function () {\n    this.allColsTree = [];\n    this.destroyColumnItemFuncs.forEach(function (f) {\n      return f();\n    });\n    this.destroyColumnItemFuncs = [];\n  };\n  PrimaryColsListPanel.prototype.init = function (params, allowDragging, eventType) {\n    var _this = this;\n    this.params = params;\n    this.allowDragging = allowDragging;\n    this.eventType = eventType;\n    if (!this.params.suppressSyncLayoutWithGrid) {\n      this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_MOVED, this.onColumnsChanged.bind(this));\n    }\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_EVERYTHING_CHANGED, this.onColumnsChanged.bind(this));\n    var eventsImpactingCheckedState = [agGridCommunity.Events.EVENT_COLUMN_EVERYTHING_CHANGED, agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGED, agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED, agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGED, agGridCommunity.Events.EVENT_COLUMN_VISIBLE, agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED];\n    eventsImpactingCheckedState.forEach(function (event) {\n      // update header select all checkbox with current selection state\n      _this.addManagedListener(_this.eventService, event, _this.fireSelectionChangedEvent.bind(_this));\n    });\n    this.expandGroupsByDefault = !this.params.contractColumnSelection;\n    this.virtualList = this.createManagedBean(new agGridCommunity.VirtualList('column-select', 'tree'));\n    this.appendChild(this.virtualList.getGui());\n    this.virtualList.setComponentCreator(function (item, listItemElement) {\n      return _this.createComponentFromItem(item, listItemElement);\n    });\n    if (this.columnController.isReady()) {\n      this.onColumnsChanged();\n    }\n  };\n  PrimaryColsListPanel.prototype.createComponentFromItem = function (item, listItemElement) {\n    if (item.isGroup()) {\n      var renderedGroup = new ToolPanelColumnGroupComp(item, this.allowDragging, this.eventType, listItemElement);\n      this.getContext().createBean(renderedGroup);\n      return renderedGroup;\n    }\n    var columnComp = new ToolPanelColumnComp(item.getColumn(), item.getDept(), this.allowDragging, this.groupsExist, listItemElement);\n    this.getContext().createBean(columnComp);\n    return columnComp;\n  };\n  PrimaryColsListPanel.prototype.onColumnsChanged = function () {\n    var pivotModeActive = this.columnController.isPivotMode();\n    var shouldSyncColumnLayoutWithGrid = !this.params.suppressSyncLayoutWithGrid && !pivotModeActive;\n    if (shouldSyncColumnLayoutWithGrid) {\n      this.buildTreeFromWhatGridIsDisplaying();\n    } else {\n      this.buildTreeFromProvidedColumnDefs();\n    }\n    this.markFilteredColumns();\n    this.flattenAndFilterModel();\n  };\n  PrimaryColsListPanel.prototype.buildTreeFromWhatGridIsDisplaying = function () {\n    this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this));\n  };\n  PrimaryColsListPanel.prototype.setColumnLayout = function (colDefs) {\n    var columnTree = this.colDefService.createColumnTree(colDefs);\n    this.buildListModel(columnTree);\n    // using col defs to check if groups exist as it could be a custom layout\n    this.groupsExist = colDefs.some(function (colDef) {\n      return colDef && typeof colDef.children !== 'undefined';\n    });\n    this.markFilteredColumns();\n    this.flattenAndFilterModel();\n  };\n  PrimaryColsListPanel.prototype.buildTreeFromProvidedColumnDefs = function () {\n    // add column / group comps to tool panel\n    this.buildListModel(this.columnController.getPrimaryColumnTree());\n    this.groupsExist = this.columnController.isPrimaryColumnGroupsPresent();\n  };\n  PrimaryColsListPanel.prototype.buildListModel = function (columnTree) {\n    var _this = this;\n    var columnExpandedListener = this.onColumnExpanded.bind(this);\n    var addListeners = function addListeners(item) {\n      item.addEventListener(ColumnModelItem.EVENT_EXPANDED_CHANGED, columnExpandedListener);\n      var removeFunc = item.removeEventListener.bind(item, ColumnModelItem.EVENT_EXPANDED_CHANGED, columnExpandedListener);\n      _this.destroyColumnItemFuncs.push(removeFunc);\n    };\n    var recursivelyBuild = function recursivelyBuild(tree, dept, parentList) {\n      tree.forEach(function (child) {\n        if (child instanceof agGridCommunity.OriginalColumnGroup) {\n          createGroupItem(child, dept, parentList);\n        } else {\n          createColumnItem(child, dept, parentList);\n        }\n      });\n    };\n    var createGroupItem = function createGroupItem(columnGroup, dept, parentList) {\n      var skipThisGroup = columnGroup.getColGroupDef() && columnGroup.getColGroupDef().suppressColumnsToolPanel;\n      if (skipThisGroup) {\n        return;\n      }\n      if (columnGroup.isPadding()) {\n        recursivelyBuild(columnGroup.getChildren(), dept, parentList);\n        return;\n      }\n      var displayName = _this.columnController.getDisplayNameForOriginalColumnGroup(null, columnGroup, _this.eventType);\n      var item = new ColumnModelItem(displayName, columnGroup, dept, true, _this.expandGroupsByDefault);\n      parentList.push(item);\n      addListeners(item);\n      recursivelyBuild(columnGroup.getChildren(), dept + 1, item.getChildren());\n    };\n    var createColumnItem = function createColumnItem(column, dept, parentList) {\n      var skipThisColumn = column.getColDef() && column.getColDef().suppressColumnsToolPanel;\n      if (skipThisColumn) {\n        return;\n      }\n      var displayName = _this.columnController.getDisplayNameForColumn(column, 'toolPanel');\n      parentList.push(new ColumnModelItem(displayName, column, dept));\n    };\n    this.destroyColumnTree();\n    recursivelyBuild(columnTree, 0, this.allColsTree);\n  };\n  PrimaryColsListPanel.prototype.onColumnExpanded = function () {\n    this.flattenAndFilterModel();\n  };\n  PrimaryColsListPanel.prototype.flattenAndFilterModel = function () {\n    var _this = this;\n    this.displayedColsList = [];\n    var recursiveFunc = function recursiveFunc(item) {\n      if (!item.isPassesFilter()) {\n        return;\n      }\n      _this.displayedColsList.push(item);\n      if (item.isGroup() && item.isExpanded()) {\n        item.getChildren().forEach(recursiveFunc);\n      }\n    };\n    this.allColsTree.forEach(recursiveFunc);\n    this.virtualList.setModel(new ColumnModel(this.displayedColsList));\n    var focusedRow = this.virtualList.getLastFocusedRow();\n    this.virtualList.refresh();\n    if (focusedRow != null) {\n      this.focusRowIfAlive(focusedRow);\n    }\n    this.notifyListeners();\n  };\n  PrimaryColsListPanel.prototype.focusRowIfAlive = function (rowIndex) {\n    var _this = this;\n    window.setTimeout(function () {\n      if (_this.isAlive()) {\n        _this.virtualList.focusRow(rowIndex);\n      }\n    }, 0);\n  };\n  PrimaryColsListPanel.prototype.forEachItem = function (callback) {\n    var recursiveFunc = function recursiveFunc(items) {\n      items.forEach(function (item) {\n        callback(item);\n        if (item.isGroup()) {\n          recursiveFunc(item.getChildren());\n        }\n      });\n    };\n    recursiveFunc(this.allColsTree);\n  };\n  PrimaryColsListPanel.prototype.doSetExpandedAll = function (value) {\n    this.forEachItem(function (item) {\n      if (item.isGroup()) {\n        item.setExpanded(value);\n      }\n    });\n  };\n  PrimaryColsListPanel.prototype.setGroupsExpanded = function (expand, groupIds) {\n    if (!groupIds) {\n      this.doSetExpandedAll(expand);\n      return;\n    }\n    var expandedGroupIds = [];\n    this.forEachItem(function (item) {\n      if (!item.isGroup()) {\n        return;\n      }\n      var groupId = item.getColumnGroup().getId();\n      if (groupIds.indexOf(groupId) >= 0) {\n        item.setExpanded(expand);\n        expandedGroupIds.push(groupId);\n      }\n    });\n    var unrecognisedGroupIds = groupIds.filter(function (groupId) {\n      return !agGridCommunity._.includes(expandedGroupIds, groupId);\n    });\n    if (unrecognisedGroupIds.length > 0) {\n      console.warn('ag-Grid: unable to find group(s) for supplied groupIds:', unrecognisedGroupIds);\n    }\n  };\n  PrimaryColsListPanel.prototype.getExpandState = function () {\n    var expandedCount = 0;\n    var notExpandedCount = 0;\n    this.forEachItem(function (item) {\n      if (!item.isGroup()) {\n        return;\n      }\n      if (item.isExpanded()) {\n        expandedCount++;\n      } else {\n        notExpandedCount++;\n      }\n    });\n    if (expandedCount > 0 && notExpandedCount > 0) {\n      return ExpandState.INDETERMINATE;\n    }\n    if (notExpandedCount > 0) {\n      return ExpandState.COLLAPSED;\n    }\n    return ExpandState.EXPANDED;\n  };\n  PrimaryColsListPanel.prototype.doSetSelectedAll = function (selectAllChecked) {\n    this.modelItemUtils.selectAllChildren(this.allColsTree, selectAllChecked, this.eventType);\n  };\n  PrimaryColsListPanel.prototype.getSelectionState = function () {\n    var checkedCount = 0;\n    var uncheckedCount = 0;\n    var pivotMode = this.columnController.isPivotMode();\n    this.forEachItem(function (item) {\n      if (item.isGroup()) {\n        return;\n      }\n      if (!item.isPassesFilter()) {\n        return;\n      }\n      var column = item.getColumn();\n      var colDef = column.getColDef();\n      var checked;\n      if (pivotMode) {\n        var noPivotModeOptionsAllowed = !column.isAllowPivot() && !column.isAllowRowGroup() && !column.isAllowValue();\n        if (noPivotModeOptionsAllowed) {\n          return;\n        }\n        checked = column.isValueActive() || column.isPivotActive() || column.isRowGroupActive();\n      } else {\n        if (colDef.lockVisible) {\n          return;\n        }\n        checked = column.isVisible();\n      }\n      checked ? checkedCount++ : uncheckedCount++;\n    });\n    if (checkedCount > 0 && uncheckedCount > 0) return undefined;\n    return !(checkedCount === 0 || uncheckedCount > 0);\n  };\n  PrimaryColsListPanel.prototype.setFilterText = function (filterText) {\n    this.filterText = agGridCommunity._.exists(filterText) ? filterText.toLowerCase() : null;\n    this.markFilteredColumns();\n    this.flattenAndFilterModel();\n  };\n  PrimaryColsListPanel.prototype.markFilteredColumns = function () {\n    var _this = this;\n    var passesFilter = function passesFilter(item) {\n      if (!agGridCommunity._.exists(_this.filterText)) return true;\n      return item.getDisplayName() != null ? item.getDisplayName().toLowerCase().indexOf(_this.filterText) >= 0 : true;\n    };\n    var recursivelyCheckFilter = function recursivelyCheckFilter(item, parentPasses) {\n      var atLeastOneChildPassed = false;\n      if (item.isGroup()) {\n        var groupPasses_1 = passesFilter(item);\n        item.getChildren().forEach(function (child) {\n          var childPasses = recursivelyCheckFilter(child, groupPasses_1 || parentPasses);\n          if (childPasses) {\n            atLeastOneChildPassed = childPasses;\n          }\n        });\n      }\n      var filterPasses = parentPasses || atLeastOneChildPassed ? true : passesFilter(item);\n      item.setPassesFilter(filterPasses);\n      return filterPasses;\n    };\n    this.allColsTree.forEach(function (item) {\n      return recursivelyCheckFilter(item, false);\n    });\n  };\n  PrimaryColsListPanel.prototype.notifyListeners = function () {\n    this.fireGroupExpandedEvent();\n    this.fireSelectionChangedEvent();\n  };\n  PrimaryColsListPanel.prototype.fireGroupExpandedEvent = function () {\n    var expandState = this.getExpandState();\n    this.dispatchEvent({\n      type: 'groupExpanded',\n      state: expandState\n    });\n  };\n  PrimaryColsListPanel.prototype.fireSelectionChangedEvent = function () {\n    var selectionState = this.getSelectionState();\n    this.dispatchEvent({\n      type: 'selectionChanged',\n      state: selectionState\n    });\n  };\n  PrimaryColsListPanel.TEMPLATE = \"<div class=\\\"ag-column-select-list\\\" role=\\\"tree\\\"></div>\";\n  __decorate$6([agGridCommunity.Autowired('columnController')], PrimaryColsListPanel.prototype, \"columnController\", void 0);\n  __decorate$6([agGridCommunity.Autowired('toolPanelColDefService')], PrimaryColsListPanel.prototype, \"colDefService\", void 0);\n  __decorate$6([agGridCommunity.Autowired('columnApi')], PrimaryColsListPanel.prototype, \"columnApi\", void 0);\n  __decorate$6([agGridCommunity.Autowired('modelItemUtils')], PrimaryColsListPanel.prototype, \"modelItemUtils\", void 0);\n  __decorate$6([agGridCommunity.PreDestroy], PrimaryColsListPanel.prototype, \"destroyColumnTree\", null);\n  return PrimaryColsListPanel;\n}(agGridCommunity.Component);\nvar __extends$7 = undefined && undefined.__extends || function () {\n  var _extendStatics8 = function extendStatics(d, b) {\n    _extendStatics8 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics8(d, b);\n  };\n  return function (d, b) {\n    _extendStatics8(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$7 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PivotModePanel = /** @class */function (_super) {\n  __extends$7(PivotModePanel, _super);\n  function PivotModePanel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  PivotModePanel.prototype.createTemplate = function () {\n    return (/* html */\"<div class=\\\"ag-pivot-mode-panel\\\">\\n                <ag-toggle-button ref=\\\"cbPivotMode\\\" class=\\\"ag-pivot-mode-select\\\"></ag-toggle-button>\\n            </div>\"\n    );\n  };\n  PivotModePanel.prototype.init = function () {\n    this.setTemplate(this.createTemplate());\n    this.cbPivotMode.setValue(this.columnController.isPivotMode());\n    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n    this.cbPivotMode.setLabel(localeTextFunc('pivotMode', 'Pivot Mode'));\n    this.addManagedListener(this.cbPivotMode, agGridCommunity.AgCheckbox.EVENT_CHANGED, this.onBtPivotMode.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_EVERYTHING_CHANGED, this.onPivotModeChanged.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.onPivotModeChanged.bind(this));\n  };\n  PivotModePanel.prototype.onBtPivotMode = function () {\n    var newValue = this.cbPivotMode.getValue();\n    if (newValue !== this.columnController.isPivotMode()) {\n      this.columnController.setPivotMode(newValue, \"toolPanelUi\");\n      var api = this.gridOptionsWrapper.getApi();\n      if (api) {\n        api.refreshHeader();\n      }\n    }\n  };\n  PivotModePanel.prototype.onPivotModeChanged = function () {\n    var pivotModeActive = this.columnController.isPivotMode();\n    this.cbPivotMode.setValue(pivotModeActive);\n  };\n  __decorate$7([agGridCommunity.Autowired('columnController')], PivotModePanel.prototype, \"columnController\", void 0);\n  __decorate$7([agGridCommunity.Autowired('gridOptionsWrapper')], PivotModePanel.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$7([agGridCommunity.RefSelector('cbPivotMode')], PivotModePanel.prototype, \"cbPivotMode\", void 0);\n  __decorate$7([agGridCommunity.PreConstruct], PivotModePanel.prototype, \"init\", null);\n  return PivotModePanel;\n}(agGridCommunity.Component);\nvar __extends$8 = undefined && undefined.__extends || function () {\n  var _extendStatics9 = function extendStatics(d, b) {\n    _extendStatics9 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics9(d, b);\n  };\n  return function (d, b) {\n    _extendStatics9(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$8 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar AggregationStage = /** @class */function (_super) {\n  __extends$8(AggregationStage, _super);\n  function AggregationStage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  // it's possible to recompute the aggregate without doing the other parts\n  // + gridApi.recomputeAggregates()\n  AggregationStage.prototype.execute = function (params) {\n    // if changed path is active, it means we came from a) change detection or b) transaction update.\n    // for both of these, if no value columns are present, it means there is nothing to aggregate now\n    // and there is no cleanup to be done (as value columns don't change between transactions or change\n    // detections). if no value columns and no changed path, means we have to go through all nodes in\n    // case we need to clean up agg data from before.\n    var noValueColumns = agGridCommunity._.missingOrEmpty(this.columnController.getValueColumns());\n    var noUserAgg = !this.gridOptionsWrapper.getGroupRowAggNodesFunc();\n    var changedPathActive = params.changedPath && params.changedPath.isActive();\n    if (noValueColumns && noUserAgg && changedPathActive) {\n      return;\n    }\n    var aggDetails = this.createAggDetails(params);\n    this.recursivelyCreateAggData(aggDetails);\n  };\n  AggregationStage.prototype.createAggDetails = function (params) {\n    var pivotActive = this.columnController.isPivotActive();\n    var measureColumns = this.columnController.getValueColumns();\n    var pivotColumns = pivotActive ? this.columnController.getPivotColumns() : [];\n    var aggDetails = {\n      changedPath: params.changedPath,\n      valueColumns: measureColumns,\n      pivotColumns: pivotColumns\n    };\n    return aggDetails;\n  };\n  AggregationStage.prototype.recursivelyCreateAggData = function (aggDetails) {\n    var _this = this;\n    var callback = function callback(rowNode) {\n      var hasNoChildren = !rowNode.hasChildren();\n      if (hasNoChildren) {\n        // this check is needed for TreeData, in case the node is no longer a child,\n        // but it was a child previously.\n        if (rowNode.aggData) {\n          rowNode.setAggData(null);\n        }\n        // never agg data for leaf nodes\n        return;\n      }\n      //Optionally prevent the aggregation at the root Node\n      //https://ag-grid.atlassian.net/browse/AG-388\n      var isRootNode = rowNode.level === -1;\n      if (isRootNode) {\n        var notPivoting = !_this.columnController.isPivotMode();\n        var suppressAggAtRootLevel = _this.gridOptionsWrapper.isSuppressAggAtRootLevel();\n        if (suppressAggAtRootLevel && notPivoting) {\n          return;\n        }\n      }\n      _this.aggregateRowNode(rowNode, aggDetails);\n    };\n    aggDetails.changedPath.forEachChangedNodeDepthFirst(callback, true);\n  };\n  AggregationStage.prototype.aggregateRowNode = function (rowNode, aggDetails) {\n    var measureColumnsMissing = aggDetails.valueColumns.length === 0;\n    var pivotColumnsMissing = aggDetails.pivotColumns.length === 0;\n    var userFunc = this.gridOptionsWrapper.getGroupRowAggNodesFunc();\n    var aggResult;\n    if (userFunc) {\n      aggResult = userFunc(rowNode.childrenAfterFilter);\n    } else if (measureColumnsMissing) {\n      aggResult = null;\n    } else if (pivotColumnsMissing) {\n      aggResult = this.aggregateRowNodeUsingValuesOnly(rowNode, aggDetails);\n    } else {\n      aggResult = this.aggregateRowNodeUsingValuesAndPivot(rowNode);\n    }\n    rowNode.setAggData(aggResult);\n    // if we are grouping, then it's possible there is a sibling footer\n    // to the group, so update the data here also if there is one\n    if (rowNode.sibling) {\n      rowNode.sibling.setAggData(aggResult);\n    }\n  };\n  AggregationStage.prototype.aggregateRowNodeUsingValuesAndPivot = function (rowNode) {\n    var _this = this;\n    var result = {};\n    var pivotColumnDefs = this.pivotStage.getPivotColumnDefs();\n    // Step 1: process value columns\n    pivotColumnDefs.filter(function (v) {\n      return !agGridCommunity._.exists(v.pivotTotalColumnIds);\n    }) // only process pivot value columns\n    .forEach(function (valueColDef) {\n      var keys = valueColDef.pivotKeys || [];\n      var values;\n      var valueColumn = valueColDef.pivotValueColumn;\n      var colId = valueColDef.colId;\n      if (rowNode.leafGroup) {\n        // lowest level group, get the values from the mapped set\n        values = _this.getValuesFromMappedSet(rowNode.childrenMapped, keys, valueColumn);\n      } else {\n        // value columns and pivot columns, non-leaf group\n        values = _this.getValuesPivotNonLeaf(rowNode, colId);\n      }\n      result[colId] = _this.aggregateValues(values, valueColumn.getAggFunc(), valueColumn, rowNode);\n    });\n    // Step 2: process total columns\n    pivotColumnDefs.filter(function (v) {\n      return agGridCommunity._.exists(v.pivotTotalColumnIds);\n    }) // only process pivot total columns\n    .forEach(function (totalColDef) {\n      var aggResults = [];\n      var pivotValueColumn = totalColDef.pivotValueColumn,\n        pivotTotalColumnIds = totalColDef.pivotTotalColumnIds,\n        colId = totalColDef.colId;\n      //retrieve results for colIds associated with this pivot total column\n      if (!pivotTotalColumnIds || !pivotTotalColumnIds.length) {\n        return;\n      }\n      pivotTotalColumnIds.forEach(function (colId) {\n        aggResults.push(result[colId]);\n      });\n      result[colId] = _this.aggregateValues(aggResults, pivotValueColumn.getAggFunc(), pivotValueColumn, rowNode);\n    });\n    return result;\n  };\n  AggregationStage.prototype.aggregateRowNodeUsingValuesOnly = function (rowNode, aggDetails) {\n    var _this = this;\n    var result = {};\n    var changedValueColumns = aggDetails.changedPath.isActive() ? aggDetails.changedPath.getValueColumnsForNode(rowNode, aggDetails.valueColumns) : aggDetails.valueColumns;\n    var notChangedValueColumns = aggDetails.changedPath.isActive() ? aggDetails.changedPath.getNotValueColumnsForNode(rowNode, aggDetails.valueColumns) : null;\n    var values2d = this.getValuesNormal(rowNode, changedValueColumns);\n    var oldValues = rowNode.aggData;\n    changedValueColumns.forEach(function (valueColumn, index) {\n      result[valueColumn.getId()] = _this.aggregateValues(values2d[index], valueColumn.getAggFunc(), valueColumn, rowNode);\n    });\n    if (notChangedValueColumns && oldValues) {\n      notChangedValueColumns.forEach(function (valueColumn) {\n        result[valueColumn.getId()] = oldValues[valueColumn.getId()];\n      });\n    }\n    return result;\n  };\n  AggregationStage.prototype.getValuesPivotNonLeaf = function (rowNode, colId) {\n    var values = [];\n    rowNode.childrenAfterFilter.forEach(function (node) {\n      var value = node.aggData[colId];\n      values.push(value);\n    });\n    return values;\n  };\n  AggregationStage.prototype.getValuesFromMappedSet = function (mappedSet, keys, valueColumn) {\n    var _this = this;\n    var mapPointer = mappedSet;\n    keys.forEach(function (key) {\n      return mapPointer = mapPointer ? mapPointer[key] : null;\n    });\n    if (!mapPointer) {\n      return [];\n    }\n    var values = [];\n    mapPointer.forEach(function (rowNode) {\n      var value = _this.valueService.getValue(valueColumn, rowNode);\n      values.push(value);\n    });\n    return values;\n  };\n  AggregationStage.prototype.getValuesNormal = function (rowNode, valueColumns) {\n    // create 2d array, of all values for all valueColumns\n    var values = [];\n    valueColumns.forEach(function () {\n      return values.push([]);\n    });\n    var valueColumnCount = valueColumns.length;\n    var rowCount = rowNode.childrenAfterFilter.length;\n    for (var i = 0; i < rowCount; i++) {\n      var childNode = rowNode.childrenAfterFilter[i];\n      for (var j = 0; j < valueColumnCount; j++) {\n        var valueColumn = valueColumns[j];\n        // if the row is a group, then it will only have an agg result value,\n        // which means valueGetter is never used.\n        var value = this.valueService.getValue(valueColumn, childNode);\n        values[j].push(value);\n      }\n    }\n    return values;\n  };\n  AggregationStage.prototype.aggregateValues = function (values, aggFuncOrString, column, rowNode) {\n    var aggFunc = typeof aggFuncOrString === 'string' ? this.aggFuncService.getAggFunc(aggFuncOrString) : aggFuncOrString;\n    if (typeof aggFunc !== 'function') {\n      console.error(\"ag-Grid: unrecognised aggregation function \" + aggFuncOrString);\n      return null;\n    }\n    var deprecationWarning = function deprecationWarning() {\n      agGridCommunity._.doOnce(function () {\n        console.warn('ag-Grid: since v24.0, custom aggregation functions take a params object. Please alter your aggregation function to use params.values');\n      }, 'aggregationStage.aggregateValues Deprecation');\n    };\n    var aggFuncAny = aggFunc;\n    var params = {\n      values: values,\n      column: column,\n      colDef: column ? column.getColDef() : undefined,\n      rowNode: rowNode,\n      data: rowNode ? rowNode.data : undefined,\n      api: this.gridApi,\n      columnApi: this.columnApi,\n      context: this.gridOptionsWrapper.getContext(),\n      // the three things below are for logging warning messages in case anyone is treating\n      // the params object as an array. in previous grid versions, we didn't pass params object,\n      // but passed values array instead.\n      forEach: function forEach(callback, thisArg) {\n        deprecationWarning();\n        return values.forEach(callback, thisArg);\n      },\n      get length() {\n        deprecationWarning();\n        return values.length;\n      },\n      set length(val) {\n        deprecationWarning();\n        values.length = val;\n      }\n    }; // the \"as any\" is needed to allow the deprecation warning messages\n    return aggFuncAny(params);\n  };\n  __decorate$8([agGridCommunity.Autowired('gridOptionsWrapper')], AggregationStage.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$8([agGridCommunity.Autowired('columnController')], AggregationStage.prototype, \"columnController\", void 0);\n  __decorate$8([agGridCommunity.Autowired('valueService')], AggregationStage.prototype, \"valueService\", void 0);\n  __decorate$8([agGridCommunity.Autowired('pivotStage')], AggregationStage.prototype, \"pivotStage\", void 0);\n  __decorate$8([agGridCommunity.Autowired('aggFuncService')], AggregationStage.prototype, \"aggFuncService\", void 0);\n  __decorate$8([agGridCommunity.Autowired('gridApi')], AggregationStage.prototype, \"gridApi\", void 0);\n  __decorate$8([agGridCommunity.Autowired('columnApi')], AggregationStage.prototype, \"columnApi\", void 0);\n  AggregationStage = __decorate$8([agGridCommunity.Bean('aggregationStage')], AggregationStage);\n  return AggregationStage;\n}(agGridCommunity.BeanStub);\nvar __extends$9 = undefined && undefined.__extends || function () {\n  var _extendStatics10 = function extendStatics(d, b) {\n    _extendStatics10 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics10(d, b);\n  };\n  return function (d, b) {\n    _extendStatics10(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$9 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar GroupStage = /** @class */function (_super) {\n  __extends$9(GroupStage, _super);\n  function GroupStage() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    // we use a sequence variable so that each time we do a grouping, we don't\n    // reuse the ids - otherwise the rowRenderer will confuse rowNodes between redraws\n    // when it tries to animate between rows.\n    _this.groupIdSequence = new agGridCommunity.NumberSequence();\n    return _this;\n  }\n  GroupStage.prototype.postConstruct = function () {\n    this.usingTreeData = this.gridOptionsWrapper.isTreeData();\n    if (this.usingTreeData) {\n      this.getDataPath = this.gridOptionsWrapper.getDataPathFunc();\n    }\n  };\n  GroupStage.prototype.execute = function (params) {\n    var details = this.createGroupingDetails(params);\n    if (details.transactions) {\n      this.handleTransaction(details);\n    } else {\n      var afterColsChanged = params.afterColumnsChanged === true;\n      this.shotgunResetEverything(details, afterColsChanged);\n    }\n    this.sortGroupsWithComparator(details.rootNode);\n    this.selectableService.updateSelectableAfterGrouping(details.rootNode);\n  };\n  GroupStage.prototype.createGroupingDetails = function (params) {\n    var rowNode = params.rowNode,\n      changedPath = params.changedPath,\n      rowNodeTransactions = params.rowNodeTransactions,\n      rowNodeOrder = params.rowNodeOrder;\n    var groupedCols = this.usingTreeData ? null : this.columnController.getRowGroupColumns();\n    var details = {\n      // someone complained that the parent attribute was causing some change detection\n      // to break is some angular add-on - which i never used. taking the parent out breaks\n      // a cyclic dependency, hence this flag got introduced.\n      includeParents: !this.gridOptionsWrapper.isSuppressParentsInRowNodes(),\n      expandByDefault: this.gridOptionsWrapper.getGroupDefaultExpanded(),\n      groupedCols: groupedCols,\n      rootNode: rowNode,\n      pivotMode: this.columnController.isPivotMode(),\n      groupedColCount: this.usingTreeData || !groupedCols ? 0 : groupedCols.length,\n      rowNodeOrder: rowNodeOrder,\n      transactions: rowNodeTransactions,\n      // if no transaction, then it's shotgun, changed path would be 'not active' at this point anyway\n      changedPath: changedPath\n    };\n    return details;\n  };\n  GroupStage.prototype.handleTransaction = function (details) {\n    var _this = this;\n    details.transactions.forEach(function (tran) {\n      // the order here of [add, remove, update] needs to be the same as in ClientSideNodeManager,\n      // as the order is important when a record with the same id is added and removed in the same\n      // transaction.\n      if (agGridCommunity._.existsAndNotEmpty(tran.add)) {\n        _this.insertNodes(tran.add, details, false);\n      }\n      if (agGridCommunity._.existsAndNotEmpty(tran.remove)) {\n        _this.removeNodes(tran.remove, details);\n      }\n      if (agGridCommunity._.existsAndNotEmpty(tran.update)) {\n        _this.moveNodesInWrongPath(tran.update, details);\n      }\n    });\n    if (details.rowNodeOrder) {\n      this.sortChildren(details);\n    }\n  };\n  // this is used when doing delta updates, eg Redux, keeps nodes in right order\n  GroupStage.prototype.sortChildren = function (details) {\n    details.changedPath.forEachChangedNodeDepthFirst(function (rowNode) {\n      agGridCommunity._.sortRowNodesByOrder(rowNode.childrenAfterGroup, details.rowNodeOrder);\n    });\n  };\n  GroupStage.prototype.sortGroupsWithComparator = function (rootNode) {\n    // we don't do group sorting for tree data\n    if (this.usingTreeData) {\n      return;\n    }\n    var comparator = this.gridOptionsWrapper.getDefaultGroupSortComparator();\n    if (agGridCommunity._.exists(comparator)) {\n      recursiveSort(rootNode);\n    }\n    function recursiveSort(rowNode) {\n      var doSort = agGridCommunity._.exists(rowNode.childrenAfterGroup) &&\n      // we only want to sort groups, so we do not sort leafs (a leaf group has leafs as children)\n      !rowNode.leafGroup;\n      if (doSort) {\n        rowNode.childrenAfterGroup.sort(comparator);\n        rowNode.childrenAfterGroup.forEach(function (childNode) {\n          return recursiveSort(childNode);\n        });\n      }\n    }\n  };\n  GroupStage.prototype.getExistingPathForNode = function (node, details) {\n    var res = [];\n    // when doing tree data, the node is part of the path,\n    // but when doing grid grouping, the node is not part of the path so we start with the parent.\n    var pointer = this.usingTreeData ? node : node.parent;\n    while (pointer && pointer !== details.rootNode) {\n      res.push({\n        key: pointer.key,\n        rowGroupColumn: pointer.rowGroupColumn,\n        field: pointer.field\n      });\n      pointer = pointer.parent;\n    }\n    res.reverse();\n    return res;\n  };\n  GroupStage.prototype.moveNodesInWrongPath = function (childNodes, details) {\n    var _this = this;\n    childNodes.forEach(function (childNode) {\n      // we add node, even if parent has not changed, as the data could have\n      // changed, hence aggregations will be wrong\n      if (details.changedPath.isActive()) {\n        details.changedPath.addParentNode(childNode.parent);\n      }\n      var infoToKeyMapper = function infoToKeyMapper(item) {\n        return item.key;\n      };\n      var oldPath = _this.getExistingPathForNode(childNode, details).map(infoToKeyMapper);\n      var newPath = _this.getGroupInfo(childNode, details).map(infoToKeyMapper);\n      var nodeInCorrectPath = agGridCommunity._.areEqual(oldPath, newPath);\n      if (!nodeInCorrectPath) {\n        _this.moveNode(childNode, details);\n      }\n    });\n  };\n  GroupStage.prototype.moveNode = function (childNode, details) {\n    this.removeNodesInStages([childNode], details);\n    this.insertOneNode(childNode, details, true);\n    // hack - if we didn't do this, then renaming a tree item (ie changing rowNode.key) wouldn't get\n    // refreshed into the gui.\n    // this is needed to kick off the event that rowComp listens to for refresh. this in turn\n    // then will get each cell in the row to refresh - which is what we need as we don't know which\n    // columns will be displaying the rowNode.key info.\n    childNode.setData(childNode.data);\n    // we add both old and new parents to changed path, as both will need to be refreshed.\n    // we already added the old parent (in calling method), so just add the new parent here\n    if (details.changedPath.isActive()) {\n      var newParent = childNode.parent;\n      details.changedPath.addParentNode(newParent);\n    }\n  };\n  GroupStage.prototype.removeNodes = function (leafRowNodes, details) {\n    this.removeNodesInStages(leafRowNodes, details);\n    if (details.changedPath.isActive()) {\n      leafRowNodes.forEach(function (rowNode) {\n        return details.changedPath.addParentNode(rowNode.parent);\n      });\n    }\n  };\n  GroupStage.prototype.removeNodesInStages = function (leafRowNodes, details) {\n    this.removeNodesFromParents(leafRowNodes, details);\n    this.postRemoveCreateFillerNodes(leafRowNodes, details);\n    this.postRemoveRemoveEmptyGroups(leafRowNodes, details);\n  };\n  GroupStage.prototype.forEachParentGroup = function (details, child, callback) {\n    var pointer = child.parent;\n    while (pointer && pointer !== details.rootNode) {\n      callback(pointer);\n      pointer = pointer.parent;\n    }\n  };\n  GroupStage.prototype.removeNodesFromParents = function (nodesToRemove, details) {\n    var _this = this;\n    var batchRemover = new BatchRemover();\n    nodesToRemove.forEach(function (nodeToRemove) {\n      _this.removeFromParent(nodeToRemove, batchRemover);\n      // remove from allLeafChildren. we clear down all parents EXCEPT the Root Node, as\n      // the ClientSideNodeManager is responsible for the Root Node.\n      _this.forEachParentGroup(details, nodeToRemove, function (parentNode) {\n        batchRemover.removeFromAllLeafChildren(parentNode, nodeToRemove);\n      });\n    });\n    batchRemover.flush();\n  };\n  GroupStage.prototype.postRemoveCreateFillerNodes = function (nodesToRemove, details) {\n    var _this = this;\n    nodesToRemove.forEach(function (nodeToRemove) {\n      // if not group, and children are present, need to move children to a group.\n      // otherwise if no children, we can just remove without replacing.\n      var replaceWithGroup = nodeToRemove.hasChildren();\n      if (replaceWithGroup) {\n        var oldPath = _this.getExistingPathForNode(nodeToRemove, details);\n        // because we just removed the userGroup, this will always return new support group\n        var newGroupNode_1 = _this.findParentForNode(nodeToRemove, oldPath, details);\n        // these properties are the ones that will be incorrect in the newly created group,\n        // so copy them from the old childNode\n        newGroupNode_1.expanded = nodeToRemove.expanded;\n        newGroupNode_1.allLeafChildren = nodeToRemove.allLeafChildren;\n        newGroupNode_1.childrenAfterGroup = nodeToRemove.childrenAfterGroup;\n        newGroupNode_1.childrenMapped = nodeToRemove.childrenMapped;\n        newGroupNode_1.updateHasChildren();\n        newGroupNode_1.childrenAfterGroup.forEach(function (rowNode) {\n          return rowNode.parent = newGroupNode_1;\n        });\n      }\n    });\n  };\n  GroupStage.prototype.postRemoveRemoveEmptyGroups = function (nodesToRemove, details) {\n    var _this = this;\n    // we do this multiple times, as when we remove groups, that means the parent of just removed\n    // group can then be empty. to get around this, if we remove, then we check everything again for\n    // newly emptied groups. the max number of times this will execute is the depth of the group tree.\n    var checkAgain = true;\n    var groupShouldBeRemoved = function groupShouldBeRemoved(rowNode) {\n      // because of the while loop below, it's possible we already moved the node,\n      // so double check before trying to remove again.\n      var mapKey = _this.getChildrenMappedKey(rowNode.key, rowNode.rowGroupColumn);\n      var parentRowNode = rowNode.parent;\n      var groupAlreadyRemoved = parentRowNode && parentRowNode.childrenMapped ? !parentRowNode.childrenMapped[mapKey] : true;\n      if (groupAlreadyRemoved) {\n        // if not linked, then group was already removed\n        return false;\n      } else {\n        // if still not removed, then we remove if this group is empty\n        return rowNode.isEmptyRowGroupNode();\n      }\n    };\n    var _loop_1 = function _loop_1() {\n      checkAgain = false;\n      var batchRemover = new BatchRemover();\n      nodesToRemove.forEach(function (nodeToRemove) {\n        // remove empty groups\n        _this.forEachParentGroup(details, nodeToRemove, function (rowNode) {\n          if (groupShouldBeRemoved(rowNode)) {\n            checkAgain = true;\n            _this.removeFromParent(rowNode, batchRemover);\n            // we remove selection on filler nodes here, as the selection would not be removed\n            // from the RowNodeManager, as filler nodes don't exist on the RowNodeManager\n            rowNode.setSelected(false);\n          }\n        });\n      });\n      batchRemover.flush();\n    };\n    while (checkAgain) {\n      _loop_1();\n    }\n  };\n  // removes the node from the parent by:\n  // a) removing from childrenAfterGroup (using batchRemover if present, otherwise immediately)\n  // b) removing from childrenMapped (immediately)\n  // c) setRowTop(null) - as the rowRenderer uses this to know the RowNode is no longer needed\n  GroupStage.prototype.removeFromParent = function (child, batchRemover) {\n    if (child.parent) {\n      if (batchRemover) {\n        batchRemover.removeFromChildrenAfterGroup(child.parent, child);\n      } else {\n        agGridCommunity._.removeFromArray(child.parent.childrenAfterGroup, child);\n        child.parent.updateHasChildren();\n      }\n    }\n    var mapKey = this.getChildrenMappedKey(child.key, child.rowGroupColumn);\n    if (child.parent && child.parent.childrenMapped) {\n      child.parent.childrenMapped[mapKey] = undefined;\n    }\n    // this is important for transition, see rowComp removeFirstPassFuncs. when doing animation and\n    // remove, if rowTop is still present, the rowComp thinks it's just moved position.\n    child.setRowTop(null);\n  };\n  GroupStage.prototype.addToParent = function (child, parent) {\n    var mapKey = this.getChildrenMappedKey(child.key, child.rowGroupColumn);\n    if (parent) {\n      if (parent.childrenMapped) {\n        parent.childrenMapped[mapKey] = child;\n      }\n      parent.childrenAfterGroup.push(child);\n      parent.updateHasChildren();\n    }\n  };\n  GroupStage.prototype.areGroupColsEqual = function (d1, d2) {\n    if (d1 == null || d2 == null || d1.pivotMode !== d2.pivotMode) {\n      return false;\n    }\n    return agGridCommunity._.areEqual(d1.groupedCols, d2.groupedCols);\n  };\n  GroupStage.prototype.shotgunResetEverything = function (details, afterColumnsChanged) {\n    var skipStage = afterColumnsChanged ? this.usingTreeData || this.areGroupColsEqual(details, this.oldGroupingDetails) : false;\n    this.oldGroupingDetails = details;\n    if (skipStage) {\n      return;\n    }\n    // because we are not creating the root node each time, we have the logic\n    // here to change leafGroup once.\n    // we set .leafGroup to false for tree data, as .leafGroup is only used when pivoting, and pivoting\n    // isn't allowed with treeData, so the grid never actually use .leafGroup when doing treeData.\n    details.rootNode.leafGroup = this.usingTreeData ? false : details.groupedCols.length === 0;\n    // we are doing everything from scratch, so reset childrenAfterGroup and childrenMapped from the rootNode\n    details.rootNode.childrenAfterGroup = [];\n    details.rootNode.childrenMapped = {};\n    details.rootNode.updateHasChildren();\n    this.insertNodes(details.rootNode.allLeafChildren, details, false);\n  };\n  GroupStage.prototype.insertNodes = function (newRowNodes, details, isMove) {\n    var _this = this;\n    newRowNodes.forEach(function (rowNode) {\n      _this.insertOneNode(rowNode, details, isMove);\n      if (details.changedPath.isActive()) {\n        details.changedPath.addParentNode(rowNode.parent);\n      }\n    });\n  };\n  GroupStage.prototype.insertOneNode = function (childNode, details, isMove) {\n    var path = this.getGroupInfo(childNode, details);\n    var parentGroup = this.findParentForNode(childNode, path, details);\n    if (!parentGroup.group) {\n      console.warn(\"ag-Grid: duplicate group keys for row data, keys should be unique\", [parentGroup.data, childNode.data]);\n    }\n    if (this.usingTreeData) {\n      this.swapGroupWithUserNode(parentGroup, childNode, isMove);\n    } else {\n      childNode.parent = parentGroup;\n      childNode.level = path.length;\n      parentGroup.childrenAfterGroup.push(childNode);\n      parentGroup.updateHasChildren();\n    }\n  };\n  GroupStage.prototype.findParentForNode = function (childNode, path, details) {\n    var _this = this;\n    var nextNode = details.rootNode;\n    path.forEach(function (groupInfo, level) {\n      nextNode = _this.getOrCreateNextNode(nextNode, groupInfo, level, details);\n      // node gets added to all group nodes.\n      // note: we do not add to rootNode here, as the rootNode is the master list of rowNodes\n      nextNode.allLeafChildren.push(childNode);\n    });\n    return nextNode;\n  };\n  GroupStage.prototype.swapGroupWithUserNode = function (fillerGroup, userGroup, isMove) {\n    userGroup.parent = fillerGroup.parent;\n    userGroup.key = fillerGroup.key;\n    userGroup.field = fillerGroup.field;\n    userGroup.groupData = fillerGroup.groupData;\n    userGroup.level = fillerGroup.level;\n    // AG-3441 - preserve the existing expanded status of the node if we're moving it, so that\n    // you can drag a sub tree from one parent to another without changing its expansion\n    if (!isMove) {\n      userGroup.expanded = fillerGroup.expanded;\n    }\n    // we set .leafGroup to false for tree data, as .leafGroup is only used when pivoting, and pivoting\n    // isn't allowed with treeData, so the grid never actually use .leafGroup when doing treeData.\n    userGroup.leafGroup = fillerGroup.leafGroup;\n    // always null for userGroups, as row grouping is not allowed when doing tree data\n    userGroup.rowGroupIndex = fillerGroup.rowGroupIndex;\n    userGroup.allLeafChildren = fillerGroup.allLeafChildren;\n    userGroup.childrenAfterGroup = fillerGroup.childrenAfterGroup;\n    userGroup.childrenMapped = fillerGroup.childrenMapped;\n    userGroup.updateHasChildren();\n    this.removeFromParent(fillerGroup);\n    userGroup.childrenAfterGroup.forEach(function (rowNode) {\n      return rowNode.parent = userGroup;\n    });\n    this.addToParent(userGroup, fillerGroup.parent);\n  };\n  GroupStage.prototype.getOrCreateNextNode = function (parentGroup, groupInfo, level, details) {\n    var key = this.getChildrenMappedKey(groupInfo.key, groupInfo.rowGroupColumn);\n    var map = parentGroup.childrenMapped;\n    // we use hasOwnProperty as otherwise things like 'constructor' would fail as a key,\n    // as javascript map already has an inherited property 'constructor\n    var nodeExists = map && map.hasOwnProperty(key);\n    var nextNode = nodeExists ? map[key] : undefined;\n    if (!nextNode) {\n      nextNode = this.createGroup(groupInfo, parentGroup, level, details);\n      // attach the new group to the parent\n      this.addToParent(nextNode, parentGroup);\n    }\n    return nextNode;\n  };\n  GroupStage.prototype.createGroup = function (groupInfo, parent, level, details) {\n    var _this = this;\n    var groupNode = new agGridCommunity.RowNode();\n    this.context.createBean(groupNode);\n    groupNode.group = true;\n    groupNode.field = groupInfo.field;\n    groupNode.rowGroupColumn = groupInfo.rowGroupColumn;\n    groupNode.groupData = {};\n    var groupDisplayCols = this.columnController.getGroupDisplayColumns();\n    groupDisplayCols.forEach(function (col) {\n      // newGroup.rowGroupColumn=null when working off GroupInfo, and we always display the group in the group column\n      // if rowGroupColumn is present, then it's grid row grouping and we only include if configuration says so\n      var displayGroupForCol = _this.usingTreeData || (groupNode.rowGroupColumn ? col.isRowGroupDisplayed(groupNode.rowGroupColumn.getId()) : false);\n      if (displayGroupForCol) {\n        groupNode.groupData[col.getColId()] = groupInfo.key;\n      }\n    });\n    // we put 'row-group-' before the group id, so it doesn't clash with standard row id's. we also use 't-' and 'b-'\n    // for top pinned and bottom pinned rows.\n    groupNode.id = agGridCommunity.RowNode.ID_PREFIX_ROW_GROUP + this.groupIdSequence.next();\n    groupNode.key = groupInfo.key;\n    groupNode.level = level;\n    groupNode.leafGroup = this.usingTreeData ? false : level === details.groupedColCount - 1;\n    // if doing pivoting, then the leaf group is never expanded,\n    // as we do not show leaf rows\n    if (details.pivotMode && groupNode.leafGroup) {\n      groupNode.expanded = false;\n    } else {\n      groupNode.expanded = this.isExpanded(details.expandByDefault, level);\n    }\n    groupNode.allLeafChildren = [];\n    // why is this done here? we are not updating the children count as we go,\n    // i suspect this is updated in the filter stage\n    groupNode.setAllChildrenCount(0);\n    groupNode.rowGroupIndex = this.usingTreeData ? null : level;\n    groupNode.childrenAfterGroup = [];\n    groupNode.childrenMapped = {};\n    groupNode.updateHasChildren();\n    groupNode.parent = details.includeParents ? parent : null;\n    return groupNode;\n  };\n  GroupStage.prototype.getChildrenMappedKey = function (key, rowGroupColumn) {\n    if (rowGroupColumn) {\n      // grouping by columns\n      return rowGroupColumn.getId() + '-' + key;\n    } else {\n      // tree data - we don't have rowGroupColumns\n      return key;\n    }\n  };\n  GroupStage.prototype.isExpanded = function (expandByDefault, level) {\n    if (expandByDefault === -1) {\n      return true;\n    } else {\n      return level < expandByDefault;\n    }\n  };\n  GroupStage.prototype.getGroupInfo = function (rowNode, details) {\n    if (this.usingTreeData) {\n      return this.getGroupInfoFromCallback(rowNode);\n    } else {\n      return this.getGroupInfoFromGroupColumns(rowNode, details);\n    }\n  };\n  GroupStage.prototype.getGroupInfoFromCallback = function (rowNode) {\n    var keys = this.getDataPath ? this.getDataPath(rowNode.data) : null;\n    if (keys === null || keys === undefined || keys.length === 0) {\n      agGridCommunity._.doOnce(function () {\n        return console.warn(\"getDataPath() should not return an empty path for data\", rowNode.data);\n      }, 'groupStage.getGroupInfoFromCallback');\n    }\n    var groupInfoMapper = function groupInfoMapper(key) {\n      return {\n        key: key,\n        field: null,\n        rowGroupColumn: null\n      };\n    };\n    return keys ? keys.map(groupInfoMapper) : [];\n  };\n  GroupStage.prototype.getGroupInfoFromGroupColumns = function (rowNode, details) {\n    var _this = this;\n    var res = [];\n    details.groupedCols.forEach(function (groupCol) {\n      var key = _this.valueService.getKeyForNode(groupCol, rowNode);\n      var keyExists = key !== null && key !== undefined;\n      // unbalanced tree and pivot mode don't work together - not because of the grid, it doesn't make\n      // mathematical sense as you are building up a cube. so if pivot mode, we put in a blank key where missing.\n      // this keeps the tree balanced and hence can be represented as a group.\n      if (details.pivotMode && !keyExists) {\n        key = ' ';\n        keyExists = true;\n      }\n      if (keyExists) {\n        var item = {\n          key: key,\n          field: groupCol.getColDef().field,\n          rowGroupColumn: groupCol\n        };\n        res.push(item);\n      }\n    });\n    return res;\n  };\n  __decorate$9([agGridCommunity.Autowired('gridOptionsWrapper')], GroupStage.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$9([agGridCommunity.Autowired('columnController')], GroupStage.prototype, \"columnController\", void 0);\n  __decorate$9([agGridCommunity.Autowired('selectableService')], GroupStage.prototype, \"selectableService\", void 0);\n  __decorate$9([agGridCommunity.Autowired('valueService')], GroupStage.prototype, \"valueService\", void 0);\n  __decorate$9([agGridCommunity.PostConstruct], GroupStage.prototype, \"postConstruct\", null);\n  GroupStage = __decorate$9([agGridCommunity.Bean('groupStage')], GroupStage);\n  return GroupStage;\n}(agGridCommunity.BeanStub);\n// doing _.removeFromArray() multiple times on a large list can be a bottleneck.\n// when doing large deletes (eg removing 1,000 rows) then we would be calling _.removeFromArray()\n// a thousands of times, in particular RootNode.allGroupChildren could be a large list, and\n// 1,000 removes is time consuming as each one requires traversing the full list.\n// to get around this, we do all the removes in a batch. this class manages the batch.\n//\n// This problem was brought to light by a client (AG-2879), with dataset of 20,000\n// in 10,000 groups (2 items per group), then deleting all rows with transaction,\n// it took about 20 seconds to delete. with the BathRemoved, the reduced to less than 1 second.\nvar BatchRemover = /** @class */function () {\n  function BatchRemover() {\n    this.allSets = {};\n    this.allParents = [];\n  }\n  BatchRemover.prototype.removeFromChildrenAfterGroup = function (parent, child) {\n    var set = this.getSet(parent);\n    set.removeFromChildrenAfterGroup[child.id] = true;\n  };\n  BatchRemover.prototype.removeFromAllLeafChildren = function (parent, child) {\n    var set = this.getSet(parent);\n    set.removeFromAllLeafChildren[child.id] = true;\n  };\n  BatchRemover.prototype.getSet = function (parent) {\n    if (!this.allSets[parent.id]) {\n      this.allSets[parent.id] = {\n        removeFromAllLeafChildren: {},\n        removeFromChildrenAfterGroup: {}\n      };\n      this.allParents.push(parent);\n    }\n    return this.allSets[parent.id];\n  };\n  BatchRemover.prototype.flush = function () {\n    var _this = this;\n    this.allParents.forEach(function (parent) {\n      var nodeDetails = _this.allSets[parent.id];\n      parent.childrenAfterGroup = parent.childrenAfterGroup.filter(function (child) {\n        var res = !nodeDetails.removeFromChildrenAfterGroup[child.id];\n        return res;\n      });\n      parent.allLeafChildren = parent.allLeafChildren.filter(function (child) {\n        return !nodeDetails.removeFromAllLeafChildren[child.id];\n      });\n      parent.updateHasChildren();\n    });\n    this.allSets = {};\n    this.allParents.length = 0;\n  };\n  return BatchRemover;\n}();\nvar __extends$a = undefined && undefined.__extends || function () {\n  var _extendStatics11 = function extendStatics(d, b) {\n    _extendStatics11 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics11(d, b);\n  };\n  return function (d, b) {\n    _extendStatics11(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$a = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays = undefined && undefined.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nvar PivotColDefService = /** @class */function (_super) {\n  __extends$a(PivotColDefService, _super);\n  function PivotColDefService() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  PivotColDefService_1 = PivotColDefService;\n  PivotColDefService.prototype.createPivotColumnDefs = function (uniqueValues) {\n    // this is passed to the columnController, to configure the columns and groups we show\n    var pivotColumnGroupDefs = [];\n    // this is used by the aggregation stage, to do the aggregation based on the pivot columns\n    var pivotColumnDefs = [];\n    var pivotColumns = this.columnController.getPivotColumns();\n    var valueColumns = this.columnController.getValueColumns();\n    var levelsDeep = pivotColumns.length;\n    var columnIdSequence = new agGridCommunity.NumberSequence();\n    this.recursivelyAddGroup(pivotColumnGroupDefs, pivotColumnDefs, 1, uniqueValues, [], columnIdSequence, levelsDeep, pivotColumns);\n    // additional columns that contain the aggregated total for each value column per row\n    this.addRowGroupTotals(pivotColumnGroupDefs, pivotColumnDefs, valueColumns, columnIdSequence);\n    // additional group columns that contain child totals for each collapsed child column / group\n    this.addExpandablePivotGroups(pivotColumnGroupDefs, pivotColumnDefs, columnIdSequence);\n    // additional group columns that contain an aggregated total across all child columns\n    this.addPivotTotalsToGroups(pivotColumnGroupDefs, pivotColumnDefs, columnIdSequence);\n    // we clone, so the colDefs in pivotColumnsGroupDefs and pivotColumnDefs are not shared. this is so that\n    // any changes the user makes (via processSecondaryColumnDefinitions) don't impact the internal aggregations,\n    // as these use the col defs also\n    var pivotColumnDefsClone = pivotColumnDefs.map(function (colDef) {\n      return agGridCommunity._.cloneObject(colDef);\n    });\n    return {\n      pivotColumnGroupDefs: pivotColumnGroupDefs,\n      pivotColumnDefs: pivotColumnDefsClone\n    };\n  };\n  // parentChildren - the list of colDefs we are adding to\n  // @index - how far the column is from the top (also same as pivotKeys.length)\n  // @uniqueValues - the values for which we should create a col for\n  // @pivotKeys - the keys for the pivot, eg if pivoting on {Language,Country} then could be {English,Ireland}\n  PivotColDefService.prototype.recursivelyAddGroup = function (parentChildren, pivotColumnDefs, index, uniqueValues, pivotKeys, columnIdSequence, levelsDeep, primaryPivotColumns) {\n    var _this = this;\n    agGridCommunity._.iterateObject(uniqueValues, function (key, value) {\n      var newPivotKeys = __spreadArrays(pivotKeys, [key]);\n      var createGroup = index !== levelsDeep;\n      if (createGroup) {\n        var groupDef = {\n          children: [],\n          headerName: key,\n          pivotKeys: newPivotKeys,\n          columnGroupShow: 'open',\n          groupId: 'pivot' + columnIdSequence.next()\n        };\n        parentChildren.push(groupDef);\n        _this.recursivelyAddGroup(groupDef.children, pivotColumnDefs, index + 1, value, newPivotKeys, columnIdSequence, levelsDeep, primaryPivotColumns);\n      } else {\n        var measureColumns = _this.columnController.getValueColumns();\n        var valueGroup_1 = {\n          children: [],\n          headerName: key,\n          pivotKeys: newPivotKeys,\n          columnGroupShow: 'open',\n          groupId: 'pivot' + columnIdSequence.next()\n        };\n        // if no value columns selected, then we insert one blank column, so the user at least sees columns\n        // rendered. otherwise the grid would render with no columns (just empty groups) which would give the\n        // impression that the grid is broken\n        if (measureColumns.length === 0) {\n          // this is the blank column, for when no value columns enabled.\n          var colDef_1 = _this.createColDef(null, '-', newPivotKeys, columnIdSequence);\n          valueGroup_1.children.push(colDef_1);\n          pivotColumnDefs.push(colDef_1);\n        } else {\n          measureColumns.forEach(function (measureColumn) {\n            var columnName = _this.columnController.getDisplayNameForColumn(measureColumn, 'header');\n            var colDef = _this.createColDef(measureColumn, columnName, newPivotKeys, columnIdSequence);\n            colDef.columnGroupShow = 'open';\n            valueGroup_1.children.push(colDef);\n            pivotColumnDefs.push(colDef);\n          });\n        }\n        parentChildren.push(valueGroup_1);\n      }\n    });\n    // sort by either user provided comparator, or our own one\n    var colDef = primaryPivotColumns[index - 1].getColDef();\n    var userComparator = colDef.pivotComparator;\n    var comparator = this.headerNameComparator.bind(this, userComparator);\n    parentChildren.sort(comparator);\n  };\n  PivotColDefService.prototype.addExpandablePivotGroups = function (pivotColumnGroupDefs, pivotColumnDefs, columnIdSequence) {\n    var _this = this;\n    if (this.gridOptionsWrapper.isSuppressExpandablePivotGroups() || this.gridOptionsWrapper.getPivotColumnGroupTotals()) {\n      return;\n    }\n    var recursivelyAddSubTotals = function recursivelyAddSubTotals(groupDef, pivotColumnDefs, columnIdSequence, acc) {\n      var group = groupDef;\n      if (group.children) {\n        var childAcc_1 = new Map();\n        group.children.forEach(function (grp) {\n          recursivelyAddSubTotals(grp, pivotColumnDefs, columnIdSequence, childAcc_1);\n        });\n        var firstGroup_1 = !group.children.some(function (child) {\n          return child.children;\n        });\n        _this.columnController.getValueColumns().forEach(function (valueColumn) {\n          var columnName = _this.columnController.getDisplayNameForColumn(valueColumn, 'header');\n          var totalColDef = _this.createColDef(valueColumn, columnName, groupDef.pivotKeys, columnIdSequence);\n          totalColDef.pivotTotalColumnIds = childAcc_1.get(valueColumn.getColId());\n          totalColDef.columnGroupShow = 'closed';\n          totalColDef.aggFunc = valueColumn.getAggFunc();\n          if (!firstGroup_1) {\n            // add total colDef to group and pivot colDefs array\n            var children = groupDef.children;\n            children.push(totalColDef);\n            pivotColumnDefs.push(totalColDef);\n          }\n        });\n        _this.merge(acc, childAcc_1);\n      } else {\n        var def = groupDef;\n        // check that value column exists, i.e. aggFunc is supplied\n        if (!def.pivotValueColumn) return;\n        var pivotValueColId = def.pivotValueColumn.getColId();\n        var arr = acc.has(pivotValueColId) ? acc.get(pivotValueColId) : [];\n        arr.push(def.colId);\n        acc.set(pivotValueColId, arr);\n      }\n    };\n    pivotColumnGroupDefs.forEach(function (groupDef) {\n      recursivelyAddSubTotals(groupDef, pivotColumnDefs, columnIdSequence, new Map());\n    });\n  };\n  PivotColDefService.prototype.addPivotTotalsToGroups = function (pivotColumnGroupDefs, pivotColumnDefs, columnIdSequence) {\n    var _this = this;\n    if (!this.gridOptionsWrapper.getPivotColumnGroupTotals()) {\n      return;\n    }\n    var insertAfter = this.gridOptionsWrapper.getPivotColumnGroupTotals() === 'after';\n    var valueCols = this.columnController.getValueColumns();\n    var aggFuncs = valueCols.map(function (valueCol) {\n      return valueCol.getAggFunc();\n    });\n    // don't add pivot totals if there is less than 1 aggFunc or they are not all the same\n    if (!aggFuncs || aggFuncs.length < 1 || !this.sameAggFuncs(aggFuncs)) {\n      // console.warn('ag-Grid: aborting adding pivot total columns - value columns require same aggFunc');\n      return;\n    }\n    // arbitrarily select a value column to use as a template for pivot columns\n    var valueColumn = valueCols[0];\n    pivotColumnGroupDefs.forEach(function (groupDef) {\n      _this.recursivelyAddPivotTotal(groupDef, pivotColumnDefs, columnIdSequence, valueColumn, insertAfter);\n    });\n  };\n  PivotColDefService.prototype.recursivelyAddPivotTotal = function (groupDef, pivotColumnDefs, columnIdSequence, valueColumn, insertAfter) {\n    var _this = this;\n    var group = groupDef;\n    if (!group.children) {\n      var def = groupDef;\n      return def.colId ? [def.colId] : null;\n    }\n    var colIds = [];\n    // need to recurse children first to obtain colIds used in the aggregation stage\n    group.children.forEach(function (grp) {\n      var childColIds = _this.recursivelyAddPivotTotal(grp, pivotColumnDefs, columnIdSequence, valueColumn, insertAfter);\n      if (childColIds) {\n        colIds = colIds.concat(childColIds);\n      }\n    });\n    // only add total colDef if there is more than 1 child node\n    if (group.children.length > 1) {\n      //create total colDef using an arbitrary value column as a template\n      var totalColDef = this.createColDef(valueColumn, 'Total', groupDef.pivotKeys, columnIdSequence);\n      totalColDef.pivotTotalColumnIds = colIds;\n      totalColDef.aggFunc = valueColumn.getAggFunc();\n      // add total colDef to group and pivot colDefs array\n      var children = groupDef.children;\n      insertAfter ? children.push(totalColDef) : children.unshift(totalColDef);\n      pivotColumnDefs.push(totalColDef);\n    }\n    return colIds;\n  };\n  PivotColDefService.prototype.addRowGroupTotals = function (pivotColumnGroupDefs, pivotColumnDefs, valueColumns, columnIdSequence) {\n    var _this = this;\n    if (!this.gridOptionsWrapper.getPivotRowTotals()) {\n      return;\n    }\n    var insertAfter = this.gridOptionsWrapper.getPivotRowTotals() === 'after';\n    // order of row group totals depends on position\n    var valueCols = insertAfter ? valueColumns.slice() : valueColumns.slice().reverse();\n    var _loop_1 = function _loop_1(i) {\n      var valueCol = valueCols[i];\n      var colIds = [];\n      pivotColumnGroupDefs.forEach(function (groupDef) {\n        colIds = colIds.concat(_this.extractColIdsForValueColumn(groupDef, valueCol));\n      });\n      this_1.createRowGroupTotal(pivotColumnGroupDefs, pivotColumnDefs, [], columnIdSequence, valueCol, colIds, insertAfter);\n    };\n    var this_1 = this;\n    for (var i = 0; i < valueCols.length; i++) {\n      _loop_1(i);\n    }\n  };\n  PivotColDefService.prototype.extractColIdsForValueColumn = function (groupDef, valueColumn) {\n    var _this = this;\n    var group = groupDef;\n    if (!group.children) {\n      var colDef = group;\n      return colDef.pivotValueColumn === valueColumn && colDef.colId ? [colDef.colId] : [];\n    }\n    var colIds = [];\n    group.children.forEach(function (grp) {\n      _this.extractColIdsForValueColumn(grp, valueColumn);\n      var childColIds = _this.extractColIdsForValueColumn(grp, valueColumn);\n      colIds = colIds.concat(childColIds);\n    });\n    return colIds;\n  };\n  PivotColDefService.prototype.createRowGroupTotal = function (parentChildren, pivotColumnDefs, pivotKeys, columnIdSequence, valueColumn, colIds, insertAfter) {\n    var newPivotKeys = pivotKeys.slice(0);\n    var measureColumns = this.columnController.getValueColumns();\n    var valueGroup = {\n      children: [],\n      pivotKeys: newPivotKeys,\n      groupId: PivotColDefService_1.PIVOT_ROW_TOTAL_PREFIX + columnIdSequence.next()\n    };\n    if (measureColumns.length === 0) {\n      var colDef = this.createColDef(null, '-', newPivotKeys, columnIdSequence);\n      valueGroup.children.push(colDef);\n      pivotColumnDefs.push(colDef);\n    } else {\n      var columnName = this.columnController.getDisplayNameForColumn(valueColumn, 'header');\n      var colDef = this.createColDef(valueColumn, columnName, newPivotKeys, columnIdSequence);\n      colDef.pivotTotalColumnIds = colIds;\n      valueGroup.children.push(colDef);\n      pivotColumnDefs.push(colDef);\n    }\n    insertAfter ? parentChildren.push(valueGroup) : parentChildren.unshift(valueGroup);\n  };\n  PivotColDefService.prototype.createColDef = function (valueColumn, headerName, pivotKeys, columnIdSequence) {\n    var colDef = {};\n    if (valueColumn) {\n      var colDefToCopy = valueColumn.getColDef();\n      agGridCommunity._.assign(colDef, colDefToCopy);\n      // even if original column was hidden, we always show the pivot value column, otherwise it would be\n      // very confusing for people thinking the pivot is broken\n      colDef.hide = false;\n    }\n    colDef.headerName = headerName;\n    colDef.colId = 'pivot_' + columnIdSequence.next();\n    // pivot columns repeat over field, so it makes sense to use the unique id instead. For example if you want to\n    // assign values to pinned bottom rows using setPinnedBottomRowData the value service will use this colId.\n    colDef.field = colDef.colId;\n    colDef.pivotKeys = pivotKeys;\n    colDef.pivotValueColumn = valueColumn;\n    colDef.filter = false;\n    return colDef;\n  };\n  PivotColDefService.prototype.sameAggFuncs = function (aggFuncs) {\n    if (aggFuncs.length == 1) {\n      return true;\n    }\n    //check if all aggFunc's match\n    for (var i = 1; i < aggFuncs.length; i++) {\n      if (aggFuncs[i] !== aggFuncs[0]) {\n        return false;\n      }\n    }\n    return true;\n  };\n  PivotColDefService.prototype.headerNameComparator = function (userComparator, a, b) {\n    if (userComparator) {\n      return userComparator(a.headerName, b.headerName);\n    } else {\n      if (a.headerName && !b.headerName) {\n        return 1;\n      } else if (!a.headerName && b.headerName) {\n        return -1;\n      }\n      // slightly naff here - just to satify typescript\n      // really should be &&, but if so ts complains\n      // the above if/else checks would deal with either being falsy, so at this stage if either are falsy, both are\n      // ..still naff though\n      if (!a.headerName || !b.headerName) {\n        return 0;\n      }\n      if (a.headerName < b.headerName) {\n        return -1;\n      } else if (a.headerName > b.headerName) {\n        return 1;\n      } else {\n        return 0;\n      }\n    }\n  };\n  PivotColDefService.prototype.merge = function (m1, m2) {\n    m2.forEach(function (value, key, map) {\n      var existingList = m1.has(key) ? m1.get(key) : [];\n      var updatedList = __spreadArrays(existingList, value);\n      m1.set(key, updatedList);\n    });\n  };\n  var PivotColDefService_1;\n  PivotColDefService.PIVOT_ROW_TOTAL_PREFIX = 'PivotRowTotal_';\n  __decorate$a([agGridCommunity.Autowired('columnController')], PivotColDefService.prototype, \"columnController\", void 0);\n  __decorate$a([agGridCommunity.Autowired('gridOptionsWrapper')], PivotColDefService.prototype, \"gridOptionsWrapper\", void 0);\n  PivotColDefService = PivotColDefService_1 = __decorate$a([agGridCommunity.Bean('pivotColDefService')], PivotColDefService);\n  return PivotColDefService;\n}(agGridCommunity.BeanStub);\nvar __extends$b = undefined && undefined.__extends || function () {\n  var _extendStatics12 = function extendStatics(d, b) {\n    _extendStatics12 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics12(d, b);\n  };\n  return function (d, b) {\n    _extendStatics12(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$b = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PivotStage = /** @class */function (_super) {\n  __extends$b(PivotStage, _super);\n  function PivotStage() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.uniqueValues = {};\n    return _this;\n  }\n  PivotStage.prototype.execute = function (params) {\n    var rootNode = params.rowNode;\n    var changedPath = params.changedPath;\n    if (this.columnController.isPivotActive()) {\n      this.executePivotOn(rootNode, changedPath);\n    } else {\n      this.executePivotOff(changedPath);\n    }\n  };\n  PivotStage.prototype.executePivotOff = function (changedPath) {\n    this.aggregationColumnsHashLastTime = null;\n    this.uniqueValues = {};\n    if (this.columnController.isSecondaryColumnsPresent()) {\n      this.columnController.setSecondaryColumns(null, \"rowModelUpdated\");\n      if (changedPath) {\n        changedPath.setInactive();\n      }\n    }\n  };\n  PivotStage.prototype.executePivotOn = function (rootNode, changedPath) {\n    var uniqueValues = this.bucketUpRowNodes(rootNode);\n    var uniqueValuesChanged = this.setUniqueValues(uniqueValues);\n    var aggregationColumns = this.columnController.getValueColumns();\n    var aggregationColumnsHash = aggregationColumns.map(function (column) {\n      return column.getId();\n    }).join('#');\n    var aggregationFuncsHash = aggregationColumns.map(function (column) {\n      return column.getAggFunc().toString();\n    }).join('#');\n    var aggregationColumnsChanged = this.aggregationColumnsHashLastTime !== aggregationColumnsHash;\n    var aggregationFuncsChanged = this.aggregationFuncsHashLastTime !== aggregationFuncsHash;\n    this.aggregationColumnsHashLastTime = aggregationColumnsHash;\n    this.aggregationFuncsHashLastTime = aggregationFuncsHash;\n    if (uniqueValuesChanged || aggregationColumnsChanged || aggregationFuncsChanged) {\n      var _a = this.pivotColDefService.createPivotColumnDefs(this.uniqueValues),\n        pivotColumnGroupDefs = _a.pivotColumnGroupDefs,\n        pivotColumnDefs = _a.pivotColumnDefs;\n      this.pivotColumnDefs = pivotColumnDefs;\n      this.columnController.setSecondaryColumns(pivotColumnGroupDefs, \"rowModelUpdated\");\n      // because the secondary columns have changed, then the aggregation needs to visit the whole\n      // tree again, so we make the changedPath not active, to force aggregation to visit all paths.\n      if (changedPath) {\n        changedPath.setInactive();\n      }\n    }\n  };\n  PivotStage.prototype.setUniqueValues = function (newValues) {\n    var json1 = JSON.stringify(newValues);\n    var json2 = JSON.stringify(this.uniqueValues);\n    var uniqueValuesChanged = json1 !== json2;\n    // we only continue the below if the unique values are different, as otherwise\n    // the result will be the same as the last time we did it\n    if (uniqueValuesChanged) {\n      this.uniqueValues = newValues;\n      return true;\n    } else {\n      return false;\n    }\n  };\n  // returns true if values were different\n  PivotStage.prototype.bucketUpRowNodes = function (rootNode) {\n    var _this = this;\n    // accessed from inside inner function\n    var uniqueValues = {};\n    // finds all leaf groups and calls mapRowNode with it\n    var recursivelySearchForLeafNodes = function recursivelySearchForLeafNodes(rowNode) {\n      if (rowNode.leafGroup) {\n        _this.bucketRowNode(rowNode, uniqueValues);\n      } else {\n        rowNode.childrenAfterFilter.forEach(function (child) {\n          recursivelySearchForLeafNodes(child);\n        });\n      }\n    };\n    recursivelySearchForLeafNodes(rootNode);\n    return uniqueValues;\n  };\n  PivotStage.prototype.bucketRowNode = function (rowNode, uniqueValues) {\n    var pivotColumns = this.columnController.getPivotColumns();\n    if (pivotColumns.length === 0) {\n      rowNode.childrenMapped = null;\n      return;\n    }\n    rowNode.childrenMapped = this.bucketChildren(rowNode.childrenAfterFilter, pivotColumns, 0, uniqueValues);\n  };\n  PivotStage.prototype.bucketChildren = function (children, pivotColumns, pivotIndex, uniqueValues) {\n    var _this = this;\n    var mappedChildren = {};\n    var pivotColumn = pivotColumns[pivotIndex];\n    // map the children out based on the pivot column\n    children.forEach(function (child) {\n      var key = _this.valueService.getKeyForNode(pivotColumn, child);\n      if (agGridCommunity._.missing(key)) {\n        key = '';\n      }\n      if (!uniqueValues[key]) {\n        uniqueValues[key] = {};\n      }\n      if (!mappedChildren[key]) {\n        mappedChildren[key] = [];\n      }\n      mappedChildren[key].push(child);\n    });\n    // if it's the last pivot column, return as is, otherwise go one level further in the map\n    if (pivotIndex === pivotColumns.length - 1) {\n      return mappedChildren;\n    } else {\n      var result_1 = {};\n      agGridCommunity._.iterateObject(mappedChildren, function (key, value) {\n        result_1[key] = _this.bucketChildren(value, pivotColumns, pivotIndex + 1, uniqueValues[key]);\n      });\n      return result_1;\n    }\n  };\n  PivotStage.prototype.getPivotColumnDefs = function () {\n    return this.pivotColumnDefs;\n  };\n  __decorate$b([agGridCommunity.Autowired('valueService')], PivotStage.prototype, \"valueService\", void 0);\n  __decorate$b([agGridCommunity.Autowired('columnController')], PivotStage.prototype, \"columnController\", void 0);\n  __decorate$b([agGridCommunity.Autowired('pivotColDefService')], PivotStage.prototype, \"pivotColDefService\", void 0);\n  PivotStage = __decorate$b([agGridCommunity.Bean('pivotStage')], PivotStage);\n  return PivotStage;\n}(agGridCommunity.BeanStub);\nvar __extends$c = undefined && undefined.__extends || function () {\n  var _extendStatics13 = function extendStatics(d, b) {\n    _extendStatics13 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics13(d, b);\n  };\n  return function (d, b) {\n    _extendStatics13(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$c = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar AggFuncService = /** @class */function (_super) {\n  __extends$c(AggFuncService, _super);\n  function AggFuncService() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.aggFuncsMap = {};\n    _this.initialised = false;\n    return _this;\n  }\n  AggFuncService_1 = AggFuncService;\n  AggFuncService.prototype.init = function () {\n    if (this.initialised) {\n      return;\n    }\n    this.initialiseWithDefaultAggregations();\n    this.addAggFuncs(this.gridOptionsWrapper.getAggFuncs());\n  };\n  AggFuncService.prototype.initialiseWithDefaultAggregations = function () {\n    this.aggFuncsMap[AggFuncService_1.AGG_SUM] = aggSum;\n    this.aggFuncsMap[AggFuncService_1.AGG_FIRST] = aggFirst;\n    this.aggFuncsMap[AggFuncService_1.AGG_LAST] = aggLast;\n    this.aggFuncsMap[AggFuncService_1.AGG_MIN] = aggMin;\n    this.aggFuncsMap[AggFuncService_1.AGG_MAX] = aggMax;\n    this.aggFuncsMap[AggFuncService_1.AGG_COUNT] = aggCount;\n    this.aggFuncsMap[AggFuncService_1.AGG_AVG] = aggAvg;\n    this.initialised = true;\n  };\n  AggFuncService.prototype.getDefaultAggFunc = function (column) {\n    var allKeys = this.getFuncNames(column);\n    // use 'sum' if it's a) allowed for the column and b) still registered\n    // (ie not removed by user)\n    var sumInKeysList = agGridCommunity._.includes(allKeys, AggFuncService_1.AGG_SUM);\n    var sumInFuncs = agGridCommunity._.exists(this.aggFuncsMap[AggFuncService_1.AGG_SUM]);\n    if (sumInKeysList && sumInFuncs) {\n      return AggFuncService_1.AGG_SUM;\n    }\n    return agGridCommunity._.existsAndNotEmpty(allKeys) ? allKeys[0] : null;\n  };\n  AggFuncService.prototype.addAggFuncs = function (aggFuncs) {\n    agGridCommunity._.iterateObject(aggFuncs, this.addAggFunc.bind(this));\n  };\n  AggFuncService.prototype.addAggFunc = function (key, aggFunc) {\n    this.init();\n    this.aggFuncsMap[key] = aggFunc;\n  };\n  AggFuncService.prototype.getAggFunc = function (name) {\n    this.init();\n    return this.aggFuncsMap[name];\n  };\n  AggFuncService.prototype.getFuncNames = function (column) {\n    var userAllowedFuncs = column.getColDef().allowedAggFuncs;\n    return userAllowedFuncs == null ? Object.keys(this.aggFuncsMap).sort() : userAllowedFuncs;\n  };\n  AggFuncService.prototype.clear = function () {\n    this.aggFuncsMap = {};\n  };\n  var AggFuncService_1;\n  AggFuncService.AGG_SUM = 'sum';\n  AggFuncService.AGG_FIRST = 'first';\n  AggFuncService.AGG_LAST = 'last';\n  AggFuncService.AGG_MIN = 'min';\n  AggFuncService.AGG_MAX = 'max';\n  AggFuncService.AGG_COUNT = 'count';\n  AggFuncService.AGG_AVG = 'avg';\n  __decorate$c([agGridCommunity.Autowired('gridOptionsWrapper')], AggFuncService.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$c([agGridCommunity.PostConstruct], AggFuncService.prototype, \"init\", null);\n  AggFuncService = AggFuncService_1 = __decorate$c([agGridCommunity.Bean('aggFuncService')], AggFuncService);\n  return AggFuncService;\n}(agGridCommunity.BeanStub);\nfunction aggSum(params) {\n  var values = params.values;\n  var result = null; // the logic ensures that we never combine bigint arithmetic with numbers, but TS is hard to please\n  // for optimum performance, we use a for loop here rather than calling any helper methods or using functional code\n  for (var i = 0; i < values.length; i++) {\n    var value = values[i];\n    if (typeof value === 'number') {\n      if (result === null) {\n        result = value;\n      } else {\n        result += typeof result === 'number' ? value : BigInt(value);\n      }\n    } else if (typeof value === 'bigint') {\n      if (result === null) {\n        result = value;\n      } else {\n        result = (typeof result === 'bigint' ? result : BigInt(result)) + value;\n      }\n    }\n  }\n  return result;\n}\nfunction aggFirst(params) {\n  return params.values.length > 0 ? params.values[0] : null;\n}\nfunction aggLast(params) {\n  return params.values.length > 0 ? agGridCommunity._.last(params.values) : null;\n}\nfunction aggMin(params) {\n  var values = params.values;\n  var result = null;\n  // for optimum performance, we use a for loop here rather than calling any helper methods or using functional code\n  for (var i = 0; i < values.length; i++) {\n    var value = values[i];\n    if ((typeof value === 'number' || typeof value === 'bigint') && (result === null || result > value)) {\n      result = value;\n    }\n  }\n  return result;\n}\nfunction aggMax(params) {\n  var values = params.values;\n  var result = null;\n  // for optimum performance, we use a for loop here rather than calling any helper methods or using functional code\n  for (var i = 0; i < values.length; i++) {\n    var value = values[i];\n    if ((typeof value === 'number' || typeof value === 'bigint') && (result === null || result < value)) {\n      result = value;\n    }\n  }\n  return result;\n}\nfunction aggCount(params) {\n  var values = params.values;\n  var result = 0;\n  // for optimum performance, we use a for loop here rather than calling any helper methods or using functional code\n  for (var i = 0; i < values.length; i++) {\n    var value = values[i];\n    // check if the value is from a group, in which case use the group's count\n    result += value != null && typeof value.value === 'number' ? value.value : 1;\n  }\n  return {\n    value: result,\n    toString: function toString() {\n      return this.value.toString();\n    },\n    // used for sorting\n    toNumber: function toNumber() {\n      return this.value;\n    }\n  };\n}\n// the average function is tricky as the multiple levels require weighted averages\n// for the non-leaf node aggregations.\nfunction aggAvg(params) {\n  var values = params.values;\n  var sum = 0; // the logic ensures that we never combine bigint arithmetic with numbers, but TS is hard to please\n  var count = 0;\n  // for optimum performance, we use a for loop here rather than calling any helper methods or using functional code\n  for (var i = 0; i < values.length; i++) {\n    var value_1 = values[i];\n    var valueToAdd = null;\n    if (typeof value_1 === 'number' || typeof value_1 === 'bigint') {\n      valueToAdd = value_1;\n      count++;\n    } else if (value_1 != null && (typeof value_1.value === 'number' || typeof value_1.value === 'bigint') && typeof value_1.count === 'number') {\n      // we are aggregating groups, so we take the aggregated values to calculated a weighted average\n      valueToAdd = value_1.value * (typeof value_1.value === 'number' ? value_1.count : BigInt(value_1.count));\n      count += value_1.count;\n    }\n    if (typeof valueToAdd === 'number') {\n      sum += typeof sum === 'number' ? valueToAdd : BigInt(valueToAdd);\n    } else if (typeof valueToAdd === 'bigint') {\n      sum = (typeof sum === 'bigint' ? sum : BigInt(sum)) + valueToAdd;\n    }\n  }\n  var value = null;\n  // avoid divide by zero error\n  if (count > 0) {\n    value = sum / (typeof sum === 'number' ? count : BigInt(count));\n  }\n  // the result will be an object. when this cell is rendered, only the avg is shown.\n  // however when this cell is part of another aggregation, the count is also needed\n  // to create a weighted average for the next level.\n  return {\n    count: count,\n    value: value,\n    // the grid by default uses toString to render values for an object, so this\n    // is a trick to get the default cellRenderer to display the avg value\n    toString: function toString() {\n      return typeof this.value === 'number' || typeof this.value === 'bigint' ? this.value.toString() : '';\n    },\n    // used for sorting\n    toNumber: function toNumber() {\n      return this.value;\n    }\n  };\n}\nvar __extends$d = undefined && undefined.__extends || function () {\n  var _extendStatics14 = function extendStatics(d, b) {\n    _extendStatics14 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics14(d, b);\n  };\n  return function (d, b) {\n    _extendStatics14(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$d = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar DropZoneColumnComp = /** @class */function (_super) {\n  __extends$d(DropZoneColumnComp, _super);\n  function DropZoneColumnComp(column, dragSourceDropTarget, ghost, valueColumn, horizontal) {\n    var _this = _super.call(this) || this;\n    _this.column = column;\n    _this.dragSourceDropTarget = dragSourceDropTarget;\n    _this.ghost = ghost;\n    _this.valueColumn = valueColumn;\n    _this.horizontal = horizontal;\n    _this.popupShowing = false;\n    return _this;\n  }\n  DropZoneColumnComp.prototype.init = function () {\n    this.setTemplate(DropZoneColumnComp.TEMPLATE);\n    this.addElementClasses(this.getGui());\n    this.addElementClasses(this.eDragHandle, 'drag-handle');\n    this.addElementClasses(this.eText, 'text');\n    this.addElementClasses(this.eButton, 'button');\n    this.eDragHandle.appendChild(agGridCommunity._.createIconNoSpan('columnDrag', this.gridOptionsWrapper));\n    this.eButton.appendChild(agGridCommunity._.createIconNoSpan('cancel', this.gridOptionsWrapper));\n    this.displayName = this.columnController.getDisplayNameForColumn(this.column, 'columnDrop');\n    this.setupComponents();\n    if (!this.ghost && !this.gridOptionsWrapper.isFunctionsReadOnly()) {\n      this.addDragSource();\n    }\n  };\n  DropZoneColumnComp.prototype.addDragSource = function () {\n    var _this = this;\n    var dragSource = {\n      type: agGridCommunity.DragSourceType.ToolPanel,\n      eElement: this.eDragHandle,\n      defaultIconName: agGridCommunity.DragAndDropService.ICON_HIDE,\n      getDragItem: function getDragItem() {\n        return _this.createDragItem();\n      },\n      dragItemName: this.displayName,\n      dragSourceDropTarget: this.dragSourceDropTarget\n    };\n    this.dragAndDropService.addDragSource(dragSource, true);\n    this.addDestroyFunc(function () {\n      return _this.dragAndDropService.removeDragSource(dragSource);\n    });\n  };\n  DropZoneColumnComp.prototype.createDragItem = function () {\n    var visibleState = {};\n    visibleState[this.column.getId()] = this.column.isVisible();\n    return {\n      columns: [this.column],\n      visibleState: visibleState\n    };\n  };\n  DropZoneColumnComp.prototype.setupComponents = function () {\n    this.setTextValue();\n    this.setupRemove();\n    if (this.ghost) {\n      agGridCommunity._.addCssClass(this.getGui(), 'ag-column-drop-cell-ghost');\n    }\n    if (this.valueColumn && !this.gridOptionsWrapper.isFunctionsReadOnly()) {\n      this.addGuiEventListener('click', this.onShowAggFuncSelection.bind(this));\n    }\n  };\n  DropZoneColumnComp.prototype.setupRemove = function () {\n    var _this = this;\n    agGridCommunity._.setDisplayed(this.eButton, !this.gridOptionsWrapper.isFunctionsReadOnly());\n    this.addManagedListener(this.eButton, 'click', function (mouseEvent) {\n      var agEvent = {\n        type: DropZoneColumnComp.EVENT_COLUMN_REMOVE\n      };\n      _this.dispatchEvent(agEvent);\n      mouseEvent.stopPropagation();\n    });\n    var touchListener = new agGridCommunity.TouchListener(this.eButton);\n    this.addManagedListener(touchListener, agGridCommunity.TouchListener.EVENT_TAP, function (event) {\n      var agEvent = {\n        type: DropZoneColumnComp.EVENT_COLUMN_REMOVE\n      };\n      _this.dispatchEvent(agEvent);\n    });\n    this.addDestroyFunc(touchListener.destroy.bind(touchListener));\n  };\n  DropZoneColumnComp.prototype.setTextValue = function () {\n    var displayValue;\n    if (this.valueColumn) {\n      var aggFunc = this.column.getAggFunc();\n      // if aggFunc is a string, we can use it, but if it's a function, then we swap with 'func'\n      var aggFuncString = typeof aggFunc === 'string' ? aggFunc : 'agg';\n      var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n      var aggFuncStringTranslated = localeTextFunc(aggFuncString, aggFuncString);\n      displayValue = aggFuncStringTranslated + \"(\" + this.displayName + \")\";\n    } else {\n      displayValue = this.displayName;\n    }\n    var displayValueSanitised = agGridCommunity._.escapeString(displayValue);\n    this.eText.innerHTML = displayValueSanitised;\n  };\n  DropZoneColumnComp.prototype.onShowAggFuncSelection = function () {\n    var _this = this;\n    if (this.popupShowing) {\n      return;\n    }\n    this.popupShowing = true;\n    var virtualList = new agGridCommunity.VirtualList('select-agg-func');\n    var rows = this.aggFuncService.getFuncNames(this.column);\n    virtualList.setModel({\n      getRow: function getRow(index) {\n        return rows[index];\n      },\n      getRowCount: function getRowCount() {\n        return rows.length;\n      }\n    });\n    this.getContext().createBean(virtualList);\n    var ePopup = agGridCommunity._.loadTemplate('<div class=\"ag-select-agg-func-popup\"></div>');\n    ePopup.style.top = '0px';\n    ePopup.style.left = '0px';\n    ePopup.appendChild(virtualList.getGui());\n    // ePopup.style.height = this.gridOptionsWrapper.getAggFuncPopupHeight() + 'px';\n    ePopup.style.width = this.getGui().clientWidth + 'px';\n    var popupHiddenFunc = function popupHiddenFunc() {\n      _this.destroyBean(virtualList);\n      _this.popupShowing = false;\n    };\n    var hidePopup = this.popupService.addPopup({\n      modal: true,\n      eChild: ePopup,\n      closeOnEsc: true,\n      closedCallback: popupHiddenFunc\n    });\n    virtualList.setComponentCreator(this.createAggSelect.bind(this, hidePopup));\n    this.popupService.positionPopupUnderComponent({\n      type: 'aggFuncSelect',\n      eventSource: this.getGui(),\n      ePopup: ePopup,\n      keepWithinBounds: true,\n      column: this.column\n    });\n    virtualList.refresh();\n  };\n  DropZoneColumnComp.prototype.createAggSelect = function (hidePopup, value) {\n    var _this = this;\n    var itemSelected = function itemSelected() {\n      hidePopup();\n      if (_this.gridOptionsWrapper.isFunctionsPassive()) {\n        var event_1 = {\n          type: agGridCommunity.Events.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,\n          columns: [_this.column],\n          aggFunc: value,\n          api: _this.gridApi,\n          columnApi: _this.columnApi\n        };\n        _this.eventService.dispatchEvent(event_1);\n      } else {\n        _this.columnController.setColumnAggFunc(_this.column, value, \"toolPanelDragAndDrop\");\n      }\n    };\n    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n    var aggFuncString = value.toString();\n    var aggFuncStringTranslated = localeTextFunc(aggFuncString, aggFuncString);\n    var comp = new AggItemComp(itemSelected, aggFuncStringTranslated);\n    return comp;\n  };\n  DropZoneColumnComp.prototype.addElementClasses = function (el, suffix) {\n    suffix = suffix ? \"-\" + suffix : '';\n    agGridCommunity._.addCssClass(el, \"ag-column-drop-cell\" + suffix);\n    var direction = this.horizontal ? 'horizontal' : 'vertical';\n    agGridCommunity._.addCssClass(el, \"ag-column-drop-\" + direction + \"-cell\" + suffix);\n  };\n  DropZoneColumnComp.EVENT_COLUMN_REMOVE = 'columnRemove';\n  DropZoneColumnComp.TEMPLATE = \"<span>\\n          <span ref=\\\"eDragHandle\\\" class=\\\"ag-drag-handle ag-column-drop-cell-drag-handle\\\"></span>\\n          <span ref=\\\"eText\\\" class=\\\"ag-column-drop-cell-text\\\"></span>\\n          <span ref=\\\"eButton\\\" class=\\\"ag-column-drop-cell-button\\\"></span>\\n        </span>\";\n  __decorate$d([agGridCommunity.Autowired('dragAndDropService')], DropZoneColumnComp.prototype, \"dragAndDropService\", void 0);\n  __decorate$d([agGridCommunity.Autowired('columnController')], DropZoneColumnComp.prototype, \"columnController\", void 0);\n  __decorate$d([agGridCommunity.Autowired('popupService')], DropZoneColumnComp.prototype, \"popupService\", void 0);\n  __decorate$d([agGridCommunity.Optional('aggFuncService')], DropZoneColumnComp.prototype, \"aggFuncService\", void 0);\n  __decorate$d([agGridCommunity.Autowired('gridOptionsWrapper')], DropZoneColumnComp.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$d([agGridCommunity.Autowired('columnApi')], DropZoneColumnComp.prototype, \"columnApi\", void 0);\n  __decorate$d([agGridCommunity.Autowired('gridApi')], DropZoneColumnComp.prototype, \"gridApi\", void 0);\n  __decorate$d([agGridCommunity.RefSelector('eText')], DropZoneColumnComp.prototype, \"eText\", void 0);\n  __decorate$d([agGridCommunity.RefSelector('eDragHandle')], DropZoneColumnComp.prototype, \"eDragHandle\", void 0);\n  __decorate$d([agGridCommunity.RefSelector('eButton')], DropZoneColumnComp.prototype, \"eButton\", void 0);\n  __decorate$d([agGridCommunity.PostConstruct], DropZoneColumnComp.prototype, \"init\", null);\n  return DropZoneColumnComp;\n}(agGridCommunity.Component);\nvar AggItemComp = /** @class */function (_super) {\n  __extends$d(AggItemComp, _super);\n  function AggItemComp(itemSelected, value) {\n    var _this = _super.call(this, '<div class=\"ag-select-agg-func-item\"/>') || this;\n    _this.getGui().innerText = value;\n    _this.value = value;\n    _this.addGuiEventListener('click', itemSelected);\n    return _this;\n  }\n  return AggItemComp;\n}(agGridCommunity.Component);\nvar __extends$e = undefined && undefined.__extends || function () {\n  var _extendStatics15 = function extendStatics(d, b) {\n    _extendStatics15 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics15(d, b);\n  };\n  return function (d, b) {\n    _extendStatics15(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar BaseDropZonePanel = /** @class */function (_super) {\n  __extends$e(BaseDropZonePanel, _super);\n  function BaseDropZonePanel(horizontal, valueColumn) {\n    var _this = _super.call(this, \"<div class=\\\"ag-unselectable\\\"></div>\") || this;\n    _this.horizontal = horizontal;\n    _this.valueColumn = valueColumn;\n    _this.state = BaseDropZonePanel.STATE_NOT_DRAGGING;\n    _this.guiDestroyFunctions = [];\n    _this.childColumnComponents = [];\n    _this.addElementClasses(_this.getGui());\n    _this.eColumnDropList = document.createElement('div');\n    _this.addElementClasses(_this.eColumnDropList, 'list');\n    return _this;\n  }\n  BaseDropZonePanel.prototype.isHorizontal = function () {\n    return this.horizontal;\n  };\n  BaseDropZonePanel.prototype.setBeans = function (beans) {\n    this.beans = beans;\n  };\n  BaseDropZonePanel.prototype.destroy = function () {\n    this.destroyGui();\n    _super.prototype.destroy.call(this);\n  };\n  BaseDropZonePanel.prototype.destroyGui = function () {\n    this.guiDestroyFunctions.forEach(function (func) {\n      return func();\n    });\n    this.guiDestroyFunctions.length = 0;\n    this.childColumnComponents.length = 0;\n    agGridCommunity._.clearElement(this.getGui());\n    agGridCommunity._.clearElement(this.eColumnDropList);\n  };\n  BaseDropZonePanel.prototype.init = function (params) {\n    this.params = params;\n    this.addManagedListener(this.beans.eventService, agGridCommunity.Events.EVENT_COLUMN_EVERYTHING_CHANGED, this.refreshGui.bind(this));\n    this.addManagedListener(this.beans.gridOptionsWrapper, 'functionsReadOnly', this.refreshGui.bind(this));\n    this.setupDropTarget();\n    // we don't know if this bean will be initialised before columnController.\n    // if columnController first, then below will work\n    // if columnController second, then below will put blank in, and then above event gets first when columnController is set up\n    this.refreshGui();\n  };\n  BaseDropZonePanel.prototype.addElementClasses = function (el, suffix) {\n    suffix = suffix ? \"-\" + suffix : '';\n    agGridCommunity._.addCssClass(el, \"ag-column-drop\" + suffix);\n    var direction = this.horizontal ? 'horizontal' : 'vertical';\n    agGridCommunity._.addCssClass(el, \"ag-column-drop-\" + direction + suffix);\n  };\n  BaseDropZonePanel.prototype.setupDropTarget = function () {\n    this.dropTarget = {\n      getContainer: this.getGui.bind(this),\n      getIconName: this.getIconName.bind(this),\n      onDragging: this.onDragging.bind(this),\n      onDragEnter: this.onDragEnter.bind(this),\n      onDragLeave: this.onDragLeave.bind(this),\n      onDragStop: this.onDragStop.bind(this),\n      isInterestedIn: this.isInterestedIn.bind(this)\n    };\n    this.beans.dragAndDropService.addDropTarget(this.dropTarget);\n  };\n  BaseDropZonePanel.prototype.isInterestedIn = function (type) {\n    // not interested in row drags\n    return type === agGridCommunity.DragSourceType.HeaderCell || type === agGridCommunity.DragSourceType.ToolPanel;\n  };\n  BaseDropZonePanel.prototype.checkInsertIndex = function (draggingEvent) {\n    var newIndex = this.horizontal ? this.getNewHorizontalInsertIndex(draggingEvent) : this.getNewVerticalInsertIndex(draggingEvent);\n    // <0 happens when drag is no a direction we are interested in, eg drag is up/down but in horizontal panel\n    if (newIndex < 0) {\n      return false;\n    }\n    var changed = newIndex !== this.insertIndex;\n    if (changed) {\n      this.insertIndex = newIndex;\n    }\n    return changed;\n  };\n  BaseDropZonePanel.prototype.getNewHorizontalInsertIndex = function (draggingEvent) {\n    if (agGridCommunity._.missing(draggingEvent.hDirection)) {\n      return -1;\n    }\n    var newIndex = 0;\n    var mouseEvent = draggingEvent.event;\n    var enableRtl = this.beans.gridOptionsWrapper.isEnableRtl();\n    var goingLeft = draggingEvent.hDirection === agGridCommunity.HorizontalDirection.Left;\n    var mouseX = mouseEvent.clientX;\n    this.childColumnComponents.forEach(function (childColumn) {\n      var rect = childColumn.getGui().getBoundingClientRect();\n      var rectX = goingLeft ? rect.right : rect.left;\n      var horizontalFit = enableRtl ? mouseX <= rectX : mouseX >= rectX;\n      if (horizontalFit) {\n        newIndex++;\n      }\n    });\n    return newIndex;\n  };\n  BaseDropZonePanel.prototype.getNewVerticalInsertIndex = function (draggingEvent) {\n    if (agGridCommunity._.missing(draggingEvent.vDirection)) {\n      return -1;\n    }\n    var newIndex = 0;\n    var mouseEvent = draggingEvent.event;\n    this.childColumnComponents.forEach(function (childColumn) {\n      var rect = childColumn.getGui().getBoundingClientRect();\n      var verticalFit = mouseEvent.clientY >= (draggingEvent.vDirection === agGridCommunity.VerticalDirection.Down ? rect.top : rect.bottom);\n      if (verticalFit) {\n        newIndex++;\n      }\n    });\n    return newIndex;\n  };\n  BaseDropZonePanel.prototype.checkDragStartedBySelf = function (draggingEvent) {\n    if (this.state !== BaseDropZonePanel.STATE_NOT_DRAGGING) {\n      return;\n    }\n    this.state = BaseDropZonePanel.STATE_REARRANGE_COLUMNS;\n    this.potentialDndColumns = draggingEvent.dragSource.getDragItem().columns || [];\n    this.refreshGui();\n    this.checkInsertIndex(draggingEvent);\n    this.refreshGui();\n  };\n  BaseDropZonePanel.prototype.onDragging = function (draggingEvent) {\n    this.checkDragStartedBySelf(draggingEvent);\n    if (this.checkInsertIndex(draggingEvent)) {\n      this.refreshGui();\n    }\n  };\n  BaseDropZonePanel.prototype.onDragEnter = function (draggingEvent) {\n    // this will contain all columns that are potential drops\n    var dragColumns = draggingEvent.dragSource.getDragItem().columns || [];\n    this.state = BaseDropZonePanel.STATE_NEW_COLUMNS_IN;\n    // take out columns that are not droppable\n    var goodDragColumns = dragColumns.filter(this.isColumnDroppable.bind(this));\n    if (goodDragColumns.length > 0) {\n      this.potentialDndColumns = goodDragColumns;\n      this.checkInsertIndex(draggingEvent);\n      this.refreshGui();\n    }\n  };\n  BaseDropZonePanel.prototype.isPotentialDndColumns = function () {\n    return agGridCommunity._.existsAndNotEmpty(this.potentialDndColumns);\n  };\n  BaseDropZonePanel.prototype.onDragLeave = function (draggingEvent) {\n    // if the dragging started from us, we remove the group, however if it started\n    // someplace else, then we don't, as it was only 'asking'\n    if (this.state === BaseDropZonePanel.STATE_REARRANGE_COLUMNS) {\n      var columns = draggingEvent.dragSource.getDragItem().columns || [];\n      this.removeColumns(columns);\n    }\n    if (this.isPotentialDndColumns()) {\n      this.potentialDndColumns = [];\n      this.refreshGui();\n    }\n    this.state = BaseDropZonePanel.STATE_NOT_DRAGGING;\n  };\n  BaseDropZonePanel.prototype.onDragStop = function () {\n    if (this.isPotentialDndColumns()) {\n      var success = false;\n      if (this.state === BaseDropZonePanel.STATE_NEW_COLUMNS_IN) {\n        this.addColumns(this.potentialDndColumns);\n        success = true;\n      } else {\n        success = this.rearrangeColumns(this.potentialDndColumns);\n      }\n      this.potentialDndColumns = [];\n      // If the function is passive, then we don't refresh, as we assume the client application\n      // is going to call setRowGroups / setPivots / setValues at a later point which will then\n      // cause a refresh. This gives a nice GUI where the ghost stays until the app has caught\n      // up with the changes. However, if there was no change in the order, then we do need to\n      // refresh to reset the columns\n      if (!this.beans.gridOptionsWrapper.isFunctionsPassive() || !success) {\n        this.refreshGui();\n      }\n    }\n    this.state = BaseDropZonePanel.STATE_NOT_DRAGGING;\n  };\n  BaseDropZonePanel.prototype.removeColumns = function (columnsToRemove) {\n    var newColumnList = this.getExistingColumns().filter(function (col) {\n      return !agGridCommunity._.includes(columnsToRemove, col);\n    });\n    this.updateColumns(newColumnList);\n  };\n  BaseDropZonePanel.prototype.addColumns = function (columnsToAdd) {\n    if (!columnsToAdd) {\n      return;\n    }\n    var newColumnList = this.getExistingColumns().slice();\n    var colsToAddNoDuplicates = columnsToAdd.filter(function (col) {\n      return newColumnList.indexOf(col) < 0;\n    });\n    agGridCommunity._.insertArrayIntoArray(newColumnList, colsToAddNoDuplicates, this.insertIndex);\n    this.updateColumns(newColumnList);\n  };\n  BaseDropZonePanel.prototype.rearrangeColumns = function (columnsToAdd) {\n    var newColumnList = this.getNonGhostColumns().slice();\n    agGridCommunity._.insertArrayIntoArray(newColumnList, columnsToAdd, this.insertIndex);\n    if (agGridCommunity._.areEqual(newColumnList, this.getExistingColumns())) {\n      return false;\n    } else {\n      this.updateColumns(newColumnList);\n      return true;\n    }\n  };\n  BaseDropZonePanel.prototype.refreshGui = function () {\n    // we reset the scroll position after the refresh.\n    // if we don't do this, then the list will always scroll to the top\n    // each time we refresh it. this is because part of the refresh empties\n    // out the list which sets scroll to zero. so the user could be just\n    // reordering the list - we want to prevent the resetting of the scroll.\n    // this is relevant for vertical display only (as horizontal has no scroll)\n    var scrollTop = this.eColumnDropList.scrollTop;\n    this.destroyGui();\n    this.addIconAndTitleToGui();\n    this.addEmptyMessageToGui();\n    this.addColumnsToGui();\n    if (!this.isHorizontal()) {\n      this.eColumnDropList.scrollTop = scrollTop;\n    }\n  };\n  BaseDropZonePanel.prototype.getNonGhostColumns = function () {\n    var _this = this;\n    var existingColumns = this.getExistingColumns();\n    if (this.isPotentialDndColumns()) {\n      return existingColumns.filter(function (column) {\n        return !agGridCommunity._.includes(_this.potentialDndColumns, column);\n      });\n    } else {\n      return existingColumns;\n    }\n  };\n  BaseDropZonePanel.prototype.addColumnsToGui = function () {\n    var _this = this;\n    var nonGhostColumns = this.getNonGhostColumns();\n    var addingGhosts = this.isPotentialDndColumns();\n    var itemsToAddToGui = [];\n    nonGhostColumns.forEach(function (column, index) {\n      if (addingGhosts && index >= _this.insertIndex) {\n        return;\n      }\n      var columnComponent = _this.createColumnComponent(column, false);\n      itemsToAddToGui.push(columnComponent);\n    });\n    if (this.isPotentialDndColumns()) {\n      this.potentialDndColumns.forEach(function (column) {\n        var columnComponent = _this.createColumnComponent(column, true);\n        itemsToAddToGui.push(columnComponent);\n      });\n      nonGhostColumns.forEach(function (column, index) {\n        if (index < _this.insertIndex) {\n          return;\n        }\n        var columnComponent = _this.createColumnComponent(column, false);\n        itemsToAddToGui.push(columnComponent);\n      });\n    }\n    this.getGui().appendChild(this.eColumnDropList);\n    itemsToAddToGui.forEach(function (columnComponent, index) {\n      if (index > 0) {\n        _this.addArrow(_this.eColumnDropList);\n      }\n      _this.eColumnDropList.appendChild(columnComponent.getGui());\n    });\n  };\n  BaseDropZonePanel.prototype.createColumnComponent = function (column, ghost) {\n    var _this = this;\n    var columnComponent = new DropZoneColumnComp(column, this.dropTarget, ghost, this.valueColumn, this.horizontal);\n    columnComponent.addEventListener(DropZoneColumnComp.EVENT_COLUMN_REMOVE, this.removeColumns.bind(this, [column]));\n    this.beans.context.createBean(columnComponent);\n    this.guiDestroyFunctions.push(function () {\n      return _this.destroyBean(columnComponent);\n    });\n    if (!ghost) {\n      this.childColumnComponents.push(columnComponent);\n    }\n    return columnComponent;\n  };\n  BaseDropZonePanel.prototype.addIconAndTitleToGui = function () {\n    var eGroupIcon = this.params.icon;\n    var eTitleBar = document.createElement('div');\n    this.addElementClasses(eTitleBar, 'title-bar');\n    this.addElementClasses(eGroupIcon, 'icon');\n    agGridCommunity._.addOrRemoveCssClass(this.getGui(), 'ag-column-drop-empty', this.isExistingColumnsEmpty());\n    eTitleBar.appendChild(eGroupIcon);\n    if (!this.horizontal) {\n      var eTitle = document.createElement('span');\n      this.addElementClasses(eTitle, 'title');\n      eTitle.innerHTML = this.params.title;\n      eTitleBar.appendChild(eTitle);\n    }\n    this.getGui().appendChild(eTitleBar);\n  };\n  BaseDropZonePanel.prototype.isExistingColumnsEmpty = function () {\n    return this.getExistingColumns().length === 0;\n  };\n  BaseDropZonePanel.prototype.addEmptyMessageToGui = function () {\n    if (!this.isExistingColumnsEmpty() || this.isPotentialDndColumns()) {\n      return;\n    }\n    var eMessage = document.createElement('span');\n    eMessage.innerHTML = this.params.emptyMessage;\n    this.addElementClasses(eMessage, 'empty-message');\n    this.eColumnDropList.appendChild(eMessage);\n  };\n  BaseDropZonePanel.prototype.addArrow = function (eParent) {\n    // only add the arrows if the layout is horizontal\n    if (this.horizontal) {\n      // for RTL it's a left arrow, otherwise it's a right arrow\n      var enableRtl = this.beans.gridOptionsWrapper.isEnableRtl();\n      var icon = agGridCommunity._.createIconNoSpan(enableRtl ? 'smallLeft' : 'smallRight', this.beans.gridOptionsWrapper);\n      this.addElementClasses(icon, 'cell-separator');\n      eParent.appendChild(icon);\n    }\n  };\n  BaseDropZonePanel.STATE_NOT_DRAGGING = 'notDragging';\n  BaseDropZonePanel.STATE_NEW_COLUMNS_IN = 'newColumnsIn';\n  BaseDropZonePanel.STATE_REARRANGE_COLUMNS = 'rearrangeColumns';\n  return BaseDropZonePanel;\n}(agGridCommunity.Component);\nvar __extends$f = undefined && undefined.__extends || function () {\n  var _extendStatics16 = function extendStatics(d, b) {\n    _extendStatics16 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics16(d, b);\n  };\n  return function (d, b) {\n    _extendStatics16(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$e = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar RowGroupDropZonePanel = /** @class */function (_super) {\n  __extends$f(RowGroupDropZonePanel, _super);\n  function RowGroupDropZonePanel(horizontal) {\n    return _super.call(this, horizontal, false) || this;\n  }\n  RowGroupDropZonePanel.prototype.passBeansUp = function () {\n    _super.prototype.setBeans.call(this, {\n      gridOptionsWrapper: this.gridOptionsWrapper,\n      eventService: this.eventService,\n      context: this.getContext(),\n      loggerFactory: this.loggerFactory,\n      dragAndDropService: this.dragAndDropService\n    });\n    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n    var emptyMessage = localeTextFunc('rowGroupColumnsEmptyMessage', 'Drag here to set row groups');\n    var title = localeTextFunc('groups', 'Row Groups');\n    _super.prototype.init.call(this, {\n      dragAndDropIcon: agGridCommunity.DragAndDropService.ICON_GROUP,\n      icon: agGridCommunity._.createIconNoSpan('rowGroupPanel', this.gridOptionsWrapper, null),\n      emptyMessage: emptyMessage,\n      title: title\n    });\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.refreshGui.bind(this));\n  };\n  RowGroupDropZonePanel.prototype.isColumnDroppable = function (column) {\n    // we never allow grouping of secondary columns\n    if (this.gridOptionsWrapper.isFunctionsReadOnly() || !column.isPrimary()) {\n      return false;\n    }\n    return column.isAllowRowGroup() && !column.isRowGroupActive();\n  };\n  RowGroupDropZonePanel.prototype.updateColumns = function (columns) {\n    if (this.gridOptionsWrapper.isFunctionsPassive()) {\n      var event_1 = {\n        type: agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,\n        columns: columns,\n        api: this.gridApi,\n        columnApi: this.columnApi\n      };\n      this.eventService.dispatchEvent(event_1);\n    } else {\n      this.columnController.setRowGroupColumns(columns, \"toolPanelUi\");\n    }\n  };\n  RowGroupDropZonePanel.prototype.getIconName = function () {\n    return this.isPotentialDndColumns() ? agGridCommunity.DragAndDropService.ICON_GROUP : agGridCommunity.DragAndDropService.ICON_NOT_ALLOWED;\n  };\n  RowGroupDropZonePanel.prototype.getExistingColumns = function () {\n    return this.columnController.getRowGroupColumns();\n  };\n  __decorate$e([agGridCommunity.Autowired('columnController')], RowGroupDropZonePanel.prototype, \"columnController\", void 0);\n  __decorate$e([agGridCommunity.Autowired('gridOptionsWrapper')], RowGroupDropZonePanel.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$e([agGridCommunity.Autowired('loggerFactory')], RowGroupDropZonePanel.prototype, \"loggerFactory\", void 0);\n  __decorate$e([agGridCommunity.Autowired('dragAndDropService')], RowGroupDropZonePanel.prototype, \"dragAndDropService\", void 0);\n  __decorate$e([agGridCommunity.Autowired('columnApi')], RowGroupDropZonePanel.prototype, \"columnApi\", void 0);\n  __decorate$e([agGridCommunity.Autowired('gridApi')], RowGroupDropZonePanel.prototype, \"gridApi\", void 0);\n  __decorate$e([agGridCommunity.PostConstruct], RowGroupDropZonePanel.prototype, \"passBeansUp\", null);\n  return RowGroupDropZonePanel;\n}(BaseDropZonePanel);\nvar __extends$g = undefined && undefined.__extends || function () {\n  var _extendStatics17 = function extendStatics(d, b) {\n    _extendStatics17 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics17(d, b);\n  };\n  return function (d, b) {\n    _extendStatics17(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$f = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PivotDropZonePanel = /** @class */function (_super) {\n  __extends$g(PivotDropZonePanel, _super);\n  function PivotDropZonePanel(horizontal) {\n    return _super.call(this, horizontal, false) || this;\n  }\n  PivotDropZonePanel.prototype.passBeansUp = function () {\n    _super.prototype.setBeans.call(this, {\n      gridOptionsWrapper: this.gridOptionsWrapper,\n      eventService: this.eventService,\n      context: this.getContext(),\n      loggerFactory: this.loggerFactory,\n      dragAndDropService: this.dragAndDropService\n    });\n    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n    var emptyMessage = localeTextFunc('pivotColumnsEmptyMessage', 'Drag here to set column labels');\n    var title = localeTextFunc('pivots', 'Column Labels');\n    _super.prototype.init.call(this, {\n      dragAndDropIcon: agGridCommunity.DragAndDropService.ICON_GROUP,\n      icon: agGridCommunity._.createIconNoSpan('pivotPanel', this.gridOptionsWrapper, null),\n      emptyMessage: emptyMessage,\n      title: title\n    });\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_EVERYTHING_CHANGED, this.refresh.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGED, this.refresh.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.checkVisibility.bind(this));\n    this.refresh();\n  };\n  PivotDropZonePanel.prototype.refresh = function () {\n    this.checkVisibility();\n    this.refreshGui();\n  };\n  PivotDropZonePanel.prototype.checkVisibility = function () {\n    var pivotMode = this.columnController.isPivotMode();\n    if (this.isHorizontal()) {\n      // what we do for horizontal (ie the pivot panel at the top) depends\n      // on the user property as well as pivotMode.\n      switch (this.gridOptionsWrapper.getPivotPanelShow()) {\n        case 'always':\n          this.setDisplayed(pivotMode);\n          break;\n        case 'onlyWhenPivoting':\n          var pivotActive = this.columnController.isPivotActive();\n          this.setDisplayed(pivotMode && pivotActive);\n          break;\n        default:\n          // never show it\n          this.setDisplayed(false);\n          break;\n      }\n    } else {\n      // in toolPanel, the pivot panel is always shown when pivot mode is on\n      this.setDisplayed(pivotMode);\n    }\n  };\n  PivotDropZonePanel.prototype.isColumnDroppable = function (column) {\n    // we never allow grouping of secondary columns\n    if (this.gridOptionsWrapper.isFunctionsReadOnly() || !column.isPrimary()) {\n      return false;\n    }\n    return column.isAllowPivot() && !column.isPivotActive();\n  };\n  PivotDropZonePanel.prototype.updateColumns = function (columns) {\n    if (this.gridOptionsWrapper.isFunctionsPassive()) {\n      var event_1 = {\n        type: agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,\n        columns: columns,\n        api: this.gridApi,\n        columnApi: this.columnApi\n      };\n      this.eventService.dispatchEvent(event_1);\n    } else {\n      this.columnController.setPivotColumns(columns, \"toolPanelUi\");\n    }\n  };\n  PivotDropZonePanel.prototype.getIconName = function () {\n    return this.isPotentialDndColumns() ? agGridCommunity.DragAndDropService.ICON_PIVOT : agGridCommunity.DragAndDropService.ICON_NOT_ALLOWED;\n  };\n  PivotDropZonePanel.prototype.getExistingColumns = function () {\n    return this.columnController.getPivotColumns();\n  };\n  __decorate$f([agGridCommunity.Autowired('columnController')], PivotDropZonePanel.prototype, \"columnController\", void 0);\n  __decorate$f([agGridCommunity.Autowired('gridOptionsWrapper')], PivotDropZonePanel.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$f([agGridCommunity.Autowired('loggerFactory')], PivotDropZonePanel.prototype, \"loggerFactory\", void 0);\n  __decorate$f([agGridCommunity.Autowired('dragAndDropService')], PivotDropZonePanel.prototype, \"dragAndDropService\", void 0);\n  __decorate$f([agGridCommunity.Autowired('columnApi')], PivotDropZonePanel.prototype, \"columnApi\", void 0);\n  __decorate$f([agGridCommunity.Autowired('gridApi')], PivotDropZonePanel.prototype, \"gridApi\", void 0);\n  __decorate$f([agGridCommunity.PostConstruct], PivotDropZonePanel.prototype, \"passBeansUp\", null);\n  return PivotDropZonePanel;\n}(BaseDropZonePanel);\nvar __extends$h = undefined && undefined.__extends || function () {\n  var _extendStatics18 = function extendStatics(d, b) {\n    _extendStatics18 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics18(d, b);\n  };\n  return function (d, b) {\n    _extendStatics18(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$g = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar GridHeaderDropZones = /** @class */function (_super) {\n  __extends$h(GridHeaderDropZones, _super);\n  function GridHeaderDropZones() {\n    return _super.call(this) || this;\n  }\n  GridHeaderDropZones.prototype.postConstruct = function () {\n    this.setGui(this.createNorthPanel());\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.onRowGroupChanged.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_EVERYTHING_CHANGED, this.onRowGroupChanged.bind(this));\n    this.onRowGroupChanged();\n  };\n  GridHeaderDropZones.prototype.createNorthPanel = function () {\n    var _this = this;\n    var topPanelGui = document.createElement('div');\n    var dropPanelVisibleListener = this.onDropPanelVisible.bind(this);\n    agGridCommunity._.addCssClass(topPanelGui, 'ag-column-drop-wrapper');\n    this.rowGroupComp = new RowGroupDropZonePanel(true);\n    this.createManagedBean(this.rowGroupComp);\n    this.pivotComp = new PivotDropZonePanel(true);\n    this.createManagedBean(this.pivotComp);\n    topPanelGui.appendChild(this.rowGroupComp.getGui());\n    topPanelGui.appendChild(this.pivotComp.getGui());\n    this.rowGroupComp.addEventListener(agGridCommunity.Component.EVENT_DISPLAYED_CHANGED, dropPanelVisibleListener);\n    this.pivotComp.addEventListener(agGridCommunity.Component.EVENT_DISPLAYED_CHANGED, dropPanelVisibleListener);\n    this.addDestroyFunc(function () {\n      _this.rowGroupComp.removeEventListener(agGridCommunity.Component.EVENT_DISPLAYED_CHANGED, dropPanelVisibleListener);\n      _this.pivotComp.removeEventListener(agGridCommunity.Component.EVENT_DISPLAYED_CHANGED, dropPanelVisibleListener);\n    });\n    this.onDropPanelVisible();\n    return topPanelGui;\n  };\n  GridHeaderDropZones.prototype.onDropPanelVisible = function () {\n    var bothDisplayed = this.rowGroupComp.isDisplayed() && this.pivotComp.isDisplayed();\n    this.rowGroupComp.addOrRemoveCssClass('ag-column-drop-horizontal-half-width', bothDisplayed);\n    this.pivotComp.addOrRemoveCssClass('ag-column-drop-horizontal-half-width', bothDisplayed);\n  };\n  GridHeaderDropZones.prototype.onRowGroupChanged = function () {\n    if (!this.rowGroupComp) {\n      return;\n    }\n    var rowGroupPanelShow = this.gridOptionsWrapper.getRowGroupPanelShow();\n    if (rowGroupPanelShow === agGridCommunity.Constants.ALWAYS) {\n      this.rowGroupComp.setDisplayed(true);\n    } else if (rowGroupPanelShow === agGridCommunity.Constants.ONLY_WHEN_GROUPING) {\n      var grouping = !this.columnController.isRowGroupEmpty();\n      this.rowGroupComp.setDisplayed(grouping);\n    } else {\n      this.rowGroupComp.setDisplayed(false);\n    }\n  };\n  __decorate$g([agGridCommunity.Autowired('gridOptionsWrapper')], GridHeaderDropZones.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$g([agGridCommunity.Autowired('columnController')], GridHeaderDropZones.prototype, \"columnController\", void 0);\n  __decorate$g([agGridCommunity.PostConstruct], GridHeaderDropZones.prototype, \"postConstruct\", null);\n  return GridHeaderDropZones;\n}(agGridCommunity.Component);\nvar RowGroupingModule = {\n  moduleName: agGridCommunity.ModuleNames.RowGroupingModule,\n  beans: [AggregationStage, GroupStage, PivotColDefService, PivotStage, AggFuncService],\n  agStackComponents: [{\n    componentName: 'AgGridHeaderDropZones',\n    componentClass: GridHeaderDropZones\n  }],\n  dependantModules: [EnterpriseCoreModule]\n};\nvar __extends$i = undefined && undefined.__extends || function () {\n  var _extendStatics19 = function extendStatics(d, b) {\n    _extendStatics19 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics19(d, b);\n  };\n  return function (d, b) {\n    _extendStatics19(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$h = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ValuesDropZonePanel = /** @class */function (_super) {\n  __extends$i(ValuesDropZonePanel, _super);\n  function ValuesDropZonePanel(horizontal) {\n    return _super.call(this, horizontal, true) || this;\n  }\n  ValuesDropZonePanel.prototype.passBeansUp = function () {\n    _super.prototype.setBeans.call(this, {\n      gridOptionsWrapper: this.gridOptionsWrapper,\n      eventService: this.eventService,\n      context: this.getContext(),\n      loggerFactory: this.loggerFactory,\n      dragAndDropService: this.dragAndDropService\n    });\n    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n    var emptyMessage = localeTextFunc('valueColumnsEmptyMessage', 'Drag here to aggregate');\n    var title = localeTextFunc('values', 'Values');\n    _super.prototype.init.call(this, {\n      dragAndDropIcon: agGridCommunity.DragAndDropService.ICON_AGGREGATE,\n      icon: agGridCommunity._.createIconNoSpan('valuePanel', this.gridOptionsWrapper, null),\n      emptyMessage: emptyMessage,\n      title: title\n    });\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGED, this.refreshGui.bind(this));\n  };\n  ValuesDropZonePanel.prototype.getIconName = function () {\n    return this.isPotentialDndColumns() ? agGridCommunity.DragAndDropService.ICON_AGGREGATE : agGridCommunity.DragAndDropService.ICON_NOT_ALLOWED;\n  };\n  ValuesDropZonePanel.prototype.isColumnDroppable = function (column) {\n    // we never allow grouping of secondary columns\n    if (this.gridOptionsWrapper.isFunctionsReadOnly() || !column.isPrimary()) {\n      return false;\n    }\n    return column.isAllowValue() && !column.isValueActive();\n  };\n  ValuesDropZonePanel.prototype.updateColumns = function (columns) {\n    if (this.gridOptionsWrapper.isFunctionsPassive()) {\n      var event_1 = {\n        type: agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST,\n        columns: columns,\n        api: this.gridApi,\n        columnApi: this.columnApi\n      };\n      this.eventService.dispatchEvent(event_1);\n    } else {\n      this.columnController.setValueColumns(columns, \"toolPanelUi\");\n    }\n  };\n  ValuesDropZonePanel.prototype.getExistingColumns = function () {\n    return this.columnController.getValueColumns();\n  };\n  __decorate$h([agGridCommunity.Autowired('columnController')], ValuesDropZonePanel.prototype, \"columnController\", void 0);\n  __decorate$h([agGridCommunity.Autowired('gridOptionsWrapper')], ValuesDropZonePanel.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$h([agGridCommunity.Autowired('loggerFactory')], ValuesDropZonePanel.prototype, \"loggerFactory\", void 0);\n  __decorate$h([agGridCommunity.Autowired('dragAndDropService')], ValuesDropZonePanel.prototype, \"dragAndDropService\", void 0);\n  __decorate$h([agGridCommunity.Autowired('columnApi')], ValuesDropZonePanel.prototype, \"columnApi\", void 0);\n  __decorate$h([agGridCommunity.Autowired('gridApi')], ValuesDropZonePanel.prototype, \"gridApi\", void 0);\n  __decorate$h([agGridCommunity.PostConstruct], ValuesDropZonePanel.prototype, \"passBeansUp\", null);\n  return ValuesDropZonePanel;\n}(BaseDropZonePanel);\nvar __extends$j = undefined && undefined.__extends || function () {\n  var _extendStatics20 = function extendStatics(d, b) {\n    _extendStatics20 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics20(d, b);\n  };\n  return function (d, b) {\n    _extendStatics20(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$i = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PrimaryColsPanel = /** @class */function (_super) {\n  __extends$j(PrimaryColsPanel, _super);\n  function PrimaryColsPanel() {\n    return _super.call(this, PrimaryColsPanel.TEMPLATE, true) || this;\n  }\n  // we allow dragging in the toolPanel, but not when this component appears in the column menu\n  PrimaryColsPanel.prototype.init = function (allowDragging, params, eventType) {\n    this.allowDragging = allowDragging;\n    this.params = params;\n    this.eventType = eventType;\n    this.primaryColsHeaderPanel.init(this.params);\n    var hideFilter = this.params.suppressColumnFilter;\n    var hideSelect = this.params.suppressColumnSelectAll;\n    var hideExpand = this.params.suppressColumnExpandAll;\n    if (hideExpand && hideFilter && hideSelect) {\n      this.primaryColsHeaderPanel.setDisplayed(false);\n    }\n    this.addManagedListener(this.primaryColsListPanel, 'groupExpanded', this.onGroupExpanded.bind(this));\n    this.addManagedListener(this.primaryColsListPanel, 'selectionChanged', this.onSelectionChange.bind(this));\n    this.primaryColsListPanel.init(this.params, this.allowDragging, this.eventType);\n    this.addManagedListener(this.primaryColsHeaderPanel, 'expandAll', this.onExpandAll.bind(this));\n    this.addManagedListener(this.primaryColsHeaderPanel, 'collapseAll', this.onCollapseAll.bind(this));\n    this.addManagedListener(this.primaryColsHeaderPanel, 'selectAll', this.onSelectAll.bind(this));\n    this.addManagedListener(this.primaryColsHeaderPanel, 'unselectAll', this.onUnselectAll.bind(this));\n    this.addManagedListener(this.primaryColsHeaderPanel, 'filterChanged', this.onFilterChanged.bind(this));\n  };\n  PrimaryColsPanel.prototype.onExpandAll = function () {\n    this.primaryColsListPanel.doSetExpandedAll(true);\n  };\n  PrimaryColsPanel.prototype.onCollapseAll = function () {\n    this.primaryColsListPanel.doSetExpandedAll(false);\n  };\n  PrimaryColsPanel.prototype.expandGroups = function (groupIds) {\n    this.primaryColsListPanel.setGroupsExpanded(true, groupIds);\n  };\n  PrimaryColsPanel.prototype.collapseGroups = function (groupIds) {\n    this.primaryColsListPanel.setGroupsExpanded(false, groupIds);\n  };\n  PrimaryColsPanel.prototype.setColumnLayout = function (colDefs) {\n    this.primaryColsListPanel.setColumnLayout(colDefs);\n  };\n  PrimaryColsPanel.prototype.onFilterChanged = function (event) {\n    this.primaryColsListPanel.setFilterText(event.filterText);\n  };\n  PrimaryColsPanel.prototype.syncLayoutWithGrid = function () {\n    this.primaryColsListPanel.onColumnsChanged();\n  };\n  PrimaryColsPanel.prototype.onSelectAll = function () {\n    this.primaryColsListPanel.doSetSelectedAll(true);\n  };\n  PrimaryColsPanel.prototype.onUnselectAll = function () {\n    this.primaryColsListPanel.doSetSelectedAll(false);\n  };\n  PrimaryColsPanel.prototype.onGroupExpanded = function (event) {\n    this.primaryColsHeaderPanel.setExpandState(event.state);\n  };\n  PrimaryColsPanel.prototype.onSelectionChange = function (event) {\n    this.primaryColsHeaderPanel.setSelectionState(event.state);\n  };\n  PrimaryColsPanel.TEMPLATE = \"<div class=\\\"ag-column-select\\\">\\n            <ag-primary-cols-header ref=\\\"primaryColsHeaderPanel\\\"></ag-primary-cols-header>\\n            <ag-primary-cols-list ref=\\\"primaryColsListPanel\\\"></ag-primary-cols-list>\\n        </div>\";\n  __decorate$i([agGridCommunity.RefSelector('primaryColsHeaderPanel')], PrimaryColsPanel.prototype, \"primaryColsHeaderPanel\", void 0);\n  __decorate$i([agGridCommunity.RefSelector('primaryColsListPanel')], PrimaryColsPanel.prototype, \"primaryColsListPanel\", void 0);\n  return PrimaryColsPanel;\n}(agGridCommunity.ManagedFocusComponent);\nvar __extends$k = undefined && undefined.__extends || function () {\n  var _extendStatics21 = function extendStatics(d, b) {\n    _extendStatics21 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics21(d, b);\n  };\n  return function (d, b) {\n    _extendStatics21(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$j = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ColumnToolPanel = /** @class */function (_super) {\n  __extends$k(ColumnToolPanel, _super);\n  function ColumnToolPanel() {\n    var _this = _super.call(this, ColumnToolPanel.TEMPLATE) || this;\n    _this.initialised = false;\n    _this.childDestroyFuncs = [];\n    return _this;\n  }\n  // lazy initialise the panel\n  ColumnToolPanel.prototype.setVisible = function (visible) {\n    _super.prototype.setDisplayed.call(this, visible);\n    if (visible && !this.initialised) {\n      this.init(this.params);\n    }\n  };\n  ColumnToolPanel.prototype.init = function (params) {\n    var _this = this;\n    var defaultParams = {\n      suppressSideButtons: false,\n      suppressColumnSelectAll: false,\n      suppressColumnFilter: false,\n      suppressColumnExpandAll: false,\n      contractColumnSelection: false,\n      suppressPivotMode: false,\n      suppressRowGroups: false,\n      suppressValues: false,\n      suppressPivots: false,\n      suppressSyncLayoutWithGrid: false,\n      api: this.gridApi,\n      columnApi: this.columnApi\n    };\n    agGridCommunity._.mergeDeep(defaultParams, params);\n    this.params = defaultParams;\n    if (this.isRowGroupingModuleLoaded() && !this.params.suppressPivotMode) {\n      this.pivotModePanel = this.createBean(new PivotModePanel()); // DO NOT CHANGE TO createManagedBean\n      this.childDestroyFuncs.push(function () {\n        return _this.destroyBean(_this.pivotModePanel);\n      });\n      this.appendChild(this.pivotModePanel);\n    }\n    this.primaryColsPanel = this.createBean(new PrimaryColsPanel()); // DO NOT CHANGE TO createManagedBean\n    this.childDestroyFuncs.push(function () {\n      return _this.destroyBean(_this.primaryColsPanel);\n    });\n    this.primaryColsPanel.init(true, this.params, \"toolPanelUi\");\n    agGridCommunity._.addCssClass(this.primaryColsPanel.getGui(), 'ag-column-panel-column-select');\n    this.appendChild(this.primaryColsPanel);\n    if (this.isRowGroupingModuleLoaded()) {\n      if (!this.params.suppressRowGroups) {\n        this.rowGroupDropZonePanel = this.createBean(new RowGroupDropZonePanel(false)); // DO NOT CHANGE TO createManagedBean\n        this.childDestroyFuncs.push(function () {\n          return _this.destroyBean(_this.rowGroupDropZonePanel);\n        });\n        this.appendChild(this.rowGroupDropZonePanel);\n      }\n      if (!this.params.suppressValues) {\n        this.valuesDropZonePanel = this.createBean(new ValuesDropZonePanel(false)); // DO NOT CHANGE TO createManagedBean\n        this.childDestroyFuncs.push(function () {\n          return _this.destroyBean(_this.valuesDropZonePanel);\n        });\n        this.appendChild(this.valuesDropZonePanel);\n      }\n      if (!this.params.suppressPivots) {\n        this.pivotDropZonePanel = this.createBean(new PivotDropZonePanel(false)); // DO NOT CHANGE TO createManagedBean\n        this.childDestroyFuncs.push(function () {\n          return _this.destroyBean(_this.pivotDropZonePanel);\n        });\n        this.appendChild(this.pivotDropZonePanel);\n      }\n      this.setLastVisible();\n      var pivotModeListener_1 = this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.setLastVisible.bind(this));\n      this.childDestroyFuncs.push(function () {\n        return pivotModeListener_1();\n      });\n    }\n    this.initialised = true;\n  };\n  ColumnToolPanel.prototype.setPivotModeSectionVisible = function (visible) {\n    var _this = this;\n    if (!this.isRowGroupingModuleLoaded()) {\n      return;\n    }\n    if (this.pivotModePanel) {\n      this.pivotModePanel.setDisplayed(visible);\n    } else if (visible) {\n      this.pivotModePanel = this.createBean(new PivotModePanel());\n      // ensure pivot mode panel is positioned at the top of the columns tool panel\n      this.getGui().insertBefore(this.pivotModePanel.getGui(), this.getGui().firstChild);\n      this.childDestroyFuncs.push(function () {\n        return _this.destroyBean(_this.pivotModePanel);\n      });\n    }\n    this.setLastVisible();\n  };\n  ColumnToolPanel.prototype.setRowGroupsSectionVisible = function (visible) {\n    if (!this.isRowGroupingModuleLoaded()) {\n      return;\n    }\n    if (this.rowGroupDropZonePanel) {\n      this.rowGroupDropZonePanel.setDisplayed(visible);\n    } else if (visible) {\n      this.rowGroupDropZonePanel = this.createManagedBean(new RowGroupDropZonePanel(false));\n      this.appendChild(this.rowGroupDropZonePanel);\n    }\n    this.setLastVisible();\n  };\n  ColumnToolPanel.prototype.setValuesSectionVisible = function (visible) {\n    if (!this.isRowGroupingModuleLoaded()) {\n      return;\n    }\n    if (this.valuesDropZonePanel) {\n      this.valuesDropZonePanel.setDisplayed(visible);\n    } else if (visible) {\n      this.valuesDropZonePanel = this.createManagedBean(new ValuesDropZonePanel(false));\n      this.appendChild(this.valuesDropZonePanel);\n    }\n    this.setLastVisible();\n  };\n  ColumnToolPanel.prototype.setPivotSectionVisible = function (visible) {\n    if (!this.isRowGroupingModuleLoaded()) {\n      return;\n    }\n    if (this.pivotDropZonePanel) {\n      this.pivotDropZonePanel.setDisplayed(visible);\n    } else if (visible) {\n      this.pivotDropZonePanel = this.createManagedBean(new PivotDropZonePanel(false));\n      this.appendChild(this.pivotDropZonePanel);\n      this.pivotDropZonePanel.setDisplayed(visible);\n    }\n    this.setLastVisible();\n  };\n  ColumnToolPanel.prototype.setLastVisible = function () {\n    var eGui = this.getGui();\n    var columnDrops = Array.prototype.slice.call(eGui.querySelectorAll('.ag-column-drop'));\n    columnDrops.forEach(function (columnDrop) {\n      return agGridCommunity._.removeCssClass(columnDrop, 'ag-last-column-drop');\n    });\n    var lastVisible = agGridCommunity._.last(eGui.querySelectorAll('.ag-column-drop:not(.ag-hidden)'));\n    if (lastVisible) {\n      agGridCommunity._.addCssClass(lastVisible, 'ag-last-column-drop');\n    }\n  };\n  ColumnToolPanel.prototype.isRowGroupingModuleLoaded = function () {\n    return agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.RowGroupingModule, 'Row Grouping');\n  };\n  ColumnToolPanel.prototype.expandColumnGroups = function (groupIds) {\n    this.primaryColsPanel.expandGroups(groupIds);\n  };\n  ColumnToolPanel.prototype.collapseColumnGroups = function (groupIds) {\n    this.primaryColsPanel.collapseGroups(groupIds);\n  };\n  ColumnToolPanel.prototype.setColumnLayout = function (colDefs) {\n    this.primaryColsPanel.setColumnLayout(colDefs);\n  };\n  ColumnToolPanel.prototype.syncLayoutWithGrid = function () {\n    this.primaryColsPanel.syncLayoutWithGrid();\n  };\n  ColumnToolPanel.prototype.destroyChildren = function () {\n    this.childDestroyFuncs.forEach(function (func) {\n      return func();\n    });\n    this.childDestroyFuncs.length = 0;\n    agGridCommunity._.clearElement(this.getGui());\n  };\n  ColumnToolPanel.prototype.refresh = function () {\n    this.destroyChildren();\n    this.init(this.params);\n  };\n  // this is a user component, and IComponent has \"public destroy()\" as part of the interface.\n  // so this must be public.\n  ColumnToolPanel.prototype.destroy = function () {\n    this.destroyChildren();\n    _super.prototype.destroy.call(this);\n  };\n  ColumnToolPanel.TEMPLATE = \"<div class=\\\"ag-column-panel\\\"></div>\";\n  __decorate$j([agGridCommunity.Autowired(\"gridApi\")], ColumnToolPanel.prototype, \"gridApi\", void 0);\n  __decorate$j([agGridCommunity.Autowired(\"columnApi\")], ColumnToolPanel.prototype, \"columnApi\", void 0);\n  return ColumnToolPanel;\n}(agGridCommunity.Component);\nvar __extends$l = undefined && undefined.__extends || function () {\n  var _extendStatics22 = function extendStatics(d, b) {\n    _extendStatics22 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics22(d, b);\n  };\n  return function (d, b) {\n    _extendStatics22(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$k = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar HorizontalResizeComp = /** @class */function (_super) {\n  __extends$l(HorizontalResizeComp, _super);\n  function HorizontalResizeComp() {\n    return _super.call(this, /* html */\"<div class=\\\"ag-tool-panel-horizontal-resize\\\"></div>\") || this;\n  }\n  HorizontalResizeComp.prototype.setElementToResize = function (elementToResize) {\n    this.elementToResize = elementToResize;\n  };\n  HorizontalResizeComp.prototype.postConstruct = function () {\n    var finishedWithResizeFunc = this.horizontalResizeService.addResizeBar({\n      eResizeBar: this.getGui(),\n      dragStartPixels: 1,\n      onResizeStart: this.onResizeStart.bind(this),\n      onResizing: this.onResizing.bind(this),\n      onResizeEnd: this.onResizing.bind(this)\n    });\n    this.addDestroyFunc(finishedWithResizeFunc);\n    this.setInverted(this.gridOptionsWrapper.isEnableRtl());\n  };\n  HorizontalResizeComp.prototype.onResizeStart = function () {\n    this.startingWidth = this.elementToResize.offsetWidth;\n  };\n  HorizontalResizeComp.prototype.onResizing = function (delta) {\n    var direction = this.inverted ? -1 : 1;\n    var newWidth = Math.max(100, Math.floor(this.startingWidth - delta * direction));\n    this.elementToResize.style.width = newWidth + \"px\";\n  };\n  HorizontalResizeComp.prototype.setInverted = function (inverted) {\n    this.inverted = inverted;\n  };\n  __decorate$k([agGridCommunity.Autowired('horizontalResizeService')], HorizontalResizeComp.prototype, \"horizontalResizeService\", void 0);\n  __decorate$k([agGridCommunity.Autowired('gridOptionsWrapper')], HorizontalResizeComp.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$k([agGridCommunity.PostConstruct], HorizontalResizeComp.prototype, \"postConstruct\", null);\n  return HorizontalResizeComp;\n}(agGridCommunity.Component);\nvar __extends$m = undefined && undefined.__extends || function () {\n  var _extendStatics23 = function extendStatics(d, b) {\n    _extendStatics23 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics23(d, b);\n  };\n  return function (d, b) {\n    _extendStatics23(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$l = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar SideBarButtonsComp = /** @class */function (_super) {\n  __extends$m(SideBarButtonsComp, _super);\n  function SideBarButtonsComp() {\n    var _this = _super.call(this, SideBarButtonsComp.TEMPLATE) || this;\n    _this.buttonComps = [];\n    return _this;\n  }\n  SideBarButtonsComp.prototype.postConstruct = function () {\n    this.addManagedListener(this.getFocusableElement(), 'keydown', this.handleKeyDown.bind(this));\n  };\n  SideBarButtonsComp.prototype.handleKeyDown = function (e) {\n    if (e.keyCode !== agGridCommunity.KeyCode.TAB || !e.shiftKey) {\n      return;\n    }\n    var prevEl = this.focusController.findNextFocusableElement(this.getFocusableElement(), null, true);\n    if (!prevEl) {\n      var headerPosition = this.headerPositionUtils.findColAtEdgeForHeaderRow(0, 'start');\n      if (!headerPosition) {\n        return;\n      }\n      e.preventDefault();\n      this.focusController.focusHeaderPosition(headerPosition);\n    }\n  };\n  SideBarButtonsComp.prototype.setToolPanelDefs = function (toolPanelDefs) {\n    toolPanelDefs.forEach(this.addButtonComp.bind(this));\n  };\n  SideBarButtonsComp.prototype.setActiveButton = function (id) {\n    this.buttonComps.forEach(function (comp) {\n      comp.setSelected(id === comp.getToolPanelId());\n    });\n  };\n  SideBarButtonsComp.prototype.addButtonComp = function (def) {\n    var _this = this;\n    var buttonComp = this.createBean(new SideBarButtonComp(def));\n    this.buttonComps.push(buttonComp);\n    this.appendChild(buttonComp);\n    buttonComp.addEventListener(SideBarButtonComp.EVENT_TOGGLE_BUTTON_CLICKED, function () {\n      _this.dispatchEvent({\n        type: SideBarButtonsComp.EVENT_SIDE_BAR_BUTTON_CLICKED,\n        toolPanelId: def.id\n      });\n    });\n  };\n  SideBarButtonsComp.prototype.clearButtons = function () {\n    this.buttonComps = this.destroyBeans(this.buttonComps);\n    agGridCommunity._.clearElement(this.getGui());\n  };\n  SideBarButtonsComp.EVENT_SIDE_BAR_BUTTON_CLICKED = 'sideBarButtonClicked';\n  SideBarButtonsComp.TEMPLATE = \"<div class=\\\"ag-side-buttons\\\"></div>\";\n  __decorate$l([agGridCommunity.Autowired('focusController')], SideBarButtonsComp.prototype, \"focusController\", void 0);\n  __decorate$l([agGridCommunity.Autowired('headerPositionUtils')], SideBarButtonsComp.prototype, \"headerPositionUtils\", void 0);\n  __decorate$l([agGridCommunity.PostConstruct], SideBarButtonsComp.prototype, \"postConstruct\", null);\n  __decorate$l([agGridCommunity.PreDestroy], SideBarButtonsComp.prototype, \"clearButtons\", null);\n  return SideBarButtonsComp;\n}(agGridCommunity.Component);\nvar SideBarButtonComp = /** @class */function (_super) {\n  __extends$m(SideBarButtonComp, _super);\n  function SideBarButtonComp(toolPanelDef) {\n    var _this = _super.call(this) || this;\n    _this.toolPanelDef = toolPanelDef;\n    return _this;\n  }\n  SideBarButtonComp.prototype.getToolPanelId = function () {\n    return this.toolPanelDef.id;\n  };\n  SideBarButtonComp.prototype.postConstruct = function () {\n    var template = this.createTemplate();\n    this.setTemplate(template);\n    this.eIconWrapper.insertAdjacentElement('afterbegin', agGridCommunity._.createIconNoSpan(this.toolPanelDef.iconKey, this.gridOptionsWrapper));\n    this.addManagedListener(this.eToggleButton, 'click', this.onButtonPressed.bind(this));\n  };\n  SideBarButtonComp.prototype.createTemplate = function () {\n    var translate = this.gridOptionsWrapper.getLocaleTextFunc();\n    var def = this.toolPanelDef;\n    var label = translate(def.labelKey, def.labelDefault);\n    var res = \"<div class=\\\"ag-side-button\\\">\\n                <button type=\\\"button\\\" ref=\\\"eToggleButton\\\" class=\\\"ag-side-button-button\\\">\\n                    <div ref=\\\"eIconWrapper\\\" class=\\\"ag-side-button-icon-wrapper\\\"></div>\\n                    <span class=\\\"ag-side-button-label\\\">\" + label + \"</span>\\n                </button>\\n            </div>\";\n    return res;\n  };\n  SideBarButtonComp.prototype.onButtonPressed = function () {\n    this.dispatchEvent({\n      type: SideBarButtonComp.EVENT_TOGGLE_BUTTON_CLICKED\n    });\n  };\n  SideBarButtonComp.prototype.setSelected = function (selected) {\n    this.addOrRemoveCssClass('ag-selected', selected);\n  };\n  SideBarButtonComp.EVENT_TOGGLE_BUTTON_CLICKED = 'toggleButtonClicked';\n  __decorate$l([agGridCommunity.Autowired(\"gridOptionsWrapper\")], SideBarButtonComp.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$l([agGridCommunity.RefSelector('eToggleButton')], SideBarButtonComp.prototype, \"eToggleButton\", void 0);\n  __decorate$l([agGridCommunity.RefSelector('eIconWrapper')], SideBarButtonComp.prototype, \"eIconWrapper\", void 0);\n  __decorate$l([agGridCommunity.PostConstruct], SideBarButtonComp.prototype, \"postConstruct\", null);\n  return SideBarButtonComp;\n}(agGridCommunity.Component);\nvar __extends$n = undefined && undefined.__extends || function () {\n  var _extendStatics24 = function extendStatics(d, b) {\n    _extendStatics24 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics24(d, b);\n  };\n  return function (d, b) {\n    _extendStatics24(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$m = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ToolPanelWrapper = /** @class */function (_super) {\n  __extends$n(ToolPanelWrapper, _super);\n  function ToolPanelWrapper() {\n    return _super.call(this, ToolPanelWrapper.TEMPLATE) || this;\n  }\n  ToolPanelWrapper.prototype.getToolPanelId = function () {\n    return this.toolPanelId;\n  };\n  ToolPanelWrapper.prototype.setToolPanelDef = function (toolPanelDef) {\n    this.toolPanelId = toolPanelDef.id;\n    var params = {\n      api: this.gridOptionsWrapper.getApi(),\n      columnApi: this.gridOptionsWrapper.getColumnApi()\n    };\n    var componentPromise = this.userComponentFactory.newToolPanelComponent(toolPanelDef, params);\n    if (componentPromise == null) {\n      console.warn(\"ag-grid: error processing tool panel component \" + toolPanelDef.id + \". You need to specify either 'toolPanel' or 'toolPanelFramework'\");\n      return;\n    }\n    componentPromise.then(this.setToolPanelComponent.bind(this));\n  };\n  ToolPanelWrapper.prototype.setupResize = function () {\n    var resizeBar = this.resizeBar = new HorizontalResizeComp();\n    this.getContext().createBean(resizeBar);\n    resizeBar.setElementToResize(this.getGui());\n    this.appendChild(resizeBar);\n  };\n  ToolPanelWrapper.prototype.setToolPanelComponent = function (compInstance) {\n    var _this = this;\n    this.toolPanelCompInstance = compInstance;\n    this.appendChild(compInstance.getGui());\n    this.addDestroyFunc(function () {\n      _this.destroyBean(compInstance);\n    });\n  };\n  ToolPanelWrapper.prototype.getToolPanelInstance = function () {\n    return this.toolPanelCompInstance;\n  };\n  ToolPanelWrapper.prototype.setResizerSizerSide = function (side) {\n    var isRtl = this.gridOptionsWrapper.isEnableRtl();\n    var isLeft = side === 'left';\n    var inverted = isRtl ? isLeft : !isLeft;\n    this.resizeBar.setInverted(inverted);\n  };\n  ToolPanelWrapper.prototype.refresh = function () {\n    this.toolPanelCompInstance.refresh();\n  };\n  ToolPanelWrapper.TEMPLATE = \"<div class=\\\"ag-tool-panel-wrapper\\\"/>\";\n  __decorate$m([agGridCommunity.Autowired(\"userComponentFactory\")], ToolPanelWrapper.prototype, \"userComponentFactory\", void 0);\n  __decorate$m([agGridCommunity.Autowired(\"gridOptionsWrapper\")], ToolPanelWrapper.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$m([agGridCommunity.PostConstruct], ToolPanelWrapper.prototype, \"setupResize\", null);\n  return ToolPanelWrapper;\n}(agGridCommunity.Component);\nvar __extends$o = undefined && undefined.__extends || function () {\n  var _extendStatics25 = function extendStatics(d, b) {\n    _extendStatics25 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics25(d, b);\n  };\n  return function (d, b) {\n    _extendStatics25(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$n = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar SideBarComp = /** @class */function (_super) {\n  __extends$o(SideBarComp, _super);\n  function SideBarComp() {\n    var _this = _super.call(this, SideBarComp.TEMPLATE) || this;\n    _this.toolPanelWrappers = [];\n    return _this;\n  }\n  SideBarComp.prototype.postConstruct = function () {\n    this.sideBarButtonsComp.addEventListener(SideBarButtonsComp.EVENT_SIDE_BAR_BUTTON_CLICKED, this.onToolPanelButtonClicked.bind(this));\n    this.setSideBarDef();\n  };\n  SideBarComp.prototype.onToolPanelButtonClicked = function (event) {\n    var id = event.toolPanelId;\n    var openedItem = this.openedItem();\n    // if item was already open, we close it\n    if (openedItem === id) {\n      this.openToolPanel(undefined); // passing undefined closes\n    } else {\n      this.openToolPanel(id);\n    }\n  };\n  SideBarComp.prototype.clearDownUi = function () {\n    this.sideBarButtonsComp.clearButtons();\n    this.destroyToolPanelWrappers();\n  };\n  SideBarComp.prototype.setSideBarDef = function () {\n    // initially hide side bar\n    this.setDisplayed(false);\n    var sideBar = this.gridOptionsWrapper.getSideBar();\n    var sideBarExists = !!sideBar && !!sideBar.toolPanels;\n    if (!sideBarExists) {\n      return;\n    }\n    var shouldDisplaySideBar = sideBarExists && !sideBar.hiddenByDefault;\n    this.setDisplayed(shouldDisplaySideBar);\n    var toolPanelDefs = sideBar.toolPanels;\n    this.sideBarButtonsComp.setToolPanelDefs(toolPanelDefs);\n    this.setupToolPanels(toolPanelDefs);\n    this.setSideBarPosition(sideBar.position);\n    if (!sideBar.hiddenByDefault) {\n      this.openToolPanel(sideBar.defaultToolPanel);\n    }\n  };\n  SideBarComp.prototype.setSideBarPosition = function (position) {\n    if (!position) {\n      position = 'right';\n    }\n    var isLeft = position === 'left';\n    var resizerSide = isLeft ? 'right' : 'left';\n    var eGui = this.getGui();\n    agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-side-bar-left', isLeft);\n    agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-side-bar-right', !isLeft);\n    this.toolPanelWrappers.forEach(function (wrapper) {\n      wrapper.setResizerSizerSide(resizerSide);\n    });\n    return this;\n  };\n  SideBarComp.prototype.setupToolPanels = function (defs) {\n    var _this = this;\n    defs.forEach(function (def) {\n      if (def.id == null) {\n        console.warn(\"ag-grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id\");\n        return;\n      }\n      // helpers, in case user doesn't have the right module loaded\n      if (def.toolPanel === 'agColumnsToolPanel') {\n        var moduleMissing = !agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.ColumnToolPanelModule, 'Column Tool Panel');\n        if (moduleMissing) {\n          return;\n        }\n      }\n      if (def.toolPanel === 'agFiltersToolPanel') {\n        var moduleMissing = !agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.FiltersToolPanelModule, 'Filters Tool Panel');\n        if (moduleMissing) {\n          return;\n        }\n      }\n      var wrapper = new ToolPanelWrapper();\n      _this.getContext().createBean(wrapper);\n      wrapper.setToolPanelDef(def);\n      wrapper.setDisplayed(false);\n      _this.getGui().appendChild(wrapper.getGui());\n      _this.toolPanelWrappers.push(wrapper);\n    });\n  };\n  SideBarComp.prototype.refresh = function () {\n    this.toolPanelWrappers.forEach(function (wrapper) {\n      return wrapper.refresh();\n    });\n  };\n  SideBarComp.prototype.openToolPanel = function (key) {\n    var currentlyOpenedKey = this.openedItem();\n    if (currentlyOpenedKey === key) {\n      return;\n    }\n    this.toolPanelWrappers.forEach(function (wrapper) {\n      var show = key === wrapper.getToolPanelId();\n      wrapper.setDisplayed(show);\n    });\n    var newlyOpenedKey = this.openedItem();\n    var openToolPanelChanged = currentlyOpenedKey !== newlyOpenedKey;\n    if (openToolPanelChanged) {\n      this.sideBarButtonsComp.setActiveButton(key);\n      this.raiseToolPanelVisibleEvent(key);\n    }\n  };\n  SideBarComp.prototype.getToolPanelInstance = function (key) {\n    var toolPanelWrapper = this.toolPanelWrappers.filter(function (toolPanel) {\n      return toolPanel.getToolPanelId() === key;\n    })[0];\n    if (!toolPanelWrapper) {\n      console.warn(\"ag-grid: unable to lookup Tool Panel as invalid key supplied: \" + key);\n      return;\n    }\n    return toolPanelWrapper.getToolPanelInstance();\n  };\n  SideBarComp.prototype.raiseToolPanelVisibleEvent = function (key) {\n    var event = {\n      type: agGridCommunity.Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED,\n      source: key,\n      api: this.gridOptionsWrapper.getApi(),\n      columnApi: this.gridOptionsWrapper.getColumnApi()\n    };\n    this.eventService.dispatchEvent(event);\n  };\n  SideBarComp.prototype.close = function () {\n    this.openToolPanel(undefined);\n  };\n  SideBarComp.prototype.isToolPanelShowing = function () {\n    return !!this.openedItem();\n  };\n  SideBarComp.prototype.openedItem = function () {\n    var activeToolPanel = null;\n    this.toolPanelWrappers.forEach(function (wrapper) {\n      if (wrapper.isDisplayed()) {\n        activeToolPanel = wrapper.getToolPanelId();\n      }\n    });\n    return activeToolPanel;\n  };\n  // get called after user sets new sideBarDef via the API\n  SideBarComp.prototype.reset = function () {\n    this.clearDownUi();\n    this.setSideBarDef();\n  };\n  SideBarComp.prototype.destroyToolPanelWrappers = function () {\n    var _this = this;\n    this.toolPanelWrappers.forEach(function (wrapper) {\n      agGridCommunity._.removeFromParent(wrapper.getGui());\n      _this.destroyBean(wrapper);\n    });\n    this.toolPanelWrappers.length = 0;\n  };\n  SideBarComp.prototype.destroy = function () {\n    this.destroyToolPanelWrappers();\n    _super.prototype.destroy.call(this);\n  };\n  SideBarComp.TEMPLATE = \"<div class=\\\"ag-side-bar ag-unselectable\\\">\\n            <ag-side-bar-buttons ref=\\\"sideBarButtons\\\"></ag-side-bar-buttons>\\n        </div>\";\n  __decorate$n([agGridCommunity.Autowired(\"gridOptionsWrapper\")], SideBarComp.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$n([agGridCommunity.RefSelector('sideBarButtons')], SideBarComp.prototype, \"sideBarButtonsComp\", void 0);\n  __decorate$n([agGridCommunity.PostConstruct], SideBarComp.prototype, \"postConstruct\", null);\n  return SideBarComp;\n}(agGridCommunity.Component);\nvar __extends$p = undefined && undefined.__extends || function () {\n  var _extendStatics26 = function extendStatics(d, b) {\n    _extendStatics26 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics26(d, b);\n  };\n  return function (d, b) {\n    _extendStatics26(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$o = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ToolPanelColDefService = /** @class */function (_super) {\n  __extends$p(ToolPanelColDefService, _super);\n  function ToolPanelColDefService() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.isColGroupDef = function (colDef) {\n      return colDef && typeof colDef.children !== 'undefined';\n    };\n    _this.getId = function (colDef) {\n      return _this.isColGroupDef(colDef) ? colDef.groupId : colDef.colId;\n    };\n    return _this;\n  }\n  ToolPanelColDefService.prototype.createColumnTree = function (colDefs) {\n    var _this = this;\n    var invalidColIds = [];\n    var createDummyColGroup = function createDummyColGroup(abstractColDef, depth) {\n      if (_this.isColGroupDef(abstractColDef)) {\n        // creating 'dummy' group which is not associated with grid column group\n        var groupDef = abstractColDef;\n        var groupId = typeof groupDef.groupId !== 'undefined' ? groupDef.groupId : groupDef.headerName;\n        var group = new agGridCommunity.OriginalColumnGroup(groupDef, groupId, false, depth);\n        var children_1 = [];\n        groupDef.children.forEach(function (def) {\n          var child = createDummyColGroup(def, depth + 1);\n          // check column exists in case invalid colDef is supplied for primary column\n          if (child) {\n            children_1.push(child);\n          }\n        });\n        group.setChildren(children_1);\n        return group;\n      } else {\n        var colDef = abstractColDef;\n        var key = colDef.colId ? colDef.colId : colDef.field;\n        var column = _this.columnController.getPrimaryColumn(key);\n        if (!column) {\n          invalidColIds.push(colDef);\n        }\n        return column;\n      }\n    };\n    var mappedResults = [];\n    colDefs.forEach(function (colDef) {\n      var result = createDummyColGroup(colDef, 0);\n      if (result) {\n        // only return correctly mapped colDef results\n        mappedResults.push(result);\n      }\n    });\n    if (invalidColIds.length > 0) {\n      console.warn('ag-Grid: unable to find grid columns for the supplied colDef(s):', invalidColIds);\n    }\n    return mappedResults;\n  };\n  ToolPanelColDefService.prototype.syncLayoutWithGrid = function (syncLayoutCallback) {\n    // extract ordered list of leaf path trees (column group hierarchy for each individual leaf column)\n    var leafPathTrees = this.getLeafPathTrees();\n    // merge leaf path tree taking split column groups into account\n    var mergedColumnTrees = this.mergeLeafPathTrees(leafPathTrees);\n    // sync layout with merged column trees\n    syncLayoutCallback(mergedColumnTrees);\n  };\n  ToolPanelColDefService.prototype.getLeafPathTrees = function () {\n    // leaf tree paths are obtained by walking up the tree starting at a column until we reach the top level group.\n    var getLeafPathTree = function getLeafPathTree(node, childDef) {\n      var leafPathTree;\n      // build up tree in reverse order\n      if (node instanceof agGridCommunity.OriginalColumnGroup) {\n        if (node.isPadding()) {\n          // skip over padding groups\n          leafPathTree = childDef;\n        } else {\n          var groupDef = agGridCommunity._.assign({}, node.getColGroupDef());\n          // ensure group contains groupId\n          groupDef.groupId = node.getGroupId();\n          groupDef.children = [childDef];\n          leafPathTree = groupDef;\n        }\n      } else {\n        var colDef = agGridCommunity._.assign({}, node.getColDef());\n        // ensure col contains colId\n        colDef.colId = node.getColId();\n        leafPathTree = colDef;\n      }\n      // walk tree\n      var parent = node.getOriginalParent();\n      if (parent) {\n        // keep walking up the tree until we reach the root\n        return getLeafPathTree(parent, leafPathTree);\n      } else {\n        // we have reached the root - exit with resulting leaf path tree\n        return leafPathTree;\n      }\n    };\n    // obtain a sorted list of all grid columns\n    var allGridColumns = this.columnController.getAllGridColumns();\n    // only primary columns and non row group columns should appear in the tool panel\n    var allPrimaryGridColumns = allGridColumns.filter(function (column) {\n      var colDef = column.getColDef();\n      return column.isPrimary() && !colDef.showRowGroup;\n    });\n    // construct a leaf path tree for each column\n    return allPrimaryGridColumns.map(function (col) {\n      return getLeafPathTree(col, col.getColDef());\n    });\n  };\n  ToolPanelColDefService.prototype.mergeLeafPathTrees = function (leafPathTrees) {\n    var _this = this;\n    var matchingRootGroupIds = function matchingRootGroupIds(pathA, pathB) {\n      var bothPathsAreGroups = _this.isColGroupDef(pathA) && _this.isColGroupDef(pathB);\n      return bothPathsAreGroups && _this.getId(pathA) === _this.getId(pathB);\n    };\n    var mergeTrees = function mergeTrees(treeA, treeB) {\n      if (!_this.isColGroupDef(treeB)) return treeA;\n      var mergeResult = treeA;\n      var groupToMerge = treeB;\n      if (groupToMerge.children && groupToMerge.groupId) {\n        var added = _this.addChildrenToGroup(mergeResult, groupToMerge.groupId, groupToMerge.children[0]);\n        if (added) return mergeResult;\n      }\n      groupToMerge.children.forEach(function (child) {\n        return mergeTrees(mergeResult, child);\n      });\n      return mergeResult;\n    };\n    // we can't just merge the leaf path trees as groups can be split apart - instead only merge if leaf\n    // path groups with the same root group id are contiguous.\n    var mergeColDefs = [];\n    for (var i = 1; i <= leafPathTrees.length; i++) {\n      var first = leafPathTrees[i - 1];\n      var second = leafPathTrees[i];\n      if (matchingRootGroupIds(first, second)) {\n        leafPathTrees[i] = mergeTrees(first, second);\n      } else {\n        mergeColDefs.push(first);\n      }\n    }\n    return mergeColDefs;\n  };\n  ToolPanelColDefService.prototype.addChildrenToGroup = function (tree, groupId, colDef) {\n    var _this = this;\n    var subGroupIsSplit = function subGroupIsSplit(currentGroup, groupToAdd) {\n      var existingChildIds = currentGroup.children.map(_this.getId);\n      var childGroupAlreadyExists = agGridCommunity._.includes(existingChildIds, _this.getId(groupToAdd));\n      var lastChild = agGridCommunity._.last(currentGroup.children);\n      var lastChildIsDifferent = lastChild && _this.getId(lastChild) !== _this.getId(groupToAdd);\n      return childGroupAlreadyExists && lastChildIsDifferent;\n    };\n    if (!this.isColGroupDef(tree)) return true;\n    var currentGroup = tree;\n    var groupToAdd = colDef;\n    if (subGroupIsSplit(currentGroup, groupToAdd)) {\n      currentGroup.children.push(groupToAdd);\n      return true;\n    }\n    if (currentGroup.groupId === groupId) {\n      // add children that don't already exist to group\n      var existingChildIds = currentGroup.children.map(this.getId);\n      var colDefAlreadyPresent = agGridCommunity._.includes(existingChildIds, this.getId(groupToAdd));\n      if (!colDefAlreadyPresent) {\n        currentGroup.children.push(groupToAdd);\n        return true;\n      }\n    }\n    // recurse until correct group is found to add children\n    currentGroup.children.forEach(function (subGroup) {\n      return _this.addChildrenToGroup(subGroup, groupId, colDef);\n    });\n    return false;\n  };\n  __decorate$o([agGridCommunity.Autowired('columnController')], ToolPanelColDefService.prototype, \"columnController\", void 0);\n  ToolPanelColDefService = __decorate$o([agGridCommunity.Bean('toolPanelColDefService')], ToolPanelColDefService);\n  return ToolPanelColDefService;\n}(agGridCommunity.BeanStub);\nvar SideBarModule = {\n  moduleName: agGridCommunity.ModuleNames.SideBarModule,\n  beans: [ToolPanelColDefService],\n  agStackComponents: [{\n    componentName: 'AgHorizontalResize',\n    componentClass: HorizontalResizeComp\n  }, {\n    componentName: 'AgSideBar',\n    componentClass: SideBarComp\n  }, {\n    componentName: 'AgSideBarButtons',\n    componentClass: SideBarButtonsComp\n  }],\n  dependantModules: [EnterpriseCoreModule]\n};\nvar __decorate$p = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ModelItemUtils = /** @class */function () {\n  function ModelItemUtils() {}\n  ModelItemUtils.prototype.selectAllChildren = function (colTree, selectAllChecked, eventType) {\n    var cols = this.extractAllLeafColumns(colTree);\n    this.setAllColumns(cols, selectAllChecked, eventType);\n  };\n  ModelItemUtils.prototype.setColumn = function (col, selectAllChecked, eventType) {\n    this.setAllColumns([col], selectAllChecked, eventType);\n  };\n  ModelItemUtils.prototype.setAllColumns = function (cols, selectAllChecked, eventType) {\n    if (this.columnController.isPivotMode()) {\n      this.setAllPivot(cols, selectAllChecked, eventType);\n    } else {\n      this.setAllVisible(cols, selectAllChecked, eventType);\n    }\n  };\n  ModelItemUtils.prototype.extractAllLeafColumns = function (allItems) {\n    var res = [];\n    var recursiveFunc = function recursiveFunc(items) {\n      items.forEach(function (item) {\n        if (!item.isPassesFilter()) {\n          return;\n        }\n        if (item.isGroup()) {\n          recursiveFunc(item.getChildren());\n        } else {\n          res.push(item.getColumn());\n        }\n      });\n    };\n    recursiveFunc(allItems);\n    return res;\n  };\n  ModelItemUtils.prototype.setAllVisible = function (columns, visible, eventType) {\n    var colStateItems = [];\n    columns.forEach(function (col) {\n      if (col.getColDef().lockVisible) {\n        return;\n      }\n      if (col.isVisible() != visible) {\n        colStateItems.push({\n          colId: col.getId(),\n          hide: !visible\n        });\n      }\n    });\n    if (colStateItems.length > 0) {\n      this.columnController.applyColumnState({\n        state: colStateItems\n      }, eventType);\n    }\n  };\n  ModelItemUtils.prototype.setAllPivot = function (columns, value, eventType) {\n    if (this.gridOptionsWrapper.isFunctionsPassive()) {\n      this.setAllPivotPassive(columns, value);\n    } else {\n      this.setAllPivotActive(columns, value, eventType);\n    }\n  };\n  ModelItemUtils.prototype.setAllPivotPassive = function (columns, value) {\n    var copyOfPivotColumns = this.columnController.getPivotColumns().slice();\n    var copyOfValueColumns = this.columnController.getValueColumns().slice();\n    var copyOfRowGroupColumns = this.columnController.getRowGroupColumns().slice();\n    var pivotChanged = false;\n    var valueChanged = false;\n    var rowGroupChanged = false;\n    var turnOnAction = function turnOnAction(col) {\n      // don't change any column that's already got a function active\n      if (col.isAnyFunctionActive()) {\n        return;\n      }\n      if (col.isAllowValue()) {\n        copyOfValueColumns.push(col);\n        valueChanged = true;\n      } else if (col.isAllowRowGroup()) {\n        copyOfRowGroupColumns.push(col);\n        pivotChanged = true;\n      } else if (col.isAllowPivot()) {\n        copyOfPivotColumns.push(col);\n        rowGroupChanged = true;\n      }\n    };\n    var turnOffAction = function turnOffAction(col) {\n      if (!col.isAnyFunctionActive()) {\n        return;\n      }\n      if (copyOfPivotColumns.indexOf(col) >= 0) {\n        agGridCommunity._.removeFromArray(copyOfPivotColumns, col);\n        pivotChanged = true;\n      }\n      if (copyOfValueColumns.indexOf(col) >= 0) {\n        agGridCommunity._.removeFromArray(copyOfValueColumns, col);\n        valueChanged = true;\n      }\n      if (copyOfRowGroupColumns.indexOf(col) >= 0) {\n        agGridCommunity._.removeFromArray(copyOfRowGroupColumns, col);\n        rowGroupChanged = true;\n      }\n    };\n    var action = value ? turnOnAction : turnOffAction;\n    columns.forEach(action);\n    if (pivotChanged) {\n      var event_1 = {\n        type: agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,\n        columns: copyOfPivotColumns,\n        api: this.gridApi,\n        columnApi: this.columnApi\n      };\n      this.eventService.dispatchEvent(event_1);\n    }\n    if (rowGroupChanged) {\n      var event_2 = {\n        type: agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,\n        columns: copyOfRowGroupColumns,\n        api: this.gridApi,\n        columnApi: this.columnApi\n      };\n      this.eventService.dispatchEvent(event_2);\n    }\n    if (valueChanged) {\n      var event_3 = {\n        type: agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST,\n        columns: copyOfRowGroupColumns,\n        api: this.gridApi,\n        columnApi: this.columnApi\n      };\n      this.eventService.dispatchEvent(event_3);\n    }\n  };\n  ModelItemUtils.prototype.setAllPivotActive = function (columns, value, eventType) {\n    var _this = this;\n    var colStateItems = [];\n    var turnOnAction = function turnOnAction(col) {\n      // don't change any column that's already got a function active\n      if (col.isAnyFunctionActive()) {\n        return;\n      }\n      if (col.isAllowValue()) {\n        var aggFunc = typeof col.getAggFunc() === 'string' ? col.getAggFunc() : _this.aggFuncService.getDefaultAggFunc(col);\n        colStateItems.push({\n          colId: col.getId(),\n          aggFunc: aggFunc\n        });\n      } else if (col.isAllowRowGroup()) {\n        colStateItems.push({\n          colId: col.getId(),\n          rowGroup: true\n        });\n      } else if (col.isAllowPivot()) {\n        colStateItems.push({\n          colId: col.getId(),\n          pivot: true\n        });\n      }\n    };\n    var turnOffAction = function turnOffAction(col) {\n      var isActive = col.isPivotActive() || col.isRowGroupActive() || col.isValueActive();\n      if (isActive) {\n        colStateItems.push({\n          colId: col.getId(),\n          pivot: false,\n          rowGroup: false,\n          aggFunc: null\n        });\n      }\n    };\n    var action = value ? turnOnAction : turnOffAction;\n    columns.forEach(action);\n    if (colStateItems.length > 0) {\n      this.columnController.applyColumnState({\n        state: colStateItems\n      }, eventType);\n    }\n  };\n  __decorate$p([agGridCommunity.Autowired('aggFuncService')], ModelItemUtils.prototype, \"aggFuncService\", void 0);\n  __decorate$p([agGridCommunity.Autowired('columnController')], ModelItemUtils.prototype, \"columnController\", void 0);\n  __decorate$p([agGridCommunity.Autowired('gridOptionsWrapper')], ModelItemUtils.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$p([agGridCommunity.Autowired('columnApi')], ModelItemUtils.prototype, \"columnApi\", void 0);\n  __decorate$p([agGridCommunity.Autowired('gridApi')], ModelItemUtils.prototype, \"gridApi\", void 0);\n  __decorate$p([agGridCommunity.Autowired('eventService')], ModelItemUtils.prototype, \"eventService\", void 0);\n  ModelItemUtils = __decorate$p([agGridCommunity.Bean('modelItemUtils')], ModelItemUtils);\n  return ModelItemUtils;\n}();\nvar ColumnsToolPanelModule = {\n  moduleName: agGridCommunity.ModuleNames.ColumnToolPanelModule,\n  beans: [ModelItemUtils],\n  agStackComponents: [{\n    componentName: 'AgPrimaryColsHeader',\n    componentClass: PrimaryColsHeaderPanel\n  }, {\n    componentName: 'AgPrimaryColsList',\n    componentClass: PrimaryColsListPanel\n  }, {\n    componentName: 'AgPrimaryCols',\n    componentClass: PrimaryColsPanel\n  }],\n  userComponents: [{\n    componentName: 'agColumnsToolPanel',\n    componentClass: ColumnToolPanel\n  }],\n  dependantModules: [EnterpriseCoreModule, RowGroupingModule, SideBarModule]\n};\nvar coreFactory = {\n  getTemplate: function getTemplate() {\n    var dt = new Date(),\n      jsonDate = dt.toJSON();\n    return {\n      name: 'cp:coreProperties',\n      properties: {\n        prefixedAttributes: [{\n          prefix: \"xmlns:\",\n          map: {\n            cp: \"http://schemas.openxmlformats.org/package/2006/metadata/core-properties\",\n            dc: 'http://purl.org/dc/elements/1.1/',\n            dcterms: 'http://purl.org/dc/terms/',\n            dcmitype: 'http://purl.org/dc/dcmitype/',\n            xsi: 'http://www.w3.org/2001/XMLSchema-instance'\n          }\n        }]\n      },\n      children: [{\n        name: 'dc:creator',\n        textNode: 'ag-Grid'\n      }, {\n        name: 'dc:title',\n        textNode: 'Workbook'\n      }, {\n        name: 'dcterms:created',\n        properties: {\n          rawMap: {\n            'xsi:type': 'dcterms:W3CDTF'\n          }\n        },\n        textNode: jsonDate\n      }, {\n        name: 'dcterms:modified',\n        properties: {\n          rawMap: {\n            'xsi:type': 'dcterms:W3CDTF'\n          }\n        },\n        textNode: jsonDate\n      }]\n    };\n  }\n};\nvar contentTypeFactory = {\n  getTemplate: function getTemplate(config) {\n    var name = config.name,\n      ContentType = config.ContentType,\n      Extension = config.Extension,\n      PartName = config.PartName;\n    return {\n      name: name,\n      properties: {\n        rawMap: {\n          Extension: Extension,\n          PartName: PartName,\n          ContentType: ContentType\n        }\n      }\n    };\n  }\n};\nvar contentTypesFactory = {\n  getTemplate: function getTemplate() {\n    var children = [{\n      name: 'Default',\n      Extension: 'rels',\n      ContentType: 'application/vnd.openxmlformats-package.relationships+xml'\n    }, {\n      name: 'Default',\n      ContentType: 'application/xml',\n      Extension: 'xml'\n    }, {\n      name: 'Override',\n      ContentType: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml',\n      PartName: \"/xl/workbook.xml\"\n    }, {\n      name: 'Override',\n      ContentType: 'application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml',\n      PartName: '/xl/worksheets/sheet1.xml'\n    }, {\n      name: 'Override',\n      ContentType: 'application/vnd.openxmlformats-officedocument.theme+xml',\n      PartName: '/xl/theme/theme1.xml'\n    }, {\n      name: 'Override',\n      ContentType: 'application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml',\n      PartName: '/xl/styles.xml'\n    }, {\n      name: 'Override',\n      ContentType: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml',\n      PartName: '/xl/sharedStrings.xml'\n    }, {\n      name: 'Override',\n      ContentType: 'application/vnd.openxmlformats-package.core-properties+xml',\n      PartName: '/docProps/core.xml'\n    }].map(contentTypeFactory.getTemplate);\n    return {\n      name: \"Types\",\n      properties: {\n        rawMap: {\n          xmlns: \"http://schemas.openxmlformats.org/package/2006/content-types\"\n        }\n      },\n      children: children\n    };\n  }\n};\nvar getColorChildren = function getColorChildren(props) {\n  var type = props[0],\n    innerType = props[1],\n    val = props[2],\n    lastClr = props[3];\n  return {\n    name: \"a:\" + type,\n    children: [{\n      name: \"a:\" + innerType,\n      properties: {\n        rawMap: {\n          val: val,\n          lastClr: lastClr\n        }\n      }\n    }]\n  };\n};\nvar colorScheme = {\n  getTemplate: function getTemplate() {\n    return {\n      name: \"a:clrScheme\",\n      properties: {\n        rawMap: {\n          name: \"Office\"\n        }\n      },\n      children: [getColorChildren(['dk1', 'sysClr', 'windowText', '000000']), getColorChildren(['lt1', 'sysClr', 'window', 'FFFFFF']), getColorChildren(['dk2', 'srgbClr', '44546A']), getColorChildren(['lt2', 'srgbClr', 'E7E6E6']), getColorChildren(['accent1', 'srgbClr', '4472C4']), getColorChildren(['accent2', 'srgbClr', 'ED7D31']), getColorChildren(['accent3', 'srgbClr', 'A5A5A5']), getColorChildren(['accent4', 'srgbClr', 'FFC000']), getColorChildren(['accent5', 'srgbClr', '5B9BD5']), getColorChildren(['accent6', 'srgbClr', '70AD47']), getColorChildren(['hlink', 'srgbClr', '0563C1']), getColorChildren(['folHlink', 'srgbClr', '954F72'])]\n    };\n  }\n};\nvar getFont = function getFont(props) {\n  var type = props[0],\n    typeface = props[1],\n    script = props[2],\n    panose = props[3];\n  return {\n    name: \"a:\" + type,\n    properties: {\n      rawMap: {\n        script: script,\n        typeface: typeface,\n        panose: panose\n      }\n    }\n  };\n};\nvar fontScheme = {\n  getTemplate: function getTemplate() {\n    var utf8_encode = agGridCommunity._.utf8_encode;\n    return {\n      name: \"a:fontScheme\",\n      properties: {\n        rawMap: {\n          name: \"Office\"\n        }\n      },\n      children: [{\n        name: 'a:majorFont',\n        children: [getFont(['latin', 'Calibri Light', undefined, '020F0302020204030204']), getFont(['ea', '']), getFont(['cs', '']), getFont(['font', utf8_encode(' Light'), 'Jpan']), getFont(['font', utf8_encode(' '), 'Hang']), getFont(['font', utf8_encode(' Light'), 'Hans']), getFont(['font', utf8_encode(''), 'Hant']), getFont(['font', 'Times New Roman', 'Arab']), getFont(['font', 'Times New Roman', 'Hebr']), getFont(['font', 'Tahoma', 'Thai']), getFont(['font', 'Nyala', 'Ethi']), getFont(['font', 'Vrinda', 'Beng']), getFont(['font', 'Shruti', 'Gujr']), getFont(['font', 'MoolBoran', 'Khmr']), getFont(['font', 'Tunga', 'Knda']), getFont(['font', 'Raavi', 'Guru']), getFont(['font', 'Euphemia', 'Cans']), getFont(['font', 'Plantagenet Cherokee', 'Cher']), getFont(['font', 'Microsoft Yi Baiti', 'Yiii']), getFont(['font', 'Microsoft Himalaya', 'Tibt']), getFont(['font', 'MV Boli', 'Thaa']), getFont(['font', 'Mangal', 'Deva']), getFont(['font', 'Gautami', 'Telu']), getFont(['font', 'Latha', 'Taml']), getFont(['font', 'Estrangelo Edessa', 'Syrc']), getFont(['font', 'Kalinga', 'Orya']), getFont(['font', 'Kartika', 'Mlym']), getFont(['font', 'DokChampa', 'Laoo']), getFont(['font', 'Iskoola Pota', 'Sinh']), getFont(['font', 'Mongolian Baiti', 'Mong']), getFont(['font', 'Times New Roman', 'Viet']), getFont(['font', 'Microsoft Uighur', 'Uigh']), getFont(['font', 'Sylfaen', 'Geor']), getFont(['font', 'Arial', 'Armn']), getFont(['font', 'Leelawadee UI', 'Bugi']), getFont(['font', 'Microsoft JhengHei', 'Bopo']), getFont(['font', 'Javanese Text', 'Java']), getFont(['font', 'Segoe UI', 'Lisu']), getFont(['font', 'Myanmar Text', 'Mymr']), getFont(['font', 'Ebrima', 'Nkoo']), getFont(['font', 'Nirmala UI', 'Olck']), getFont(['font', 'Ebrima', 'Osma']), getFont(['font', 'Phagspa', 'Phag']), getFont(['font', 'Estrangelo Edessa', 'Syrn']), getFont(['font', 'Estrangelo Edessa', 'Syrj']), getFont(['font', 'Estrangelo Edessa', 'Syre']), getFont(['font', 'Nirmala UI', 'Sora']), getFont(['font', 'Microsoft Tai Le', 'Tale']), getFont(['font', 'Microsoft New Tai Lue', 'Talu']), getFont(['font', 'Ebrima', 'Tfng'])]\n      }, {\n        name: 'a:minorFont',\n        children: [getFont(['latin', 'Calibri', undefined, '020F0502020204030204']), getFont(['ea', '']), getFont(['cs', '']), getFont(['font', utf8_encode(''), 'Jpan']), getFont(['font', utf8_encode(' '), 'Hang']), getFont(['font', utf8_encode(''), 'Hans']), getFont(['font', utf8_encode(''), 'Hant']), getFont(['font', 'Arial', 'Arab']), getFont(['font', 'Arial', 'Hebr']), getFont(['font', 'Tahoma', 'Thai']), getFont(['font', 'Nyala', 'Ethi']), getFont(['font', 'Vrinda', 'Beng']), getFont(['font', 'Shruti', 'Gujr']), getFont(['font', 'DaunPenh', 'Khmr']), getFont(['font', 'Tunga', 'Knda']), getFont(['font', 'Raavi', 'Guru']), getFont(['font', 'Euphemia', 'Cans']), getFont(['font', 'Plantagenet Cherokee', 'Cher']), getFont(['font', 'Microsoft Yi Baiti', 'Yiii']), getFont(['font', 'Microsoft Himalaya', 'Tibt']), getFont(['font', 'MV Boli', 'Thaa']), getFont(['font', 'Mangal', 'Deva']), getFont(['font', 'Gautami', 'Telu']), getFont(['font', 'Latha', 'Taml']), getFont(['font', 'Estrangelo Edessa', 'Syrc']), getFont(['font', 'Kalinga', 'Orya']), getFont(['font', 'Kartika', 'Mlym']), getFont(['font', 'DokChampa', 'Laoo']), getFont(['font', 'Iskoola Pota', 'Sinh']), getFont(['font', 'Mongolian Baiti', 'Mong']), getFont(['font', 'Arial', 'Viet']), getFont(['font', 'Microsoft Uighur', 'Uigh']), getFont(['font', 'Sylfaen', 'Geor']), getFont(['font', 'Arial', 'Armn']), getFont(['font', 'Leelawadee UI', 'Bugi']), getFont(['font', 'Microsoft JhengHei', 'Bopo']), getFont(['font', 'Javanese Text', 'Java']), getFont(['font', 'Segoe UI', 'Lisu']), getFont(['font', 'Myanmar Text', 'Mymr']), getFont(['font', 'Ebrima', 'Nkoo']), getFont(['font', 'Nirmala UI', 'Olck']), getFont(['font', 'Ebrima', 'Osma']), getFont(['font', 'Phagspa', 'Phag']), getFont(['font', 'Estrangelo Edessa', 'Syrn']), getFont(['font', 'Estrangelo Edessa', 'Syrj']), getFont(['font', 'Estrangelo Edessa', 'Syre']), getFont(['font', 'Nirmala UI', 'Sora']), getFont(['font', 'Microsoft Tai Le', 'Tale']), getFont(['font', 'Microsoft New Tai Lue', 'Talu']), getFont(['font', 'Ebrima', 'Tfng'])]\n      }]\n    };\n  }\n};\nvar getPropertyVal = function getPropertyVal(name, val, children) {\n  return {\n    name: \"a:\" + name,\n    properties: {\n      rawMap: {\n        val: val\n      }\n    },\n    children: children\n  };\n};\nvar getGs = function getGs(props) {\n  var pos = props[0],\n    schemeColor = props[1],\n    satMod = props[2],\n    lumMod = props[3],\n    tint = props[4],\n    shade = props[5];\n  var children = [];\n  children.push(getPropertyVal('satMod', satMod));\n  if (lumMod) {\n    children.push(getPropertyVal('lumMod', lumMod));\n  }\n  if (tint) {\n    children.push(getPropertyVal('tint', tint));\n  }\n  if (shade) {\n    children.push(getPropertyVal('shade', shade));\n  }\n  return {\n    name: 'a:gs',\n    properties: {\n      rawMap: {\n        pos: pos\n      }\n    },\n    children: [{\n      name: 'a:schemeClr',\n      properties: {\n        rawMap: {\n          val: schemeColor\n        }\n      },\n      children: children\n    }]\n  };\n};\nvar getSolidFill = function getSolidFill(val, children) {\n  return {\n    name: 'a:solidFill',\n    children: [getPropertyVal('schemeClr', val, children)]\n  };\n};\nvar getGradFill = function getGradFill(props) {\n  var rotWithShape = props[0],\n    gs1 = props[1],\n    gs2 = props[2],\n    gs3 = props[3],\n    lin = props[4];\n  var ang = lin[0],\n    scaled = lin[1];\n  return {\n    name: 'a:gradFill',\n    properties: {\n      rawMap: {\n        rotWithShape: rotWithShape\n      }\n    },\n    children: [{\n      name: 'a:gsLst',\n      children: [getGs(gs1), getGs(gs2), getGs(gs3)]\n    }, {\n      name: 'a:lin',\n      properties: {\n        rawMap: {\n          ang: ang,\n          scaled: scaled\n        }\n      }\n    }]\n  };\n};\nvar getLine = function getLine(props) {\n  var w = props[0],\n    cap = props[1],\n    cmpd = props[2],\n    algn = props[3];\n  return {\n    name: 'a:ln',\n    properties: {\n      rawMap: {\n        w: w,\n        cap: cap,\n        cmpd: cmpd,\n        algn: algn\n      }\n    },\n    children: [getSolidFill('phClr'), getPropertyVal('prstDash', 'solid'), {\n      name: 'a:miter',\n      properties: {\n        rawMap: {\n          lim: '800000'\n        }\n      }\n    }]\n  };\n};\nvar getEffectStyle = function getEffectStyle(shadow) {\n  var children = [];\n  if (shadow) {\n    var blurRad = shadow[0],\n      dist = shadow[1],\n      dir = shadow[2],\n      algn = shadow[3],\n      rotWithShape = shadow[4];\n    children.push({\n      name: 'a:outerShdw',\n      properties: {\n        rawMap: {\n          blurRad: blurRad,\n          dist: dist,\n          dir: dir,\n          algn: algn,\n          rotWithShape: rotWithShape\n        }\n      },\n      children: [getPropertyVal('srgbClr', '000000', [getPropertyVal('alpha', '63000')])]\n    });\n  }\n  return {\n    name: 'a:effectStyle',\n    children: [agGridCommunity._.assign({}, {\n      name: 'a:effectLst'\n    }, children.length ? {\n      children: children\n    } : {})]\n  };\n};\nvar getFillStyleList = function getFillStyleList() {\n  return {\n    name: 'a:fillStyleLst',\n    children: [getSolidFill('phClr'), getGradFill(['1', ['0', 'phClr', '105000', '110000', '67000'], ['50000', 'phClr', '103000', '105000', '73000'], ['100000', 'phClr', '109000', '105000', '81000'], ['5400000', '0']]), getGradFill(['1', ['0', 'phClr', '103000', '102000', '94000'], ['50000', 'phClr', '110000', '100000', undefined, '100000'], ['100000', 'phClr', '120000', '99000', undefined, '78000'], ['5400000', '0']])]\n  };\n};\nvar getLineStyleList = function getLineStyleList() {\n  return {\n    name: 'a:lnStyleLst',\n    children: [getLine(['6350', 'flat', 'sng', 'ctr']), getLine(['12700', 'flat', 'sng', 'ctr']), getLine(['19050', 'flat', 'sng', 'ctr'])]\n  };\n};\nvar getEffectStyleList = function getEffectStyleList() {\n  return {\n    name: 'a:effectStyleLst',\n    children: [getEffectStyle(), getEffectStyle(), getEffectStyle(['57150', '19050', '5400000', 'ctr', '0'])]\n  };\n};\nvar getBgFillStyleList = function getBgFillStyleList() {\n  return {\n    name: 'a:bgFillStyleLst',\n    children: [getSolidFill('phClr'), getSolidFill('phClr', [getPropertyVal('tint', '95000'), getPropertyVal('satMod', '170000')]), getGradFill(['1', ['0', 'phClr', '150000', '102000', '93000', '98000'], ['50000', 'phClr', '130000', '103000', '98000', '90000'], ['100000', 'phClr', '120000', undefined, undefined, '63000'], ['5400000', '0']])]\n  };\n};\nvar formatScheme = {\n  getTemplate: function getTemplate() {\n    return {\n      name: \"a:fmtScheme\",\n      properties: {\n        rawMap: {\n          name: \"Office\"\n        }\n      },\n      children: [getFillStyleList(), getLineStyleList(), getEffectStyleList(), getBgFillStyleList()]\n    };\n  }\n};\nvar themeElements = {\n  getTemplate: function getTemplate() {\n    return {\n      name: \"a:themeElements\",\n      children: [colorScheme.getTemplate(), fontScheme.getTemplate(), formatScheme.getTemplate()]\n    };\n  }\n};\nvar officeTheme = {\n  getTemplate: function getTemplate() {\n    return {\n      name: \"a:theme\",\n      properties: {\n        prefixedAttributes: [{\n          prefix: \"xmlns:\",\n          map: {\n            a: \"http://schemas.openxmlformats.org/drawingml/2006/main\"\n          }\n        }],\n        rawMap: {\n          name: \"Office Theme\"\n        }\n      },\n      children: [themeElements.getTemplate(), {\n        name: 'a:objectDefaults'\n      }, {\n        name: 'a:extraClrSchemeLst'\n      }]\n    };\n  }\n};\nvar buildSharedString = function buildSharedString(textNode) {\n  textNode = textNode.toString();\n  var child = {\n    name: 't',\n    textNode: agGridCommunity._.utf8_encode(agGridCommunity._.escapeString(textNode))\n  };\n  // if we have leading or trailing spaces, instruct Excel not to trim them\n  var preserveSpaces = textNode.replace(/^\\s*|\\s*$/g, '').length !== textNode.length;\n  if (preserveSpaces) {\n    child.properties = {\n      rawMap: {\n        \"xml:space\": \"preserve\"\n      }\n    };\n  }\n  return {\n    name: 'si',\n    children: [child]\n  };\n};\nvar sharedStrings = {\n  getTemplate: function getTemplate(strings) {\n    return {\n      name: \"sst\",\n      properties: {\n        rawMap: {\n          xmlns: 'http://schemas.openxmlformats.org/spreadsheetml/2006/main',\n          count: strings.length,\n          uniqueCount: strings.length\n        }\n      },\n      children: strings.map(buildSharedString)\n    };\n  }\n};\nvar numberFormatFactory = {\n  getTemplate: function getTemplate(numberFormat) {\n    var formatCode = numberFormat.formatCode,\n      numFmtId = numberFormat.numFmtId;\n    return {\n      name: \"numFmt\",\n      properties: {\n        rawMap: {\n          formatCode: formatCode,\n          numFmtId: numFmtId\n        }\n      }\n    };\n  }\n};\nvar numberFormatMap = {\n  '0': 1,\n  '0.00': 2,\n  '#,##0': 3,\n  '#,##0.00': 4,\n  '0%': 9,\n  '0.00%': 10,\n  '0.00E+00': 11,\n  '# ?/?': 12,\n  '# ??/??': 13,\n  'mm-dd-yy': 14,\n  'd-mmm-yy': 15,\n  'd-mmm': 16,\n  'mmm-yy': 17,\n  'h:mm AM/PM': 18,\n  'h:mm:ss AM/PM': 19,\n  'h:mm': 20,\n  'h:mm:ss': 21,\n  'm/d/yy h:mm': 22,\n  '#,##0 ;(#,##0)': 37,\n  '#,##0 ;[Red](#,##0)': 38,\n  '#,##0.00;(#,##0.00)': 39,\n  '#,##0.00;[Red](#,##0.00)': 40,\n  'mm:ss': 45,\n  '[h]:mm:ss': 46,\n  'mmss.0': 47,\n  '##0.0E+0': 48,\n  '@': 49\n};\nvar numberFormatsFactory = {\n  getTemplate: function getTemplate(numberFormats) {\n    return {\n      name: \"numFmts\",\n      properties: {\n        rawMap: {\n          count: numberFormats.length\n        }\n      },\n      children: numberFormats.map(numberFormatFactory.getTemplate)\n    };\n  }\n};\nvar fontFactory = {\n  getTemplate: function getTemplate(font) {\n    var _a = font.size,\n      size = _a === void 0 ? 14 : _a,\n      colorTheme = font.colorTheme,\n      _b = font.color,\n      color = _b === void 0 ? '00000000' : _b,\n      _c = font.name,\n      name = _c === void 0 ? 'Calibri' : _c,\n      family = font.family,\n      scheme = font.scheme,\n      italic = font.italic,\n      bold = font.bold,\n      strike = font.strike,\n      outline = font.outline,\n      shadow = font.shadow,\n      underline = font.underline;\n    var children = [{\n      name: 'sz',\n      properties: {\n        rawMap: {\n          val: size\n        }\n      }\n    }, {\n      name: 'color',\n      properties: {\n        rawMap: {\n          theme: colorTheme,\n          rgb: color\n        }\n      }\n    }, {\n      name: 'name',\n      properties: {\n        rawMap: {\n          val: name\n        }\n      }\n    }];\n    if (family) {\n      children.push({\n        name: 'family',\n        properties: {\n          rawMap: {\n            val: family\n          }\n        }\n      });\n    }\n    if (scheme) {\n      children.push({\n        name: 'scheme',\n        properties: {\n          rawMap: {\n            val: scheme\n          }\n        }\n      });\n    }\n    if (italic) {\n      children.push({\n        name: 'i'\n      });\n    }\n    if (bold) {\n      children.push({\n        name: 'b'\n      });\n    }\n    if (strike) {\n      children.push({\n        name: 'strike'\n      });\n    }\n    if (outline) {\n      children.push({\n        name: 'outline'\n      });\n    }\n    if (shadow) {\n      children.push({\n        name: 'shadow'\n      });\n    }\n    if (underline) {\n      var lUnder = underline.toLocaleLowerCase();\n      children.push({\n        name: 'u',\n        properties: {\n          rawMap: {\n            val: lUnder === 'double' ? 'double' : 'single'\n          }\n        }\n      });\n    }\n    return {\n      name: \"font\",\n      children: children\n    };\n  }\n};\nvar getFamilyId = function getFamilyId(name) {\n  var families = ['Automatic', 'Roman', 'Swiss', 'Modern', 'Script', 'Decorative'];\n  var pos = families.indexOf(name || 'Automatic');\n  return Math.max(pos, 0);\n};\nvar fontsFactory = {\n  getTemplate: function getTemplate(fonts) {\n    return {\n      name: \"fonts\",\n      properties: {\n        rawMap: {\n          count: fonts.length\n        }\n      },\n      children: fonts.map(fontFactory.getTemplate)\n    };\n  }\n};\nvar fillFactory = {\n  getTemplate: function getTemplate(fill) {\n    var patternType = fill.patternType,\n      fgTheme = fill.fgTheme,\n      fgTint = fill.fgTint,\n      fgRgb = fill.fgRgb,\n      bgRgb = fill.bgRgb,\n      bgIndexed = fill.bgIndexed;\n    var pf = {\n      name: 'patternFill',\n      properties: {\n        rawMap: {\n          patternType: patternType\n        }\n      }\n    };\n    if (fgTheme || fgTint || fgRgb) {\n      pf.children = [{\n        name: 'fgColor',\n        properties: {\n          rawMap: {\n            theme: fgTheme,\n            tint: fgTint,\n            rgb: fgRgb\n          }\n        }\n      }];\n    }\n    if (bgIndexed) {\n      if (!pf.children) {\n        pf.children = [];\n      }\n      pf.children.push({\n        name: 'bgColor',\n        properties: {\n          rawMap: {\n            indexed: bgIndexed,\n            rgb: bgRgb\n          }\n        }\n      });\n    }\n    return {\n      name: \"fill\",\n      children: [pf]\n    };\n  }\n};\nvar fillsFactory = {\n  getTemplate: function getTemplate(fills) {\n    return {\n      name: \"fills\",\n      properties: {\n        rawMap: {\n          count: fills.length\n        }\n      },\n      children: fills.map(fillFactory.getTemplate)\n    };\n  }\n};\nvar getBorderColor = function getBorderColor(color) {\n  return {\n    name: 'color',\n    properties: {\n      rawMap: {\n        rgb: convertLegacyColor(color || '#000000')\n      }\n    }\n  };\n};\nvar borderFactory = {\n  getTemplate: function getTemplate(border) {\n    var left = border.left,\n      right = border.right,\n      top = border.top,\n      bottom = border.bottom,\n      diagonal = border.diagonal;\n    var leftChildren = left ? [getBorderColor(left.color)] : undefined;\n    var rightChildren = right ? [getBorderColor(right.color)] : undefined;\n    var topChildren = top ? [getBorderColor(top.color)] : undefined;\n    var bottomChildren = bottom ? [getBorderColor(bottom.color)] : undefined;\n    var diagonalChildren = diagonal ? [getBorderColor(diagonal.color)] : undefined;\n    return {\n      name: 'border',\n      children: [{\n        name: 'left',\n        properties: {\n          rawMap: {\n            style: left && left.style\n          }\n        },\n        children: leftChildren\n      }, {\n        name: 'right',\n        properties: {\n          rawMap: {\n            style: right && right.style\n          }\n        },\n        children: rightChildren\n      }, {\n        name: 'top',\n        properties: {\n          rawMap: {\n            style: top && top.style\n          }\n        },\n        children: topChildren\n      }, {\n        name: 'bottom',\n        properties: {\n          rawMap: {\n            style: bottom && bottom.style\n          }\n        },\n        children: bottomChildren\n      }, {\n        name: 'diagonal',\n        properties: {\n          rawMap: {\n            style: diagonal && diagonal.style\n          }\n        },\n        children: diagonalChildren\n      }]\n    };\n  }\n};\nvar getWeightName = function getWeightName(value) {\n  if (value === 1) {\n    return 'thin';\n  }\n  if (value === 2) {\n    return 'medium';\n  }\n  if (value === 3) {\n    return 'thick';\n  }\n  return 'hair';\n};\nvar mappedNames = {\n  None: 'None',\n  Dot: 'Dotted',\n  Dash: 'Dashed',\n  Double: 'Double',\n  DashDot: 'DashDot',\n  DashDotDot: 'DashDotDot',\n  SlantDashDot: 'SlantDashDot'\n};\nvar mediumBorders = ['Dashed', 'DashDot', 'DashDotDot'];\nvar convertLegacyBorder = function convertLegacyBorder(type, weight) {\n  // Legacy Types are: None, Continuous, Dash, Dot, DashDot, DashDotDot, SlantDashDot, and Double\n  // Weight represents: 0Hairline, 1Thin , 2Medium, 3Thick\n  // New types: none, thin, medium, dashed, dotted, thick, double, hair, mediumDashed, dashDot, mediumDashDot,\n  // dashDotDot, mediumDashDotDot, slantDashDot\n  var namedWeight = getWeightName(weight);\n  var mappedName = mappedNames[type];\n  if (!type) {\n    return 'thin';\n  }\n  if (type === 'Continuous') {\n    return namedWeight;\n  }\n  if (namedWeight === 'medium' && mediumBorders.indexOf(mappedName) > 0) {\n    return \"medium\" + mappedName;\n  }\n  return mappedName.charAt(0).toLowerCase() + mappedName.substr(1);\n};\nvar bordersFactory = {\n  getTemplate: function getTemplate(borders) {\n    return {\n      name: \"borders\",\n      properties: {\n        rawMap: {\n          count: borders.length\n        }\n      },\n      children: borders.map(borderFactory.getTemplate)\n    };\n  }\n};\nvar convertLegacyHorizontalAlignment = function convertLegacyHorizontalAlignment(alignment) {\n  var map = {\n    Automatic: 'general',\n    Left: 'left',\n    Center: 'center',\n    Right: 'right',\n    Fill: 'fill',\n    Justify: 'justify',\n    CenterAcrossSelection: 'centerContinuous',\n    Distributed: 'distributed',\n    JustifyDistributed: 'justify'\n  };\n  return map[alignment] || 'general';\n};\nvar convertLegacyVerticalAlignment = function convertLegacyVerticalAlignment(alignment) {\n  var map = {\n    Automatic: undefined,\n    Top: 'top',\n    Bottom: 'bottom',\n    Center: 'center',\n    Justify: 'justify',\n    Distributed: 'distributed',\n    JustifyDistributed: 'justify'\n  };\n  return map[alignment] || undefined;\n};\nvar getReadingOrderId = function getReadingOrderId(readingOrder) {\n  var order = ['Context', 'LeftToRight', 'RightToLeft'];\n  var pos = order.indexOf(readingOrder);\n  return Math.max(pos, 0);\n};\nvar alignmentFactory = {\n  getTemplate: function getTemplate(alignment) {\n    var horizontal = alignment.horizontal,\n      indent = alignment.indent,\n      readingOrder = alignment.readingOrder,\n      rotate = alignment.rotate,\n      shrinkToFit = alignment.shrinkToFit,\n      vertical = alignment.vertical,\n      wrapText = alignment.wrapText;\n    return {\n      name: 'alignment',\n      properties: {\n        rawMap: {\n          horizontal: horizontal && convertLegacyHorizontalAlignment(horizontal),\n          indent: indent,\n          readingOrder: readingOrder && getReadingOrderId(readingOrder),\n          textRotation: rotate,\n          shrinkToFit: shrinkToFit,\n          vertical: vertical && convertLegacyVerticalAlignment(vertical),\n          wrapText: wrapText\n        }\n      }\n    };\n  }\n};\nvar protectionFactory = {\n  getTemplate: function getTemplate(protection) {\n    var locked = protection.protected === false ? 0 : 1;\n    var hidden = protection.hideFormula === true ? 1 : 0;\n    return {\n      name: 'protection',\n      properties: {\n        rawMap: {\n          hidden: hidden,\n          locked: locked\n        }\n      }\n    };\n  }\n};\nvar xfFactory = {\n  getTemplate: function getTemplate(xf) {\n    var alignment = xf.alignment,\n      borderId = xf.borderId,\n      fillId = xf.fillId,\n      fontId = xf.fontId,\n      numFmtId = xf.numFmtId,\n      protection = xf.protection,\n      xfId = xf.xfId;\n    var children = [];\n    if (alignment) {\n      children.push(alignmentFactory.getTemplate(alignment));\n    }\n    if (protection) {\n      children.push(protectionFactory.getTemplate(protection));\n    }\n    return {\n      name: \"xf\",\n      properties: {\n        rawMap: {\n          applyAlignment: alignment ? 1 : undefined,\n          applyProtection: protection ? 1 : undefined,\n          applyBorder: borderId ? 1 : undefined,\n          borderId: borderId,\n          fillId: fillId,\n          applyFont: fontId ? 1 : undefined,\n          fontId: fontId,\n          applyNumberFormat: numFmtId ? 1 : undefined,\n          numFmtId: numFmtId,\n          xfId: xfId\n        }\n      },\n      children: children.length ? children : undefined\n    };\n  }\n};\nvar cellStylesXfsFactory = {\n  getTemplate: function getTemplate(xf) {\n    return {\n      name: \"cellStyleXfs\",\n      properties: {\n        rawMap: {\n          count: xf.length\n        }\n      },\n      children: xf.map(xfFactory.getTemplate)\n    };\n  }\n};\nvar cellXfsFactory = {\n  getTemplate: function getTemplate(xf) {\n    return {\n      name: \"cellXfs\",\n      properties: {\n        rawMap: {\n          count: xf.length\n        }\n      },\n      children: xf.map(xfFactory.getTemplate)\n    };\n  }\n};\nvar borderFactory$1 = {\n  getTemplate: function getTemplate(cellStyle) {\n    var builtinId = cellStyle.builtinId,\n      name = cellStyle.name,\n      xfId = cellStyle.xfId;\n    return {\n      name: \"cellStyle\",\n      properties: {\n        rawMap: {\n          builtinId: builtinId,\n          name: name,\n          xfId: xfId\n        }\n      }\n    };\n  }\n};\nvar cellStylesFactory = {\n  getTemplate: function getTemplate(cellStyles) {\n    return {\n      name: \"cellStyles\",\n      properties: {\n        rawMap: {\n          count: cellStyles.length\n        }\n      },\n      children: cellStyles.map(borderFactory$1.getTemplate)\n    };\n  }\n};\nvar stylesMap;\nvar registeredNumberFmts;\nvar registeredFonts;\nvar registeredFills;\nvar registeredBorders;\nvar registeredCellStyleXfs;\nvar registeredCellXfs;\nvar registeredCellStyles;\nvar resetStylesheetValues = function resetStylesheetValues() {\n  stylesMap = {\n    base: 0\n  };\n  registeredNumberFmts = [];\n  registeredFonts = [{\n    name: 'Calibri',\n    size: 14,\n    colorTheme: '1',\n    family: 2,\n    scheme: 'minor'\n  }];\n  registeredFills = [{\n    patternType: 'none'\n  }, {\n    patternType: 'gray125'\n  }];\n  registeredBorders = [{\n    left: undefined,\n    right: undefined,\n    top: undefined,\n    bottom: undefined,\n    diagonal: undefined\n  }];\n  registeredCellStyleXfs = [{\n    borderId: 0,\n    fillId: 0,\n    fontId: 0,\n    numFmtId: 0\n  }];\n  registeredCellXfs = [{\n    borderId: 0,\n    fillId: 0,\n    fontId: 0,\n    numFmtId: 0,\n    xfId: 0\n  }];\n  registeredCellStyles = [{\n    builtinId: 0,\n    name: 'normal',\n    xfId: 0\n  }];\n};\nvar convertLegacyPattern = function convertLegacyPattern(name) {\n  var colorMap = {\n    None: 'none',\n    Solid: 'solid',\n    Gray50: 'mediumGray',\n    Gray75: 'darkGray',\n    Gray25: 'lightGray',\n    HorzStripe: 'darkHorizontal',\n    VertStripe: 'darkVertical',\n    ReverseDiagStripe: 'darkDown',\n    DiagStripe: 'darkUp',\n    DiagCross: 'darkGrid',\n    ThickDiagCross: 'darkTrellis',\n    ThinHorzStripe: 'lightHorizontal',\n    ThinVertStripe: 'lightVertical',\n    ThinReverseDiagStripe: 'lightDown',\n    ThinDiagStripe: 'lightUp',\n    ThinHorzCross: 'lightGrid',\n    ThinDiagCross: 'lightTrellis',\n    Gray125: 'gray125',\n    Gray0625: 'gray0625'\n  };\n  if (!name) {\n    return 'none';\n  }\n  return colorMap[name] || name;\n};\nvar convertLegacyColor = function convertLegacyColor(color) {\n  if (color == undefined) {\n    return color;\n  }\n  if (color.charAt(0) === '#') {\n    color = color.substr(1);\n  }\n  return color.length === 6 ? '00' + color : color;\n};\nvar registerFill = function registerFill(fill) {\n  var convertedPattern = convertLegacyPattern(fill.pattern);\n  var convertedFillColor = convertLegacyColor(fill.color);\n  var convertedPatternColor = convertLegacyColor(fill.patternColor);\n  var pos = agGridCommunity._.findIndex(registeredFills, function (currentFill) {\n    var patternType = currentFill.patternType,\n      fgRgb = currentFill.fgRgb,\n      bgRgb = currentFill.bgRgb;\n    if (patternType != convertedPattern || fgRgb != convertedFillColor || bgRgb != convertedPatternColor) {\n      return false;\n    }\n    return true;\n  });\n  if (pos === -1) {\n    pos = registeredFills.length;\n    registeredFills.push({\n      patternType: convertedPattern,\n      fgRgb: convertedFillColor,\n      bgRgb: convertedPatternColor\n    });\n  }\n  return pos;\n};\nvar registerNumberFmt = function registerNumberFmt(format) {\n  format = agGridCommunity._.utf8_encode(format);\n  if (numberFormatMap[format]) {\n    return numberFormatMap[format];\n  }\n  var pos = agGridCommunity._.findIndex(registeredNumberFmts, function (currentFormat) {\n    return currentFormat.formatCode === format;\n  });\n  if (pos === -1) {\n    pos = registeredNumberFmts.length + 164;\n    registeredNumberFmts.push({\n      formatCode: format,\n      numFmtId: pos\n    });\n  } else {\n    pos = registeredNumberFmts[pos].numFmtId;\n  }\n  return pos;\n};\nvar registerBorders = function registerBorders(borders) {\n  var borderBottom = borders.borderBottom,\n    borderTop = borders.borderTop,\n    borderLeft = borders.borderLeft,\n    borderRight = borders.borderRight;\n  var bottomStyle, topStyle, leftStyle, rightStyle;\n  var bottomColor, topColor, leftColor, rightColor;\n  if (borderLeft) {\n    leftStyle = convertLegacyBorder(borderLeft.lineStyle, borderLeft.weight);\n    leftColor = convertLegacyColor(borderLeft.color);\n  }\n  if (borderRight) {\n    rightStyle = convertLegacyBorder(borderRight.lineStyle, borderRight.weight);\n    rightColor = convertLegacyColor(borderRight.color);\n  }\n  if (borderBottom) {\n    bottomStyle = convertLegacyBorder(borderBottom.lineStyle, borderBottom.weight);\n    bottomColor = convertLegacyColor(borderBottom.color);\n  }\n  if (borderTop) {\n    topStyle = convertLegacyBorder(borderTop.lineStyle, borderTop.weight);\n    topColor = convertLegacyColor(borderTop.color);\n  }\n  var pos = agGridCommunity._.findIndex(registeredBorders, function (currentBorder) {\n    var left = currentBorder.left,\n      right = currentBorder.right,\n      top = currentBorder.top,\n      bottom = currentBorder.bottom;\n    if (!left && (leftStyle || leftColor)) {\n      return false;\n    }\n    if (!right && (rightStyle || rightColor)) {\n      return false;\n    }\n    if (!top && (topStyle || topColor)) {\n      return false;\n    }\n    if (!bottom && (bottomStyle || bottomColor)) {\n      return false;\n    }\n    var _a = left || {},\n      clS = _a.style,\n      clC = _a.color;\n    var _b = right || {},\n      crS = _b.style,\n      crC = _b.color;\n    var _c = top || {},\n      ctS = _c.style,\n      ctC = _c.color;\n    var _d = bottom || {},\n      cbS = _d.style,\n      cbC = _d.color;\n    if (clS != leftStyle || clC != leftColor) {\n      return false;\n    }\n    if (crS != rightStyle || crC != rightColor) {\n      return false;\n    }\n    if (ctS != topStyle || ctC != topColor) {\n      return false;\n    }\n    if (cbS != bottomStyle || cbC != bottomColor) {\n      return false;\n    }\n    return true;\n  });\n  if (pos === -1) {\n    pos = registeredBorders.length;\n    registeredBorders.push({\n      left: {\n        style: leftStyle,\n        color: leftColor\n      },\n      right: {\n        style: rightStyle,\n        color: rightColor\n      },\n      top: {\n        style: topStyle,\n        color: topColor\n      },\n      bottom: {\n        style: bottomStyle,\n        color: bottomColor\n      },\n      diagonal: {\n        style: undefined,\n        color: undefined\n      }\n    });\n  }\n  return pos;\n};\nvar registerFont = function registerFont(font) {\n  var name = font.fontName,\n    color = font.color,\n    size = font.size,\n    bold = font.bold,\n    italic = font.italic,\n    outline = font.outline,\n    shadow = font.shadow,\n    strikeThrough = font.strikeThrough,\n    underline = font.underline,\n    family = font.family;\n  var utf8Name = name ? agGridCommunity._.utf8_encode(name) : name;\n  var convertedColor = convertLegacyColor(color);\n  var familyId = getFamilyId(family);\n  var pos = agGridCommunity._.findIndex(registeredFonts, function (currentFont) {\n    if (currentFont.name != utf8Name || currentFont.color != convertedColor || currentFont.size != size || currentFont.bold != bold || currentFont.italic != italic || currentFont.outline != outline || currentFont.shadow != shadow || currentFont.strike != strikeThrough || currentFont.underline != underline || currentFont.family != familyId) {\n      return false;\n    }\n    return true;\n  });\n  if (pos === -1) {\n    pos = registeredFonts.length;\n    registeredFonts.push({\n      name: utf8Name,\n      color: convertedColor,\n      size: size,\n      bold: bold,\n      italic: italic,\n      outline: outline,\n      shadow: shadow,\n      strike: strikeThrough,\n      underline: underline,\n      family: familyId\n    });\n  }\n  return pos;\n};\nvar registerStyle = function registerStyle(config) {\n  var id = config.id,\n    alignment = config.alignment,\n    borders = config.borders,\n    font = config.font,\n    interior = config.interior,\n    numberFormat = config.numberFormat,\n    protection = config.protection;\n  var currentFill = 0;\n  var currentBorder = 0;\n  var currentFont = 0;\n  var currentNumberFmt = 0;\n  if (!id || stylesMap[id] != undefined) {\n    return;\n  }\n  if (interior) {\n    currentFill = registerFill(interior);\n  }\n  if (borders) {\n    currentBorder = registerBorders(borders);\n  }\n  if (font) {\n    currentFont = registerFont(font);\n  }\n  if (numberFormat) {\n    currentNumberFmt = registerNumberFmt(numberFormat.format);\n  }\n  stylesMap[id] = registeredCellXfs.length;\n  registeredCellXfs.push({\n    alignment: alignment,\n    borderId: currentBorder || 0,\n    fillId: currentFill || 0,\n    fontId: currentFont || 0,\n    numFmtId: currentNumberFmt || 0,\n    protection: protection,\n    xfId: 0\n  });\n};\nvar stylesheetFactory = {\n  getTemplate: function getTemplate() {\n    var numberFormats = numberFormatsFactory.getTemplate(registeredNumberFmts);\n    var fonts = fontsFactory.getTemplate(registeredFonts);\n    var fills = fillsFactory.getTemplate(registeredFills);\n    var borders = bordersFactory.getTemplate(registeredBorders);\n    var cellStylesXfs = cellStylesXfsFactory.getTemplate(registeredCellStyleXfs);\n    var cellXfs = cellXfsFactory.getTemplate(registeredCellXfs);\n    var cellStyles = cellStylesFactory.getTemplate(registeredCellStyles);\n    resetStylesheetValues();\n    return {\n      name: 'styleSheet',\n      properties: {\n        rawMap: {\n          xmlns: 'http://schemas.openxmlformats.org/spreadsheetml/2006/main'\n        }\n      },\n      children: [numberFormats, fonts, fills, borders, cellStylesXfs, cellXfs, cellStyles, {\n        name: 'tableStyles',\n        properties: {\n          rawMap: {\n            count: 0,\n            defaultPivotStyle: 'PivotStyleLight16',\n            defaultTableStyle: 'TableStyleMedium2'\n          }\n        }\n      }]\n    };\n  }\n};\nvar getStyleId = function getStyleId(name) {\n  return stylesMap[name] || 0;\n};\nvar registerStyles = function registerStyles(styles) {\n  resetStylesheetValues();\n  styles.forEach(registerStyle);\n};\nvar sheetFactory = {\n  getTemplate: function getTemplate(name, idx) {\n    var sheetId = (idx + 1).toString();\n    return {\n      name: \"sheet\",\n      properties: {\n        rawMap: {\n          \"name\": name,\n          \"sheetId\": sheetId,\n          \"r:id\": \"rId\" + sheetId\n        }\n      }\n    };\n  }\n};\nvar sheetsFactory = {\n  getTemplate: function getTemplate(names) {\n    return {\n      name: \"sheets\",\n      children: names.map(sheetFactory.getTemplate)\n    };\n  }\n};\nvar workbookFactory = {\n  getTemplate: function getTemplate(names) {\n    return {\n      name: \"workbook\",\n      properties: {\n        prefixedAttributes: [{\n          prefix: \"xmlns:\",\n          map: {\n            r: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships\"\n          }\n        }],\n        rawMap: {\n          xmlns: \"http://schemas.openxmlformats.org/spreadsheetml/2006/main\"\n        }\n      },\n      children: [sheetsFactory.getTemplate(names)]\n    };\n  }\n};\n\n// https://docs.microsoft.com/en-us/office/troubleshoot/excel/determine-column-widths\nvar getExcelCellWidth = function getExcelCellWidth(width) {\n  return Math.ceil((width - 12) / 7 + 1);\n};\nvar columnFactory = {\n  getTemplate: function getTemplate(config) {\n    var min = config.min,\n      max = config.max,\n      s = config.s,\n      width = config.width,\n      hidden = config.hidden,\n      bestFit = config.bestFit;\n    var excelWidth = 1;\n    var customWidth = '0';\n    if (width > 1) {\n      excelWidth = getExcelCellWidth(width);\n      customWidth = '1';\n    }\n    return {\n      name: 'col',\n      properties: {\n        rawMap: {\n          min: min,\n          max: max,\n          width: excelWidth,\n          style: s,\n          hidden: hidden ? '1' : '0',\n          bestFit: bestFit ? '1' : '0',\n          customWidth: customWidth\n        }\n      }\n    };\n  }\n};\nvar convertLegacyType = function convertLegacyType(type) {\n  var t = type.charAt(0).toLowerCase();\n  return t === 's' ? 'inlineStr' : t;\n};\nvar cellFactory = {\n  getTemplate: function getTemplate(config) {\n    var ref = config.ref,\n      data = config.data,\n      styleId = config.styleId;\n    var type = data.type,\n      value = data.value;\n    var convertedType = type;\n    if (type.charAt(0) === type.charAt(0).toUpperCase()) {\n      convertedType = convertLegacyType(type);\n    }\n    var obj = {\n      name: 'c',\n      properties: {\n        rawMap: {\n          r: ref,\n          t: convertedType === 'empty' ? undefined : convertedType,\n          s: styleId ? getStyleId(styleId) : undefined\n        }\n      }\n    };\n    var children;\n    if (convertedType === 'inlineStr') {\n      children = [{\n        name: 'is',\n        children: [{\n          name: 't',\n          textNode: agGridCommunity._.escapeString(agGridCommunity._.utf8_encode(value))\n        }]\n      }];\n    } else {\n      children = [{\n        name: 'v',\n        textNode: value\n      }];\n    }\n    return agGridCommunity._.assign({}, obj, {\n      children: children\n    });\n  }\n};\nvar __spreadArrays$1 = undefined && undefined.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nvar addEmptyCells = function addEmptyCells(cells, rowIdx) {\n  var mergeMap = [];\n  var posCounter = 0;\n  for (var i = 0; i < cells.length; i++) {\n    var cell = cells[i];\n    if (cell.mergeAcross) {\n      mergeMap.push({\n        pos: i,\n        excelPos: posCounter\n      });\n      posCounter += cells[i].mergeAcross;\n    }\n    posCounter++;\n  }\n  if (mergeMap.length) {\n    for (var i = mergeMap.length - 1; i >= 0; i--) {\n      var mergedCells = [];\n      var cell = cells[mergeMap[i].pos];\n      for (var j = 1; j <= cell.mergeAcross; j++) {\n        mergedCells.push({\n          ref: \"\" + getExcelColumnName(mergeMap[i].excelPos + 1 + j) + (rowIdx + 1),\n          styleId: cell.styleId,\n          data: {\n            type: 'empty',\n            value: null\n          }\n        });\n      }\n      if (mergedCells.length) {\n        cells.splice.apply(cells, __spreadArrays$1([mergeMap[i].pos + 1, 0], mergedCells));\n      }\n    }\n  }\n};\nvar rowFactory = {\n  getTemplate: function getTemplate(config, idx) {\n    var index = config.index,\n      collapsed = config.collapsed,\n      hidden = config.hidden,\n      height = config.height,\n      s = config.s,\n      _a = config.cells,\n      cells = _a === void 0 ? [] : _a;\n    addEmptyCells(cells, idx);\n    var children = cells.map(cellFactory.getTemplate);\n    return {\n      name: \"row\",\n      properties: {\n        rawMap: {\n          r: index,\n          collapsed: collapsed,\n          hidden: hidden ? '1' : '0',\n          ht: height,\n          customHeight: height != null ? '1' : '0',\n          s: s,\n          customFormat: s != null ? '1' : '0'\n        }\n      },\n      children: children\n    };\n  }\n};\nvar mergeCell = {\n  getTemplate: function getTemplate(ref) {\n    return {\n      name: 'mergeCell',\n      properties: {\n        rawMap: {\n          ref: ref\n        }\n      }\n    };\n  }\n};\nvar updateColMinMax = function updateColMinMax(col, min, range, prevCol) {\n  if (!col.min) {\n    col.min = min;\n    col.max = min + range;\n    return;\n  }\n  var currentMin = min;\n  if (prevCol) {\n    currentMin = Math.max(currentMin, prevCol.min);\n  }\n  col.min = Math.max(col.min, currentMin);\n  col.max = Math.max(col.max, currentMin + range);\n};\nvar getMergedCells = function getMergedCells(rows, cols) {\n  var mergedCells = [];\n  rows.forEach(function (currentRow, rowIdx) {\n    var cells = currentRow.cells;\n    var merges = 0;\n    currentRow.index = rowIdx + 1;\n    var lastCol;\n    cells.forEach(function (currentCell, cellIdx) {\n      var min = cellIdx + merges + 1;\n      var start = getExcelColumnName(min);\n      var outputRow = rowIdx + 1;\n      if (currentCell.mergeAcross) {\n        merges += currentCell.mergeAcross;\n        var end = getExcelColumnName(cellIdx + merges + 1);\n        mergedCells.push(\"\" + start + outputRow + \":\" + end + outputRow);\n      }\n      if (!cols[min - 1]) {\n        cols[min - 1] = {};\n      }\n      updateColMinMax(cols[min - 1], min, merges, lastCol);\n      lastCol = cols[min - 1];\n      currentCell.ref = \"\" + start + outputRow;\n    });\n  });\n  return mergedCells;\n};\nvar getExcelColumnName = function getExcelColumnName(colIdx) {\n  var startCode = 65;\n  var tableWidth = 26;\n  var fromCharCode = String.fromCharCode;\n  var pos = Math.floor(colIdx / tableWidth);\n  var tableIdx = colIdx % tableWidth;\n  if (!pos || colIdx === tableWidth) {\n    return fromCharCode(startCode + colIdx - 1);\n  }\n  if (!tableIdx) {\n    return getExcelColumnName(pos - 1) + 'Z';\n  }\n  if (pos < tableWidth) {\n    return fromCharCode(startCode + pos - 1) + fromCharCode(startCode + tableIdx - 1);\n  }\n  return getExcelColumnName(pos) + fromCharCode(startCode + tableIdx - 1);\n};\nvar worksheetFactory = {\n  getTemplate: function getTemplate(config) {\n    var table = config.table;\n    var rows = table.rows,\n      columns = table.columns;\n    var mergedCells = columns && columns.length ? getMergedCells(rows, columns) : [];\n    var children = [];\n    if (columns.length) {\n      children.push({\n        name: 'cols',\n        children: columns.map(columnFactory.getTemplate)\n      });\n    }\n    if (rows.length) {\n      children.push({\n        name: 'sheetData',\n        children: rows.map(rowFactory.getTemplate)\n      });\n    }\n    if (mergedCells.length) {\n      children.push({\n        name: 'mergeCells',\n        properties: {\n          rawMap: {\n            count: mergedCells.length\n          }\n        },\n        children: mergedCells.map(mergeCell.getTemplate)\n      });\n    }\n    return {\n      name: \"worksheet\",\n      properties: {\n        prefixedAttributes: [{\n          prefix: \"xmlns:\",\n          map: {\n            r: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships\"\n          }\n        }],\n        rawMap: {\n          xmlns: \"http://schemas.openxmlformats.org/spreadsheetml/2006/main\"\n        }\n      },\n      children: children\n    };\n  }\n};\nvar relationshipFactory = {\n  getTemplate: function getTemplate(config) {\n    var Id = config.Id,\n      Type = config.Type,\n      Target = config.Target;\n    return {\n      name: \"Relationship\",\n      properties: {\n        rawMap: {\n          Id: Id,\n          Type: Type,\n          Target: Target\n        }\n      }\n    };\n  }\n};\nvar relationshipsFactory = {\n  getTemplate: function getTemplate(c) {\n    var children = c.map(relationshipFactory.getTemplate);\n    return {\n      name: \"Relationships\",\n      properties: {\n        rawMap: {\n          xmlns: \"http://schemas.openxmlformats.org/package/2006/relationships\"\n        }\n      },\n      children: children\n    };\n  }\n};\nvar __extends$q = undefined && undefined.__extends || function () {\n  var _extendStatics27 = function extendStatics(d, b) {\n    _extendStatics27 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics27(d, b);\n  };\n  return function (d, b) {\n    _extendStatics27(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$q = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * See https://www.ecma-international.org/news/TC45_current_work/OpenXML%20White%20Paper.pdf\n */\nvar ExcelXlsxFactory = /** @class */function (_super) {\n  __extends$q(ExcelXlsxFactory, _super);\n  function ExcelXlsxFactory() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.sharedStrings = [];\n    return _this;\n  }\n  ExcelXlsxFactory.prototype.createSharedStrings = function () {\n    return this.createXmlPart(sharedStrings.getTemplate(this.sharedStrings));\n  };\n  ExcelXlsxFactory.prototype.createXmlPart = function (body) {\n    var header = this.xmlFactory.createHeader({\n      encoding: 'UTF-8',\n      standalone: 'yes'\n    });\n    var xmlBody = this.xmlFactory.createXml(body);\n    return \"\" + header + xmlBody;\n  };\n  ExcelXlsxFactory.prototype.createExcel = function (styles, worksheets, sharedStrings) {\n    if (sharedStrings === void 0) {\n      sharedStrings = [];\n    }\n    this.sharedStrings = sharedStrings;\n    this.sheetNames = worksheets.map(function (worksheet) {\n      return worksheet.name;\n    });\n    registerStyles(styles);\n    return this.createWorksheet(worksheets);\n  };\n  ExcelXlsxFactory.prototype.createCore = function () {\n    return this.createXmlPart(coreFactory.getTemplate());\n  };\n  ExcelXlsxFactory.prototype.createContentTypes = function () {\n    return this.createXmlPart(contentTypesFactory.getTemplate());\n  };\n  ExcelXlsxFactory.prototype.createRels = function () {\n    var rs = relationshipsFactory.getTemplate([{\n      Id: 'rId1',\n      Type: 'http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument',\n      Target: 'xl/workbook.xml'\n    }, {\n      Id: 'rId2',\n      Type: 'http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties',\n      Target: 'docProps/core.xml'\n    }]);\n    return this.createXmlPart(rs);\n  };\n  ExcelXlsxFactory.prototype.createStylesheet = function () {\n    return this.createXmlPart(stylesheetFactory.getTemplate());\n  };\n  ExcelXlsxFactory.prototype.createTheme = function () {\n    return this.createXmlPart(officeTheme.getTemplate());\n  };\n  ExcelXlsxFactory.prototype.createWorkbook = function () {\n    return this.createXmlPart(workbookFactory.getTemplate(this.sheetNames));\n  };\n  ExcelXlsxFactory.prototype.createWorkbookRels = function () {\n    var rs = relationshipsFactory.getTemplate([{\n      Id: 'rId1',\n      Type: 'http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet',\n      Target: 'worksheets/sheet1.xml'\n    }, {\n      Id: 'rId2',\n      Type: 'http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme',\n      Target: 'theme/theme1.xml'\n    }, {\n      Id: 'rId3',\n      Type: 'http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles',\n      Target: 'styles.xml'\n    }, {\n      Id: 'rId4',\n      Type: 'http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings',\n      Target: 'sharedStrings.xml'\n    }]);\n    return this.createXmlPart(rs);\n  };\n  ExcelXlsxFactory.prototype.createWorksheet = function (worksheets) {\n    return this.createXmlPart(worksheetFactory.getTemplate(worksheets[0]));\n  };\n  __decorate$q([agGridCommunity.Autowired('xmlFactory')], ExcelXlsxFactory.prototype, \"xmlFactory\", void 0);\n  ExcelXlsxFactory = __decorate$q([agGridCommunity.Bean('excelXlsxFactory')], ExcelXlsxFactory);\n  return ExcelXlsxFactory;\n}(agGridCommunity.BeanStub);\nvar workbook = {\n  getTemplate: function getTemplate() {\n    return {\n      name: \"Workbook\",\n      properties: {\n        prefixedAttributes: [{\n          prefix: \"xmlns:\",\n          map: {\n            o: \"urn:schemas-microsoft-com:office:office\",\n            x: \"urn:schemas-microsoft-com:office:excel\",\n            ss: \"urn:schemas-microsoft-com:office:spreadsheet\",\n            html: \"http://www.w3.org/TR/REC-html40\"\n          }\n        }],\n        rawMap: {\n          xmlns: \"urn:schemas-microsoft-com:office:spreadsheet\"\n        }\n      }\n    };\n  }\n};\nvar excelWorkbook = {\n  getTemplate: function getTemplate() {\n    return {\n      name: \"ExcelWorkbook\",\n      properties: {\n        rawMap: {\n          xmlns: \"urn:schemas-microsoft-com:office:excel\"\n        }\n      },\n      children: [{\n        name: \"WindowHeight\",\n        textNode: \"8130\"\n      }, {\n        name: \"WindowWidth\",\n        textNode: \"15135\"\n      }, {\n        name: \"WindowHeight\",\n        textNode: \"8130\"\n      }, {\n        name: \"WindowTopX\",\n        textNode: \"120\"\n      }, {\n        name: \"WindowTopY\",\n        textNode: \"45\"\n      }, {\n        name: \"ProtectStructure\",\n        textNode: \"False\"\n      }, {\n        name: \"ProtectWindow\",\n        textNode: \"False\"\n      }]\n    };\n  }\n};\nvar column = {\n  getTemplate: function getTemplate(c) {\n    var width = c.width;\n    return {\n      name: \"Column\",\n      properties: {\n        prefixedAttributes: [{\n          prefix: \"ss:\",\n          map: {\n            Width: width\n          }\n        }]\n      }\n    };\n  }\n};\nvar cell = {\n  getTemplate: function getTemplate(c) {\n    var mergeAcross = c.mergeAcross,\n      styleId = c.styleId,\n      data = c.data;\n    var properties = {};\n    if (mergeAcross) {\n      properties.MergeAcross = mergeAcross;\n    }\n    if (styleId) {\n      properties.StyleID = styleId;\n    }\n    return {\n      name: \"Cell\",\n      properties: {\n        prefixedAttributes: [{\n          prefix: \"ss:\",\n          map: properties\n        }]\n      },\n      children: [{\n        name: \"Data\",\n        properties: {\n          prefixedAttributes: [{\n            prefix: \"ss:\",\n            map: {\n              Type: data.type\n            }\n          }]\n        },\n        textNode: data.value\n      }]\n    };\n  }\n};\nvar row = {\n  getTemplate: function getTemplate(r) {\n    var cells = r.cells;\n    return {\n      name: \"Row\",\n      children: cells.map(function (it) {\n        return cell.getTemplate(it);\n      })\n    };\n  }\n};\nvar worksheet = {\n  getTemplate: function getTemplate(ws) {\n    var table = ws.table,\n      name = ws.name;\n    var columns = table.columns,\n      rows = table.rows;\n    var c = columns.map(function (it) {\n      return column.getTemplate(it);\n    });\n    var r = rows.map(function (it) {\n      return row.getTemplate(it);\n    });\n    return {\n      name: \"Worksheet\",\n      children: [{\n        name: \"Table\",\n        children: c.concat(r)\n      }],\n      properties: {\n        prefixedAttributes: [{\n          prefix: \"ss:\",\n          map: {\n            Name: name\n          }\n        }]\n      }\n    };\n  }\n};\nvar documentProperties = {\n  getTemplate: function getTemplate() {\n    return {\n      name: \"DocumentProperties\",\n      properties: {\n        rawMap: {\n          xmlns: \"urn:schemas-microsoft-com:office:office\"\n        }\n      },\n      children: [{\n        name: \"Version\",\n        textNode: \"12.00\"\n      }]\n    };\n  }\n};\nvar alignment = {\n  getTemplate: function getTemplate(styleProperties) {\n    var _a = styleProperties.alignment,\n      vertical = _a.vertical,\n      horizontal = _a.horizontal,\n      indent = _a.indent,\n      readingOrder = _a.readingOrder,\n      rotate = _a.rotate,\n      shrinkToFit = _a.shrinkToFit,\n      verticalText = _a.verticalText,\n      wrapText = _a.wrapText;\n    return {\n      name: 'Alignment',\n      properties: {\n        prefixedAttributes: [{\n          prefix: \"ss:\",\n          map: {\n            Vertical: vertical,\n            Horizontal: horizontal,\n            Indent: indent,\n            ReadingOrder: readingOrder,\n            Rotate: rotate,\n            ShrinkToFit: shrinkToFit,\n            VerticalText: verticalText,\n            WrapText: wrapText\n          }\n        }]\n      }\n    };\n  }\n};\nvar borders = {\n  getTemplate: function getTemplate(styleProperties) {\n    var _a = styleProperties.borders,\n      borderBottom = _a.borderBottom,\n      borderLeft = _a.borderLeft,\n      borderRight = _a.borderRight,\n      borderTop = _a.borderTop;\n    return {\n      name: 'Borders',\n      children: [borderBottom, borderLeft, borderRight, borderTop].map(function (it, index) {\n        var current = index == 0 ? \"Bottom\" : index == 1 ? \"Left\" : index == 2 ? \"Right\" : \"Top\";\n        return {\n          name: 'Border',\n          properties: {\n            prefixedAttributes: [{\n              prefix: 'ss:',\n              map: {\n                Position: current,\n                LineStyle: it.lineStyle,\n                Weight: it.weight,\n                Color: it.color\n              }\n            }]\n          }\n        };\n      })\n    };\n  }\n};\nvar font = {\n  getTemplate: function getTemplate(styleProperties) {\n    var _a = styleProperties.font,\n      bold = _a.bold,\n      fontName = _a.fontName,\n      italic = _a.italic,\n      color = _a.color,\n      outline = _a.outline,\n      shadow = _a.shadow,\n      size = _a.size,\n      strikeThrough = _a.strikeThrough,\n      underline = _a.underline,\n      verticalAlign = _a.verticalAlign,\n      charSet = _a.charSet,\n      family = _a.family;\n    return {\n      name: \"Font\",\n      properties: {\n        prefixedAttributes: [{\n          prefix: \"ss:\",\n          map: {\n            Bold: bold,\n            FontName: fontName,\n            Italic: italic,\n            Color: color,\n            Outline: outline,\n            Shadow: shadow,\n            Size: size,\n            StrikeThrough: strikeThrough,\n            Underline: underline,\n            VerticalAlign: verticalAlign\n          }\n        }, {\n          prefix: \"x:\",\n          map: {\n            CharSet: charSet,\n            Family: family\n          }\n        }]\n      }\n    };\n  }\n};\nvar interior = {\n  getTemplate: function getTemplate(styleProperties) {\n    var _a = styleProperties.interior,\n      color = _a.color,\n      pattern = _a.pattern,\n      patternColor = _a.patternColor;\n    return {\n      name: \"Interior\",\n      properties: {\n        prefixedAttributes: [{\n          prefix: \"ss:\",\n          map: {\n            Color: color,\n            Pattern: pattern,\n            PatternColor: patternColor\n          }\n        }]\n      }\n    };\n  }\n};\nvar protection = {\n  getTemplate: function getTemplate(styleProperties) {\n    return {\n      name: \"Protection\",\n      properties: {\n        prefixedAttributes: [{\n          prefix: \"ss:\",\n          map: {\n            Protected: styleProperties.protection.protected,\n            HideFormula: styleProperties.protection.hideFormula\n          }\n        }]\n      }\n    };\n  }\n};\nvar numberFormat = {\n  getTemplate: function getTemplate(styleProperties) {\n    var format = styleProperties.numberFormat.format;\n    return {\n      name: \"NumberFormat\",\n      properties: {\n        prefixedAttributes: [{\n          prefix: \"ss:\",\n          map: {\n            Format: format\n          }\n        }]\n      }\n    };\n  }\n};\nvar style = {\n  getTemplate: function getTemplate(styleProperties) {\n    var id = styleProperties.id,\n      name = styleProperties.name;\n    return {\n      name: 'Style',\n      properties: {\n        prefixedAttributes: [{\n          prefix: \"ss:\",\n          map: {\n            ID: id,\n            Name: name ? name : id\n          }\n        }]\n      }\n    };\n  }\n};\nvar __extends$r = undefined && undefined.__extends || function () {\n  var _extendStatics28 = function extendStatics(d, b) {\n    _extendStatics28 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics28(d, b);\n  };\n  return function (d, b) {\n    _extendStatics28(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$r = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * See https://msdn.microsoft.com/en-us/library/aa140066(v=office.10).aspx\n */\nvar ExcelXmlFactory = /** @class */function (_super) {\n  __extends$r(ExcelXmlFactory, _super);\n  function ExcelXmlFactory() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  ExcelXmlFactory.prototype.createExcel = function (styles, worksheets, sharedStrings) {\n    var header = this.excelXmlHeader();\n    var docProps = documentProperties.getTemplate();\n    var eWorkbook = excelWorkbook.getTemplate();\n    var wb = this.workbook(docProps, eWorkbook, styles, worksheets);\n    return \"\" + header + this.xmlFactory.createXml(wb, function (boolean) {\n      return boolean ? '1' : '0';\n    });\n  };\n  ExcelXmlFactory.prototype.workbook = function (docProperties, eWorkbook, styles, worksheets) {\n    var children = [docProperties, eWorkbook, this.stylesXmlElement(styles)].concat(worksheets.map(function (it) {\n      return worksheet.getTemplate(it);\n    }));\n    return agGridCommunity._.assign({}, workbook.getTemplate(), {\n      children: children\n    });\n  };\n  ExcelXmlFactory.prototype.excelXmlHeader = function () {\n    return \"<?xml version=\\\"1.0\\\" ?>\\n        <?mso-application progid=\\\"Excel.Sheet\\\" ?>\\n        \";\n  };\n  ExcelXmlFactory.prototype.stylesXmlElement = function (styles) {\n    var _this = this;\n    return {\n      name: 'Styles',\n      children: styles ? styles.map(function (it) {\n        return _this.styleXmlElement(it);\n      }) : []\n    };\n  };\n  ExcelXmlFactory.prototype.styleXmlElement = function (styleProperties) {\n    var children = agGridCommunity._.compose(this.addProperty('alignment', styleProperties), this.addProperty('borders', styleProperties), this.addProperty('font', styleProperties), this.addProperty('interior', styleProperties), this.addProperty('protection', styleProperties), this.addProperty('numberFormat', styleProperties))([]);\n    return agGridCommunity._.assign({}, style.getTemplate(styleProperties), {\n      children: children\n    });\n  };\n  ExcelXmlFactory.prototype.addProperty = function (property, styleProperties) {\n    return function (children) {\n      if (!styleProperties[property]) {\n        return children;\n      }\n      var options = {\n        alignment: alignment,\n        borders: borders,\n        font: font,\n        interior: interior,\n        numberFormat: numberFormat,\n        protection: protection\n      };\n      return children.concat(options[property].getTemplate(styleProperties));\n    };\n  };\n  __decorate$r([agGridCommunity.Autowired('xmlFactory')], ExcelXmlFactory.prototype, \"xmlFactory\", void 0);\n  ExcelXmlFactory = __decorate$r([agGridCommunity.Bean('excelXmlFactory')], ExcelXmlFactory);\n  return ExcelXmlFactory;\n}(agGridCommunity.BeanStub);\nvar __extends$s = undefined && undefined.__extends || function () {\n  var _extendStatics29 = function extendStatics(d, b) {\n    _extendStatics29 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics29(d, b);\n  };\n  return function (d, b) {\n    _extendStatics29(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$s = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar BaseGridSerializingSession = /** @class */function () {\n  function BaseGridSerializingSession(config) {\n    this.groupColumns = [];\n    var columnController = config.columnController,\n      valueService = config.valueService,\n      gridOptionsWrapper = config.gridOptionsWrapper,\n      processCellCallback = config.processCellCallback,\n      processHeaderCallback = config.processHeaderCallback,\n      processGroupHeaderCallback = config.processGroupHeaderCallback,\n      processRowGroupCallback = config.processRowGroupCallback;\n    this.columnController = columnController;\n    this.valueService = valueService;\n    this.gridOptionsWrapper = gridOptionsWrapper;\n    this.processCellCallback = processCellCallback;\n    this.processHeaderCallback = processHeaderCallback;\n    this.processGroupHeaderCallback = processGroupHeaderCallback;\n    this.processRowGroupCallback = processRowGroupCallback;\n  }\n  BaseGridSerializingSession.prototype.prepare = function (columnsToExport) {\n    this.groupColumns = agGridCommunity._.filter(columnsToExport, function (col) {\n      return !!col.getColDef().showRowGroup;\n    });\n  };\n  BaseGridSerializingSession.prototype.extractHeaderValue = function (column) {\n    var value = this.getHeaderName(this.processHeaderCallback, column);\n    return value != null ? value : '';\n  };\n  BaseGridSerializingSession.prototype.extractRowCellValue = function (column, index, type, node) {\n    // we render the group summary text e.g. \"-> Parent -> Child\"...\n    var groupIndex = this.gridOptionsWrapper.isGroupMultiAutoColumn() ? node.rowGroupIndex : 0;\n    var renderGroupSummaryCell =\n    // on group rows\n    node && node.group && (\n    // in the group column if groups appear in regular grid cells\n    index === groupIndex && this.groupColumns.indexOf(column) !== -1\n    // or the first cell in the row, if we're doing full width rows\n    || index === 0 && this.gridOptionsWrapper.isGroupUseEntireRow(this.columnController.isPivotMode()));\n    var valueForCell;\n    if (renderGroupSummaryCell) {\n      valueForCell = this.createValueForGroupNode(node);\n    } else {\n      valueForCell = this.valueService.getValue(column, node);\n    }\n    var value = this.processCell(node, column, valueForCell, this.processCellCallback, type);\n    return value != null ? value : '';\n  };\n  BaseGridSerializingSession.prototype.getHeaderName = function (callback, column) {\n    if (callback) {\n      return callback({\n        column: column,\n        api: this.gridOptionsWrapper.getApi(),\n        columnApi: this.gridOptionsWrapper.getColumnApi(),\n        context: this.gridOptionsWrapper.getContext()\n      });\n    }\n    return this.columnController.getDisplayNameForColumn(column, 'csv', true);\n  };\n  BaseGridSerializingSession.prototype.createValueForGroupNode = function (node) {\n    if (this.processRowGroupCallback) {\n      return this.processRowGroupCallback({\n        node: node,\n        api: this.gridOptionsWrapper.getApi(),\n        columnApi: this.gridOptionsWrapper.getColumnApi(),\n        context: this.gridOptionsWrapper.getContext()\n      });\n    }\n    var keys = [node.key];\n    if (!this.gridOptionsWrapper.isGroupMultiAutoColumn()) {\n      while (node.parent) {\n        node = node.parent;\n        keys.push(node.key);\n      }\n    }\n    return keys.reverse().join(' -> ');\n  };\n  BaseGridSerializingSession.prototype.processCell = function (rowNode, column, value, processCellCallback, type) {\n    if (processCellCallback) {\n      return processCellCallback({\n        column: column,\n        node: rowNode,\n        value: value,\n        api: this.gridOptionsWrapper.getApi(),\n        columnApi: this.gridOptionsWrapper.getColumnApi(),\n        context: this.gridOptionsWrapper.getContext(),\n        type: type\n      });\n    }\n    return value;\n  };\n  return BaseGridSerializingSession;\n}();\nvar GridSerializer = /** @class */function (_super) {\n  __extends$s(GridSerializer, _super);\n  function GridSerializer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  GridSerializer.prototype.serialize = function (gridSerializingSession, params) {\n    if (params === void 0) {\n      params = {};\n    }\n    var rowSkipper = params.shouldRowBeSkipped || function () {\n      return false;\n    };\n    var api = this.gridOptionsWrapper.getApi();\n    var columnApi = this.gridOptionsWrapper.getColumnApi();\n    var skipSingleChildrenGroup = this.gridOptionsWrapper.isGroupRemoveSingleChildren();\n    var skipLowestSingleChildrenGroup = this.gridOptionsWrapper.isGroupRemoveLowestSingleChildren();\n    var context = this.gridOptionsWrapper.getContext();\n    // when in pivot mode, we always render cols on screen, never 'all columns'\n    var isPivotMode = this.columnController.isPivotMode();\n    var rowModelNormal = this.rowModel.getType() === agGridCommunity.Constants.ROW_MODEL_TYPE_CLIENT_SIDE;\n    var onlySelectedNonStandardModel = !rowModelNormal && params.onlySelected;\n    var columnsToExport = [];\n    if (agGridCommunity._.existsAndNotEmpty(params.columnKeys)) {\n      columnsToExport = this.columnController.getGridColumns(params.columnKeys);\n    } else if (params.allColumns && !isPivotMode) {\n      // add auto group column for tree data\n      columnsToExport = this.gridOptionsWrapper.isTreeData() ? this.columnController.getGridColumns([agGridCommunity.Constants.GROUP_AUTO_COLUMN_ID]) : [];\n      columnsToExport = columnsToExport.concat(this.columnController.getAllPrimaryColumns() || []);\n    } else {\n      columnsToExport = this.columnController.getAllDisplayedColumns();\n    }\n    if (params.customHeader) {\n      gridSerializingSession.addCustomContent(params.customHeader);\n    }\n    gridSerializingSession.prepare(columnsToExport);\n    // first pass, put in the header names of the cols\n    if (params.columnGroups) {\n      var groupInstanceIdCreator = new agGridCommunity.GroupInstanceIdCreator();\n      var displayedGroups = this.displayedGroupCreator.createDisplayedGroups(columnsToExport, this.columnController.getGridBalancedTree(), groupInstanceIdCreator, null);\n      this.recursivelyAddHeaderGroups(displayedGroups, gridSerializingSession, params.processGroupHeaderCallback);\n    }\n    if (!params.skipHeader) {\n      var gridRowIterator_1 = gridSerializingSession.onNewHeaderRow();\n      columnsToExport.forEach(function (column, index) {\n        gridRowIterator_1.onColumn(column, index, undefined);\n      });\n    }\n    this.pinnedRowModel.forEachPinnedTopRow(processRow);\n    if (isPivotMode) {\n      if (this.rowModel.forEachPivotNode) {\n        this.rowModel.forEachPivotNode(processRow);\n      } else {\n        //Must be enterprise, so we can just loop through all the nodes\n        this.rowModel.forEachNode(processRow);\n      }\n    } else {\n      // onlySelectedAllPages: user doing pagination and wants selected items from\n      // other pages, so cannot use the standard row model as it won't have rows from\n      // other pages.\n      // onlySelectedNonStandardModel: if user wants selected in non standard row model\n      // (eg viewport) then again rowmodel cannot be used, so need to use selected instead.\n      if (params.onlySelectedAllPages || onlySelectedNonStandardModel) {\n        var selectedNodes = this.selectionController.getSelectedNodes();\n        selectedNodes.forEach(function (node) {\n          processRow(node);\n        });\n      } else {\n        // here is everything else - including standard row model and selected. we don't use\n        // the selection model even when just using selected, so that the result is the order\n        // of the rows appearing on the screen.\n        if (rowModelNormal) {\n          this.rowModel.forEachNodeAfterFilterAndSort(processRow);\n        } else {\n          this.rowModel.forEachNode(processRow);\n        }\n      }\n    }\n    this.pinnedRowModel.forEachPinnedBottomRow(processRow);\n    if (params.customFooter) {\n      gridSerializingSession.addCustomContent(params.customFooter);\n    }\n    function processRow(node) {\n      var shouldSkipLowestGroup = skipLowestSingleChildrenGroup && node.leafGroup;\n      var shouldSkipCurrentGroup = node.allChildrenCount === 1 && (skipSingleChildrenGroup || shouldSkipLowestGroup);\n      if (node.group && (params.skipGroups || shouldSkipCurrentGroup)) {\n        return;\n      }\n      if (params.skipFooters && node.footer) {\n        return;\n      }\n      if (params.onlySelected && !node.isSelected()) {\n        return;\n      }\n      if (params.skipPinnedTop && node.rowPinned === 'top') {\n        return;\n      }\n      if (params.skipPinnedBottom && node.rowPinned === 'bottom') {\n        return;\n      }\n      // if we are in pivotMode, then the grid will show the root node only\n      // if it's not a leaf group\n      var nodeIsRootNode = node.level === -1;\n      if (nodeIsRootNode && !node.leafGroup) {\n        return;\n      }\n      var shouldRowBeSkipped = rowSkipper({\n        node: node,\n        api: api,\n        context: context\n      });\n      if (shouldRowBeSkipped) {\n        return;\n      }\n      var rowAccumulator = gridSerializingSession.onNewBodyRow();\n      columnsToExport.forEach(function (column, index) {\n        rowAccumulator.onColumn(column, index, node);\n      });\n      if (params.getCustomContentBelowRow) {\n        var content = params.getCustomContentBelowRow({\n          node: node,\n          api: api,\n          columnApi: columnApi,\n          context: context\n        });\n        if (content) {\n          gridSerializingSession.addCustomContent(content);\n        }\n      }\n    }\n    return gridSerializingSession.parse();\n  };\n  GridSerializer.prototype.recursivelyAddHeaderGroups = function (displayedGroups, gridSerializingSession, processGroupHeaderCallback) {\n    var directChildrenHeaderGroups = [];\n    displayedGroups.forEach(function (columnGroupChild) {\n      var columnGroup = columnGroupChild;\n      if (!columnGroup.getChildren) {\n        return;\n      }\n      columnGroup.getChildren().forEach(function (it) {\n        return directChildrenHeaderGroups.push(it);\n      });\n    });\n    if (displayedGroups.length > 0 && displayedGroups[0] instanceof agGridCommunity.ColumnGroup) {\n      this.doAddHeaderHeader(gridSerializingSession, displayedGroups, processGroupHeaderCallback);\n    }\n    if (directChildrenHeaderGroups && directChildrenHeaderGroups.length > 0) {\n      this.recursivelyAddHeaderGroups(directChildrenHeaderGroups, gridSerializingSession, processGroupHeaderCallback);\n    }\n  };\n  GridSerializer.prototype.doAddHeaderHeader = function (gridSerializingSession, displayedGroups, processGroupHeaderCallback) {\n    var _this = this;\n    var gridRowIterator = gridSerializingSession.onNewHeaderGroupingRow();\n    var columnIndex = 0;\n    displayedGroups.forEach(function (columnGroupChild) {\n      var columnGroup = columnGroupChild;\n      var name;\n      if (processGroupHeaderCallback) {\n        name = processGroupHeaderCallback({\n          columnGroup: columnGroup,\n          api: _this.gridOptionsWrapper.getApi(),\n          columnApi: _this.gridOptionsWrapper.getColumnApi(),\n          context: _this.gridOptionsWrapper.getContext()\n        });\n      } else {\n        name = _this.columnController.getDisplayNameForColumnGroup(columnGroup, 'header');\n      }\n      gridRowIterator.onColumn(name || '', columnIndex++, columnGroup.getLeafColumns().length - 1);\n    });\n  };\n  __decorate$s([agGridCommunity.Autowired('displayedGroupCreator')], GridSerializer.prototype, \"displayedGroupCreator\", void 0);\n  __decorate$s([agGridCommunity.Autowired('columnController')], GridSerializer.prototype, \"columnController\", void 0);\n  __decorate$s([agGridCommunity.Autowired('rowModel')], GridSerializer.prototype, \"rowModel\", void 0);\n  __decorate$s([agGridCommunity.Autowired('pinnedRowModel')], GridSerializer.prototype, \"pinnedRowModel\", void 0);\n  __decorate$s([agGridCommunity.Autowired('selectionController')], GridSerializer.prototype, \"selectionController\", void 0);\n  __decorate$s([agGridCommunity.Autowired('columnFactory')], GridSerializer.prototype, \"columnFactory\", void 0);\n  __decorate$s([agGridCommunity.Autowired('gridOptionsWrapper')], GridSerializer.prototype, \"gridOptionsWrapper\", void 0);\n  GridSerializer = __decorate$s([agGridCommunity.Bean(\"gridSerializer\")], GridSerializer);\n  return GridSerializer;\n}(agGridCommunity.BeanStub);\nvar RowType;\n(function (RowType) {\n  RowType[RowType[\"HEADER_GROUPING\"] = 0] = \"HEADER_GROUPING\";\n  RowType[RowType[\"HEADER\"] = 1] = \"HEADER\";\n  RowType[RowType[\"BODY\"] = 2] = \"BODY\";\n})(RowType || (RowType = {}));\nvar __extends$t = undefined && undefined.__extends || function () {\n  var _extendStatics30 = function extendStatics(d, b) {\n    _extendStatics30 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics30(d, b);\n  };\n  return function (d, b) {\n    _extendStatics30(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$t = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar LINE_SEPARATOR = '\\r\\n';\nvar CsvSerializingSession = /** @class */function (_super) {\n  __extends$t(CsvSerializingSession, _super);\n  function CsvSerializingSession(config) {\n    var _this = _super.call(this, config) || this;\n    _this.isFirstLine = true;\n    _this.result = '';\n    var suppressQuotes = config.suppressQuotes,\n      columnSeparator = config.columnSeparator;\n    _this.suppressQuotes = suppressQuotes;\n    _this.columnSeparator = columnSeparator;\n    return _this;\n  }\n  CsvSerializingSession.prototype.addCustomContent = function (content) {\n    var _this = this;\n    if (!content) {\n      return;\n    }\n    if (typeof content === 'string') {\n      // we used to require the customFooter to be prefixed with a newline but no longer do,\n      // so only add the newline if the user has not supplied one\n      if (!/^\\s*\\n/.test(content)) {\n        this.beginNewLine();\n      }\n      // replace whatever newlines are supplied with the style we're using\n      content = content.replace(/\\r?\\n/g, LINE_SEPARATOR);\n      this.result += content;\n    } else {\n      content.forEach(function (row) {\n        _this.beginNewLine();\n        row.forEach(function (cell, index) {\n          if (index !== 0) {\n            _this.result += _this.columnSeparator;\n          }\n          _this.result += _this.putInQuotes(cell.data.value || '');\n          if (cell.mergeAcross) {\n            _this.appendEmptyCells(cell.mergeAcross);\n          }\n        });\n      });\n    }\n  };\n  CsvSerializingSession.prototype.onNewHeaderGroupingRow = function () {\n    this.beginNewLine();\n    return {\n      onColumn: this.onNewHeaderGroupingRowColumn.bind(this)\n    };\n  };\n  CsvSerializingSession.prototype.onNewHeaderGroupingRowColumn = function (header, index, span) {\n    if (index != 0) {\n      this.result += this.columnSeparator;\n    }\n    this.result += this.putInQuotes(header);\n    this.appendEmptyCells(span);\n  };\n  CsvSerializingSession.prototype.appendEmptyCells = function (count) {\n    for (var i = 1; i <= count; i++) {\n      this.result += this.columnSeparator + this.putInQuotes(\"\");\n    }\n  };\n  CsvSerializingSession.prototype.onNewHeaderRow = function () {\n    this.beginNewLine();\n    return {\n      onColumn: this.onNewHeaderRowColumn.bind(this)\n    };\n  };\n  CsvSerializingSession.prototype.onNewHeaderRowColumn = function (column, index, node) {\n    if (index != 0) {\n      this.result += this.columnSeparator;\n    }\n    this.result += this.putInQuotes(this.extractHeaderValue(column));\n  };\n  CsvSerializingSession.prototype.onNewBodyRow = function () {\n    this.beginNewLine();\n    return {\n      onColumn: this.onNewBodyRowColumn.bind(this)\n    };\n  };\n  CsvSerializingSession.prototype.onNewBodyRowColumn = function (column, index, node) {\n    if (index != 0) {\n      this.result += this.columnSeparator;\n    }\n    this.result += this.putInQuotes(this.extractRowCellValue(column, index, agGridCommunity.Constants.EXPORT_TYPE_CSV, node));\n  };\n  CsvSerializingSession.prototype.putInQuotes = function (value) {\n    if (this.suppressQuotes) {\n      return value;\n    }\n    if (value === null || value === undefined) {\n      return '\"\"';\n    }\n    var stringValue;\n    if (typeof value === 'string') {\n      stringValue = value;\n    } else if (typeof value.toString === 'function') {\n      stringValue = value.toString();\n    } else {\n      console.warn('unknown value type during csv conversion');\n      stringValue = '';\n    }\n    // replace each \" with \"\" (ie two sets of double quotes is how to do double quotes in csv)\n    var valueEscaped = stringValue.replace(/\"/g, \"\\\"\\\"\");\n    return '\"' + valueEscaped + '\"';\n  };\n  CsvSerializingSession.prototype.parse = function () {\n    return this.result;\n  };\n  CsvSerializingSession.prototype.beginNewLine = function () {\n    if (!this.isFirstLine) {\n      this.result += LINE_SEPARATOR;\n    }\n    this.isFirstLine = false;\n  };\n  return CsvSerializingSession;\n}(BaseGridSerializingSession);\nvar BaseCreator = /** @class */function () {\n  function BaseCreator() {}\n  BaseCreator.prototype.setBeans = function (beans) {\n    this.beans = beans;\n  };\n  BaseCreator.prototype.export = function (userParams) {\n    if (this.isExportSuppressed()) {\n      console.warn(\"ag-grid: Export cancelled. Export is not allowed as per your configuration.\");\n      return '';\n    }\n    var _a = this.getMergedParamsAndData(userParams),\n      mergedParams = _a.mergedParams,\n      data = _a.data;\n    var fileNamePresent = mergedParams && mergedParams.fileName && mergedParams.fileName.length !== 0;\n    var fileName = fileNamePresent ? mergedParams.fileName : this.getDefaultFileName();\n    if (fileName.indexOf(\".\") === -1) {\n      fileName = fileName + \".\" + this.getDefaultFileExtension();\n    }\n    this.beans.downloader.download(fileName, this.packageFile(data));\n    return data;\n  };\n  BaseCreator.prototype.getData = function (params) {\n    return this.getMergedParamsAndData(params).data;\n  };\n  BaseCreator.prototype.getMergedParamsAndData = function (userParams) {\n    var mergedParams = this.mergeDefaultParams(userParams);\n    var data = this.beans.gridSerializer.serialize(this.createSerializingSession(mergedParams), mergedParams);\n    return {\n      mergedParams: mergedParams,\n      data: data\n    };\n  };\n  BaseCreator.prototype.mergeDefaultParams = function (userParams) {\n    var baseParams = this.beans.gridOptionsWrapper.getDefaultExportParams();\n    var params = {};\n    agGridCommunity._.assign(params, baseParams);\n    agGridCommunity._.assign(params, userParams);\n    return params;\n  };\n  BaseCreator.prototype.packageFile = function (data) {\n    return new Blob([\"\\uFEFF\", data], {\n      type: window.navigator.msSaveOrOpenBlob ? this.getMimeType() : 'octet/stream'\n    });\n  };\n  return BaseCreator;\n}();\nvar CsvCreator = /** @class */function (_super) {\n  __extends$t(CsvCreator, _super);\n  function CsvCreator() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CsvCreator.prototype.postConstruct = function () {\n    this.setBeans({\n      downloader: this.downloader,\n      gridSerializer: this.gridSerializer,\n      gridOptionsWrapper: this.gridOptionsWrapper\n    });\n  };\n  CsvCreator.prototype.exportDataAsCsv = function (params) {\n    return this.export(params);\n  };\n  CsvCreator.prototype.getDataAsCsv = function (params) {\n    return this.getData(params);\n  };\n  CsvCreator.prototype.getMimeType = function () {\n    return 'text/csv;charset=utf-8;';\n  };\n  CsvCreator.prototype.getDefaultFileName = function () {\n    return 'export.csv';\n  };\n  CsvCreator.prototype.getDefaultFileExtension = function () {\n    return 'csv';\n  };\n  CsvCreator.prototype.createSerializingSession = function (params) {\n    var _a = this,\n      columnController = _a.columnController,\n      valueService = _a.valueService,\n      gridOptionsWrapper = _a.gridOptionsWrapper;\n    var processCellCallback = params.processCellCallback,\n      processHeaderCallback = params.processHeaderCallback,\n      processGroupHeaderCallback = params.processGroupHeaderCallback,\n      processRowGroupCallback = params.processRowGroupCallback,\n      suppressQuotes = params.suppressQuotes,\n      columnSeparator = params.columnSeparator;\n    return new CsvSerializingSession({\n      columnController: columnController,\n      valueService: valueService,\n      gridOptionsWrapper: gridOptionsWrapper,\n      processCellCallback: processCellCallback || undefined,\n      processHeaderCallback: processHeaderCallback || undefined,\n      processGroupHeaderCallback: processGroupHeaderCallback || undefined,\n      processRowGroupCallback: processRowGroupCallback || undefined,\n      suppressQuotes: suppressQuotes || false,\n      columnSeparator: columnSeparator || ','\n    });\n  };\n  CsvCreator.prototype.isExportSuppressed = function () {\n    return this.gridOptionsWrapper.isSuppressCsvExport();\n  };\n  __decorate$t([agGridCommunity.Autowired('columnController')], CsvCreator.prototype, \"columnController\", void 0);\n  __decorate$t([agGridCommunity.Autowired('valueService')], CsvCreator.prototype, \"valueService\", void 0);\n  __decorate$t([agGridCommunity.Autowired('downloader')], CsvCreator.prototype, \"downloader\", void 0);\n  __decorate$t([agGridCommunity.Autowired('gridSerializer')], CsvCreator.prototype, \"gridSerializer\", void 0);\n  __decorate$t([agGridCommunity.Autowired('gridOptionsWrapper')], CsvCreator.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$t([agGridCommunity.PostConstruct], CsvCreator.prototype, \"postConstruct\", null);\n  CsvCreator = __decorate$t([agGridCommunity.Bean('csvCreator')], CsvCreator);\n  return CsvCreator;\n}(BaseCreator);\nvar __decorate$u = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar Downloader = /** @class */function () {\n  function Downloader() {}\n  Downloader.prototype.download = function (fileName, content) {\n    // Internet Explorer\n    if (window.navigator.msSaveOrOpenBlob) {\n      window.navigator.msSaveOrOpenBlob(content, fileName);\n    } else {\n      // Other Browsers\n      var element = document.createElement(\"a\");\n      var url_1 = window.URL.createObjectURL(content);\n      element.setAttribute(\"href\", url_1);\n      element.setAttribute(\"download\", fileName);\n      element.style.display = \"none\";\n      document.body.appendChild(element);\n      element.dispatchEvent(new MouseEvent('click', {\n        bubbles: false,\n        cancelable: true,\n        view: window\n      }));\n      document.body.removeChild(element);\n      window.setTimeout(function () {\n        window.URL.revokeObjectURL(url_1);\n      }, 0);\n    }\n  };\n  Downloader = __decorate$u([agGridCommunity.Bean(\"downloader\")], Downloader);\n  return Downloader;\n}();\nvar __extends$u = undefined && undefined.__extends || function () {\n  var _extendStatics31 = function extendStatics(d, b) {\n    _extendStatics31 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics31(d, b);\n  };\n  return function (d, b) {\n    _extendStatics31(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$v = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar LINE_SEPARATOR$1 = '\\r\\n';\nvar XmlFactory = /** @class */function (_super) {\n  __extends$u(XmlFactory, _super);\n  function XmlFactory() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  XmlFactory.prototype.createHeader = function (headerElement) {\n    if (headerElement === void 0) {\n      headerElement = {};\n    }\n    var headerStart = '<?';\n    var headerEnd = '?>';\n    var keys = ['version'];\n    if (!headerElement.version) {\n      headerElement.version = \"1.0\";\n    }\n    if (headerElement.encoding) {\n      keys.push('encoding');\n    }\n    if (headerElement.standalone) {\n      keys.push('standalone');\n    }\n    var att = keys.map(function (key) {\n      return key + \"=\\\"\" + headerElement[key] + \"\\\"\";\n    }).join(' ');\n    return headerStart + \"xml \" + att + \" \" + headerEnd;\n  };\n  XmlFactory.prototype.createXml = function (xmlElement, booleanTransformer) {\n    var _this = this;\n    var props = '';\n    if (xmlElement.properties) {\n      if (xmlElement.properties.prefixedAttributes) {\n        xmlElement.properties.prefixedAttributes.forEach(function (prefixedSet) {\n          Object.keys(prefixedSet.map).forEach(function (key) {\n            props += _this.returnAttributeIfPopulated(prefixedSet.prefix + key, prefixedSet.map[key], booleanTransformer);\n          });\n        });\n      }\n      if (xmlElement.properties.rawMap) {\n        Object.keys(xmlElement.properties.rawMap).forEach(function (key) {\n          props += _this.returnAttributeIfPopulated(key, xmlElement.properties.rawMap[key], booleanTransformer);\n        });\n      }\n    }\n    var result = '<' + xmlElement.name + props;\n    if (!xmlElement.children && xmlElement.textNode == null) {\n      return result + '/>' + LINE_SEPARATOR$1;\n    }\n    if (xmlElement.textNode != null) {\n      return result + '>' + xmlElement.textNode + '</' + xmlElement.name + '>' + LINE_SEPARATOR$1;\n    }\n    result += '>' + LINE_SEPARATOR$1;\n    if (xmlElement.children) {\n      xmlElement.children.forEach(function (it) {\n        result += _this.createXml(it, booleanTransformer);\n      });\n    }\n    return result + '</' + xmlElement.name + '>' + LINE_SEPARATOR$1;\n  };\n  XmlFactory.prototype.returnAttributeIfPopulated = function (key, value, booleanTransformer) {\n    if (!value && value !== '' && value !== 0) {\n      return '';\n    }\n    var xmlValue = value;\n    if (typeof value === 'boolean') {\n      if (booleanTransformer) {\n        xmlValue = booleanTransformer(value);\n      }\n    }\n    return \" \" + key + \"=\\\"\" + xmlValue + \"\\\"\";\n  };\n  XmlFactory = __decorate$v([agGridCommunity.Bean('xmlFactory')], XmlFactory);\n  return XmlFactory;\n}(agGridCommunity.BeanStub);\nvar __extends$v = undefined && undefined.__extends || function () {\n  var _extendStatics32 = function extendStatics(d, b) {\n    _extendStatics32 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics32(d, b);\n  };\n  return function (d, b) {\n    _extendStatics32(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$w = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// table for crc calculation\n// from: https://referencesource.microsoft.com/#System/sys/System/IO/compression/Crc32Helper.cs,3b31978c7d7f7246,references\nvar crcTable = [0, 1996959894, -301047508, -1727442502, 124634137, 1886057615, -379345611, -1637575261, 249268274, 2044508324, -522852066, -1747789432, 162941995, 2125561021, -407360249, -1866523247, 498536548, 1789927666, -205950648, -2067906082, 450548861, 1843258603, -187386543, -2083289657, 325883990, 1684777152, -43845254, -1973040660, 335633487, 1661365465, -99664541, -1928851979, 997073096, 1281953886, -715111964, -1570279054, 1006888145, 1258607687, -770865667, -1526024853, 901097722, 1119000684, -608450090, -1396901568, 853044451, 1172266101, -589951537, -1412350631, 651767980, 1373503546, -925412992, -1076862698, 565507253, 1454621731, -809855591, -1195530993, 671266974, 1594198024, -972236366, -1324619484, 795835527, 1483230225, -1050600021, -1234817731, 1994146192, 31158534, -1731059524, -271249366, 1907459465, 112637215, -1614814043, -390540237, 2013776290, 251722036, -1777751922, -519137256, 2137656763, 141376813, -1855689577, -429695999, 1802195444, 476864866, -2056965928, -228458418, 1812370925, 453092731, -2113342271, -183516073, 1706088902, 314042704, -1950435094, -54949764, 1658658271, 366619977, -1932296973, -69972891, 1303535960, 984961486, -1547960204, -725929758, 1256170817, 1037604311, -1529756563, -740887301, 1131014506, 879679996, -1385723834, -631195440, 1141124467, 855842277, -1442165665, -586318647, 1342533948, 654459306, -1106571248, -921952122, 1466479909, 544179635, -1184443383, -832445281, 1591671054, 702138776, -1328506846, -942167884, 1504918807, 783551873, -1212326853, -1061524307, -306674912, -1698712650, 62317068, 1957810842, -355121351, -1647151185, 81470997, 1943803523, -480048366, -1805370492, 225274430, 2053790376, -468791541, -1828061283, 167816743, 2097651377, -267414716, -2029476910, 503444072, 1762050814, -144550051, -2140837941, 426522225, 1852507879, -19653770, -1982649376, 282753626, 1742555852, -105259153, -1900089351, 397917763, 1622183637, -690576408, -1580100738, 953729732, 1340076626, -776247311, -1497606297, 1068828381, 1219638859, -670225446, -1358292148, 906185462, 1090812512, -547295293, -1469587627, 829329135, 1181335161, -882789492, -1134132454, 628085408, 1382605366, -871598187, -1156888829, 570562233, 1426400815, -977650754, -1296233688, 733239954, 1555261956, -1026031705, -1244606671, 752459403, 1541320221, -1687895376, -328994266, 1969922972, 40735498, -1677130071, -351390145, 1913087877, 83908371, -1782625662, -491226604, 2075208622, 213261112, -1831694693, -438977011, 2094854071, 198958881, -2032938284, -237706686, 1759359992, 534414190, -2118248755, -155638181, 1873836001, 414664567, -2012718362, -15766928, 1711684554, 285281116, -1889165569, -127750551, 1634467795, 376229701, -1609899400, -686959890, 1308918612, 956543938, -1486412191, -799009033, 1231636301, 1047427035, -1362007478, -640263460, 1088359270, 936918000, -1447252397, -558129467, 1202900863, 817233897, -1111625188, -893730166, 1404277552, 615818150, -1160759803, -841546093, 1423857449, 601450431, -1285129682, -1000256840, 1567103746, 711928724, -1274298825, -1022587231, 1510334235, 755167117];\nvar ZipContainer = /** @class */function (_super) {\n  __extends$v(ZipContainer, _super);\n  function ZipContainer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.folders = [];\n    _this.files = [];\n    _this.addFolder = function (path) {\n      _this.folders.push({\n        path: path,\n        created: new Date()\n      });\n    };\n    return _this;\n  }\n  ZipContainer.prototype.addFolders = function (paths) {\n    paths.forEach(this.addFolder);\n  };\n  ZipContainer.prototype.addFile = function (path, content) {\n    this.files.push({\n      path: path,\n      created: new Date(),\n      content: content\n    });\n  };\n  ZipContainer.prototype.clearStream = function () {\n    this.folders = [];\n    this.files = [];\n  };\n  ZipContainer.prototype.getContent = function (mimeType) {\n    if (mimeType === void 0) {\n      mimeType = 'application/zip';\n    }\n    var textOutput = this.buildFileStream();\n    var uInt8Output = this.buildUint8Array(textOutput);\n    this.clearStream();\n    return new Blob([uInt8Output], {\n      type: mimeType\n    });\n  };\n  ZipContainer.prototype.buildFileStream = function (fData) {\n    if (fData === void 0) {\n      fData = '';\n    }\n    var totalFiles = this.folders.concat(this.files);\n    var len = totalFiles.length;\n    var foData = '';\n    var lL = 0;\n    var cL = 0;\n    for (var _i = 0, totalFiles_1 = totalFiles; _i < totalFiles_1.length; _i++) {\n      var currentFile = totalFiles_1[_i];\n      var _a = this.getHeader(currentFile, lL),\n        fileHeader = _a.fileHeader,\n        folderHeader = _a.folderHeader,\n        content = _a.content;\n      lL += fileHeader.length + content.length;\n      cL += folderHeader.length;\n      fData += fileHeader + content;\n      foData += folderHeader;\n    }\n    var foEnd = this.buildFolderEnd(len, cL, lL);\n    return fData + foData + foEnd;\n  };\n  ZipContainer.prototype.getHeader = function (currentFile, offset) {\n    var content = currentFile.content,\n      path = currentFile.path,\n      created = currentFile.created;\n    var utf8_encode = agGridCommunity._.utf8_encode,\n      decToHex = agGridCommunity._.decToHex;\n    var utfPath = utf8_encode(path);\n    var isUTF8 = utfPath !== path;\n    var time = this.convertTime(created);\n    var dt = this.convertDate(created);\n    var extraFields = '';\n    if (isUTF8) {\n      var uExtraFieldPath = decToHex(1, 1) + decToHex(this.getFromCrc32Table(utfPath), 4) + utfPath;\n      extraFields = \"\\x75\\x70\" + decToHex(uExtraFieldPath.length, 2) + uExtraFieldPath;\n    }\n    var header = '\\x0A\\x00' + (isUTF8 ? '\\x00\\x08' : '\\x00\\x00') + '\\x00\\x00' + decToHex(time, 2) +\n    // last modified time\n    decToHex(dt, 2) +\n    // last modified date\n    decToHex(content ? this.getFromCrc32Table(content) : 0, 4) + decToHex(content ? content.length : 0, 4) +\n    // compressed size\n    decToHex(content ? content.length : 0, 4) +\n    // uncompressed size\n    decToHex(utfPath.length, 2) +\n    // file name length\n    decToHex(extraFields.length, 2); // extra field length\n    var fileHeader = 'PK\\x03\\x04' + header + utfPath + extraFields;\n    var folderHeader = 'PK\\x01\\x02' +\n    // central header\n    '\\x14\\x00' + header +\n    // file header\n    '\\x00\\x00' + '\\x00\\x00' + '\\x00\\x00' + (content ? '\\x00\\x00\\x00\\x00' : '\\x10\\x00\\x00\\x00') +\n    // external file attributes\n    decToHex(offset, 4) +\n    // relative offset of local header\n    utfPath +\n    // file name\n    extraFields; // extra field\n    return {\n      fileHeader: fileHeader,\n      folderHeader: folderHeader,\n      content: content || ''\n    };\n  };\n  ZipContainer.prototype.buildFolderEnd = function (tLen, cLen, lLen) {\n    var decToHex = agGridCommunity._.decToHex;\n    return 'PK\\x05\\x06' +\n    // central folder end\n    '\\x00\\x00' + '\\x00\\x00' + decToHex(tLen, 2) +\n    // total number of entries in the central folder\n    decToHex(tLen, 2) +\n    // total number of entries in the central folder\n    decToHex(cLen, 4) +\n    // size of the central folder\n    decToHex(lLen, 4) +\n    // central folder start offset\n    '\\x00\\x00';\n  };\n  ZipContainer.prototype.buildUint8Array = function (content) {\n    var uint8 = new Uint8Array(content.length);\n    for (var i = 0; i < uint8.length; i++) {\n      uint8[i] = content.charCodeAt(i);\n    }\n    return uint8;\n  };\n  ZipContainer.prototype.getFromCrc32Table = function (content, crc) {\n    if (crc === void 0) {\n      crc = 0;\n    }\n    if (!content.length) {\n      return 0;\n    }\n    crc ^= -1;\n    var j = 0;\n    var k = 0;\n    var l = 0;\n    for (var i = 0; i < content.length; i++) {\n      j = content.charCodeAt(i);\n      k = (crc ^ j) & 0xFF;\n      l = crcTable[k];\n      crc = crc >>> 8 ^ l;\n    }\n    return crc ^ -1;\n  };\n  ZipContainer.prototype.convertTime = function (date) {\n    var time = date.getHours();\n    time <<= 6;\n    time = time | date.getMinutes();\n    time <<= 5;\n    time = time | date.getSeconds() / 2;\n    return time;\n  };\n  ZipContainer.prototype.convertDate = function (date) {\n    var dt = date.getFullYear() - 1980;\n    dt <<= 4;\n    dt = dt | date.getMonth() + 1;\n    dt <<= 5;\n    dt = dt | date.getDate();\n    return dt;\n  };\n  ZipContainer = __decorate$w([agGridCommunity.Bean('zipContainer')], ZipContainer);\n  return ZipContainer;\n}(agGridCommunity.BeanStub);\nvar CsvExportModule = {\n  moduleName: agGridCommunity.ModuleNames.CsvExportModule,\n  beans: [CsvCreator, Downloader, XmlFactory, GridSerializer, ZipContainer]\n};\nvar __extends$w = undefined && undefined.__extends || function () {\n  var _extendStatics33 = function extendStatics(d, b) {\n    _extendStatics33 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics33(d, b);\n  };\n  return function (d, b) {\n    _extendStatics33(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __spreadArrays$2 = undefined && undefined.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nvar ExcelXmlSerializingSession = /** @class */function (_super) {\n  __extends$w(ExcelXmlSerializingSession, _super);\n  function ExcelXmlSerializingSession(config) {\n    var _this = _super.call(this, config) || this;\n    _this.mixedStyles = {};\n    _this.mixedStyleCounter = 0;\n    _this.rows = [];\n    _this.config = agGridCommunity._.assign({}, config);\n    _this.stylesByIds = {};\n    _this.config.baseExcelStyles.forEach(function (style) {\n      _this.stylesByIds[style.id] = style;\n    });\n    _this.excelStyles = __spreadArrays$2(_this.config.baseExcelStyles);\n    return _this;\n  }\n  ExcelXmlSerializingSession.prototype.addCustomContent = function (customContent) {\n    var _this = this;\n    customContent.forEach(function (cells) {\n      return _this.rows.push({\n        cells: cells\n      });\n    });\n  };\n  ExcelXmlSerializingSession.prototype.prepare = function (columnsToExport) {\n    var _this = this;\n    _super.prototype.prepare.call(this, columnsToExport);\n    this.cols = columnsToExport.map(function (col, i) {\n      return _this.convertColumnToExcel(col, i);\n    });\n  };\n  ExcelXmlSerializingSession.prototype.onNewHeaderGroupingRow = function () {\n    var _this = this;\n    var currentCells = [];\n    this.rows.push({\n      cells: currentCells,\n      height: this.config.headerRowHeight\n    });\n    return {\n      onColumn: function onColumn(header, index, span) {\n        var styleIds = _this.config.styleLinker(RowType.HEADER_GROUPING, 1, index, \"grouping-\" + header, undefined, undefined);\n        currentCells.push(_this.createMergedCell(styleIds && styleIds.length > 0 ? styleIds[0] : undefined, \"String\", header, span));\n      }\n    };\n  };\n  ExcelXmlSerializingSession.prototype.onNewHeaderRow = function () {\n    return this.onNewRow(this.onNewHeaderColumn, this.config.headerRowHeight);\n  };\n  ExcelXmlSerializingSession.prototype.onNewBodyRow = function () {\n    return this.onNewRow(this.onNewBodyColumn, this.config.rowHeight);\n  };\n  ExcelXmlSerializingSession.prototype.onNewRow = function (onNewColumnAccumulator, height) {\n    var currentCells = [];\n    this.rows.push({\n      cells: currentCells,\n      height: height\n    });\n    return {\n      onColumn: onNewColumnAccumulator.bind(this, this.rows.length, currentCells)()\n    };\n  };\n  ExcelXmlSerializingSession.prototype.onNewHeaderColumn = function (rowIndex, currentCells) {\n    var _this = this;\n    return function (column, index) {\n      var nameForCol = _this.extractHeaderValue(column);\n      var styleIds = _this.config.styleLinker(RowType.HEADER, rowIndex, index, nameForCol, column, undefined);\n      currentCells.push(_this.createCell(styleIds && styleIds.length > 0 ? styleIds[0] : undefined, 'String', nameForCol));\n    };\n  };\n  ExcelXmlSerializingSession.prototype.parse = function () {\n    // adding custom content might have made some rows wider than the grid, so add new columns\n    var longestRow = this.rows.reduce(function (a, b) {\n      return Math.max(a, b.cells.length);\n    }, 0);\n    while (this.cols.length < longestRow) {\n      this.cols.push(this.convertColumnToExcel(null, this.cols.length + 1));\n    }\n    var data = [{\n      name: this.config.sheetName,\n      table: {\n        columns: this.cols,\n        rows: this.rows\n      }\n    }];\n    return this.createExcel(data);\n  };\n  ExcelXmlSerializingSession.prototype.createExcel = function (data) {\n    return this.config.excelFactory.createExcel(this.excelStyles, data, []);\n  };\n  ExcelXmlSerializingSession.prototype.onNewBodyColumn = function (rowIndex, currentCells) {\n    var _this = this;\n    return function (column, index, node) {\n      var valueForCell = _this.extractRowCellValue(column, index, agGridCommunity.Constants.EXPORT_TYPE_EXCEL, node);\n      var styleIds = _this.config.styleLinker(RowType.BODY, rowIndex, index, valueForCell, column, node);\n      var excelStyleId;\n      if (styleIds && styleIds.length == 1) {\n        excelStyleId = styleIds[0];\n      } else if (styleIds && styleIds.length > 1) {\n        var key = styleIds.join(\"-\");\n        if (!_this.mixedStyles[key]) {\n          _this.addNewMixedStyle(styleIds);\n        }\n        excelStyleId = _this.mixedStyles[key].excelID;\n      }\n      currentCells.push(_this.createCell(excelStyleId, _this.getDataTypeForValue(valueForCell), valueForCell));\n    };\n  };\n  ExcelXmlSerializingSession.prototype.getDataTypeForValue = function (valueForCell) {\n    return agGridCommunity._.isNumeric(valueForCell) ? 'Number' : 'String';\n  };\n  ExcelXmlSerializingSession.prototype.addNewMixedStyle = function (styleIds) {\n    var _this = this;\n    this.mixedStyleCounter += 1;\n    var excelId = 'mixedStyle' + this.mixedStyleCounter;\n    var resultantStyle = {};\n    styleIds.forEach(function (styleId) {\n      _this.excelStyles.forEach(function (excelStyle) {\n        if (excelStyle.id === styleId) {\n          agGridCommunity._.mergeDeep(resultantStyle, agGridCommunity._.deepCloneObject(excelStyle));\n        }\n      });\n    });\n    resultantStyle.id = excelId;\n    resultantStyle.name = excelId;\n    var key = styleIds.join(\"-\");\n    this.mixedStyles[key] = {\n      excelID: excelId,\n      key: key,\n      result: resultantStyle\n    };\n    this.excelStyles.push(resultantStyle);\n    this.stylesByIds[excelId] = resultantStyle;\n  };\n  ExcelXmlSerializingSession.prototype.styleExists = function (styleId) {\n    if (styleId == null) {\n      return false;\n    }\n    return this.stylesByIds[styleId];\n  };\n  ExcelXmlSerializingSession.prototype.createCell = function (styleId, type, value) {\n    var _this = this;\n    var actualStyle = styleId && this.stylesByIds[styleId];\n    var styleExists = actualStyle !== undefined;\n    function getType() {\n      if (styleExists && actualStyle.dataType) {\n        switch (actualStyle.dataType) {\n          case 'string':\n            return 'String';\n          case 'number':\n            return 'Number';\n          case 'dateTime':\n            return 'DateTime';\n          case 'error':\n            return 'Error';\n          case 'boolean':\n            return 'Boolean';\n          default:\n            console.warn(\"ag-grid: Unrecognized data type for excel export [\" + actualStyle.id + \".dataType=\" + actualStyle.dataType + \"]\");\n        }\n      }\n      return type;\n    }\n    var typeTransformed = getType();\n    var massageText = function massageText(val) {\n      if (_this.config.suppressTextAsCDATA) {\n        return agGridCommunity._.escapeString(val);\n      }\n      var cdataStart = '<![CDATA[';\n      var cdataEnd = ']]>';\n      var cdataEndRegex = new RegExp(cdataEnd, \"g\");\n      return cdataStart\n      // CDATA sections are closed by the character sequence ']]>' and there is no\n      // way of escaping this, so if the text contains the offending sequence, emit\n      // multiple CDATA sections and split the characters between them.\n      + String(val).replace(cdataEndRegex, ']]' + cdataEnd + cdataStart + '>') + cdataEnd;\n    };\n    var convertBoolean = function convertBoolean(val) {\n      if (!val || val === '0' || val === 'false') {\n        return '0';\n      }\n      return '1';\n    };\n    return {\n      styleId: styleExists ? styleId : undefined,\n      data: {\n        type: typeTransformed,\n        value: typeTransformed === 'String' ? massageText(value) : typeTransformed === 'Number' ? Number(value).valueOf() + '' : typeTransformed === 'Boolean' ? convertBoolean(value) : value\n      }\n    };\n  };\n  ExcelXmlSerializingSession.prototype.createMergedCell = function (styleId, type, value, numOfCells) {\n    return {\n      styleId: this.styleExists(styleId) ? styleId : undefined,\n      data: {\n        type: type,\n        value: value\n      },\n      mergeAcross: numOfCells\n    };\n  };\n  ExcelXmlSerializingSession.prototype.convertColumnToExcel = function (column, index) {\n    var columnWidth = this.config.columnWidth;\n    if (columnWidth) {\n      if (typeof columnWidth === 'number') {\n        return {\n          width: columnWidth\n        };\n      } else {\n        return {\n          width: columnWidth({\n            column: column,\n            index: index\n          })\n        };\n      }\n    }\n    if (column) {\n      var smallestUsefulWidth = 75;\n      return {\n        width: Math.max(column.getActualWidth(), smallestUsefulWidth)\n      };\n    }\n    return {};\n  };\n  return ExcelXmlSerializingSession;\n}(BaseGridSerializingSession);\nvar __extends$x = undefined && undefined.__extends || function () {\n  var _extendStatics34 = function extendStatics(d, b) {\n    _extendStatics34 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics34(d, b);\n  };\n  return function (d, b) {\n    _extendStatics34(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar ExcelXlsxSerializingSession = /** @class */function (_super) {\n  __extends$x(ExcelXlsxSerializingSession, _super);\n  function ExcelXlsxSerializingSession() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.stringList = [];\n    _this.stringMap = {};\n    return _this;\n  }\n  ExcelXlsxSerializingSession.prototype.onNewHeaderGroupingRow = function () {\n    var _this = this;\n    var currentCells = [];\n    this.rows.push({\n      cells: currentCells,\n      height: this.config.headerRowHeight\n    });\n    return {\n      onColumn: function onColumn(header, index, span) {\n        var styleIds = _this.config.styleLinker(RowType.HEADER_GROUPING, 1, index, \"grouping-\" + header, undefined, undefined);\n        currentCells.push(_this.createMergedCell(styleIds && styleIds.length > 0 ? styleIds[0] : undefined, 's', header, span));\n      }\n    };\n  };\n  ExcelXlsxSerializingSession.prototype.onNewHeaderColumn = function (rowIndex, currentCells) {\n    var _this = this;\n    return function (column, index, node) {\n      var nameForCol = _this.extractHeaderValue(column);\n      var styleIds = _this.config.styleLinker(RowType.HEADER, rowIndex, index, nameForCol, column, undefined);\n      currentCells.push(_this.createCell(styleIds && styleIds.length > 0 ? styleIds[0] : undefined, 's', nameForCol));\n    };\n  };\n  ExcelXlsxSerializingSession.prototype.createExcel = function (data) {\n    return this.config.excelFactory.createExcel(this.excelStyles, data, this.stringList);\n  };\n  ExcelXlsxSerializingSession.prototype.getDataTypeForValue = function (valueForCell) {\n    return agGridCommunity._.isNumeric(valueForCell) ? 'n' : 's';\n  };\n  ExcelXlsxSerializingSession.prototype.getStringPosition = function (val) {\n    var pos = this.stringMap[val];\n    if (pos === undefined) {\n      pos = this.stringMap[val] = this.stringList.length;\n      this.stringList.push(val);\n    }\n    return pos;\n  };\n  ExcelXlsxSerializingSession.prototype.createCell = function (styleId, type, value) {\n    var actualStyle = styleId && this.stylesByIds[styleId];\n    var styleExists = actualStyle !== undefined;\n    function getType() {\n      if (styleExists && actualStyle.dataType) {\n        switch (actualStyle.dataType) {\n          case 'string':\n            return 's';\n          case 'number':\n            return 'n';\n          case 'dateTime':\n            return 'd';\n          case 'error':\n            return 'e';\n          case 'boolean':\n            return 'b';\n          default:\n            console.warn(\"ag-grid: Unrecognized data type for excel export [\" + actualStyle.id + \".dataType=\" + actualStyle.dataType + \"]\");\n        }\n      }\n      return type;\n    }\n    var typeTransformed = getType();\n    return {\n      styleId: styleExists ? styleId : undefined,\n      data: {\n        type: typeTransformed,\n        value: typeTransformed === 's' ? this.getStringPosition(value == null ? '' : value).toString() : typeTransformed === 'n' ? Number(value).toString() : value\n      }\n    };\n  };\n  ExcelXlsxSerializingSession.prototype.createMergedCell = function (styleId, type, value, numOfCells) {\n    return {\n      styleId: this.styleExists(styleId) ? styleId : undefined,\n      data: {\n        type: type,\n        value: type === 's' ? this.getStringPosition(value == null ? '' : value).toString() : value\n      },\n      mergeAcross: numOfCells\n    };\n  };\n  return ExcelXlsxSerializingSession;\n}(ExcelXmlSerializingSession);\nvar __extends$y = undefined && undefined.__extends || function () {\n  var _extendStatics35 = function extendStatics(d, b) {\n    _extendStatics35 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics35(d, b);\n  };\n  return function (d, b) {\n    _extendStatics35(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = undefined && undefined.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __decorate$x = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ExcelCreator = /** @class */function (_super) {\n  __extends$y(ExcelCreator, _super);\n  function ExcelCreator() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  ExcelCreator.prototype.postConstruct = function () {\n    this.setBeans({\n      downloader: this.downloader,\n      gridSerializer: this.gridSerializer,\n      gridOptionsWrapper: this.gridOptionsWrapper\n    });\n  };\n  ExcelCreator.prototype.exportDataAsExcel = function (params) {\n    this.setExportMode(params ? params.exportMode : undefined);\n    return this.export(params);\n  };\n  ExcelCreator.prototype.getDataAsExcelXml = function (params) {\n    if (params && params.exportMode) {\n      delete params.exportMode;\n    }\n    this.setExportMode('xml');\n    return this.getData(params || {});\n  };\n  ExcelCreator.prototype.getMimeType = function () {\n    return this.getExportMode() === 'xml' ? 'application/vnd.ms-excel' : 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\n  };\n  ExcelCreator.prototype.getDefaultFileName = function () {\n    return \"export.\" + this.getExportMode();\n  };\n  ExcelCreator.prototype.getDefaultFileExtension = function () {\n    return this.getExportMode();\n  };\n  ExcelCreator.prototype.createSerializingSession = function (params) {\n    var _a = this,\n      columnController = _a.columnController,\n      valueService = _a.valueService,\n      gridOptionsWrapper = _a.gridOptionsWrapper;\n    var isXlsx = this.getExportMode() === 'xlsx';\n    var excelFactory = isXlsx ? this.xlsxFactory : this.excelXmlFactory;\n    var sheetName = 'ag-grid';\n    if (agGridCommunity._.exists(params.sheetName)) {\n      sheetName = agGridCommunity._.utf8_encode(params.sheetName.toString().substr(0, 31));\n    }\n    var config = __assign(__assign({}, params), {\n      columnController: columnController,\n      valueService: valueService,\n      gridOptionsWrapper: gridOptionsWrapper,\n      headerRowHeight: params.headerRowHeight || params.rowHeight,\n      sheetName: sheetName,\n      excelFactory: excelFactory,\n      baseExcelStyles: this.gridOptions.excelStyles || [],\n      styleLinker: this.styleLinker.bind(this)\n    });\n    return new (isXlsx ? ExcelXlsxSerializingSession : ExcelXmlSerializingSession)(config);\n  };\n  ExcelCreator.prototype.styleLinker = function (rowType, rowIndex, colIndex, value, column, node) {\n    if (rowType === RowType.HEADER || rowType === RowType.HEADER_GROUPING) {\n      return [\"header\"];\n    }\n    var styles = this.gridOptions.excelStyles;\n    if (!styles || !styles.length) {\n      return null;\n    }\n    var styleIds = styles.map(function (it) {\n      return it.id;\n    });\n    var applicableStyles = [];\n    this.stylingService.processAllCellClasses(column.getColDef(), {\n      value: value,\n      data: node.data,\n      node: node,\n      colDef: column.getColDef(),\n      rowIndex: rowIndex,\n      api: this.gridOptionsWrapper.getApi(),\n      columnApi: this.gridOptionsWrapper.getColumnApi(),\n      $scope: null,\n      context: this.gridOptionsWrapper.getContext()\n    }, function (className) {\n      if (styleIds.indexOf(className) > -1) {\n        applicableStyles.push(className);\n      }\n    });\n    return applicableStyles.sort(function (left, right) {\n      return styleIds.indexOf(left) < styleIds.indexOf(right) ? -1 : 1;\n    });\n  };\n  ExcelCreator.prototype.isExportSuppressed = function () {\n    return this.gridOptionsWrapper.isSuppressExcelExport();\n  };\n  ExcelCreator.prototype.setExportMode = function (exportMode) {\n    this.exportMode = exportMode;\n  };\n  ExcelCreator.prototype.getExportMode = function () {\n    return this.exportMode || 'xlsx';\n  };\n  ExcelCreator.prototype.packageFile = function (data) {\n    if (this.getExportMode() === 'xml') {\n      return _super.prototype.packageFile.call(this, data);\n    }\n    var _a = this,\n      zipContainer = _a.zipContainer,\n      xlsxFactory = _a.xlsxFactory;\n    zipContainer.addFolders(['xl/worksheets/', 'xl/', 'xl/theme/', 'xl/_rels/', 'docProps/', '_rels/']);\n    zipContainer.addFile('xl/worksheets/sheet1.xml', data);\n    zipContainer.addFile('xl/workbook.xml', xlsxFactory.createWorkbook());\n    zipContainer.addFile('xl/styles.xml', xlsxFactory.createStylesheet());\n    zipContainer.addFile('xl/sharedStrings.xml', xlsxFactory.createSharedStrings());\n    zipContainer.addFile('xl/theme/theme1.xml', xlsxFactory.createTheme());\n    zipContainer.addFile('xl/_rels/workbook.xml.rels', xlsxFactory.createWorkbookRels());\n    zipContainer.addFile('docProps/core.xml', xlsxFactory.createCore());\n    zipContainer.addFile('[Content_Types].xml', xlsxFactory.createContentTypes());\n    zipContainer.addFile('_rels/.rels', xlsxFactory.createRels());\n    return zipContainer.getContent('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\n  };\n  __decorate$x([agGridCommunity.Autowired('excelXmlFactory')], ExcelCreator.prototype, \"excelXmlFactory\", void 0);\n  __decorate$x([agGridCommunity.Autowired('excelXlsxFactory')], ExcelCreator.prototype, \"xlsxFactory\", void 0);\n  __decorate$x([agGridCommunity.Autowired('columnController')], ExcelCreator.prototype, \"columnController\", void 0);\n  __decorate$x([agGridCommunity.Autowired('valueService')], ExcelCreator.prototype, \"valueService\", void 0);\n  __decorate$x([agGridCommunity.Autowired('gridOptions')], ExcelCreator.prototype, \"gridOptions\", void 0);\n  __decorate$x([agGridCommunity.Autowired('stylingService')], ExcelCreator.prototype, \"stylingService\", void 0);\n  __decorate$x([agGridCommunity.Autowired('downloader')], ExcelCreator.prototype, \"downloader\", void 0);\n  __decorate$x([agGridCommunity.Autowired('gridSerializer')], ExcelCreator.prototype, \"gridSerializer\", void 0);\n  __decorate$x([agGridCommunity.Autowired('gridOptionsWrapper')], ExcelCreator.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$x([agGridCommunity.Autowired('zipContainer')], ExcelCreator.prototype, \"zipContainer\", void 0);\n  __decorate$x([agGridCommunity.PostConstruct], ExcelCreator.prototype, \"postConstruct\", null);\n  ExcelCreator = __decorate$x([agGridCommunity.Bean('excelCreator')], ExcelCreator);\n  return ExcelCreator;\n}(BaseCreator);\nvar ExcelExportModule = {\n  moduleName: agGridCommunity.ModuleNames.ExcelExportModule,\n  beans: [\n  // beans in this module\n  ExcelCreator, ExcelXmlFactory, ExcelXlsxFactory,\n  // these beans are part of CSV Export module\n  GridSerializer, ZipContainer, XmlFactory, Downloader, CsvCreator],\n  dependantModules: [CsvExportModule, EnterpriseCoreModule]\n};\nvar __extends$z = undefined && undefined.__extends || function () {\n  var _extendStatics36 = function extendStatics(d, b) {\n    _extendStatics36 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics36(d, b);\n  };\n  return function (d, b) {\n    _extendStatics36(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$y = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar EXPAND_STATE;\n(function (EXPAND_STATE) {\n  EXPAND_STATE[EXPAND_STATE[\"EXPANDED\"] = 0] = \"EXPANDED\";\n  EXPAND_STATE[EXPAND_STATE[\"COLLAPSED\"] = 1] = \"COLLAPSED\";\n  EXPAND_STATE[EXPAND_STATE[\"INDETERMINATE\"] = 2] = \"INDETERMINATE\";\n})(EXPAND_STATE || (EXPAND_STATE = {}));\nvar FiltersToolPanelHeaderPanel = /** @class */function (_super) {\n  __extends$z(FiltersToolPanelHeaderPanel, _super);\n  function FiltersToolPanelHeaderPanel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  FiltersToolPanelHeaderPanel.prototype.preConstruct = function () {\n    this.setTemplate( /* html */\"<div class=\\\"ag-filter-toolpanel-search\\\" role=\\\"presentation\\\">\\n                <div ref=\\\"eExpand\\\" class=\\\"ag-filter-toolpanel-expand\\\"></div>\\n                <ag-input-text-field ref=\\\"eFilterTextField\\\" class=\\\"ag-filter-toolpanel-search-input\\\"></ag-input-text-field>\\n            </div>\");\n  };\n  FiltersToolPanelHeaderPanel.prototype.postConstruct = function () {\n    this.eFilterTextField.onValueChange(this.onSearchTextChanged.bind(this));\n    this.eFilterTextField.setInputAriaLabel('Search');\n    this.createExpandIcons();\n    this.setExpandState(EXPAND_STATE.EXPANDED);\n    this.addManagedListener(this.eExpand, 'click', this.onExpandClicked.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED, this.showOrHideOptions.bind(this));\n  };\n  FiltersToolPanelHeaderPanel.prototype.init = function (params) {\n    this.params = params;\n    if (this.columnController.isReady()) {\n      this.showOrHideOptions();\n    }\n  };\n  FiltersToolPanelHeaderPanel.prototype.createExpandIcons = function () {\n    this.eExpand.appendChild(this.eExpandChecked = agGridCommunity._.createIconNoSpan('columnSelectOpen', this.gridOptionsWrapper));\n    this.eExpand.appendChild(this.eExpandUnchecked = agGridCommunity._.createIconNoSpan('columnSelectClosed', this.gridOptionsWrapper));\n    this.eExpand.appendChild(this.eExpandIndeterminate = agGridCommunity._.createIconNoSpan('columnSelectIndeterminate', this.gridOptionsWrapper));\n  };\n  // we only show expand / collapse if we are showing filters\n  FiltersToolPanelHeaderPanel.prototype.showOrHideOptions = function () {\n    var showFilterSearch = !this.params.suppressFilterSearch;\n    var showExpand = !this.params.suppressExpandAll;\n    var translate = this.gridOptionsWrapper.getLocaleTextFunc();\n    this.eFilterTextField.setInputPlaceholder(translate('searchOoo', 'Search...'));\n    var isFilterGroupPresent = function isFilterGroupPresent(col) {\n      return col.getOriginalParent() && col.isFilterAllowed();\n    };\n    var filterGroupsPresent = this.columnController.getAllGridColumns().some(isFilterGroupPresent);\n    agGridCommunity._.setDisplayed(this.eFilterTextField.getGui(), showFilterSearch);\n    agGridCommunity._.setDisplayed(this.eExpand, showExpand && filterGroupsPresent);\n  };\n  FiltersToolPanelHeaderPanel.prototype.onSearchTextChanged = function () {\n    var _this = this;\n    if (!this.onSearchTextChangedDebounced) {\n      this.onSearchTextChangedDebounced = agGridCommunity._.debounce(function () {\n        _this.dispatchEvent({\n          type: 'searchChanged',\n          searchText: _this.eFilterTextField.getValue()\n        });\n      }, 300);\n    }\n    this.onSearchTextChangedDebounced();\n  };\n  FiltersToolPanelHeaderPanel.prototype.onExpandClicked = function () {\n    var event = this.currentExpandState === EXPAND_STATE.EXPANDED ? {\n      type: 'collapseAll'\n    } : {\n      type: 'expandAll'\n    };\n    this.dispatchEvent(event);\n  };\n  FiltersToolPanelHeaderPanel.prototype.setExpandState = function (state) {\n    this.currentExpandState = state;\n    agGridCommunity._.setDisplayed(this.eExpandChecked, this.currentExpandState === EXPAND_STATE.EXPANDED);\n    agGridCommunity._.setDisplayed(this.eExpandUnchecked, this.currentExpandState === EXPAND_STATE.COLLAPSED);\n    agGridCommunity._.setDisplayed(this.eExpandIndeterminate, this.currentExpandState === EXPAND_STATE.INDETERMINATE);\n  };\n  __decorate$y([agGridCommunity.Autowired('gridOptionsWrapper')], FiltersToolPanelHeaderPanel.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$y([agGridCommunity.Autowired('columnController')], FiltersToolPanelHeaderPanel.prototype, \"columnController\", void 0);\n  __decorate$y([agGridCommunity.RefSelector('eExpand')], FiltersToolPanelHeaderPanel.prototype, \"eExpand\", void 0);\n  __decorate$y([agGridCommunity.RefSelector('eFilterTextField')], FiltersToolPanelHeaderPanel.prototype, \"eFilterTextField\", void 0);\n  __decorate$y([agGridCommunity.PreConstruct], FiltersToolPanelHeaderPanel.prototype, \"preConstruct\", null);\n  __decorate$y([agGridCommunity.PostConstruct], FiltersToolPanelHeaderPanel.prototype, \"postConstruct\", null);\n  return FiltersToolPanelHeaderPanel;\n}(agGridCommunity.Component);\nvar __extends$A = undefined && undefined.__extends || function () {\n  var _extendStatics37 = function extendStatics(d, b) {\n    _extendStatics37 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics37(d, b);\n  };\n  return function (d, b) {\n    _extendStatics37(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$z = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ToolPanelFilterComp = /** @class */function (_super) {\n  __extends$A(ToolPanelFilterComp, _super);\n  function ToolPanelFilterComp(hideHeader) {\n    if (hideHeader === void 0) {\n      hideHeader = false;\n    }\n    var _this = _super.call(this, ToolPanelFilterComp.TEMPLATE) || this;\n    _this.expanded = false;\n    _this.hideHeader = hideHeader;\n    return _this;\n  }\n  ToolPanelFilterComp.prototype.postConstruct = function () {\n    this.eExpandChecked = agGridCommunity._.createIconNoSpan('columnSelectOpen', this.gridOptionsWrapper);\n    this.eExpandUnchecked = agGridCommunity._.createIconNoSpan('columnSelectClosed', this.gridOptionsWrapper);\n    this.eExpand.appendChild(this.eExpandChecked);\n    this.eExpand.appendChild(this.eExpandUnchecked);\n  };\n  ToolPanelFilterComp.prototype.setColumn = function (column) {\n    var _this = this;\n    this.column = column;\n    this.eFilterName.innerText = this.columnController.getDisplayNameForColumn(this.column, 'header', false);\n    this.addManagedListener(this.eFilterToolPanelHeader, 'click', this.toggleExpanded.bind(this));\n    this.addManagedListener(this.eFilterToolPanelHeader, 'keydown', function (e) {\n      if (e.keyCode === agGridCommunity.KeyCode.ENTER) {\n        _this.toggleExpanded();\n      }\n    });\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_FILTER_OPENED, this.onFilterOpened.bind(this));\n    this.addInIcon('filter', this.eFilterIcon, this.column);\n    agGridCommunity._.addOrRemoveCssClass(this.eFilterIcon, 'ag-hidden', !this.isFilterActive());\n    agGridCommunity._.addCssClass(this.eExpandChecked, 'ag-hidden');\n    if (this.hideHeader) {\n      agGridCommunity._.addOrRemoveCssClass(this.eFilterToolPanelHeader, 'ag-hidden', true);\n      this.eFilterToolPanelHeader.removeAttribute('tabindex');\n    } else {\n      this.eFilterToolPanelHeader.setAttribute('tabindex', '0');\n    }\n    this.addManagedListener(this.column, agGridCommunity.Column.EVENT_FILTER_CHANGED, this.onFilterChanged.bind(this));\n  };\n  ToolPanelFilterComp.prototype.getColumn = function () {\n    return this.column;\n  };\n  ToolPanelFilterComp.prototype.getColumnFilterName = function () {\n    return this.columnController.getDisplayNameForColumn(this.column, 'header', false);\n  };\n  ToolPanelFilterComp.prototype.addCssClassToTitleBar = function (cssClass) {\n    agGridCommunity._.addCssClass(this.eFilterToolPanelHeader, cssClass);\n  };\n  ToolPanelFilterComp.prototype.addInIcon = function (iconName, eParent, column) {\n    if (eParent == null) {\n      return;\n    }\n    var eIcon = agGridCommunity._.createIconNoSpan(iconName, this.gridOptionsWrapper, column);\n    eParent.appendChild(eIcon);\n  };\n  ToolPanelFilterComp.prototype.isFilterActive = function () {\n    return this.filterManager.isFilterActive(this.column);\n  };\n  ToolPanelFilterComp.prototype.onFilterChanged = function () {\n    agGridCommunity._.addOrRemoveCssClass(this.eFilterIcon, 'ag-hidden', !this.isFilterActive());\n    this.dispatchEvent({\n      type: agGridCommunity.Column.EVENT_FILTER_CHANGED\n    });\n  };\n  ToolPanelFilterComp.prototype.toggleExpanded = function () {\n    this.expanded ? this.collapse() : this.expand();\n  };\n  ToolPanelFilterComp.prototype.expand = function () {\n    var _this = this;\n    if (this.expanded) return;\n    this.expanded = true;\n    var container = agGridCommunity._.loadTemplate( /* html */\"<div class=\\\"ag-filter-toolpanel-instance-filter\\\"></div>\");\n    var filterPromise = this.filterManager.getOrCreateFilterWrapper(this.column, 'TOOLBAR').filterPromise;\n    if (filterPromise) {\n      filterPromise.then(function (filter) {\n        _this.underlyingFilter = filter;\n        container.appendChild(filter.getGui());\n        _this.agFilterToolPanelBody.appendChild(container);\n        if (filter.afterGuiAttached) {\n          filter.afterGuiAttached({\n            container: 'toolPanel'\n          });\n        }\n      });\n    }\n    agGridCommunity._.setDisplayed(this.eExpandChecked, true);\n    agGridCommunity._.setDisplayed(this.eExpandUnchecked, false);\n  };\n  ToolPanelFilterComp.prototype.collapse = function () {\n    if (!this.expanded) return;\n    this.expanded = false;\n    this.agFilterToolPanelBody.removeChild(this.agFilterToolPanelBody.children[0]);\n    agGridCommunity._.setDisplayed(this.eExpandChecked, false);\n    agGridCommunity._.setDisplayed(this.eExpandUnchecked, true);\n  };\n  ToolPanelFilterComp.prototype.refreshFilter = function () {\n    if (!this.expanded) {\n      return;\n    }\n    var filter = this.underlyingFilter;\n    if (!filter) return;\n    // set filters should be updated when the filter has been changed elsewhere, i.e. via api. Note that we can't\n    // use 'afterGuiAttached' to refresh the virtual list as it also focuses on the mini filter which changes the\n    // scroll position in the filter list panel\n    if (typeof filter.refreshVirtualList === 'function') {\n      filter.refreshVirtualList();\n    }\n  };\n  ToolPanelFilterComp.prototype.onFilterOpened = function (event) {\n    if (event.source !== 'COLUMN_MENU') {\n      return;\n    }\n    if (event.column !== this.column) {\n      return;\n    }\n    if (!this.expanded) {\n      return;\n    }\n    this.collapse();\n  };\n  ToolPanelFilterComp.TEMPLATE = \"\\n        <div class=\\\"ag-filter-toolpanel-instance\\\">\\n            <div class=\\\"ag-filter-toolpanel-header ag-filter-toolpanel-instance-header\\\" ref=\\\"eFilterToolPanelHeader\\\">\\n                <div ref=\\\"eExpand\\\" class=\\\"ag-filter-toolpanel-expand\\\"></div>\\n                <span ref=\\\"eFilterName\\\" class=\\\"ag-header-cell-text\\\"></span>\\n                <span ref=\\\"eFilterIcon\\\" class=\\\"ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon\\\" aria-hidden=\\\"true\\\"></span>\\n            </div>\\n            <div class=\\\"ag-filter-toolpanel-instance-body ag-filter\\\" ref=\\\"agFilterToolPanelBody\\\"></div>\\n        </div>\";\n  __decorate$z([agGridCommunity.RefSelector('eFilterToolPanelHeader')], ToolPanelFilterComp.prototype, \"eFilterToolPanelHeader\", void 0);\n  __decorate$z([agGridCommunity.RefSelector('eFilterName')], ToolPanelFilterComp.prototype, \"eFilterName\", void 0);\n  __decorate$z([agGridCommunity.RefSelector('agFilterToolPanelBody')], ToolPanelFilterComp.prototype, \"agFilterToolPanelBody\", void 0);\n  __decorate$z([agGridCommunity.RefSelector('eFilterIcon')], ToolPanelFilterComp.prototype, \"eFilterIcon\", void 0);\n  __decorate$z([agGridCommunity.RefSelector('eExpand')], ToolPanelFilterComp.prototype, \"eExpand\", void 0);\n  __decorate$z([agGridCommunity.Autowired('filterManager')], ToolPanelFilterComp.prototype, \"filterManager\", void 0);\n  __decorate$z([agGridCommunity.Autowired('gridOptionsWrapper')], ToolPanelFilterComp.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$z([agGridCommunity.Autowired('columnController')], ToolPanelFilterComp.prototype, \"columnController\", void 0);\n  __decorate$z([agGridCommunity.PostConstruct], ToolPanelFilterComp.prototype, \"postConstruct\", null);\n  return ToolPanelFilterComp;\n}(agGridCommunity.Component);\nvar __extends$B = undefined && undefined.__extends || function () {\n  var _extendStatics38 = function extendStatics(d, b) {\n    _extendStatics38 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics38(d, b);\n  };\n  return function (d, b) {\n    _extendStatics38(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$A = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ToolPanelFilterGroupComp = /** @class */function (_super) {\n  __extends$B(ToolPanelFilterGroupComp, _super);\n  function ToolPanelFilterGroupComp(columnGroup, childFilterComps, expandedCallback, depth) {\n    var _this = _super.call(this) || this;\n    _this.columnGroup = columnGroup;\n    _this.childFilterComps = childFilterComps;\n    _this.depth = depth;\n    _this.expandedCallback = expandedCallback;\n    return _this;\n  }\n  ToolPanelFilterGroupComp.prototype.preConstruct = function () {\n    var groupParams = {\n      cssIdentifier: 'filter-toolpanel',\n      direction: 'vertical'\n    };\n    this.setTemplate(ToolPanelFilterGroupComp.TEMPLATE, {\n      filterGroupComp: groupParams\n    });\n  };\n  ToolPanelFilterGroupComp.prototype.init = function () {\n    var _this = this;\n    this.setGroupTitle();\n    this.filterGroupComp.setAlignItems('stretch');\n    agGridCommunity._.addCssClass(this.filterGroupComp.getGui(), \"ag-filter-toolpanel-group-level-\" + this.depth);\n    this.filterGroupComp.addCssClassToTitleBar(\"ag-filter-toolpanel-group-level-\" + this.depth + \"-header\");\n    this.childFilterComps.forEach(function (filterComp) {\n      _this.filterGroupComp.addItem(filterComp);\n      filterComp.addCssClassToTitleBar(\"ag-filter-toolpanel-group-level-\" + (_this.depth + 1) + \"-header\");\n    });\n    this.addExpandCollapseListeners();\n    this.addFilterChangedListeners();\n  };\n  ToolPanelFilterGroupComp.prototype.addCssClassToTitleBar = function (cssClass) {\n    this.filterGroupComp.addCssClassToTitleBar(cssClass);\n  };\n  ToolPanelFilterGroupComp.prototype.refreshFilters = function () {\n    this.childFilterComps.forEach(function (filterComp) {\n      if (filterComp instanceof ToolPanelFilterGroupComp) {\n        filterComp.refreshFilters();\n      } else {\n        filterComp.refreshFilter();\n      }\n    });\n  };\n  ToolPanelFilterGroupComp.prototype.isColumnGroup = function () {\n    return this.columnGroup instanceof agGridCommunity.OriginalColumnGroup;\n  };\n  ToolPanelFilterGroupComp.prototype.isExpanded = function () {\n    return this.filterGroupComp.isExpanded();\n  };\n  ToolPanelFilterGroupComp.prototype.getChildren = function () {\n    return this.childFilterComps;\n  };\n  ToolPanelFilterGroupComp.prototype.getFilterGroupName = function () {\n    return this.filterGroupName ? this.filterGroupName : '';\n  };\n  ToolPanelFilterGroupComp.prototype.getFilterGroupId = function () {\n    return this.columnGroup.getId();\n  };\n  ToolPanelFilterGroupComp.prototype.hideGroupItem = function (hide, index) {\n    this.filterGroupComp.hideItem(hide, index);\n  };\n  ToolPanelFilterGroupComp.prototype.hideGroup = function (hide) {\n    agGridCommunity._.addOrRemoveCssClass(this.getGui(), 'ag-hidden', hide);\n  };\n  ToolPanelFilterGroupComp.prototype.forEachToolPanelFilterChild = function (action) {\n    agGridCommunity._.forEach(this.childFilterComps, function (filterComp) {\n      if (filterComp instanceof ToolPanelFilterComp) {\n        action(filterComp);\n      }\n    });\n  };\n  ToolPanelFilterGroupComp.prototype.addExpandCollapseListeners = function () {\n    var _this = this;\n    var expandListener = this.isColumnGroup() ? function () {\n      return _this.expandedCallback();\n    } : function () {\n      return _this.forEachToolPanelFilterChild(function (filterComp) {\n        return filterComp.expand();\n      });\n    };\n    var collapseListener = this.isColumnGroup() ? function () {\n      return _this.expandedCallback();\n    } : function () {\n      return _this.forEachToolPanelFilterChild(function (filterComp) {\n        return filterComp.collapse();\n      });\n    };\n    this.addManagedListener(this.filterGroupComp, agGridCommunity.AgGroupComponent.EVENT_EXPANDED, expandListener);\n    this.addManagedListener(this.filterGroupComp, agGridCommunity.AgGroupComponent.EVENT_COLLAPSED, collapseListener);\n  };\n  ToolPanelFilterGroupComp.prototype.addFilterChangedListeners = function () {\n    var _this = this;\n    if (this.columnGroup instanceof agGridCommunity.OriginalColumnGroup) {\n      var group_1 = this.columnGroup;\n      var anyChildFiltersActive_1 = function anyChildFiltersActive_1() {\n        return group_1.getLeafColumns().some(function (col) {\n          return col.isFilterActive();\n        });\n      };\n      group_1.getLeafColumns().forEach(function (column) {\n        _this.addManagedListener(column, agGridCommunity.Column.EVENT_FILTER_CHANGED, function () {\n          agGridCommunity._.addOrRemoveCssClass(_this.filterGroupComp.getGui(), 'ag-has-filter', anyChildFiltersActive_1());\n        });\n      });\n    } else {\n      var column_1 = this.columnGroup;\n      this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_FILTER_OPENED, this.onFilterOpened.bind(this));\n      this.addManagedListener(column_1, agGridCommunity.Column.EVENT_FILTER_CHANGED, function () {\n        agGridCommunity._.addOrRemoveCssClass(_this.filterGroupComp.getGui(), 'ag-has-filter', column_1.isFilterActive());\n      });\n    }\n  };\n  ToolPanelFilterGroupComp.prototype.onFilterOpened = function (event) {\n    // when a filter is opened elsewhere, i.e. column menu we close the filter comp so we also need to collapse\n    // the column group. This approach means we don't need to try and sync filter models on the same column.\n    if (event.source !== 'COLUMN_MENU') {\n      return;\n    }\n    if (event.column !== this.columnGroup) {\n      return;\n    }\n    if (!this.isExpanded()) {\n      return;\n    }\n    this.collapse();\n  };\n  ToolPanelFilterGroupComp.prototype.expand = function () {\n    this.filterGroupComp.toggleGroupExpand(true);\n  };\n  ToolPanelFilterGroupComp.prototype.collapse = function () {\n    this.filterGroupComp.toggleGroupExpand(false);\n  };\n  ToolPanelFilterGroupComp.prototype.setGroupTitle = function () {\n    this.filterGroupName = this.columnGroup instanceof agGridCommunity.OriginalColumnGroup ? this.getColumnGroupName(this.columnGroup) : this.getColumnName(this.columnGroup);\n    this.filterGroupComp.setTitle(this.filterGroupName);\n  };\n  ToolPanelFilterGroupComp.prototype.getColumnGroupName = function (columnGroup) {\n    return this.columnController.getDisplayNameForOriginalColumnGroup(null, columnGroup, 'toolPanel');\n  };\n  ToolPanelFilterGroupComp.prototype.getColumnName = function (column) {\n    return this.columnController.getDisplayNameForColumn(column, 'header', false);\n  };\n  ToolPanelFilterGroupComp.prototype.destroyFilters = function () {\n    this.childFilterComps = this.destroyBeans(this.childFilterComps);\n    agGridCommunity._.clearElement(this.getGui());\n  };\n  ToolPanelFilterGroupComp.prototype.destroy = function () {\n    this.destroyFilters();\n    _super.prototype.destroy.call(this);\n  };\n  ToolPanelFilterGroupComp.TEMPLATE = \"<div class=\\\"ag-filter-toolpanel-group-wrapper\\\">\\n            <ag-group-component ref=\\\"filterGroupComp\\\"></ag-group-component>\\n        </div>\";\n  __decorate$A([agGridCommunity.RefSelector('filterGroupComp')], ToolPanelFilterGroupComp.prototype, \"filterGroupComp\", void 0);\n  __decorate$A([agGridCommunity.Autowired('columnController')], ToolPanelFilterGroupComp.prototype, \"columnController\", void 0);\n  __decorate$A([agGridCommunity.PreConstruct], ToolPanelFilterGroupComp.prototype, \"preConstruct\", null);\n  __decorate$A([agGridCommunity.PostConstruct], ToolPanelFilterGroupComp.prototype, \"init\", null);\n  return ToolPanelFilterGroupComp;\n}(agGridCommunity.Component);\nvar __extends$C = undefined && undefined.__extends || function () {\n  var _extendStatics39 = function extendStatics(d, b) {\n    _extendStatics39 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics39(d, b);\n  };\n  return function (d, b) {\n    _extendStatics39(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$B = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar FiltersToolPanelListPanel = /** @class */function (_super) {\n  __extends$C(FiltersToolPanelListPanel, _super);\n  function FiltersToolPanelListPanel() {\n    var _this = _super.call(this, FiltersToolPanelListPanel.TEMPLATE) || this;\n    _this.initialised = false;\n    _this.filterGroupComps = [];\n    return _this;\n  }\n  FiltersToolPanelListPanel.prototype.init = function (params) {\n    var _this = this;\n    this.initialised = true;\n    var defaultParams = {\n      suppressExpandAll: false,\n      suppressFilterSearch: false,\n      suppressSyncLayoutWithGrid: false,\n      api: this.gridApi,\n      columnApi: this.columnApi\n    };\n    agGridCommunity._.mergeDeep(defaultParams, params);\n    this.params = defaultParams;\n    if (!this.params.suppressSyncLayoutWithGrid) {\n      this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_MOVED, function () {\n        return _this.onColumnsChanged();\n      });\n    }\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_NEW_COLUMNS_LOADED, function () {\n      return _this.onColumnsChanged();\n    });\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED, function (event) {\n      // when re-entering the filters tool panel we need to refresh the virtual lists in the set filters in case\n      // filters have been changed elsewhere, i.e. via an api call.\n      if (event.source === 'filters') {\n        _this.refreshFilters();\n      }\n    });\n    if (this.columnController.isReady()) {\n      this.onColumnsChanged();\n    }\n  };\n  FiltersToolPanelListPanel.prototype.onColumnsChanged = function () {\n    var pivotModeActive = this.columnController.isPivotMode();\n    var shouldSyncColumnLayoutWithGrid = !this.params.suppressSyncLayoutWithGrid && !pivotModeActive;\n    shouldSyncColumnLayoutWithGrid ? this.syncFilterLayout() : this.buildTreeFromProvidedColumnDefs();\n  };\n  FiltersToolPanelListPanel.prototype.syncFilterLayout = function () {\n    this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this));\n  };\n  FiltersToolPanelListPanel.prototype.buildTreeFromProvidedColumnDefs = function () {\n    var _this = this;\n    this.destroyFilters();\n    var columnTree = this.columnController.getPrimaryColumnTree();\n    this.filterGroupComps = this.recursivelyAddComps(columnTree, 0);\n    var len = this.filterGroupComps.length;\n    if (len) {\n      this.filterGroupComps.forEach(function (comp) {\n        return _this.appendChild(comp);\n      });\n      this.setFirstAndLastVisible(0, len - 1);\n    }\n    // perform search if searchFilterText exists\n    if (agGridCommunity._.exists(this.searchFilterText)) {\n      this.searchFilters(this.searchFilterText);\n    }\n    // notify header of expand\n    this.fireExpandedEvent();\n  };\n  FiltersToolPanelListPanel.prototype.setFiltersLayout = function (colDefs) {\n    var _this = this;\n    this.destroyFilters();\n    var columnTree = this.toolPanelColDefService.createColumnTree(colDefs);\n    this.filterGroupComps = this.recursivelyAddComps(columnTree, 0);\n    var len = this.filterGroupComps.length;\n    if (len) {\n      this.filterGroupComps.forEach(function (comp) {\n        return _this.appendChild(comp);\n      });\n      this.setFirstAndLastVisible(0, len - 1);\n    }\n    // perform search if searchFilterText exists\n    if (agGridCommunity._.exists(this.searchFilterText)) {\n      this.searchFilters(this.searchFilterText);\n    }\n    // notify header of expand\n    this.fireExpandedEvent();\n  };\n  FiltersToolPanelListPanel.prototype.recursivelyAddComps = function (tree, depth) {\n    var _this = this;\n    return agGridCommunity._.flatten(tree.map(function (child) {\n      if (child instanceof agGridCommunity.OriginalColumnGroup) {\n        return agGridCommunity._.flatten(_this.recursivelyAddFilterGroupComps(child, depth));\n      }\n      var column = child;\n      if (!_this.shouldDisplayFilter(column)) {\n        return [];\n      }\n      var hideFilterCompHeader = depth === 0;\n      var filterComp = new ToolPanelFilterComp(hideFilterCompHeader);\n      _this.getContext().createBean(filterComp);\n      filterComp.setColumn(column);\n      if (depth > 0) {\n        return filterComp;\n      }\n      var filterGroupComp = _this.createBean(new ToolPanelFilterGroupComp(column, [filterComp], _this.onGroupExpanded.bind(_this), depth));\n      filterGroupComp.addCssClassToTitleBar('ag-filter-toolpanel-header');\n      filterGroupComp.collapse();\n      return filterGroupComp;\n    }));\n  };\n  FiltersToolPanelListPanel.prototype.recursivelyAddFilterGroupComps = function (columnGroup, depth) {\n    if (!this.filtersExistInChildren(columnGroup.getChildren())) return;\n    if (columnGroup.getColGroupDef() && columnGroup.getColGroupDef().suppressFiltersToolPanel) {\n      return [];\n    }\n    var newDepth = columnGroup.isPadding() ? depth : depth + 1;\n    var childFilterComps = agGridCommunity._.flatten(this.recursivelyAddComps(columnGroup.getChildren(), newDepth));\n    if (columnGroup.isPadding()) return childFilterComps;\n    var filterGroupComp = new ToolPanelFilterGroupComp(columnGroup, childFilterComps, this.onGroupExpanded.bind(this), depth);\n    this.getContext().createBean(filterGroupComp);\n    filterGroupComp.addCssClassToTitleBar('ag-filter-toolpanel-header');\n    return [filterGroupComp];\n  };\n  FiltersToolPanelListPanel.prototype.filtersExistInChildren = function (tree) {\n    var _this = this;\n    return tree.some(function (child) {\n      if (child instanceof agGridCommunity.OriginalColumnGroup) {\n        return _this.filtersExistInChildren(child.getChildren());\n      }\n      return _this.shouldDisplayFilter(child);\n    });\n  };\n  FiltersToolPanelListPanel.prototype.shouldDisplayFilter = function (column) {\n    var suppressFiltersToolPanel = column.getColDef() && column.getColDef().suppressFiltersToolPanel;\n    return column.isFilterAllowed() && !suppressFiltersToolPanel;\n  };\n  // we don't support refreshing, but must implement because it's on the tool panel interface\n  FiltersToolPanelListPanel.prototype.refresh = function () {};\n  // lazy initialise the panel\n  FiltersToolPanelListPanel.prototype.setVisible = function (visible) {\n    _super.prototype.setDisplayed.call(this, visible);\n    if (visible && !this.initialised) {\n      this.init(this.params);\n    }\n  };\n  FiltersToolPanelListPanel.prototype.expandFilterGroups = function (expand, groupIds) {\n    var updatedGroupIds = [];\n    var updateGroupExpandState = function updateGroupExpandState(filterGroup) {\n      var groupId = filterGroup.getFilterGroupId();\n      var shouldExpandOrCollapse = !groupIds || agGridCommunity._.includes(groupIds, groupId);\n      if (shouldExpandOrCollapse) {\n        // don't expand 'column groups', i.e. top level columns wrapped in a group\n        if (expand && filterGroup.isColumnGroup()) {\n          filterGroup.expand();\n        } else {\n          filterGroup.collapse();\n        }\n        updatedGroupIds.push(groupId);\n      }\n      // recursively look for more groups to expand / collapse\n      filterGroup.getChildren().forEach(function (child) {\n        if (child instanceof ToolPanelFilterGroupComp) {\n          updateGroupExpandState(child);\n        }\n      });\n    };\n    this.filterGroupComps.forEach(updateGroupExpandState);\n    // update header expand / collapse icon\n    this.onGroupExpanded();\n    if (groupIds) {\n      var unrecognisedGroupIds = groupIds.filter(function (groupId) {\n        return updatedGroupIds.indexOf(groupId) < 0;\n      });\n      if (unrecognisedGroupIds.length > 0) {\n        console.warn('ag-Grid: unable to find groups for these supplied groupIds:', unrecognisedGroupIds);\n      }\n    }\n  };\n  FiltersToolPanelListPanel.prototype.expandFilters = function (expand, colIds) {\n    var updatedColIds = [];\n    var updateGroupExpandState = function updateGroupExpandState(filterComp) {\n      if (filterComp instanceof ToolPanelFilterGroupComp) {\n        var anyChildrenChanged_1 = false;\n        filterComp.getChildren().forEach(function (child) {\n          var childUpdated = updateGroupExpandState(child);\n          if (childUpdated) {\n            if (expand) {\n              filterComp.expand();\n              anyChildrenChanged_1 = true;\n            } else if (!filterComp.isColumnGroup()) {\n              // we only collapse columns wrapped in groups\n              filterComp.collapse();\n            }\n          }\n        });\n        return anyChildrenChanged_1;\n      }\n      var colId = filterComp.getColumn().getColId();\n      var updateFilterExpandState = !colIds || agGridCommunity._.includes(colIds, colId);\n      if (updateFilterExpandState) {\n        expand ? filterComp.expand() : filterComp.collapse();\n        updatedColIds.push(colId);\n      }\n      return updateFilterExpandState;\n    };\n    this.filterGroupComps.forEach(updateGroupExpandState);\n    // update header expand / collapse icon\n    this.onGroupExpanded();\n    if (colIds) {\n      var unrecognisedColIds = colIds.filter(function (colId) {\n        return updatedColIds.indexOf(colId) < 0;\n      });\n      if (unrecognisedColIds.length > 0) {\n        console.warn('ag-Grid: unable to find columns for these supplied colIds:', unrecognisedColIds);\n      }\n    }\n  };\n  FiltersToolPanelListPanel.prototype.onGroupExpanded = function () {\n    this.fireExpandedEvent();\n  };\n  FiltersToolPanelListPanel.prototype.fireExpandedEvent = function () {\n    var expandedCount = 0;\n    var notExpandedCount = 0;\n    var updateExpandCounts = function updateExpandCounts(filterGroup) {\n      if (!filterGroup.isColumnGroup()) return;\n      filterGroup.isExpanded() ? expandedCount++ : notExpandedCount++;\n      filterGroup.getChildren().forEach(function (child) {\n        if (child instanceof ToolPanelFilterGroupComp) {\n          updateExpandCounts(child);\n        }\n      });\n    };\n    this.filterGroupComps.forEach(updateExpandCounts);\n    var state;\n    if (expandedCount > 0 && notExpandedCount > 0) {\n      state = EXPAND_STATE.INDETERMINATE;\n    } else if (notExpandedCount > 0) {\n      state = EXPAND_STATE.COLLAPSED;\n    } else {\n      state = EXPAND_STATE.EXPANDED;\n    }\n    this.dispatchEvent({\n      type: 'groupExpanded',\n      state: state\n    });\n  };\n  FiltersToolPanelListPanel.prototype.performFilterSearch = function (searchText) {\n    this.searchFilterText = agGridCommunity._.exists(searchText) ? searchText.toLowerCase() : null;\n    this.searchFilters(this.searchFilterText);\n  };\n  FiltersToolPanelListPanel.prototype.searchFilters = function (searchFilter) {\n    var passesFilter = function passesFilter(groupName) {\n      return !agGridCommunity._.exists(searchFilter) || groupName.toLowerCase().indexOf(searchFilter) !== -1;\n    };\n    var recursivelySearch = function recursivelySearch(filterItem, parentPasses) {\n      if (!(filterItem instanceof ToolPanelFilterGroupComp)) {\n        return passesFilter(filterItem.getColumnFilterName());\n      }\n      var children = filterItem.getChildren();\n      var groupNamePasses = passesFilter(filterItem.getFilterGroupName());\n      // if group or parent already passed - ensure this group and all children are visible\n      var alreadyPassed = parentPasses || groupNamePasses;\n      if (alreadyPassed) {\n        // ensure group visible\n        filterItem.hideGroup(false);\n        // ensure all children are visible\n        for (var i = 0; i < children.length; i++) {\n          recursivelySearch(children[i], alreadyPassed);\n          filterItem.hideGroupItem(false, i);\n        }\n        return true;\n      }\n      // hide group item filters\n      var anyChildPasses = false;\n      children.forEach(function (child, index) {\n        var childPasses = recursivelySearch(child, parentPasses);\n        filterItem.hideGroupItem(!childPasses, index);\n        if (childPasses) anyChildPasses = true;\n      });\n      // hide group if no children pass\n      filterItem.hideGroup(!anyChildPasses);\n      return anyChildPasses;\n    };\n    var firstVisible;\n    var lastVisible;\n    this.filterGroupComps.forEach(function (filterGroup, idx) {\n      recursivelySearch(filterGroup, false);\n      if (firstVisible === undefined) {\n        if (!agGridCommunity._.containsClass(filterGroup.getGui(), 'ag-hidden')) {\n          firstVisible = idx;\n          lastVisible = idx;\n        }\n      } else if (!agGridCommunity._.containsClass(filterGroup.getGui(), 'ag-hidden') && lastVisible !== idx) {\n        lastVisible = idx;\n      }\n    });\n    this.setFirstAndLastVisible(firstVisible, lastVisible);\n  };\n  FiltersToolPanelListPanel.prototype.setFirstAndLastVisible = function (firstIdx, lastIdx) {\n    this.filterGroupComps.forEach(function (filterGroup, idx) {\n      agGridCommunity._.removeCssClass(filterGroup.getGui(), 'ag-first-group-visible');\n      agGridCommunity._.removeCssClass(filterGroup.getGui(), 'ag-last-group-visible');\n      if (idx === firstIdx) {\n        agGridCommunity._.addCssClass(filterGroup.getGui(), 'ag-first-group-visible');\n      }\n      if (idx === lastIdx) {\n        agGridCommunity._.addCssClass(filterGroup.getGui(), 'ag-last-group-visible');\n      }\n    });\n  };\n  FiltersToolPanelListPanel.prototype.refreshFilters = function () {\n    this.filterGroupComps.forEach(function (filterGroupComp) {\n      return filterGroupComp.refreshFilters();\n    });\n  };\n  FiltersToolPanelListPanel.prototype.destroyFilters = function () {\n    this.filterGroupComps = this.destroyBeans(this.filterGroupComps);\n    agGridCommunity._.clearElement(this.getGui());\n  };\n  FiltersToolPanelListPanel.prototype.destroy = function () {\n    this.destroyFilters();\n    _super.prototype.destroy.call(this);\n  };\n  FiltersToolPanelListPanel.TEMPLATE = \"<div class=\\\"ag-filter-list-panel\\\"></div>\";\n  __decorate$B([agGridCommunity.Autowired(\"gridApi\")], FiltersToolPanelListPanel.prototype, \"gridApi\", void 0);\n  __decorate$B([agGridCommunity.Autowired(\"columnApi\")], FiltersToolPanelListPanel.prototype, \"columnApi\", void 0);\n  __decorate$B([agGridCommunity.Autowired('toolPanelColDefService')], FiltersToolPanelListPanel.prototype, \"toolPanelColDefService\", void 0);\n  __decorate$B([agGridCommunity.Autowired('columnController')], FiltersToolPanelListPanel.prototype, \"columnController\", void 0);\n  return FiltersToolPanelListPanel;\n}(agGridCommunity.Component);\nvar __extends$D = undefined && undefined.__extends || function () {\n  var _extendStatics40 = function extendStatics(d, b) {\n    _extendStatics40 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics40(d, b);\n  };\n  return function (d, b) {\n    _extendStatics40(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$C = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar FiltersToolPanel = /** @class */function (_super) {\n  __extends$D(FiltersToolPanel, _super);\n  function FiltersToolPanel() {\n    var _this = _super.call(this, FiltersToolPanel.TEMPLATE) || this;\n    _this.initialised = false;\n    _this.listenerDestroyFuncs = [];\n    return _this;\n  }\n  FiltersToolPanel.prototype.init = function (params) {\n    // if initialised is true, means this is a refresh\n    if (this.initialised) {\n      this.listenerDestroyFuncs.forEach(function (func) {\n        return func();\n      });\n      this.listenerDestroyFuncs = [];\n    }\n    this.initialised = true;\n    var defaultParams = {\n      suppressExpandAll: false,\n      suppressFilterSearch: false,\n      suppressSyncLayoutWithGrid: false,\n      api: this.gridApi,\n      columnApi: this.columnApi\n    };\n    agGridCommunity._.mergeDeep(defaultParams, params);\n    this.params = defaultParams;\n    this.filtersToolPanelHeaderPanel.init(this.params);\n    this.filtersToolPanelListPanel.init(this.params);\n    var hideExpand = this.params.suppressExpandAll;\n    var hideSearch = this.params.suppressFilterSearch;\n    if (hideExpand && hideSearch) {\n      this.filtersToolPanelHeaderPanel.setDisplayed(false);\n    }\n    // this is necessary to prevent a memory leak while refreshing the tool panel\n    this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel, 'expandAll', this.onExpandAll.bind(this)), this.addManagedListener(this.filtersToolPanelHeaderPanel, 'collapseAll', this.onCollapseAll.bind(this)), this.addManagedListener(this.filtersToolPanelHeaderPanel, 'searchChanged', this.onSearchChanged.bind(this)), this.addManagedListener(this.filtersToolPanelListPanel, 'groupExpanded', this.onGroupExpanded.bind(this)));\n  };\n  // lazy initialise the panel\n  FiltersToolPanel.prototype.setVisible = function (visible) {\n    _super.prototype.setDisplayed.call(this, visible);\n    if (visible && !this.initialised) {\n      this.init(this.params);\n    }\n  };\n  FiltersToolPanel.prototype.onExpandAll = function () {\n    this.filtersToolPanelListPanel.expandFilterGroups(true);\n  };\n  FiltersToolPanel.prototype.onCollapseAll = function () {\n    this.filtersToolPanelListPanel.expandFilterGroups(false);\n  };\n  FiltersToolPanel.prototype.onSearchChanged = function (event) {\n    this.filtersToolPanelListPanel.performFilterSearch(event.searchText);\n  };\n  FiltersToolPanel.prototype.setFilterLayout = function (colDefs) {\n    this.filtersToolPanelListPanel.setFiltersLayout(colDefs);\n  };\n  FiltersToolPanel.prototype.onGroupExpanded = function (event) {\n    this.filtersToolPanelHeaderPanel.setExpandState(event.state);\n  };\n  FiltersToolPanel.prototype.expandFilterGroups = function (groupIds) {\n    this.filtersToolPanelListPanel.expandFilterGroups(true, groupIds);\n  };\n  FiltersToolPanel.prototype.collapseFilterGroups = function (groupIds) {\n    this.filtersToolPanelListPanel.expandFilterGroups(false, groupIds);\n  };\n  FiltersToolPanel.prototype.expandFilters = function (colIds) {\n    this.filtersToolPanelListPanel.expandFilters(true, colIds);\n  };\n  FiltersToolPanel.prototype.collapseFilters = function (colIds) {\n    this.filtersToolPanelListPanel.expandFilters(false, colIds);\n  };\n  FiltersToolPanel.prototype.syncLayoutWithGrid = function () {\n    this.filtersToolPanelListPanel.syncFilterLayout();\n  };\n  FiltersToolPanel.prototype.refresh = function () {\n    this.init(this.params);\n  };\n  // this is a user component, and IComponent has \"public destroy()\" as part of the interface.\n  // so we need to override destroy() just to make the method public.\n  FiltersToolPanel.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n  };\n  FiltersToolPanel.TEMPLATE = \"<div class=\\\"ag-filter-toolpanel\\\">\\n            <ag-filters-tool-panel-header ref=\\\"filtersToolPanelHeaderPanel\\\"></ag-filters-tool-panel-header>\\n            <ag-filters-tool-panel-list ref=\\\"filtersToolPanelListPanel\\\"></ag-filters-tool-panel-list> \\n         </div>\";\n  __decorate$C([agGridCommunity.RefSelector('filtersToolPanelHeaderPanel')], FiltersToolPanel.prototype, \"filtersToolPanelHeaderPanel\", void 0);\n  __decorate$C([agGridCommunity.RefSelector('filtersToolPanelListPanel')], FiltersToolPanel.prototype, \"filtersToolPanelListPanel\", void 0);\n  __decorate$C([agGridCommunity.Autowired('gridApi')], FiltersToolPanel.prototype, \"gridApi\", void 0);\n  __decorate$C([agGridCommunity.Autowired('columnApi')], FiltersToolPanel.prototype, \"columnApi\", void 0);\n  return FiltersToolPanel;\n}(agGridCommunity.Component);\nvar FiltersToolPanelModule = {\n  moduleName: agGridCommunity.ModuleNames.FiltersToolPanelModule,\n  beans: [],\n  agStackComponents: [{\n    componentName: 'AgFiltersToolPanelHeader',\n    componentClass: FiltersToolPanelHeaderPanel\n  }, {\n    componentName: 'AgFiltersToolPanelList',\n    componentClass: FiltersToolPanelListPanel\n  }],\n  userComponents: [{\n    componentName: 'agFiltersToolPanel',\n    componentClass: FiltersToolPanel\n  }],\n  dependantModules: [SideBarModule, EnterpriseCoreModule]\n};\nvar __extends$E = undefined && undefined.__extends || function () {\n  var _extendStatics41 = function extendStatics(d, b) {\n    _extendStatics41 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics41(d, b);\n  };\n  return function (d, b) {\n    _extendStatics41(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$D = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ChartDatasource = /** @class */function (_super) {\n  __extends$E(ChartDatasource, _super);\n  function ChartDatasource() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  ChartDatasource.prototype.getData = function (params) {\n    var isServerSide = this.gridOptionsWrapper.isRowModelServerSide();\n    if (isServerSide && params.pivoting) {\n      this.updatePivotKeysForSSRM();\n    }\n    var result = this.extractRowsFromGridRowModel(params);\n    result.data = this.aggregateRowsByDimension(params, result.data);\n    return result;\n  };\n  ChartDatasource.prototype.extractRowsFromGridRowModel = function (params) {\n    var _this = this;\n    var extractedRowData = [];\n    var columnNames = {};\n    // maps used to keep track of expanded groups that need to be removed\n    var groupNodeIndexes = {};\n    var groupsToRemove = {};\n    // make sure enough rows in range to chart. if user filters and less rows, then end row will be\n    // the last displayed row, not where the range ends.\n    var modelLastRow = this.gridRowModel.getRowCount() - 1;\n    var rangeLastRow = params.endRow >= 0 ? Math.min(params.endRow, modelLastRow) : modelLastRow;\n    var numRows = rangeLastRow - params.startRow + 1;\n    var _loop_1 = function _loop_1(i) {\n      var data = {};\n      var rowNode = this_1.gridRowModel.getRow(i + params.startRow);\n      // first get data for dimensions columns\n      params.dimensionCols.forEach(function (col) {\n        var colId = col.colId;\n        var column = _this.columnController.getGridColumn(colId);\n        if (column) {\n          var valueObject = _this.valueService.getValue(column, rowNode);\n          // when grouping we also need to build up multi category labels for charts\n          if (params.grouping) {\n            var valueString = valueObject && valueObject.toString ? String(valueObject.toString()) : '';\n            // traverse parents to extract group label path\n            var labels = ChartDatasource.getGroupLabels(rowNode, valueString);\n            data[colId] = {\n              labels: labels,\n              toString: function toString() {\n                return this.labels.filter(function (l) {\n                  return !!l;\n                }).reverse().join(' - ');\n              }\n            };\n            // keep track of group node indexes so they can be padded when other groups are expanded\n            if (rowNode.group) {\n              groupNodeIndexes[labels.toString()] = i;\n            }\n            // if node (group or leaf) has parents then it is expanded and should be removed\n            var groupKey = labels.slice(1, labels.length).toString();\n            if (groupKey) {\n              groupsToRemove[groupKey] = groupNodeIndexes[groupKey];\n            }\n          } else {\n            // leaf nodes can be directly added to dimension columns\n            data[colId] = valueObject;\n          }\n        } else {\n          // introduce a default category when no dimensions exist with a value based off row index (+1)\n          data[ChartDataModel.DEFAULT_CATEGORY] = i + 1;\n        }\n      });\n      // then get data for value columns\n      params.valueCols.forEach(function (col) {\n        var columnNamesArr = [];\n        // pivot keys should be added first\n        var pivotKeys = col.getColDef().pivotKeys;\n        if (pivotKeys) {\n          columnNamesArr = pivotKeys.slice();\n        }\n        // then add column header name to results\n        var headerName = col.getColDef().headerName;\n        if (headerName) {\n          columnNamesArr.push(headerName);\n        }\n        // add array of column names to results\n        if (columnNamesArr.length > 0) {\n          columnNames[col.getId()] = columnNamesArr;\n        }\n        // add data value to value column\n        var value = _this.valueService.getValue(col, rowNode);\n        data[col.getId()] = value != null && typeof value.toNumber === 'function' ? value.toNumber() : value;\n      });\n      // add data to results\n      extractedRowData.push(data);\n    };\n    var this_1 = this;\n    for (var i = 0; i < numRows; i++) {\n      _loop_1(i);\n    }\n    if (params.grouping) {\n      var groupIndexesToRemove_1 = agGridCommunity._.values(groupsToRemove);\n      extractedRowData = extractedRowData.filter(function (_1, index) {\n        return !agGridCommunity._.includes(groupIndexesToRemove_1, index);\n      });\n    }\n    return {\n      data: extractedRowData,\n      columnNames: columnNames\n    };\n  };\n  ChartDatasource.prototype.aggregateRowsByDimension = function (params, dataFromGrid) {\n    var _this = this;\n    var dimensionCols = params.dimensionCols;\n    if (!params.aggFunc || dimensionCols.length === 0) {\n      return dataFromGrid;\n    }\n    var lastCol = agGridCommunity._.last(dimensionCols);\n    var lastColId = lastCol && lastCol.colId;\n    var map = {};\n    var dataAggregated = [];\n    dataFromGrid.forEach(function (data) {\n      var currentMap = map;\n      dimensionCols.forEach(function (col) {\n        var colId = col.colId;\n        var key = data[colId];\n        if (colId === lastColId) {\n          var groupItem_1 = currentMap[key];\n          if (!groupItem_1) {\n            groupItem_1 = {\n              __children: []\n            };\n            dimensionCols.forEach(function (col) {\n              var colId = col.colId;\n              groupItem_1[colId] = data[colId];\n            });\n            currentMap[key] = groupItem_1;\n            dataAggregated.push(groupItem_1);\n          }\n          groupItem_1.__children.push(data);\n        } else {\n          // map of maps\n          if (!currentMap[key]) {\n            currentMap[key] = {};\n          }\n          currentMap = currentMap[key];\n        }\n      });\n    });\n    dataAggregated.forEach(function (groupItem) {\n      return params.valueCols.forEach(function (col) {\n        var dataToAgg = groupItem.__children.map(function (child) {\n          return child[col.getId()];\n        });\n        var aggResult = 0;\n        if (agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.RowGroupingModule, 'Charting Aggregation')) {\n          aggResult = _this.aggregationStage.aggregateValues(dataToAgg, params.aggFunc);\n        }\n        groupItem[col.getId()] = aggResult && typeof aggResult.value !== 'undefined' ? aggResult.value : aggResult;\n      });\n    });\n    return dataAggregated;\n  };\n  ChartDatasource.prototype.updatePivotKeysForSSRM = function () {\n    var secondaryColumns = this.columnController.getSecondaryColumns();\n    if (!secondaryColumns) return;\n    // we don't know what the application will use for the pivot key separator (i.e. '_' or '|' ) as the\n    // secondary columns are provided to grid by the application via columnApi.setSecondaryColumns()\n    var pivotKeySeparator = this.extractPivotKeySeparator(secondaryColumns);\n    // 'pivotKeys' is not used by the SSRM for pivoting so it is safe to reuse this colDef property, this way\n    // the same logic can be used for CSRM and SSRM to extract legend names in extractRowsFromGridRowModel()\n    secondaryColumns.forEach(function (col) {\n      var keys = col.getColId().split(pivotKeySeparator);\n      col.getColDef()['pivotKeys'] = keys.slice(0, keys.length - 1);\n    });\n  };\n  ChartDatasource.prototype.extractPivotKeySeparator = function (secondaryColumns) {\n    if (secondaryColumns.length === 0) return \"\";\n    var extractSeparator = function extractSeparator(columnGroup, childId) {\n      var groupId = columnGroup.getGroupId();\n      if (!columnGroup.getParent()) {\n        // removing groupId ('2000') from childId ('2000|Swimming') yields '|Swimming' so first char is separator\n        return childId.split(groupId)[1][0];\n      }\n      return extractSeparator(columnGroup.getParent(), groupId);\n    };\n    var firstSecondaryCol = secondaryColumns[0];\n    return extractSeparator(firstSecondaryCol.getParent(), firstSecondaryCol.getColId());\n  };\n  ChartDatasource.getGroupLabels = function (rowNode, initialLabel) {\n    var labels = [initialLabel];\n    while (rowNode && rowNode.level !== 0) {\n      rowNode = rowNode.parent;\n      if (rowNode) {\n        labels.push(rowNode.key);\n      }\n    }\n    return labels;\n  };\n  __decorate$D([agGridCommunity.Autowired('rowModel')], ChartDatasource.prototype, \"gridRowModel\", void 0);\n  __decorate$D([agGridCommunity.Autowired('valueService')], ChartDatasource.prototype, \"valueService\", void 0);\n  __decorate$D([agGridCommunity.Autowired('columnController')], ChartDatasource.prototype, \"columnController\", void 0);\n  __decorate$D([agGridCommunity.Autowired('gridOptionsWrapper')], ChartDatasource.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$D([agGridCommunity.Optional('aggregationStage')], ChartDatasource.prototype, \"aggregationStage\", void 0);\n  return ChartDatasource;\n}(agGridCommunity.BeanStub);\nvar __extends$F = undefined && undefined.__extends || function () {\n  var _extendStatics42 = function extendStatics(d, b) {\n    _extendStatics42 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics42(d, b);\n  };\n  return function (d, b) {\n    _extendStatics42(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$E = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays$3 = undefined && undefined.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nvar ChartDataModel = /** @class */function (_super) {\n  __extends$F(ChartDataModel, _super);\n  function ChartDataModel(params) {\n    var _this = _super.call(this) || this;\n    _this.dimensionColState = [];\n    _this.valueColState = [];\n    _this.detached = false;\n    _this.grouping = false;\n    _this.columnNames = {};\n    _this.pivotChart = params.pivotChart;\n    _this.chartType = params.chartType;\n    _this.chartThemeName = params.chartThemeName;\n    _this.aggFunc = params.aggFunc;\n    _this.referenceCellRange = params.cellRange;\n    _this.suppressChartRanges = params.suppressChartRanges;\n    _this.detached = !!params.unlinkChart;\n    // this is used to associate chart ranges with charts\n    _this.chartId = _this.generateId();\n    return _this;\n  }\n  ChartDataModel.prototype.init = function () {\n    this.datasource = this.createManagedBean(new ChartDatasource());\n    this.updateCellRanges();\n  };\n  ChartDataModel.prototype.updateCellRanges = function (updatedColState) {\n    if (this.valueCellRange) {\n      this.referenceCellRange = this.valueCellRange;\n    }\n    var _a = this.getAllChartColumns(),\n      dimensionCols = _a.dimensionCols,\n      valueCols = _a.valueCols;\n    var allColsFromRanges = this.getAllColumnsFromRanges();\n    if (updatedColState) {\n      this.updateColumnState(updatedColState);\n    }\n    this.setDimensionCellRange(dimensionCols, allColsFromRanges, updatedColState);\n    this.setValueCellRange(valueCols, allColsFromRanges, updatedColState);\n    if (!updatedColState) {\n      this.resetColumnState();\n      // dimension / category cell range could be out of sync after resetting column state when row grouping\n      this.syncDimensionCellRange();\n    }\n    this.updateData();\n  };\n  ChartDataModel.prototype.getData = function () {\n    return this.chartData;\n  };\n  ChartDataModel.prototype.isGroupActive = function () {\n    var usingTreeData = this.gridOptionsWrapper.isTreeData();\n    var groupedCols = usingTreeData ? null : this.columnController.getRowGroupColumns();\n    return usingTreeData || groupedCols && groupedCols.length > 0;\n  };\n  ChartDataModel.prototype.isGrouping = function () {\n    // charts only group when the selected category is a group column\n    var colId = this.getSelectedDimension().colId;\n    var displayedGroupCols = this.columnController.getGroupDisplayColumns();\n    var groupDimensionSelected = displayedGroupCols.map(function (col) {\n      return col.getColId();\n    }).some(function (id) {\n      return id === colId;\n    });\n    return this.isGroupActive() && groupDimensionSelected;\n  };\n  ChartDataModel.prototype.isPivotActive = function () {\n    return this.columnController.isPivotActive();\n  };\n  ChartDataModel.prototype.isPivotMode = function () {\n    return this.columnController.isPivotMode();\n  };\n  ChartDataModel.prototype.isPivotChart = function () {\n    return this.pivotChart;\n  };\n  ChartDataModel.prototype.getChartId = function () {\n    return this.chartId;\n  };\n  ChartDataModel.prototype.getValueColState = function () {\n    return this.valueColState.map(this.displayNameMapper.bind(this));\n  };\n  ChartDataModel.prototype.getDimensionColState = function () {\n    return this.dimensionColState;\n  };\n  ChartDataModel.prototype.getCellRanges = function () {\n    return [this.dimensionCellRange, this.valueCellRange].filter(function (r) {\n      return r;\n    });\n  };\n  ChartDataModel.prototype.getCellRangeParams = function () {\n    var cellRanges = this.getCellRanges();\n    var firstCellRange = cellRanges[0];\n    var startRow = firstCellRange && firstCellRange.startRow;\n    var endRow = firstCellRange && firstCellRange.endRow;\n    return {\n      rowStartIndex: startRow && startRow.rowIndex,\n      rowStartPinned: startRow && startRow.rowPinned,\n      rowEndIndex: endRow && endRow.rowIndex,\n      rowEndPinned: endRow && endRow.rowPinned,\n      columns: cellRanges.reduce(function (columns, value) {\n        return columns.concat(value.columns.map(function (c) {\n          return c.getId();\n        }));\n      }, [])\n    };\n  };\n  ChartDataModel.prototype.setChartType = function (chartType) {\n    this.chartType = chartType;\n  };\n  ChartDataModel.prototype.getChartType = function () {\n    return this.chartType;\n  };\n  ChartDataModel.prototype.setChartThemeName = function (chartThemeName) {\n    this.chartThemeName = chartThemeName;\n  };\n  ChartDataModel.prototype.getChartThemeName = function () {\n    return this.chartThemeName;\n  };\n  ChartDataModel.prototype.isSuppressChartRanges = function () {\n    return this.suppressChartRanges;\n  };\n  ChartDataModel.prototype.isDetached = function () {\n    return this.detached;\n  };\n  ChartDataModel.prototype.toggleDetached = function () {\n    this.detached = !this.detached;\n  };\n  ChartDataModel.prototype.getSelectedValueColState = function () {\n    return this.getValueColState().filter(function (cs) {\n      return cs.selected;\n    });\n  };\n  ChartDataModel.prototype.getSelectedValueCols = function () {\n    return this.valueColState.filter(function (cs) {\n      return cs.selected;\n    }).map(function (cs) {\n      return cs.column;\n    });\n  };\n  ChartDataModel.prototype.getSelectedDimension = function () {\n    return this.dimensionColState.filter(function (cs) {\n      return cs.selected;\n    })[0];\n  };\n  ChartDataModel.prototype.createCellRange = function (type) {\n    var columns = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n      columns[_i - 1] = arguments[_i];\n    }\n    return {\n      id: this.chartId,\n      startRow: this.referenceCellRange.startRow,\n      endRow: this.referenceCellRange.endRow,\n      columns: columns,\n      startColumn: type === agGridCommunity.CellRangeType.DIMENSION ? columns[0] : this.referenceCellRange.startColumn,\n      type: type\n    };\n  };\n  ChartDataModel.prototype.getAllColumnsFromRanges = function () {\n    if (this.pivotChart) {\n      return agGridCommunity._.convertToSet(this.columnController.getAllDisplayedColumns());\n    }\n    var columns = this.dimensionCellRange || this.valueCellRange ? [] : this.referenceCellRange.columns;\n    if (this.dimensionCellRange) {\n      columns.push.apply(columns, this.dimensionCellRange.columns);\n    }\n    if (this.valueCellRange) {\n      columns.push.apply(columns, this.valueCellRange.columns);\n    }\n    return agGridCommunity._.convertToSet(columns);\n  };\n  ChartDataModel.prototype.getColDisplayName = function (col) {\n    return this.columnController.getDisplayNameForColumn(col, 'chart');\n  };\n  ChartDataModel.prototype.getRowIndexes = function () {\n    var startRow = 0,\n      endRow = 0;\n    var rangeController = this.rangeController;\n    var range = this.valueCellRange;\n    if (rangeController && range) {\n      startRow = rangeController.getRangeStartRow(range).rowIndex;\n      endRow = rangeController.getRangeEndRow(range).rowIndex;\n    }\n    return {\n      startRow: startRow,\n      endRow: endRow\n    };\n  };\n  ChartDataModel.prototype.getAllChartColumns = function () {\n    var _this = this;\n    var displayedCols = this.columnController.getAllDisplayedColumns();\n    var dimensionCols = new Set();\n    var valueCols = new Set();\n    displayedCols.forEach(function (col) {\n      var colDef = col.getColDef();\n      var chartDataType = colDef.chartDataType;\n      if (chartDataType) {\n        // chart data type was specified explicitly\n        switch (chartDataType) {\n          case 'category':\n            dimensionCols.add(col);\n            return;\n          case 'time':\n            dimensionCols.add(col);\n            return;\n          case 'series':\n            valueCols.add(col);\n            return;\n          case 'excluded':\n            return;\n          default:\n            console.warn(\"ag-Grid: unexpected chartDataType value '\" + chartDataType + \"' supplied, instead use 'category', 'series' or 'excluded'\");\n            break;\n        }\n      }\n      if (colDef.colId === 'ag-Grid-AutoColumn') {\n        dimensionCols.add(col);\n        return;\n      }\n      if (!col.isPrimary()) {\n        valueCols.add(col);\n        return;\n      }\n      // if 'chartDataType' is not provided then infer type based data contained in first row\n      (_this.isNumberCol(col) ? valueCols : dimensionCols).add(col);\n    });\n    return {\n      dimensionCols: dimensionCols,\n      valueCols: valueCols\n    };\n  };\n  ChartDataModel.prototype.isNumberCol = function (col) {\n    if (col.getColId() === 'ag-Grid-AutoColumn') {\n      return false;\n    }\n    var row = this.rowRenderer.getRowNode({\n      rowIndex: 0,\n      rowPinned: undefined\n    });\n    if (!row) {\n      return false;\n    }\n    var cellValue = this.valueService.getValue(col, row);\n    if (cellValue == null) {\n      cellValue = this.extractLeafData(row, col);\n    }\n    if (cellValue != null && typeof cellValue.toNumber === 'function') {\n      cellValue = cellValue.toNumber();\n    }\n    return typeof cellValue === 'number';\n  };\n  ChartDataModel.prototype.extractLeafData = function (row, col) {\n    if (!row.allLeafChildren) {\n      return null;\n    }\n    for (var i = 0; i < row.allLeafChildren.length; i++) {\n      var childRow = row.allLeafChildren[i];\n      var value = this.valueService.getValue(col, childRow);\n      if (value != null) {\n        return value;\n      }\n    }\n    return null;\n  };\n  ChartDataModel.prototype.displayNameMapper = function (col) {\n    var columnNames = this.columnNames[col.colId];\n    col.displayName = columnNames ? columnNames.join(' - ') : this.getColDisplayName(col.column);\n    return col;\n  };\n  ChartDataModel.prototype.generateId = function () {\n    return 'id-' + Math.random().toString(36).substr(2, 16);\n  };\n  ChartDataModel.prototype.updateData = function () {\n    var _a = this.getRowIndexes(),\n      startRow = _a.startRow,\n      endRow = _a.endRow;\n    if (this.pivotChart) {\n      this.resetColumnState();\n    }\n    this.grouping = this.isGrouping();\n    var params = {\n      aggFunc: this.aggFunc,\n      dimensionCols: [this.getSelectedDimension()],\n      grouping: this.grouping,\n      pivoting: this.isPivotActive(),\n      valueCols: this.getSelectedValueCols(),\n      startRow: startRow,\n      endRow: endRow\n    };\n    var result = this.datasource.getData(params);\n    this.chartData = result.data;\n    this.columnNames = result.columnNames;\n  };\n  ChartDataModel.prototype.resetColumnState = function () {\n    var _this = this;\n    var _a = this.getAllChartColumns(),\n      dimensionCols = _a.dimensionCols,\n      valueCols = _a.valueCols;\n    var allCols = this.getAllColumnsFromRanges();\n    var isInitialising = this.valueColState.length < 1;\n    this.dimensionColState = [];\n    this.valueColState = [];\n    var hasSelectedDimension = false;\n    var order = 1;\n    dimensionCols.forEach(function (column) {\n      var isAutoGroupCol = column.getColId() === 'ag-Grid-AutoColumn';\n      var selected = isAutoGroupCol ? true : !hasSelectedDimension && allCols.has(column);\n      _this.dimensionColState.push({\n        column: column,\n        colId: column.getColId(),\n        displayName: _this.getColDisplayName(column),\n        selected: selected,\n        order: order++\n      });\n      if (selected) {\n        hasSelectedDimension = true;\n      }\n    });\n    var defaultCategory = {\n      colId: ChartDataModel.DEFAULT_CATEGORY,\n      displayName: this.chartTranslator.translate('defaultCategory'),\n      selected: !hasSelectedDimension,\n      order: 0\n    };\n    this.dimensionColState.unshift(defaultCategory);\n    var valueColumnsFromReferenceRange = this.referenceCellRange.columns.filter(function (c) {\n      return valueCols.has(c);\n    });\n    valueCols.forEach(function (column) {\n      // first time the value cell range is set, preserve the column order from the supplied range\n      if (isInitialising && agGridCommunity._.includes(_this.referenceCellRange.columns, column)) {\n        column = valueColumnsFromReferenceRange.shift();\n      }\n      _this.valueColState.push({\n        column: column,\n        colId: column.getColId(),\n        displayName: _this.getColDisplayName(column),\n        selected: allCols.has(column),\n        order: order++\n      });\n    });\n  };\n  ChartDataModel.prototype.updateColumnState = function (updatedCol) {\n    var idsMatch = function idsMatch(cs) {\n      return cs.colId === updatedCol.colId;\n    };\n    var _a = this,\n      dimensionColState = _a.dimensionColState,\n      valueColState = _a.valueColState;\n    if (dimensionColState.filter(idsMatch).length > 0) {\n      // only one dimension should be selected\n      dimensionColState.forEach(function (cs) {\n        return cs.selected = idsMatch(cs);\n      });\n    } else {\n      // just update the selected value on the supplied value column\n      valueColState.filter(idsMatch).forEach(function (cs) {\n        return cs.selected = updatedCol.selected;\n      });\n    }\n    var allColumns = __spreadArrays$3(dimensionColState, valueColState);\n    var orderedColIds = [];\n    // calculate new order\n    allColumns.forEach(function (col, i) {\n      if (i === updatedCol.order) {\n        orderedColIds.push(updatedCol.colId);\n      }\n      if (col.colId !== updatedCol.colId) {\n        orderedColIds.push(col.colId);\n      }\n    });\n    // update col state with new order\n    allColumns.forEach(function (col) {\n      var order = orderedColIds.indexOf(col.colId);\n      col.order = order >= 0 ? orderedColIds.indexOf(col.colId) : allColumns.length - 1;\n    });\n    this.reorderColState();\n  };\n  ChartDataModel.prototype.reorderColState = function () {\n    var _a = this,\n      dimensionColState = _a.dimensionColState,\n      valueColState = _a.valueColState;\n    dimensionColState.sort(function (a, b) {\n      return a.order - b.order;\n    });\n    valueColState.sort(function (a, b) {\n      return a.order - b.order;\n    });\n  };\n  ChartDataModel.prototype.setDimensionCellRange = function (dimensionCols, colsInRange, updatedColState) {\n    var _this = this;\n    this.dimensionCellRange = undefined;\n    var dimensionColState = this.dimensionColState;\n    if (!updatedColState && !dimensionColState.length) {\n      // use first dimension column in range by default\n      dimensionCols.forEach(function (col) {\n        if (_this.dimensionCellRange || !colsInRange.has(col)) {\n          return;\n        }\n        _this.dimensionCellRange = _this.createCellRange(agGridCommunity.CellRangeType.DIMENSION, col);\n      });\n      return;\n    }\n    var selectedDimensionColState = updatedColState;\n    if (!selectedDimensionColState || !dimensionCols.has(selectedDimensionColState.column)) {\n      selectedDimensionColState = this.dimensionColState.filter(function (cs) {\n        return cs.selected;\n      })[0];\n    }\n    if (selectedDimensionColState && selectedDimensionColState.colId !== ChartDataModel.DEFAULT_CATEGORY) {\n      this.dimensionCellRange = this.createCellRange(agGridCommunity.CellRangeType.DIMENSION, selectedDimensionColState.column);\n    }\n  };\n  ChartDataModel.prototype.setValueCellRange = function (valueCols, colsInRange, updatedColState) {\n    this.valueCellRange = undefined;\n    var selectedValueCols = [];\n    valueCols.forEach(function (col) {\n      if (updatedColState && updatedColState.colId === col.getColId()) {\n        if (updatedColState.selected) {\n          selectedValueCols.push(updatedColState.column);\n        }\n      } else if (colsInRange.has(col)) {\n        selectedValueCols.push(col);\n      }\n    });\n    if (selectedValueCols.length > 0) {\n      var orderedColIds_1 = [];\n      if (this.valueColState.length > 0) {\n        orderedColIds_1 = this.valueColState.map(function (c) {\n          return c.colId;\n        });\n      } else {\n        colsInRange.forEach(function (c) {\n          return orderedColIds_1.push(c.getColId());\n        });\n      }\n      selectedValueCols.sort(function (a, b) {\n        return orderedColIds_1.indexOf(a.getColId()) - orderedColIds_1.indexOf(b.getColId());\n      });\n      this.valueCellRange = this.createCellRange.apply(this, __spreadArrays$3([agGridCommunity.CellRangeType.VALUE], selectedValueCols));\n    }\n  };\n  ChartDataModel.prototype.syncDimensionCellRange = function () {\n    var selectedDimension = this.getSelectedDimension();\n    if (selectedDimension && selectedDimension.column) {\n      this.dimensionCellRange = this.createCellRange(agGridCommunity.CellRangeType.DIMENSION, selectedDimension.column);\n    }\n  };\n  ChartDataModel.DEFAULT_CATEGORY = 'AG-GRID-DEFAULT-CATEGORY';\n  __decorate$E([agGridCommunity.Autowired('columnController')], ChartDataModel.prototype, \"columnController\", void 0);\n  __decorate$E([agGridCommunity.Autowired('gridOptionsWrapper')], ChartDataModel.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$E([agGridCommunity.Autowired('valueService')], ChartDataModel.prototype, \"valueService\", void 0);\n  __decorate$E([agGridCommunity.Autowired('rangeController')], ChartDataModel.prototype, \"rangeController\", void 0);\n  __decorate$E([agGridCommunity.Autowired('rowRenderer')], ChartDataModel.prototype, \"rowRenderer\", void 0);\n  __decorate$E([agGridCommunity.Autowired('chartTranslator')], ChartDataModel.prototype, \"chartTranslator\", void 0);\n  __decorate$E([agGridCommunity.PostConstruct], ChartDataModel.prototype, \"init\", null);\n  return ChartDataModel;\n}(agGridCommunity.BeanStub);\nvar Padding = /** @class */function () {\n  function Padding(top, right, bottom, left) {\n    if (top === void 0) {\n      top = 0;\n    }\n    if (right === void 0) {\n      right = top;\n    }\n    if (bottom === void 0) {\n      bottom = top;\n    }\n    if (left === void 0) {\n      left = right;\n    }\n    this.top = top;\n    this.right = right;\n    this.bottom = bottom;\n    this.left = left;\n  }\n  Padding.prototype.clear = function () {\n    this.top = this.right = this.bottom = this.left = 0;\n  };\n  return Padding;\n}();\n\n// For small data structs like a bounding box, objects are superior to arrays\n// in terms of performance (by 3-4% in Chrome 71, Safari 12 and by 20% in Firefox 64).\n// They are also self descriptive and harder to abuse.\n// For example, one has to do:\n// `ctx.strokeRect(bbox.x, bbox.y, bbox.width, bbox.height);`\n// rather than become enticed by the much slower:\n// `ctx.strokeRect(...bbox);`\n// https://jsperf.com/array-vs-object-create-access\nvar BBox = /** @class */function () {\n  function BBox(x, y, width, height) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n  }\n  BBox.prototype.isValid = function () {\n    return isFinite(this.x) && isFinite(this.y) && isFinite(this.width) && isFinite(this.height);\n  };\n  BBox.prototype.dilate = function (value) {\n    this.x -= value;\n    this.y -= value;\n    this.width += value * 2;\n    this.height += value * 2;\n  };\n  BBox.prototype.containsPoint = function (x, y) {\n    return x >= this.x && x <= this.x + this.width && y >= this.y && y <= this.y + this.height;\n  };\n  BBox.prototype.render = function (ctx, params) {\n    if (params === void 0) {\n      params = BBox.noParams;\n    }\n    ctx.save();\n    if (params.resetTransform) {\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n    }\n    ctx.strokeStyle = params.strokeStyle || 'cyan';\n    ctx.lineWidth = params.lineWidth || 1;\n    ctx.strokeRect(this.x, this.y, this.width, this.height);\n    if (params.label) {\n      ctx.fillStyle = params.fillStyle || 'black';\n      ctx.textBaseline = 'bottom';\n      ctx.fillText(params.label, this.x, this.y);\n    }\n    ctx.restore();\n  };\n  BBox.noParams = {};\n  return BBox;\n}();\n\n/**\n * As of Jan 8, 2019, Firefox still doesn't implement\n * `getTransform(): DOMMatrix;`\n * `setTransform(transform?: DOMMatrix2DInit)`\n * in the `CanvasRenderingContext2D`.\n * Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=928150\n * IE11 and Edge 44 also don't have the support.\n * Thus this class, to keep track of the current transform and\n * combine transformations.\n * Standards:\n * https://html.spec.whatwg.org/dev/canvas.html\n * https://www.w3.org/TR/geometry-1/\n */\nvar Matrix = /** @class */function () {\n  function Matrix(elements) {\n    if (elements === void 0) {\n      elements = [1, 0, 0, 1, 0, 0];\n    }\n    this.elements = elements;\n  }\n  Matrix.prototype.setElements = function (elements) {\n    var e = this.elements;\n    // `this.elements = elements.slice()` is 4-5 times slower\n    // (in Chrome 71 and FF 64) than manually copying elements,\n    // since slicing allocates new memory.\n    // The performance of passing parameters individually\n    // vs as an array is about the same in both browsers, so we\n    // go with a single (array of elements) parameter, because\n    // `setElements(elements)` and `setElements([a, b, c, d, e, f])`\n    // calls give us roughly the same performance, versus\n    // `setElements(...elements)` and `setElements(a, b, c, d, e, f)`,\n    // where the spread operator causes a 20-30x performance drop\n    // (30x when compiled to ES5's `.apply(this, elements)`\n    //  20x when used natively).\n    e[0] = elements[0];\n    e[1] = elements[1];\n    e[2] = elements[2];\n    e[3] = elements[3];\n    e[4] = elements[4];\n    e[5] = elements[5];\n    return this;\n  };\n  Matrix.prototype.setIdentityElements = function () {\n    var e = this.elements;\n    e[0] = 1;\n    e[1] = 0;\n    e[2] = 0;\n    e[3] = 1;\n    e[4] = 0;\n    e[5] = 0;\n    return this;\n  };\n  Object.defineProperty(Matrix.prototype, \"identity\", {\n    get: function get() {\n      var e = this.elements;\n      return e[0] === 1 && e[1] === 0 && e[2] === 0 && e[3] === 1 && e[4] === 0 && e[5] === 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Matrix.prototype, \"a\", {\n    get: function get() {\n      return this.elements[0];\n    },\n    set: function set(value) {\n      this.elements[0] = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Matrix.prototype, \"b\", {\n    get: function get() {\n      return this.elements[1];\n    },\n    set: function set(value) {\n      this.elements[1] = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Matrix.prototype, \"c\", {\n    get: function get() {\n      return this.elements[2];\n    },\n    set: function set(value) {\n      this.elements[2] = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Matrix.prototype, \"d\", {\n    get: function get() {\n      return this.elements[3];\n    },\n    set: function set(value) {\n      this.elements[3] = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Matrix.prototype, \"e\", {\n    get: function get() {\n      return this.elements[4];\n    },\n    set: function set(value) {\n      this.elements[4] = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Matrix.prototype, \"f\", {\n    get: function get() {\n      return this.elements[5];\n    },\n    set: function set(value) {\n      this.elements[5] = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * Performs the AxB matrix multiplication and saves the result\n   * to `C`, if given, or to `A` otherwise.\n   */\n  Matrix.prototype.AxB = function (A, B, C) {\n    var m11 = A[0],\n      m12 = A[1],\n      m21 = A[2],\n      m22 = A[3],\n      m31 = A[4],\n      m32 = A[5];\n    var o11 = B[0],\n      o12 = B[1],\n      o21 = B[2],\n      o22 = B[3],\n      o31 = B[4],\n      o32 = B[5];\n    C = C || A;\n    C[0] = m11 * o11 + m21 * o12;\n    C[1] = m12 * o11 + m22 * o12;\n    C[2] = m11 * o21 + m21 * o22;\n    C[3] = m12 * o21 + m22 * o22;\n    C[4] = m11 * o31 + m21 * o32 + m31;\n    C[5] = m12 * o31 + m22 * o32 + m32;\n  };\n  /**\n   * The `other` matrix gets post-multiplied to the current matrix.\n   * Returns the current matrix.\n   * @param other\n   */\n  Matrix.prototype.multiplySelf = function (other) {\n    this.AxB(this.elements, other.elements);\n    return this;\n  };\n  /**\n   * The `other` matrix gets post-multiplied to the current matrix.\n   * Returns a new matrix.\n   * @param other\n   */\n  Matrix.prototype.multiply = function (other) {\n    var elements = new Array(6);\n    this.AxB(this.elements, other.elements, elements);\n    return new Matrix(elements);\n  };\n  Matrix.prototype.preMultiplySelf = function (other) {\n    this.AxB(other.elements, this.elements, this.elements);\n    return this;\n  };\n  /**\n   * Returns the inverse of this matrix as a new matrix.\n   */\n  Matrix.prototype.inverse = function () {\n    var _a = this.elements,\n      a = _a[0],\n      b = _a[1],\n      c = _a[2],\n      d = _a[3],\n      e = _a[4],\n      f = _a[5];\n    var rD = 1 / (a * d - b * c); // reciprocal of determinant\n    a *= rD;\n    b *= rD;\n    c *= rD;\n    d *= rD;\n    return new Matrix([d, -b, -c, a, c * f - d * e, b * e - a * f]);\n  };\n  /**\n   * Save the inverse of this matrix to the given matrix.\n   */\n  Matrix.prototype.inverseTo = function (other) {\n    var _a = this.elements,\n      a = _a[0],\n      b = _a[1],\n      c = _a[2],\n      d = _a[3],\n      e = _a[4],\n      f = _a[5];\n    var rD = 1 / (a * d - b * c); // reciprocal of determinant\n    a *= rD;\n    b *= rD;\n    c *= rD;\n    d *= rD;\n    other.setElements([d, -b, -c, a, c * f - d * e, b * e - a * f]);\n    return this;\n  };\n  Matrix.prototype.invertSelf = function () {\n    var elements = this.elements;\n    var a = elements[0],\n      b = elements[1],\n      c = elements[2],\n      d = elements[3],\n      e = elements[4],\n      f = elements[5];\n    var rD = 1 / (a * d - b * c); // reciprocal of determinant\n    a *= rD;\n    b *= rD;\n    c *= rD;\n    d *= rD;\n    elements[0] = d;\n    elements[1] = -b;\n    elements[2] = -c;\n    elements[3] = a;\n    elements[4] = c * f - d * e;\n    elements[5] = b * e - a * f;\n    return this;\n  };\n  Matrix.prototype.clone = function () {\n    return new Matrix(this.elements.slice());\n  };\n  Matrix.prototype.transformPoint = function (x, y) {\n    var e = this.elements;\n    return {\n      x: x * e[0] + y * e[2] + e[4],\n      y: x * e[1] + y * e[3] + e[5]\n    };\n  };\n  Matrix.prototype.transformBBox = function (bbox, radius, target) {\n    if (radius === void 0) {\n      radius = 0;\n    }\n    var elements = this.elements;\n    var xx = elements[0];\n    var xy = elements[1];\n    var yx = elements[2];\n    var yy = elements[3];\n    var h_w = bbox.width * 0.5;\n    var h_h = bbox.height * 0.5;\n    var cx = bbox.x + h_w;\n    var cy = bbox.y + h_h;\n    var w, h;\n    if (radius) {\n      h_w -= radius;\n      h_h -= radius;\n      var sx = Math.sqrt(xx * xx + yx * yx);\n      var sy = Math.sqrt(xy * xy + yy * yy);\n      w = Math.abs(h_w * xx) + Math.abs(h_h * yx) + Math.abs(sx * radius);\n      h = Math.abs(h_w * xy) + Math.abs(h_h * yy) + Math.abs(sy * radius);\n    } else {\n      w = Math.abs(h_w * xx) + Math.abs(h_h * yx);\n      h = Math.abs(h_w * xy) + Math.abs(h_h * yy);\n    }\n    if (!target) {\n      target = new BBox(0, 0, 0, 0);\n    }\n    target.x = cx * xx + cy * yx + elements[4] - w;\n    target.y = cx * xy + cy * yy + elements[5] - h;\n    target.width = w + w;\n    target.height = h + h;\n    return target;\n  };\n  Matrix.prototype.toContext = function (ctx) {\n    // It's fair to say that matrix multiplications are not cheap.\n    // However, updating path definitions on every frame isn't either, so\n    // it may be cheaper to just translate paths. It's also fair to\n    // say, that most paths will have to be re-rendered anyway, say\n    // rectangle paths in a bar chart, where an animation would happen when\n    // the data set changes and existing bars are morphed into new ones.\n    // Or a pie chart, where old sectors are also morphed into new ones.\n    // Same for the line chart. The only plausible case where translating\n    // existing paths would be enough, is the scatter chart, where marker\n    // icons, typically circles, stay the same size. But if circle radii\n    // are bound to some data points, even circle paths would have to be\n    // updated. And thus it makes sense to optimize for fewer matrix\n    // transforms, where transform matrices of paths are mostly identity\n    // matrices and `x`/`y`, `centerX`/`centerY` and similar properties\n    // are used to define a path at specific coordinates. And only groups\n    // are used to collectively apply a transform to a set of nodes.\n    // If the matrix is mostly identity (95% of the time),\n    // the `if (this.isIdentity)` check can make this call 3-4 times\n    // faster on average: https://jsperf.com/matrix-check-first-vs-always-set\n    if (this.identity) {\n      return;\n    }\n    var e = this.elements;\n    ctx.transform(e[0], e[1], e[2], e[3], e[4], e[5]);\n  };\n  Matrix.flyweight = function (elements) {\n    if (elements) {\n      if (elements instanceof Matrix) {\n        Matrix.matrix.setElements(elements.elements);\n      } else {\n        Matrix.matrix.setElements(elements);\n      }\n    } else {\n      Matrix.matrix.setIdentityElements();\n    }\n    return Matrix.matrix;\n  };\n  Matrix.matrix = new Matrix();\n  return Matrix;\n}();\nfunction createId(instance) {\n  var constructor = instance.constructor;\n  var className = constructor.className;\n  if (!className) {\n    throw new Error(\"The \" + constructor + \" is missing the 'className' property.\");\n  }\n  return className + '-' + (constructor.id = (constructor.id || 0) + 1);\n}\nvar PointerEvents;\n(function (PointerEvents) {\n  PointerEvents[PointerEvents[\"All\"] = 0] = \"All\";\n  PointerEvents[PointerEvents[\"None\"] = 1] = \"None\";\n})(PointerEvents || (PointerEvents = {}));\n/**\n * Abstract scene graph node.\n * Each node can have zero or one parent and belong to zero or one scene.\n */\nvar Node = /** @class */function () {\n  function Node() {\n    /**\n     * Unique node ID in the form `ClassName-NaturalNumber`.\n     */\n    this.id = createId(this);\n    /**\n     * Some number to identify this node, typically within a `Group` node.\n     * Usually this will be some enum value used as a selector.\n     */\n    this.tag = NaN;\n    /**\n     * To simplify the type system (especially in Selections) we don't have the `Parent` node\n     * (one that has children). Instead, we mimic HTML DOM, where any node can have children.\n     * But we still need to distinguish regular leaf nodes from container leafs somehow.\n     */\n    this.isContainerNode = false;\n    this._children = [];\n    // Used to check for duplicate nodes.\n    this.childSet = {}; // new Set<Node>()\n    // These matrices may need to have package level visibility\n    // for performance optimization purposes.\n    this.matrix = new Matrix();\n    this.inverseMatrix = new Matrix();\n    this._dirtyTransform = false;\n    this._scalingX = 1;\n    this._scalingY = 1;\n    /**\n     * The center of scaling.\n     * The default value of `null` means the scaling center will be\n     * determined automatically, as the center of the bounding box\n     * of a node.\n     */\n    this._scalingCenterX = null;\n    this._scalingCenterY = null;\n    this._rotationCenterX = null;\n    this._rotationCenterY = null;\n    /**\n     * Rotation angle in radians.\n     * The value is set as is. No normalization to the [-180, 180) or [0, 360)\n     * interval is performed.\n     */\n    this._rotation = 0;\n    this._translationX = 0;\n    this._translationY = 0;\n    /**\n     * Each time a property of the node that effects how it renders changes\n     * the `dirty` property of the node should be set to `true`. The change\n     * to the `dirty` property of the node will propagate up to its parents\n     * and eventually to the scene, at which point an animation frame callback\n     * will be scheduled to rerender the scene and its nodes and reset the `dirty`\n     * flags of all nodes and the {@link Scene._dirty | Scene} back to `false`.\n     * Since changes to node properties are not rendered immediately, it's possible\n     * to change as many properties on as many nodes as needed and the rendering\n     * will still only happen once in the next animation frame callback.\n     * The animation frame callback is only scheduled if it hasn't been already.\n     */\n    this._dirty = true;\n    this._visible = true;\n    this.pointerEvents = PointerEvents.All;\n  }\n  /**\n   * This is meaningfully faster than `instanceof` and should be the preferred way\n   * of checking inside loops.\n   * @param node\n   */\n  Node.isNode = function (node) {\n    return node ? node.matrix !== undefined : false;\n  };\n  Node.prototype._setScene = function (value) {\n    this._scene = value;\n    var children = this.children;\n    var n = children.length;\n    for (var i = 0; i < n; i++) {\n      children[i]._setScene(value);\n    }\n  };\n  Object.defineProperty(Node.prototype, \"scene\", {\n    get: function get() {\n      return this._scene;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Node.prototype._setParent = function (value) {\n    this._parent = value;\n  };\n  Object.defineProperty(Node.prototype, \"parent\", {\n    get: function get() {\n      return this._parent;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"children\", {\n    get: function get() {\n      return this._children;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Node.prototype.countChildren = function (depth) {\n    if (depth === void 0) {\n      depth = Node.MAX_SAFE_INTEGER;\n    }\n    if (depth <= 0) {\n      return 0;\n    }\n    var children = this.children;\n    var n = children.length;\n    var size = n;\n    for (var i = 0; i < n; i++) {\n      size += children[i].countChildren(depth - 1);\n    }\n    return size;\n  };\n  /**\n   * Appends one or more new node instances to this parent.\n   * If one needs to:\n   * - move a child to the end of the list of children\n   * - move a child from one parent to another (including parents in other scenes)\n   * one should use the {@link insertBefore} method instead.\n   * @param nodes A node or nodes to append.\n   */\n  Node.prototype.append = function (nodes) {\n    // Passing a single parameter to an open-ended version of `append`\n    // would be 30-35% slower than this.\n    if (Node.isNode(nodes)) {\n      nodes = [nodes];\n    }\n    // The function takes an array rather than having open-ended\n    // arguments like `...nodes: Node[]` because the latter is\n    // transpiled to a function where the `arguments` object\n    // is copied to a temporary array inside a loop.\n    // So an array is created either way. And if we already have\n    // an array of nodes we want to add, we have to use the prohibitively\n    // expensive spread operator to pass it to the function,\n    // and, on top of that, the copy of the `arguments` is still made.\n    var n = nodes.length;\n    for (var i = 0; i < n; i++) {\n      var node = nodes[i];\n      if (node.parent) {\n        throw new Error(node + \" already belongs to another parent: \" + node.parent + \".\");\n      }\n      if (node.scene) {\n        throw new Error(node + \" already belongs a scene: \" + node.scene + \".\");\n      }\n      if (this.childSet[node.id]) {\n        // Cast to `any` to avoid `Property 'name' does not exist on type 'Function'`.\n        throw new Error(\"Duplicate \" + node.constructor.name + \" node: \" + node);\n      }\n      this._children.push(node);\n      this.childSet[node.id] = true;\n      node._setParent(this);\n      node._setScene(this.scene);\n    }\n    this.dirty = true;\n  };\n  Node.prototype.appendChild = function (node) {\n    if (node.parent) {\n      throw new Error(node + \" already belongs to another parent: \" + node.parent + \".\");\n    }\n    if (node.scene) {\n      throw new Error(node + \" already belongs a scene: \" + node.scene + \".\");\n    }\n    if (this.childSet[node.id]) {\n      // Cast to `any` to avoid `Property 'name' does not exist on type 'Function'`.\n      throw new Error(\"Duplicate \" + node.constructor.name + \" node: \" + node);\n    }\n    this._children.push(node);\n    this.childSet[node.id] = true;\n    node._setParent(this);\n    node._setScene(this.scene);\n    this.dirty = true;\n    return node;\n  };\n  Node.prototype.removeChild = function (node) {\n    if (node.parent === this) {\n      var i = this.children.indexOf(node);\n      if (i >= 0) {\n        this._children.splice(i, 1);\n        delete this.childSet[node.id];\n        node._setParent(undefined);\n        node._setScene(undefined);\n        this.dirty = true;\n        return node;\n      }\n    }\n    throw new Error(\"The node to be removed is not a child of this node.\");\n  };\n  /**\n   * Inserts the node `node` before the existing child node `nextNode`.\n   * If `nextNode` is null, insert `node` at the end of the list of children.\n   * If the `node` belongs to another parent, it is first removed.\n   * Returns the `node`.\n   * @param node\n   * @param nextNode\n   */\n  Node.prototype.insertBefore = function (node, nextNode) {\n    var parent = node.parent;\n    if (node.parent) {\n      node.parent.removeChild(node);\n    }\n    if (nextNode && nextNode.parent === this) {\n      var i = this.children.indexOf(nextNode);\n      if (i >= 0) {\n        this._children.splice(i, 0, node);\n        this.childSet[node.id] = true;\n        node._setParent(this);\n        node._setScene(this.scene);\n      } else {\n        throw new Error(nextNode + \" has \" + parent + \" as the parent, \" + \"but is not in its list of children.\");\n      }\n      this.dirty = true;\n    } else {\n      this.append(node);\n    }\n    return node;\n  };\n  Object.defineProperty(Node.prototype, \"nextSibling\", {\n    get: function get() {\n      var parent = this.parent;\n      if (parent) {\n        var children = parent.children;\n        var index = children.indexOf(this);\n        if (index >= 0 && index <= children.length - 1) {\n          return children[index + 1];\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Node.prototype.transformPoint = function (x, y) {\n    var matrix = Matrix.flyweight(this.matrix);\n    var parent = this.parent;\n    while (parent) {\n      matrix.preMultiplySelf(parent.matrix);\n      parent = parent.parent;\n    }\n    return matrix.invertSelf().transformPoint(x, y);\n  };\n  Node.prototype.inverseTransformPoint = function (x, y) {\n    var matrix = Matrix.flyweight(this.matrix);\n    var parent = this.parent;\n    while (parent) {\n      matrix.preMultiplySelf(parent.matrix);\n      parent = parent.parent;\n    }\n    return matrix.transformPoint(x, y);\n  };\n  Object.defineProperty(Node.prototype, \"dirtyTransform\", {\n    get: function get() {\n      return this._dirtyTransform;\n    },\n    set: function set(value) {\n      this._dirtyTransform = value;\n      if (value) {\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"scalingX\", {\n    get: function get() {\n      return this._scalingX;\n    },\n    set: function set(value) {\n      if (this._scalingX !== value) {\n        this._scalingX = value;\n        this.dirtyTransform = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"scalingY\", {\n    get: function get() {\n      return this._scalingY;\n    },\n    set: function set(value) {\n      if (this._scalingY !== value) {\n        this._scalingY = value;\n        this.dirtyTransform = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"scalingCenterX\", {\n    get: function get() {\n      return this._scalingCenterX;\n    },\n    set: function set(value) {\n      if (this._scalingCenterX !== value) {\n        this._scalingCenterX = value;\n        this.dirtyTransform = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"scalingCenterY\", {\n    get: function get() {\n      return this._scalingCenterY;\n    },\n    set: function set(value) {\n      if (this._scalingCenterY !== value) {\n        this._scalingCenterY = value;\n        this.dirtyTransform = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"rotationCenterX\", {\n    get: function get() {\n      return this._rotationCenterX;\n    },\n    set: function set(value) {\n      if (this._rotationCenterX !== value) {\n        this._rotationCenterX = value;\n        this.dirtyTransform = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"rotationCenterY\", {\n    get: function get() {\n      return this._rotationCenterY;\n    },\n    set: function set(value) {\n      if (this._rotationCenterY !== value) {\n        this._rotationCenterY = value;\n        this.dirtyTransform = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"rotation\", {\n    get: function get() {\n      return this._rotation;\n    },\n    set: function set(value) {\n      if (this._rotation !== value) {\n        this._rotation = value;\n        this.dirtyTransform = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"rotationDeg\", {\n    get: function get() {\n      return this.rotation / Math.PI * 180;\n    },\n    /**\n     * For performance reasons the rotation angle's internal representation\n     * is in radians. Therefore, don't expect to get the same number you set.\n     * Even with integer angles about a quarter of them from 0 to 359 cannot\n     * be converted to radians and back without precision loss.\n     * For example:\n     *\n     *     node.rotationDeg = 11;\n     *     console.log(node.rotationDeg); // 10.999999999999998\n     *\n     * @param value Rotation angle in degrees.\n     */\n    set: function set(value) {\n      this.rotation = value / 180 * Math.PI;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"translationX\", {\n    get: function get() {\n      return this._translationX;\n    },\n    set: function set(value) {\n      if (this._translationX !== value) {\n        this._translationX = value;\n        this.dirtyTransform = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"translationY\", {\n    get: function get() {\n      return this._translationY;\n    },\n    set: function set(value) {\n      if (this._translationY !== value) {\n        this._translationY = value;\n        this.dirtyTransform = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Node.prototype.containsPoint = function (x, y) {\n    return false;\n  };\n  /**\n   * Hit testing method.\n   * Recursively checks if the given point is inside this node or any of its children.\n   * Returns the first matching node or `undefined`.\n   * Nodes that render later (show on top) are hit tested first.\n   * @param x\n   * @param y\n   */\n  Node.prototype.pickNode = function (x, y) {\n    if (!this.visible || this.pointerEvents === PointerEvents.None || !this.containsPoint(x, y)) {\n      return;\n    }\n    var children = this.children;\n    if (children.length) {\n      // Nodes added later should be hit-tested first,\n      // as they are rendered on top of the previously added nodes.\n      for (var i = children.length - 1; i >= 0; i--) {\n        var hit = children[i].pickNode(x, y);\n        if (hit) {\n          return hit;\n        }\n      }\n    } else if (!this.isContainerNode) {\n      // a leaf node, but not a container leaf\n      return this;\n    }\n  };\n  Node.prototype.computeBBox = function () {\n    return;\n  };\n  Node.prototype.computeBBoxCenter = function () {\n    var bbox = this.computeBBox && this.computeBBox();\n    if (bbox) {\n      return [bbox.x + bbox.width * 0.5, bbox.y + bbox.height * 0.5];\n    }\n    return [0, 0];\n  };\n  Node.prototype.computeTransformMatrix = function () {\n    // TODO: transforms without center of scaling and rotation correspond directly\n    //       to `setAttribute('transform', 'translate(tx, ty) rotate(rDeg) scale(sx, sy)')`\n    //       in SVG. Our use cases will mostly require positioning elements (rects, circles)\n    //       within a group, rotating groups at right angles (e.g. for axis) and translating\n    //       groups. We shouldn't even need `scale(1, -1)` (invert vertically), since this\n    //       can be done using D3-like scales already by inverting the output range.\n    //       So for now, just assume that centers of scaling and rotation are at the origin.\n    // const [bbcx, bbcy] = this.computeBBoxCenter();\n    var _a = [0, 0],\n      bbcx = _a[0],\n      bbcy = _a[1];\n    var sx = this.scalingX;\n    var sy = this.scalingY;\n    var scx;\n    var scy;\n    if (sx === 1 && sy === 1) {\n      scx = 0;\n      scy = 0;\n    } else {\n      scx = this.scalingCenterX === null ? bbcx : this.scalingCenterX;\n      scy = this.scalingCenterY === null ? bbcy : this.scalingCenterY;\n    }\n    var r = this.rotation;\n    var cos = Math.cos(r);\n    var sin = Math.sin(r);\n    var rcx;\n    var rcy;\n    if (r === 0) {\n      rcx = 0;\n      rcy = 0;\n    } else {\n      rcx = this.rotationCenterX === null ? bbcx : this.rotationCenterX;\n      rcy = this.rotationCenterY === null ? bbcy : this.rotationCenterY;\n    }\n    var tx = this.translationX;\n    var ty = this.translationY;\n    // The transform matrix `M` is a result of the following transformations:\n    // 1) translate the center of scaling to the origin\n    // 2) scale\n    // 3) translate back\n    // 4) translate the center of rotation to the origin\n    // 5) rotate\n    // 6) translate back\n    // 7) translate\n    //         (7)          (6)             (5)             (4)           (3)           (2)           (1)\n    //     | 1 0 tx |   | 1 0 rcx |   | cos -sin 0 |   | 1 0 -rcx |   | 1 0 scx |   | sx 0 0 |   | 1 0 -scx |\n    // M = | 0 1 ty | * | 0 1 rcy | * | sin  cos 0 | * | 0 1 -rcy | * | 0 1 scy | * | 0 sy 0 | * | 0 1 -scy |\n    //     | 0 0  1 |   | 0 0  1  |   |  0    0  1 |   | 0 0  1   |   | 0 0  1  |   | 0  0 0 |   | 0 0  1   |\n    // Translation after steps 1-4 above:\n    var tx4 = scx * (1 - sx) - rcx;\n    var ty4 = scy * (1 - sy) - rcy;\n    this.dirtyTransform = false;\n    this.matrix.setElements([cos * sx, sin * sx, -sin * sy, cos * sy, cos * tx4 - sin * ty4 + rcx + tx, sin * tx4 + cos * ty4 + rcy + ty]).inverseTo(this.inverseMatrix);\n  };\n  Object.defineProperty(Node.prototype, \"dirty\", {\n    get: function get() {\n      return this._dirty;\n    },\n    set: function set(value) {\n      // TODO: check if we are already dirty (e.g. if (this._dirty !== value))\n      //       if we are, then all parents and the scene have been\n      //       notified already, and we are doing redundant work\n      //       (but test if this is indeed the case)\n      this._dirty = value;\n      if (value) {\n        if (this.parent) {\n          this.parent.dirty = true;\n        } else if (this.scene) {\n          this.scene.dirty = true;\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"visible\", {\n    get: function get() {\n      return this._visible;\n    },\n    set: function set(value) {\n      if (this._visible !== value) {\n        this._visible = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Node.MAX_SAFE_INTEGER = Math.pow(2, 53) - 1; // Number.MAX_SAFE_INTEGER\n  return Node;\n}();\n\n/**\n * Creates a new object with a `parent` as its prototype\n * and copies properties from the `child` into it.\n * @param parent\n * @param child\n */\nfunction chainObjects(parent, child) {\n  var obj = Object.create(parent);\n  for (var prop in child) {\n    if (child.hasOwnProperty(prop)) {\n      obj[prop] = child[prop];\n    }\n  }\n  return obj;\n}\nfunction getValue(object, path) {\n  var parts = Array.isArray(path) ? path : path.split('.');\n  var value = object;\n  parts.forEach(function (part) {\n    value = value[part];\n  });\n  return value;\n}\nfunction emptyTarget(value) {\n  return Array.isArray(value) ? [] : {};\n}\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n  return options.clone !== false && options.isMergeableObject(value) ? deepMerge(emptyTarget(value), value, options) : value;\n}\nfunction defaultArrayMerge(target, source, options) {\n  return target.concat(source).map(function (element) {\n    return cloneUnlessOtherwiseSpecified(element, options);\n  });\n}\nfunction getMergeFunction(key, options) {\n  if (!options.customMerge) {\n    return deepMerge;\n  }\n  var customMerge = options.customMerge(key);\n  return typeof customMerge === 'function' ? customMerge : deepMerge;\n}\nfunction getEnumerableOwnPropertySymbols(target) {\n  return Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(target).filter(function (symbol) {\n    return target.propertyIsEnumerable(symbol);\n  }) : [];\n}\nfunction getKeys(target) {\n  return Object.keys(target).concat(getEnumerableOwnPropertySymbols(target));\n}\nfunction propertyIsOnObject(object, property) {\n  try {\n    return property in object;\n  } catch (_) {\n    return false;\n  }\n}\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n  return propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n  && !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n  && Object.propertyIsEnumerable.call(target, key)); // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n  var destination = {};\n  if (options.isMergeableObject(target)) {\n    getKeys(target).forEach(function (key) {\n      destination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n    });\n  }\n  getKeys(source).forEach(function (key) {\n    if (propertyIsUnsafe(target, key)) {\n      return;\n    }\n    if (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n      destination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n    } else {\n      destination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n    }\n  });\n  return destination;\n}\nfunction defaultIsMergeableObject(value) {\n  return isNonNullObject(value) && !isSpecial(value);\n}\nfunction isNonNullObject(value) {\n  return !!value && typeof value === 'object';\n}\nfunction isSpecial(value) {\n  var stringValue = Object.prototype.toString.call(value);\n  return stringValue === '[object RegExp]' || stringValue === '[object Date]';\n}\nfunction deepMerge(target, source, options) {\n  options = options || {};\n  options.arrayMerge = options.arrayMerge || defaultArrayMerge;\n  options.isMergeableObject = options.isMergeableObject || defaultIsMergeableObject;\n  // cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n  // implementations can use it. The caller may not replace it.\n  options.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n  var sourceIsArray = Array.isArray(source);\n  var targetIsArray = Array.isArray(target);\n  var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n  if (!sourceAndTargetTypesMatch) {\n    return cloneUnlessOtherwiseSpecified(source, options);\n  } else if (sourceIsArray) {\n    return options.arrayMerge(target, source, options);\n  } else {\n    return mergeObject(target, source, options);\n  }\n}\nfunction isObject(value) {\n  return typeof value === 'object' && !Array.isArray(value);\n}\nvar __extends$G = undefined && undefined.__extends || function () {\n  var _extendStatics43 = function extendStatics(d, b) {\n    _extendStatics43 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics43(d, b);\n  };\n  return function (d, b) {\n    _extendStatics43(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar Shape = /** @class */function (_super) {\n  __extends$G(Shape, _super);\n  function Shape() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.lastInstanceId = 0;\n    _this._fillOpacity = 1;\n    _this._strokeOpacity = 1;\n    _this._fill = Shape.defaultStyles.fill;\n    /**\n     * Note that `strokeStyle = null` means invisible stroke,\n     * while `lineWidth = 0` means no stroke, and sometimes this can mean different things.\n     * For example, a rect shape with an invisible stroke may not align to the pixel grid\n     * properly because the stroke affects the rules of alignment, and arc shapes forming\n     * a pie chart will have a gap between them if they have an invisible stroke, whereas\n     * there would be not gap if there was no stroke at all.\n     * The preferred way of making the stroke invisible is setting the `lineWidth` to zero,\n     * unless specific looks that is achieved by having an invisible stroke is desired.\n     */\n    _this._stroke = Shape.defaultStyles.stroke;\n    _this._strokeWidth = Shape.defaultStyles.strokeWidth;\n    _this._lineDash = Shape.defaultStyles.lineDash;\n    _this._lineDashOffset = Shape.defaultStyles.lineDashOffset;\n    _this._lineCap = Shape.defaultStyles.lineCap;\n    _this._lineJoin = Shape.defaultStyles.lineJoin;\n    _this._opacity = Shape.defaultStyles.opacity;\n    _this.onShadowChange = function () {\n      _this.dirty = true;\n    };\n    _this._fillShadow = Shape.defaultStyles.fillShadow;\n    _this._strokeShadow = Shape.defaultStyles.strokeShadow;\n    return _this;\n  }\n  /**\n   * Creates a light-weight instance of the given shape (that serves as a template).\n   * The created instance only stores the properites set on the instance itself\n   * and the rest of the properties come via the prototype chain from the template.\n   * This can greatly reduce memory usage in cases where one has many simular shapes,\n   * for example, circles of different size, position and color. The exact memory usage\n   * reduction will depend on the size of the template and the number of own properties\n   * set on its lightweight instances, but will typically be around an order of magnitude\n   * or more.\n   *\n   * Note: template shapes are not supposed to be part of the scene graph (they should not\n   * have a parent).\n   *\n   * @param template\n   */\n  Shape.createInstance = function (template) {\n    var shape = Object.create(template);\n    shape._setParent(undefined);\n    shape.id = template.id + '-Instance-' + String(++template.lastInstanceId);\n    return shape;\n  };\n  /**\n   * Restores the default styles introduced by this subclass.\n   */\n  Shape.prototype.restoreOwnStyles = function () {\n    var styles = this.constructor.defaultStyles;\n    var keys = Object.getOwnPropertyNames(styles);\n    // getOwnPropertyNames is about 2.5 times faster than\n    // for..in with the hasOwnProperty check and in this\n    // case, where most properties are inherited, can be\n    // more then an order of magnitude faster.\n    for (var i = 0, n = keys.length; i < n; i++) {\n      var key = keys[i];\n      this[key] = styles[key];\n    }\n  };\n  Shape.prototype.restoreAllStyles = function () {\n    var styles = this.constructor.defaultStyles;\n    for (var property in styles) {\n      this[property] = styles[property];\n    }\n  };\n  /**\n   * Restores the base class default styles that have been overridden by this subclass.\n   */\n  Shape.prototype.restoreOverriddenStyles = function () {\n    var styles = this.constructor.defaultStyles;\n    var protoStyles = Object.getPrototypeOf(styles);\n    for (var property in styles) {\n      if (styles.hasOwnProperty(property) && protoStyles.hasOwnProperty(property)) {\n        this[property] = styles[property];\n      }\n    }\n  };\n  Object.defineProperty(Shape.prototype, \"fillOpacity\", {\n    get: function get() {\n      return this._fillOpacity;\n    },\n    set: function set(value) {\n      if (this._fillOpacity !== value) {\n        this._fillOpacity = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Shape.prototype, \"strokeOpacity\", {\n    get: function get() {\n      return this._strokeOpacity;\n    },\n    set: function set(value) {\n      if (this._strokeOpacity !== value) {\n        this._strokeOpacity = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Shape.prototype, \"fill\", {\n    get: function get() {\n      return this._fill;\n    },\n    set: function set(value) {\n      if (this._fill !== value) {\n        this._fill = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Shape.prototype, \"stroke\", {\n    get: function get() {\n      return this._stroke;\n    },\n    set: function set(value) {\n      if (this._stroke !== value) {\n        this._stroke = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Shape.prototype, \"strokeWidth\", {\n    get: function get() {\n      return this._strokeWidth;\n    },\n    set: function set(value) {\n      if (this._strokeWidth !== value) {\n        this._strokeWidth = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Shape.prototype, \"alignment\", {\n    // An offset value to align to the pixel grid.\n    get: function get() {\n      return Math.floor(this.strokeWidth) % 2 / 2;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  // Returns the aligned `start` or `length` value.\n  // For example: `start` could be `y` and `length` could be `height` of a rectangle.\n  Shape.prototype.align = function (alignment, start, length) {\n    if (length != undefined) {\n      return Math.floor(length) + Math.floor(start % 1 + length % 1);\n    }\n    return Math.floor(start) + alignment;\n  };\n  Object.defineProperty(Shape.prototype, \"lineDash\", {\n    get: function get() {\n      return this._lineDash;\n    },\n    set: function set(value) {\n      var oldValue = this._lineDash;\n      if (oldValue !== value) {\n        if (oldValue && value && oldValue.length === value.length) {\n          var identical = true;\n          var n = value.length;\n          for (var i = 0; i < n; i++) {\n            if (oldValue[i] !== value[i]) {\n              identical = false;\n              break;\n            }\n          }\n          if (identical) {\n            return;\n          }\n        }\n        this._lineDash = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Shape.prototype, \"lineDashOffset\", {\n    get: function get() {\n      return this._lineDashOffset;\n    },\n    set: function set(value) {\n      if (this._lineDashOffset !== value) {\n        this._lineDashOffset = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Shape.prototype, \"lineCap\", {\n    get: function get() {\n      return this._lineCap;\n    },\n    set: function set(value) {\n      if (this._lineCap !== value) {\n        this._lineCap = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Shape.prototype, \"lineJoin\", {\n    get: function get() {\n      return this._lineJoin;\n    },\n    set: function set(value) {\n      if (this._lineJoin !== value) {\n        this._lineJoin = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Shape.prototype, \"opacity\", {\n    get: function get() {\n      return this._opacity;\n    },\n    set: function set(value) {\n      value = Math.min(1, Math.max(0, value));\n      if (this._opacity !== value) {\n        this._opacity = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Shape.prototype, \"fillShadow\", {\n    get: function get() {\n      return this._fillShadow;\n    },\n    set: function set(value) {\n      var oldValue = this._fillShadow;\n      if (oldValue !== value) {\n        if (oldValue) {\n          oldValue.removeEventListener('change', this.onShadowChange);\n        }\n        if (value) {\n          value.addEventListener('change', this.onShadowChange);\n        }\n        this._fillShadow = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Shape.prototype, \"strokeShadow\", {\n    get: function get() {\n      return this._strokeShadow;\n    },\n    set: function set(value) {\n      var oldValue = this._strokeShadow;\n      if (oldValue !== value) {\n        if (oldValue) {\n          oldValue.removeEventListener('change', this.onShadowChange);\n        }\n        if (value) {\n          value.addEventListener('change', this.onShadowChange);\n        }\n        this._strokeShadow = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Shape.prototype.fillStroke = function (ctx) {\n    if (!this.scene) {\n      return;\n    }\n    var pixelRatio = this.scene.canvas.pixelRatio || 1;\n    if (this.fill) {\n      ctx.fillStyle = this.fill;\n      ctx.globalAlpha = this.opacity * this.fillOpacity;\n      // The canvas context scaling (depends on the device's pixel ratio)\n      // has no effect on shadows, so we have to account for the pixel ratio\n      // manually here.\n      var fillShadow = this.fillShadow;\n      if (fillShadow && fillShadow.enabled) {\n        ctx.shadowColor = fillShadow.color;\n        ctx.shadowOffsetX = fillShadow.xOffset * pixelRatio;\n        ctx.shadowOffsetY = fillShadow.yOffset * pixelRatio;\n        ctx.shadowBlur = fillShadow.blur * pixelRatio;\n      }\n      ctx.fill();\n    }\n    ctx.shadowColor = 'rgba(0, 0, 0, 0)';\n    if (this.stroke && this.strokeWidth) {\n      ctx.strokeStyle = this.stroke;\n      ctx.globalAlpha = this.opacity * this.strokeOpacity;\n      ctx.lineWidth = this.strokeWidth;\n      if (this.lineDash) {\n        ctx.setLineDash(this.lineDash);\n      }\n      if (this.lineDashOffset) {\n        ctx.lineDashOffset = this.lineDashOffset;\n      }\n      if (this.lineCap) {\n        ctx.lineCap = this.lineCap;\n      }\n      if (this.lineJoin) {\n        ctx.lineJoin = this.lineJoin;\n      }\n      var strokeShadow = this.strokeShadow;\n      if (strokeShadow && strokeShadow.enabled) {\n        ctx.shadowColor = strokeShadow.color;\n        ctx.shadowOffsetX = strokeShadow.xOffset * pixelRatio;\n        ctx.shadowOffsetY = strokeShadow.yOffset * pixelRatio;\n        ctx.shadowBlur = strokeShadow.blur * pixelRatio;\n      }\n      ctx.stroke();\n    }\n  };\n  Shape.prototype.containsPoint = function (x, y) {\n    return this.isPointInPath(x, y);\n  };\n  /**\n   * Defaults for style properties. Note that properties that affect the position\n   * and shape of the node are not considered style properties, for example:\n   * `x`, `y`, `width`, `height`, `radius`, `rotation`, etc.\n   * Can be used to reset to the original styling after some custom styling\n   * has been applied (using the `restoreOwnStyles` and `restoreAllStyles` methods).\n   * These static defaults are meant to be inherited by subclasses.\n   */\n  Shape.defaultStyles = chainObjects({}, {\n    fill: 'black',\n    stroke: undefined,\n    strokeWidth: 0,\n    lineDash: undefined,\n    lineDashOffset: 0,\n    lineCap: undefined,\n    lineJoin: undefined,\n    opacity: 1,\n    fillShadow: undefined,\n    strokeShadow: undefined\n  });\n  return Shape;\n}(Node);\n\n/**\n * Wraps the native Canvas element and overrides its CanvasRenderingContext2D to\n * provide resolution independent rendering based on `window.devicePixelRatio`.\n */\nvar HdpiCanvas = /** @class */function () {\n  // The width/height attributes of the Canvas element default to\n  // 300/150 according to w3.org.\n  function HdpiCanvas(document, width, height) {\n    if (document === void 0) {\n      document = window.document;\n    }\n    if (width === void 0) {\n      width = 600;\n    }\n    if (height === void 0) {\n      height = 300;\n    }\n    this._container = undefined;\n    // `NaN` is deliberate here, so that overrides are always applied\n    // and the `resetTransform` inside the `resize` method works in IE11.\n    this._pixelRatio = NaN;\n    this.document = document;\n    this.element = document.createElement('canvas');\n    this.context = this.element.getContext('2d');\n    this.element.style.userSelect = 'none';\n    this.element.style.display = 'block';\n    this.setPixelRatio();\n    this.resize(width, height);\n  }\n  Object.defineProperty(HdpiCanvas.prototype, \"container\", {\n    get: function get() {\n      return this._container;\n    },\n    set: function set(value) {\n      if (this._container !== value) {\n        this.remove();\n        if (value) {\n          value.appendChild(this.element);\n        }\n        this._container = value;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  HdpiCanvas.prototype.remove = function () {\n    var parentNode = this.element.parentNode;\n    if (parentNode != null) {\n      parentNode.removeChild(this.element);\n    }\n  };\n  HdpiCanvas.prototype.destroy = function () {\n    this.element.remove();\n    this._canvas = undefined;\n    Object.freeze(this);\n  };\n  HdpiCanvas.prototype.toImage = function () {\n    var img = this.document.createElement('img');\n    img.src = this.getDataURL();\n    return img;\n  };\n  HdpiCanvas.prototype.getDataURL = function (type) {\n    return this.element.toDataURL(type);\n  };\n  /**\n   * @param options.fileName The `.png` extension is going to be added automatically.\n   * @param [options.background] Defaults to `white`.\n   */\n  HdpiCanvas.prototype.download = function (fileName) {\n    fileName = ((fileName || '').trim() || 'image') + '.png';\n    // Chart images saved as JPEG are a few times larger at 50% quality than PNG images,\n    // so we don't support saving to JPEG.\n    var type = 'image/png';\n    var dataUrl = this.getDataURL(type);\n    var document = this.document;\n    if (navigator.msSaveOrOpenBlob) {\n      // IE11\n      var binary = atob(dataUrl.split(',')[1]); // strip the `data:image/png;base64,` part\n      var array = [];\n      for (var i = 0, n = binary.length; i < n; i++) {\n        array.push(binary.charCodeAt(i));\n      }\n      var blob = new Blob([new Uint8Array(array)], {\n        type: type\n      });\n      navigator.msSaveOrOpenBlob(blob, fileName);\n    } else {\n      var a = document.createElement('a');\n      a.href = dataUrl;\n      a.download = fileName;\n      a.style.display = 'none';\n      document.body.appendChild(a); // required for the `click` to work in Firefox\n      a.click();\n      document.body.removeChild(a);\n    }\n  };\n  Object.defineProperty(HdpiCanvas.prototype, \"pixelRatio\", {\n    get: function get() {\n      return this._pixelRatio;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * Changes the pixel ratio of the Canvas element to the given value,\n   * or uses the window.devicePixelRatio (default), then resizes the Canvas\n   * element accordingly (default).\n   */\n  HdpiCanvas.prototype.setPixelRatio = function (ratio) {\n    var pixelRatio = ratio || window.devicePixelRatio;\n    if (pixelRatio === this.pixelRatio) {\n      return;\n    }\n    HdpiCanvas.overrideScale(this.context, pixelRatio);\n    this._pixelRatio = pixelRatio;\n    this.resize(this.width, this.height);\n  };\n  Object.defineProperty(HdpiCanvas.prototype, \"pixelated\", {\n    get: function get() {\n      return this.element.style.imageRendering === 'pixelated';\n    },\n    set: function set(value) {\n      this.element.style.imageRendering = value ? 'pixelated' : 'auto';\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HdpiCanvas.prototype, \"width\", {\n    get: function get() {\n      return this._width;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HdpiCanvas.prototype, \"height\", {\n    get: function get() {\n      return this._height;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  HdpiCanvas.prototype.resize = function (width, height) {\n    var _a = this,\n      element = _a.element,\n      context = _a.context,\n      pixelRatio = _a.pixelRatio;\n    element.width = Math.round(width * pixelRatio);\n    element.height = Math.round(height * pixelRatio);\n    element.style.width = width + 'px';\n    element.style.height = height + 'px';\n    context.resetTransform();\n    this._width = width;\n    this._height = height;\n  };\n  Object.defineProperty(HdpiCanvas, \"textMeasuringContext\", {\n    get: function get() {\n      if (this._textMeasuringContext) {\n        return this._textMeasuringContext;\n      }\n      var canvas = document.createElement('canvas');\n      return this._textMeasuringContext = canvas.getContext('2d');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HdpiCanvas, \"svgText\", {\n    get: function get() {\n      if (this._svgText) {\n        return this._svgText;\n      }\n      var xmlns = 'http://www.w3.org/2000/svg';\n      var svg = document.createElementNS(xmlns, 'svg');\n      svg.setAttribute('width', '100');\n      svg.setAttribute('height', '100');\n      // Add a descriptive class name in case someone sees this SVG element\n      // in devtools and wonders about its purpose:\n      if (svg.classList) {\n        svg.classList.add('text-measuring-svg');\n      } else {\n        svg.setAttribute('class', 'text-measuring-svg');\n      }\n      svg.style.position = 'absolute';\n      svg.style.top = '-1000px';\n      svg.style.visibility = 'hidden';\n      var svgText = document.createElementNS(xmlns, 'text');\n      svgText.setAttribute('x', '0');\n      svgText.setAttribute('y', '30');\n      svgText.setAttribute('text', 'black');\n      svg.appendChild(svgText);\n      document.body.appendChild(svg);\n      this._svgText = svgText;\n      return svgText;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HdpiCanvas, \"has\", {\n    get: function get() {\n      if (this._has) {\n        return this._has;\n      }\n      return this._has = Object.freeze({\n        textMetrics: this.textMeasuringContext.measureText('test').actualBoundingBoxDescent !== undefined\n        // Firefox implemented advanced TextMetrics object in v74:\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1102584\n        // but it's buggy, so we'll keed using the SVG for text measurement in Firefox for now.\n        && !/Firefox\\/\\d+(.\\d)+/.test(window.navigator.userAgent),\n        getTransform: this.textMeasuringContext.getTransform !== undefined\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  HdpiCanvas.measureText = function (text, font, textBaseline, textAlign) {\n    var ctx = this.textMeasuringContext;\n    ctx.font = font;\n    ctx.textBaseline = textBaseline;\n    ctx.textAlign = textAlign;\n    return ctx.measureText(text);\n  };\n  /**\n   * Returns the width and height of the measured text.\n   * @param text The single-line text to measure.\n   * @param font The font shorthand string.\n   */\n  HdpiCanvas.getTextSize = function (text, font) {\n    if (this.has.textMetrics) {\n      var ctx = this.textMeasuringContext;\n      ctx.font = font;\n      var metrics = ctx.measureText(text);\n      return {\n        width: metrics.width,\n        height: metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent\n      };\n    } else {\n      return this.measureSvgText(text, font);\n    }\n  };\n  HdpiCanvas.measureSvgText = function (text, font) {\n    var cache = this.textSizeCache;\n    var fontCache = cache[font];\n    // Note: consider not caching the size of numeric strings.\n    // For example: if (isNaN(+text)) { // skip\n    if (fontCache) {\n      var size_1 = fontCache[text];\n      if (size_1) {\n        return size_1;\n      }\n    } else {\n      cache[font] = {};\n    }\n    var svgText = this.svgText;\n    svgText.style.font = font;\n    svgText.textContent = text;\n    // `getBBox` returns an instance of `SVGRect` with the same `width` and `height`\n    // measurements as `DOMRect` instance returned by the `getBoundingClientRect`.\n    // But the `SVGRect` instance has half the properties of the `DOMRect`,\n    // so we use the `getBBox` method.\n    var bbox = svgText.getBBox();\n    var size = {\n      width: bbox.width,\n      height: bbox.height\n    };\n    cache[font][text] = size;\n    return size;\n  };\n  HdpiCanvas.overrideScale = function (ctx, scale) {\n    var depth = 0;\n    var overrides = {\n      save: function save() {\n        this.$save();\n        depth++;\n      },\n      restore: function restore() {\n        if (depth > 0) {\n          this.$restore();\n          depth--;\n        }\n      },\n      setTransform: function setTransform(a, b, c, d, e, f) {\n        this.$setTransform(a * scale, b * scale, c * scale, d * scale, e * scale, f * scale);\n      },\n      resetTransform: function resetTransform() {\n        // As of Jan 8, 2019, `resetTransform` is still an \"experimental technology\",\n        // and doesn't work in IE11 and Edge 44.\n        this.$setTransform(scale, 0, 0, scale, 0, 0);\n        this.save();\n        depth = 0;\n        // The scale above will be impossible to restore,\n        // because we override the `ctx.restore` above and\n        // check `depth` there.\n      }\n    };\n\n    for (var name_1 in overrides) {\n      if (overrides.hasOwnProperty(name_1)) {\n        // Save native methods under prefixed names,\n        // if this hasn't been done by the previous overrides already.\n        if (!ctx['$' + name_1]) {\n          ctx['$' + name_1] = ctx[name_1];\n        }\n        // Replace native methods with overrides,\n        // or previous overrides with the new ones.\n        ctx[name_1] = overrides[name_1];\n      }\n    }\n  };\n  HdpiCanvas.textSizeCache = {};\n  return HdpiCanvas;\n}();\nvar __extends$H = undefined && undefined.__extends || function () {\n  var _extendStatics44 = function extendStatics(d, b) {\n    _extendStatics44 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics44(d, b);\n  };\n  return function (d, b) {\n    _extendStatics44(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar Text = /** @class */function (_super) {\n  __extends$H(Text, _super);\n  function Text() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._x = 0;\n    _this._y = 0;\n    _this.lineBreakRegex = /\\r?\\n/g;\n    _this.lines = [];\n    _this._text = '';\n    _this._dirtyFont = true;\n    _this._fontSize = 10;\n    _this._fontFamily = 'sans-serif';\n    _this._textAlign = Text.defaultStyles.textAlign;\n    _this._textBaseline = Text.defaultStyles.textBaseline;\n    _this._lineHeight = 14;\n    return _this;\n  }\n  Object.defineProperty(Text.prototype, \"x\", {\n    get: function get() {\n      return this._x;\n    },\n    set: function set(value) {\n      if (this._x !== value) {\n        this._x = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Text.prototype, \"y\", {\n    get: function get() {\n      return this._y;\n    },\n    set: function set(value) {\n      if (this._y !== value) {\n        this._y = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Text.prototype.splitText = function () {\n    this.lines = this._text.split(this.lineBreakRegex);\n  };\n  Object.defineProperty(Text.prototype, \"text\", {\n    get: function get() {\n      return this._text;\n    },\n    set: function set(value) {\n      var str = String(value); // `value` can be an object here\n      if (this._text !== str) {\n        this._text = str;\n        this.splitText();\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Text.prototype, \"font\", {\n    get: function get() {\n      if (this.dirtyFont) {\n        this.dirtyFont = false;\n        this._font = [this.fontStyle || '', this.fontWeight || '', this.fontSize + 'px', this.fontFamily].join(' ').trim();\n      }\n      return this._font;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Text.prototype, \"dirtyFont\", {\n    get: function get() {\n      return this._dirtyFont;\n    },\n    set: function set(value) {\n      if (this._dirtyFont !== value) {\n        this._dirtyFont = value;\n        if (value) {\n          this.dirty = true;\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Text.prototype, \"fontStyle\", {\n    get: function get() {\n      return this._fontStyle;\n    },\n    set: function set(value) {\n      if (this._fontStyle !== value) {\n        this._fontStyle = value;\n        this.dirtyFont = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Text.prototype, \"fontWeight\", {\n    get: function get() {\n      return this._fontWeight;\n    },\n    set: function set(value) {\n      if (this._fontWeight !== value) {\n        this._fontWeight = value;\n        this.dirtyFont = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Text.prototype, \"fontSize\", {\n    get: function get() {\n      return this._fontSize;\n    },\n    set: function set(value) {\n      if (!isFinite(value)) {\n        value = 10;\n      }\n      if (this._fontSize !== value) {\n        this._fontSize = value;\n        this.dirtyFont = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Text.prototype, \"fontFamily\", {\n    get: function get() {\n      return this._fontFamily;\n    },\n    set: function set(value) {\n      if (this._fontFamily !== value) {\n        this._fontFamily = value;\n        this.dirtyFont = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Text.prototype, \"textAlign\", {\n    get: function get() {\n      return this._textAlign;\n    },\n    set: function set(value) {\n      if (this._textAlign !== value) {\n        this._textAlign = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Text.prototype, \"textBaseline\", {\n    get: function get() {\n      return this._textBaseline;\n    },\n    set: function set(value) {\n      if (this._textBaseline !== value) {\n        this._textBaseline = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Text.prototype, \"lineHeight\", {\n    get: function get() {\n      return this._lineHeight;\n    },\n    set: function set(value) {\n      // Multi-line text is complicated because:\n      // - Canvas does not support it natively, so we have to implement it manually\n      // - need to know the height of each line -> need to parse the font shorthand ->\n      //   generally impossible to do because font size may not be in pixels\n      // - so, need to measure the text instead, each line individually -> expensive\n      // - or make the user provide the line height manually for multi-line text\n      // - computeBBox should use the lineHeight for multi-line text but ignore it otherwise\n      // - textBaseline kind of loses its meaning for multi-line text\n      if (this._lineHeight !== value) {\n        this._lineHeight = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Text.prototype.computeBBox = function () {\n    return HdpiCanvas.has.textMetrics ? this.getPreciseBBox() : this.getApproximateBBox();\n  };\n  Text.prototype.getPreciseBBox = function () {\n    var metrics = HdpiCanvas.measureText(this.text, this.font, this.textBaseline, this.textAlign);\n    return new BBox(this.x - metrics.actualBoundingBoxLeft, this.y - metrics.actualBoundingBoxAscent, metrics.width, metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent);\n  };\n  Text.prototype.getApproximateBBox = function () {\n    var size = HdpiCanvas.getTextSize(this.text, this.font);\n    var _a = this,\n      x = _a.x,\n      y = _a.y;\n    switch (this.textAlign) {\n      case 'end':\n      case 'right':\n        x -= size.width;\n        break;\n      case 'center':\n        x -= size.width / 2;\n    }\n    switch (this.textBaseline) {\n      case 'alphabetic':\n        y -= size.height * 0.7;\n        break;\n      case 'middle':\n        y -= size.height * 0.45;\n        break;\n      case 'ideographic':\n        y -= size.height;\n        break;\n      case 'hanging':\n        y -= size.height * 0.2;\n        break;\n      case 'bottom':\n        y -= size.height;\n        break;\n    }\n    return new BBox(x, y, size.width, size.height);\n  };\n  Text.prototype.isPointInPath = function (x, y) {\n    var point = this.transformPoint(x, y);\n    var bbox = this.computeBBox();\n    return bbox ? bbox.containsPoint(point.x, point.y) : false;\n  };\n  Text.prototype.isPointInStroke = function (x, y) {\n    return false;\n  };\n  Text.prototype.render = function (ctx) {\n    if (!this.lines.length || !this.scene) {\n      return;\n    }\n    if (this.dirtyTransform) {\n      this.computeTransformMatrix();\n    }\n    // this.matrix.transformBBox(this.computeBBox!()).render(ctx); // debug\n    this.matrix.toContext(ctx);\n    var _a = this,\n      fill = _a.fill,\n      stroke = _a.stroke,\n      strokeWidth = _a.strokeWidth;\n    ctx.font = this.font;\n    ctx.textAlign = this.textAlign;\n    ctx.textBaseline = this.textBaseline;\n    var pixelRatio = this.scene.canvas.pixelRatio || 1;\n    if (fill) {\n      ctx.fillStyle = fill;\n      ctx.globalAlpha = this.opacity * this.fillOpacity;\n      var _b = this,\n        fillShadow = _b.fillShadow,\n        text = _b.text,\n        x = _b.x,\n        y = _b.y;\n      if (fillShadow && fillShadow.enabled) {\n        ctx.shadowColor = fillShadow.color;\n        ctx.shadowOffsetX = fillShadow.xOffset * pixelRatio;\n        ctx.shadowOffsetY = fillShadow.yOffset * pixelRatio;\n        ctx.shadowBlur = fillShadow.blur * pixelRatio;\n      }\n      ctx.fillText(text, x, y);\n    }\n    if (stroke && strokeWidth) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.globalAlpha = this.opacity * this.strokeOpacity;\n      var _c = this,\n        lineDash = _c.lineDash,\n        lineDashOffset = _c.lineDashOffset,\n        lineCap = _c.lineCap,\n        lineJoin = _c.lineJoin,\n        strokeShadow = _c.strokeShadow,\n        text = _c.text,\n        x = _c.x,\n        y = _c.y;\n      if (lineDash) {\n        ctx.setLineDash(lineDash);\n      }\n      if (lineDashOffset) {\n        ctx.lineDashOffset = lineDashOffset;\n      }\n      if (lineCap) {\n        ctx.lineCap = lineCap;\n      }\n      if (lineJoin) {\n        ctx.lineJoin = lineJoin;\n      }\n      if (strokeShadow && strokeShadow.enabled) {\n        ctx.shadowColor = strokeShadow.color;\n        ctx.shadowOffsetX = strokeShadow.xOffset * pixelRatio;\n        ctx.shadowOffsetY = strokeShadow.yOffset * pixelRatio;\n        ctx.shadowBlur = strokeShadow.blur * pixelRatio;\n      }\n      ctx.strokeText(text, x, y);\n    }\n    this.dirty = false;\n  };\n  Text.className = 'Text';\n  Text.defaultStyles = chainObjects(Shape.defaultStyles, {\n    textAlign: 'start',\n    fontStyle: undefined,\n    fontWeight: undefined,\n    fontSize: 10,\n    fontFamily: 'sans-serif',\n    textBaseline: 'alphabetic'\n  });\n  return Text;\n}(Shape);\nvar __assign$1 = undefined && undefined.__assign || function () {\n  __assign$1 = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$1.apply(this, arguments);\n};\nvar Observable = /** @class */function () {\n  function Observable() {\n    // Note that these maps can't be specified generically, so they are kept untyped.\n    // Some methods in this class only need generics in their signatures, the generics inside the methods\n    // are just for clarity. The generics in signatures allow for static type checking of user provided\n    // listeners and for type inference, so that the users wouldn't have to specify the type of parameters\n    // of their inline lambdas.\n    this.allPropertyListeners = new Map(); // property name => property change listener => scopes\n    this.allEventListeners = new Map(); // event type => event listener => scopes\n  }\n\n  Observable.prototype.addPropertyListener = function (name, listener, scope) {\n    if (scope === void 0) {\n      scope = this;\n    }\n    var allPropertyListeners = this.allPropertyListeners;\n    var propertyListeners = allPropertyListeners.get(name);\n    if (!propertyListeners) {\n      propertyListeners = new Map();\n      allPropertyListeners.set(name, propertyListeners);\n    }\n    if (!propertyListeners.has(listener)) {\n      var scopes_1 = new Set();\n      propertyListeners.set(listener, scopes_1);\n    }\n    var scopes = propertyListeners.get(listener);\n    if (scopes) {\n      scopes.add(scope);\n    }\n  };\n  Observable.prototype.removePropertyListener = function (name, listener, scope) {\n    if (scope === void 0) {\n      scope = this;\n    }\n    var allPropertyListeners = this.allPropertyListeners;\n    var propertyListeners = allPropertyListeners.get(name);\n    if (propertyListeners) {\n      if (listener) {\n        var scopes = propertyListeners.get(listener);\n        if (scopes) {\n          scopes.delete(scope);\n          if (!scopes.size) {\n            propertyListeners.delete(listener);\n          }\n        }\n      } else {\n        propertyListeners.clear();\n      }\n    }\n  };\n  Observable.prototype.notifyPropertyListeners = function (name, oldValue, value) {\n    var _this = this;\n    var allPropertyListeners = this.allPropertyListeners;\n    var propertyListeners = allPropertyListeners.get(name);\n    if (propertyListeners) {\n      propertyListeners.forEach(function (scopes, listener) {\n        scopes.forEach(function (scope) {\n          return listener.call(scope, {\n            type: name,\n            source: _this,\n            value: value,\n            oldValue: oldValue\n          });\n        });\n      });\n    }\n  };\n  Observable.prototype.addEventListener = function (type, listener, scope) {\n    if (scope === void 0) {\n      scope = this;\n    }\n    var allEventListeners = this.allEventListeners;\n    var eventListeners = allEventListeners.get(type);\n    if (!eventListeners) {\n      eventListeners = new Map();\n      allEventListeners.set(type, eventListeners);\n    }\n    if (!eventListeners.has(listener)) {\n      var scopes_2 = new Set();\n      eventListeners.set(listener, scopes_2);\n    }\n    var scopes = eventListeners.get(listener);\n    if (scopes) {\n      scopes.add(scope);\n    }\n  };\n  Observable.prototype.removeEventListener = function (type, listener, scope) {\n    if (scope === void 0) {\n      scope = this;\n    }\n    var allEventListeners = this.allEventListeners;\n    var eventListeners = allEventListeners.get(type);\n    if (eventListeners) {\n      if (listener) {\n        var scopes = eventListeners.get(listener);\n        if (scopes) {\n          scopes.delete(scope);\n          if (!scopes.size) {\n            eventListeners.delete(listener);\n          }\n        }\n      } else {\n        eventListeners.clear();\n      }\n    }\n  };\n  Observable.prototype.notifyEventListeners = function (types) {\n    var _this = this;\n    var allEventListeners = this.allEventListeners;\n    types.forEach(function (type) {\n      var listeners = allEventListeners.get(type);\n      if (listeners) {\n        listeners.forEach(function (scopes, listener) {\n          scopes.forEach(function (scope) {\n            return listener.call(scope, {\n              type: type,\n              source: _this\n            });\n          });\n        });\n      }\n    });\n  };\n  Observable.prototype.fireEvent = function (event) {\n    var _this = this;\n    var listeners = this.allEventListeners.get(event.type);\n    if (listeners) {\n      listeners.forEach(function (scopes, listener) {\n        scopes.forEach(function (scope) {\n          return listener.call(scope, __assign$1(__assign$1({}, event), {\n            source: _this\n          }));\n        });\n      });\n    }\n  };\n  Observable.privateKeyPrefix = '_';\n  return Observable;\n}();\nfunction reactive() {\n  var events = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    events[_i] = arguments[_i];\n  }\n  // let debug = events.indexOf('debugger') >= 0;\n  return function (target, key) {\n    // `target` is either a constructor (static member) or prototype (instance member)\n    var privateKey = Observable.privateKeyPrefix + key;\n    var privateKeyEvents = privateKey + 'Events';\n    if (!target[key]) {\n      if (events) {\n        target[privateKeyEvents] = events;\n      }\n      Object.defineProperty(target, key, {\n        set: function set(value) {\n          var oldValue = this[privateKey];\n          // This is a way to stop inside the setter by adding the special\n          // 'debugger' event to a reactive property, for example:\n          //  @reactive('layoutChange', 'debugger') title?: Caption;\n          // if (debug) { // DO NOT REMOVE\n          //     debugger;\n          // }\n          if (value !== oldValue || typeof value === 'object' && value !== null) {\n            this[privateKey] = value;\n            this.notifyPropertyListeners(key, oldValue, value);\n            var events_1 = this[privateKeyEvents];\n            if (events_1) {\n              this.notifyEventListeners(events_1);\n            }\n          }\n        },\n        get: function get() {\n          return this[privateKey];\n        },\n        enumerable: true,\n        configurable: true\n      });\n    }\n  };\n}\nvar __extends$I = undefined && undefined.__extends || function () {\n  var _extendStatics45 = function extendStatics(d, b) {\n    _extendStatics45 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics45(d, b);\n  };\n  return function (d, b) {\n    _extendStatics45(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$F = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar Caption = /** @class */function (_super) {\n  __extends$I(Caption, _super);\n  function Caption() {\n    var _this = _super.call(this) || this;\n    _this.node = new Text();\n    _this.enabled = true;\n    _this.padding = new Padding(10);\n    var node = _this.node;\n    node.textAlign = 'center';\n    node.textBaseline = 'top';\n    node.pointerEvents = PointerEvents.None;\n    return _this;\n  }\n  Object.defineProperty(Caption.prototype, \"text\", {\n    get: function get() {\n      return this.node.text;\n    },\n    set: function set(value) {\n      if (this.node.text !== value) {\n        this.node.text = value;\n        this.fireEvent({\n          type: 'change'\n        });\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Caption.prototype, \"fontStyle\", {\n    get: function get() {\n      return this.node.fontStyle;\n    },\n    set: function set(value) {\n      if (this.node.fontStyle !== value) {\n        this.node.fontStyle = value;\n        this.fireEvent({\n          type: 'change'\n        });\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Caption.prototype, \"fontWeight\", {\n    get: function get() {\n      return this.node.fontWeight;\n    },\n    set: function set(value) {\n      if (this.node.fontWeight !== value) {\n        this.node.fontWeight = value;\n        this.fireEvent({\n          type: 'change'\n        });\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Caption.prototype, \"fontSize\", {\n    get: function get() {\n      return this.node.fontSize;\n    },\n    set: function set(value) {\n      if (this.node.fontSize !== value) {\n        this.node.fontSize = value;\n        this.fireEvent({\n          type: 'change'\n        });\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Caption.prototype, \"fontFamily\", {\n    get: function get() {\n      return this.node.fontFamily;\n    },\n    set: function set(value) {\n      if (this.node.fontFamily !== value) {\n        this.node.fontFamily = value;\n        this.fireEvent({\n          type: 'change'\n        });\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Caption.prototype, \"color\", {\n    get: function get() {\n      return this.node.fill;\n    },\n    set: function set(value) {\n      if (this.node.fill !== value) {\n        this.node.fill = value;\n        this.fireEvent({\n          type: 'change'\n        });\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  __decorate$F([reactive('change')], Caption.prototype, \"enabled\", void 0);\n  __decorate$F([reactive('change')], Caption.prototype, \"padding\", void 0);\n  return Caption;\n}(Observable);\nvar constant = function constant(x) {\n  return function () {\n    return x;\n  };\n};\nfunction interpolateNumber(a, b) {\n  a = +a;\n  b -= a;\n  return function (t) {\n    return a + b * t;\n  };\n}\nfunction date(a, b) {\n  var date = new Date();\n  var msA = +a;\n  var msB = +b - msA;\n  return function (t) {\n    date.setTime(msA + msB * t);\n    return date;\n  };\n}\nfunction array(a, b) {\n  var nb = b ? b.length : 0;\n  var na = a ? Math.min(nb, a.length) : 0;\n  var x = new Array(na);\n  var c = new Array(nb);\n  var i;\n  for (i = 0; i < na; ++i) {\n    x[i] = interpolateValue(a[i], b[i]);\n  }\n  for (; i < nb; ++i) {\n    c[i] = b[i];\n  }\n  return function (t) {\n    for (i = 0; i < na; ++i) {\n      c[i] = x[i](t);\n    }\n    return c;\n  };\n}\nfunction object(a, b) {\n  var i = {};\n  var c = {};\n  var k;\n  if (a === null || typeof a !== 'object') {\n    a = {};\n  }\n  if (b === null || typeof b !== 'object') {\n    b = {};\n  }\n  for (k in b) {\n    if (k in a) {\n      i[k] = interpolateValue(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n  return function (t) {\n    for (k in i) {\n      c[k] = i[k](t);\n    }\n    return c;\n  };\n}\nfunction interpolateValue(a, b) {\n  var t = typeof b;\n  // let c;\n  return b == null || t === 'boolean' ? constant(b) : (t === 'number' ? interpolateNumber\n  // : t === 'string' ? ((c = color(b)) ? (b = c, rgb) : string)\n  //     : b instanceof color ? rgb\n  : b instanceof Date ? date : Array.isArray(b) ? array : typeof b.valueOf !== 'function' && typeof b.toString !== 'function' || isNaN(b) ? object : interpolateNumber)(a, b);\n}\nvar constant$1 = function constant$1(x) {\n  return function () {\n    return x;\n  };\n};\nvar identity = function identity(x) {\n  return x;\n};\nfunction clamper(domain) {\n  var _a;\n  var a = domain[0];\n  var b = domain[domain.length - 1];\n  if (a > b) {\n    _a = [b, a], a = _a[0], b = _a[1];\n  }\n  return function (x) {\n    return Math.max(a, Math.min(b, x));\n  };\n}\nvar ContinuousScale = /** @class */function () {\n  function ContinuousScale() {\n    /**\n     * The output value of the scale for `undefined` or `NaN` input values.\n     */\n    this.unknown = undefined;\n    this._clamp = identity;\n    this._domain = [0, 1];\n    this._range = [0, 1];\n    this.transform = identity; // transforms domain value\n    this.untransform = identity; // untransforms domain value\n    this._interpolate = interpolateValue;\n    this.rescale();\n  }\n  Object.defineProperty(ContinuousScale.prototype, \"clamp\", {\n    get: function get() {\n      return this._clamp !== identity;\n    },\n    set: function set(value) {\n      this._clamp = value ? clamper(this.domain) : identity;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ContinuousScale.prototype.setDomain = function (values) {\n    this._domain = Array.prototype.map.call(values, function (v) {\n      return +v;\n    });\n    if (this._clamp !== identity) {\n      this._clamp = clamper(this.domain);\n    }\n    this.rescale();\n  };\n  ContinuousScale.prototype.getDomain = function () {\n    return this._domain.slice();\n  };\n  Object.defineProperty(ContinuousScale.prototype, \"domain\", {\n    get: function get() {\n      return this.getDomain();\n    },\n    set: function set(values) {\n      this.setDomain(values);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ContinuousScale.prototype, \"range\", {\n    get: function get() {\n      return this._range.slice();\n    },\n    set: function set(values) {\n      this._range = Array.prototype.slice.call(values);\n      this.rescale();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ContinuousScale.prototype, \"interpolate\", {\n    get: function get() {\n      return this._interpolate;\n    },\n    set: function set(value) {\n      this._interpolate = value;\n      this.rescale();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ContinuousScale.prototype.rescale = function () {\n    if (Math.min(this.domain.length, this.range.length) > 2) ;else {\n      this.piecewise = this.bimap;\n    }\n    this.output = undefined;\n    this.input = undefined;\n  };\n  /**\n   * Returns a function that converts `x` in `[a, b]` to `t` in `[0, 1]`. Non-clamping.\n   * @param a\n   * @param b\n   */\n  ContinuousScale.prototype.normalize = function (a, b) {\n    return (b -= a = +a) ? function (x) {\n      return (x - a) / b;\n    } : constant$1(isNaN(b) ? NaN : 0.5);\n  };\n  ContinuousScale.prototype.bimap = function (domain, range, interpolate) {\n    var x0 = domain[0];\n    var x1 = domain[1];\n    var y0 = range[0];\n    var y1 = range[1];\n    var xt;\n    var ty;\n    if (x1 < x0) {\n      xt = this.normalize(x1, x0);\n      ty = interpolate(y1, y0);\n    } else {\n      xt = this.normalize(x0, x1);\n      ty = interpolate(y0, y1);\n    }\n    return function (x) {\n      return ty(xt(x));\n    }; // domain value x --> t in [0, 1] --> range value y\n  };\n  // private polymap(domain: any[], range: any[], interpolate: (a: any, b: any) => (t: number) => any): Reinterpolator<any> {\n  //     // number of segments in the polylinear scale\n  //     const n = Math.min(domain.length, range.length) - 1;\n  //     if (domain[n] < domain[0]) {\n  //         domain = domain.slice().reverse();\n  //         range = range.slice().reverse();\n  //     }\n  //     // deinterpolators from domain segment value to t\n  //     const dt = Array.from( {length: n}, (_, i) => this.normalize(domain[i], domain[i+1]) );\n  //     // reinterpolators from t to range segment value\n  //     const tr = Array.from( {length: n}, (_, i) => interpolate(range[i], range[i+1]) );\n  //     return (x) => {\n  //         const i = bisectRight(domain, x, ascending, 1, n) - 1; // Find the domain segment that `x` belongs to.\n  //         // This also tells us which deinterpolator/reinterpolator pair to use.\n  //         return tr[i](dt[i](x));\n  //     };\n  // }\n  ContinuousScale.prototype.convert = function (x) {\n    x = +x;\n    if (isNaN(x)) {\n      return this.unknown;\n    } else {\n      if (!this.output) {\n        this.output = this.piecewise(this.domain.map(this.transform), this.range, this.interpolate);\n      }\n      return this.output(this.transform(this._clamp(x)));\n    }\n  };\n  ContinuousScale.prototype.invert = function (y) {\n    if (!this.input) {\n      this.input = this.piecewise(this.range, this.domain.map(this.transform), interpolateNumber);\n    }\n    return this._clamp(this.untransform(this.input(y)));\n  };\n  return ContinuousScale;\n}();\nvar __extends$J = undefined && undefined.__extends || function () {\n  var _extendStatics46 = function extendStatics(d, b) {\n    _extendStatics46 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics46(d, b);\n  };\n  return function (d, b) {\n    _extendStatics46(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nfunction ticks(a, b, count) {\n  var step = tickStep(a, b, count);\n  a = Math.ceil(a / step) * step;\n  b = Math.floor(b / step) * step + step / 2;\n  // Add half a step here so that the array returned by `range` includes the last tick.\n  return range(a, b, step);\n}\nvar e10 = Math.sqrt(50);\nvar e5 = Math.sqrt(10);\nvar e2 = Math.sqrt(2);\nfunction tickStep(a, b, count) {\n  var rawStep = Math.abs(b - a) / Math.max(0, count);\n  var step = Math.pow(10, Math.floor(Math.log(rawStep) / Math.LN10)); // = Math.log10(rawStep)\n  var error = rawStep / step;\n  if (error >= e10) {\n    step *= 10;\n  } else if (error >= e5) {\n    step *= 5;\n  } else if (error >= e2) {\n    step *= 2;\n  }\n  return b < a ? -step : step;\n}\nfunction tickIncrement(a, b, count) {\n  var rawStep = (b - a) / Math.max(0, count);\n  var power = Math.floor(Math.log(rawStep) / Math.LN10);\n  var error = rawStep / Math.pow(10, power);\n  return power >= 0 ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power) : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\nvar NumericTicks = /** @class */function (_super) {\n  __extends$J(NumericTicks, _super);\n  function NumericTicks(fractionDigits, size) {\n    if (size === void 0) {\n      size = 0;\n    }\n    var _this = _super.call(this, size) || this;\n    _this.fractionDigits = fractionDigits;\n    return _this;\n  }\n  return NumericTicks;\n}(Array);\nfunction range(a, b, step) {\n  if (step === void 0) {\n    step = 1;\n  }\n  var absStep = Math.abs(step);\n  var fractionDigits = absStep > 0 && absStep < 1 ? Math.abs(Math.floor(Math.log(absStep) / Math.LN10)) : 0;\n  var f = Math.pow(10, fractionDigits);\n  var n = Math.max(0, Math.ceil((b - a) / step)) || 0;\n  var values = new NumericTicks(fractionDigits, n);\n  for (var i = 0; i < n; i++) {\n    var value = a + step * i;\n    values[i] = Math.round(value * f) / f;\n  }\n  return values;\n}\nvar __extends$K = undefined && undefined.__extends || function () {\n  var _extendStatics47 = function extendStatics(d, b) {\n    _extendStatics47 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics47(d, b);\n  };\n  return function (d, b) {\n    _extendStatics47(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * Maps continuous domain to a continuous range.\n */\nvar LinearScale = /** @class */function (_super) {\n  __extends$K(LinearScale, _super);\n  function LinearScale() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  LinearScale.prototype.ticks = function (count) {\n    if (count === void 0) {\n      count = 10;\n    }\n    var d = this._domain;\n    return ticks(d[0], d[d.length - 1], count);\n  };\n  /**\n   * Extends the domain so that it starts and ends on nice round values.\n   * @param count Tick count.\n   */\n  LinearScale.prototype.nice = function (count) {\n    if (count === void 0) {\n      count = 10;\n    }\n    var d = this.domain;\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var step;\n    if (stop < start) {\n      step = start;\n      start = stop;\n      stop = step;\n      step = i0;\n      i0 = i1;\n      i1 = step;\n    }\n    step = tickIncrement(start, stop, count);\n    if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n      step = tickIncrement(start, stop, count);\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n      step = tickIncrement(start, stop, count);\n    }\n    if (step > 0) {\n      d[i0] = Math.floor(start / step) * step;\n      d[i1] = Math.ceil(stop / step) * step;\n      this.domain = d;\n    } else if (step < 0) {\n      d[i0] = Math.ceil(start * step) / step;\n      d[i1] = Math.floor(stop * step) / step;\n      this.domain = d;\n    }\n  };\n  return LinearScale;\n}(ContinuousScale);\nvar __extends$L = undefined && undefined.__extends || function () {\n  var _extendStatics48 = function extendStatics(d, b) {\n    _extendStatics48 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics48(d, b);\n  };\n  return function (d, b) {\n    _extendStatics48(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar Group = /** @class */function (_super) {\n  __extends$L(Group, _super);\n  function Group() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.isContainerNode = true;\n    return _this;\n  }\n  // We consider a group to be boundless, thus any point belongs to it.\n  Group.prototype.containsPoint = function (x, y) {\n    return true;\n  };\n  Group.prototype.computeBBox = function () {\n    var left = Infinity;\n    var right = -Infinity;\n    var top = Infinity;\n    var bottom = -Infinity;\n    if (this.dirtyTransform) {\n      this.computeTransformMatrix();\n    }\n    this.children.forEach(function (child) {\n      if (!child.visible) {\n        return;\n      }\n      var bbox = child.computeBBox();\n      if (!bbox) {\n        return;\n      }\n      if (!(child instanceof Group)) {\n        if (child.dirtyTransform) {\n          child.computeTransformMatrix();\n        }\n        var matrix = Matrix.flyweight(child.matrix);\n        var parent_1 = child.parent;\n        while (parent_1) {\n          matrix.preMultiplySelf(parent_1.matrix);\n          parent_1 = parent_1.parent;\n        }\n        matrix.transformBBox(bbox, 0, bbox);\n      }\n      var x = bbox.x;\n      var y = bbox.y;\n      if (x < left) {\n        left = x;\n      }\n      if (y < top) {\n        top = y;\n      }\n      if (x + bbox.width > right) {\n        right = x + bbox.width;\n      }\n      if (y + bbox.height > bottom) {\n        bottom = y + bbox.height;\n      }\n    });\n    return new BBox(left, top, right - left, bottom - top);\n  };\n  Group.prototype.render = function (ctx) {\n    // A group can have `scaling`, `rotation`, `translation` properties\n    // that are applied to the canvas context before children are rendered,\n    // so all children can be transformed at once.\n    if (this.dirtyTransform) {\n      this.computeTransformMatrix();\n    }\n    this.matrix.toContext(ctx);\n    var children = this.children;\n    var n = children.length;\n    for (var i = 0; i < n; i++) {\n      ctx.save();\n      var child = children[i];\n      if (child.visible) {\n        child.render(ctx);\n      }\n      ctx.restore();\n    }\n    // debug\n    // this.computeBBox().render(ctx, {\n    //     label: this.id,\n    //     resetTransform: true,\n    //     fillStyle: 'rgba(0, 0, 0, 0.5)'\n    // });\n  };\n\n  Group.className = 'Group';\n  return Group;\n}(Node);\nvar EnterNode = /** @class */function () {\n  function EnterNode(parent, datum) {\n    this.next = null;\n    this.scene = parent.scene;\n    this.parent = parent;\n    this.datum = datum;\n  }\n  EnterNode.prototype.appendChild = function (node) {\n    // This doesn't work without the `strict: true` in the `tsconfig.json`,\n    // so we must have two `if` checks below, instead of this single one.\n    // if (this.next && !Node.isNode(this.next)) {\n    //     throw new Error(`${this.next} is not a Node.`);\n    // }\n    if (this.next === null) {\n      return this.parent.insertBefore(node, null);\n    }\n    if (!Node.isNode(this.next)) {\n      throw new Error(this.next + \" is not a Node.\");\n    }\n    return this.parent.insertBefore(node, this.next);\n  };\n  EnterNode.prototype.insertBefore = function (node, nextNode) {\n    return this.parent.insertBefore(node, nextNode);\n  };\n  return EnterNode;\n}();\n/**\n * G - type of the selected node(s).\n * GDatum - type of the datum of the selected node(s).\n * P - type of the parent node(s).\n * PDatum - type of the datum of the parent node(s).\n */\nvar Selection = /** @class */function () {\n  function Selection(groups, parents) {\n    this.groups = groups;\n    this.parents = parents;\n  }\n  Selection.select = function (node) {\n    return new Selection([[typeof node === 'function' ? node() : node]], [undefined]);\n  };\n  Selection.selectAll = function (nodes) {\n    return new Selection([nodes == null ? [] : nodes], [undefined]);\n  };\n  /**\n   * Creates new nodes, appends them to the nodes of this selection and returns them\n   * as a new selection. The created nodes inherit the datums and the parents of the nodes\n   * they replace.\n   * @param Class The constructor function to use to create the new nodes.\n   */\n  Selection.prototype.append = function (Class) {\n    return this.select(function (node) {\n      return node.appendChild(new Class());\n    });\n  };\n  /**\n   * Same as the {@link append}, but accepts a custom creator function with the\n   * {@link NodeSelector} signature rather than a constructor function.\n   * @param creator\n   */\n  Selection.prototype.appendFn = function (creator) {\n    return this.select(function (node, data, index, group) {\n      return node.appendChild(creator(node, data, index, group));\n    });\n  };\n  /**\n   * Runs the given selector that returns a single node for every node in each group.\n   * The original nodes are then replaced by the nodes returned by the selector\n   * and returned as a new selection.\n   * The selected nodes inherit the datums and the parents of the original nodes.\n   */\n  Selection.prototype.select = function (selector) {\n    var groups = this.groups;\n    var numGroups = groups.length;\n    var subgroups = [];\n    for (var j = 0; j < numGroups; j++) {\n      var group = groups[j];\n      var groupSize = group.length;\n      var subgroup = subgroups[j] = new Array(groupSize);\n      for (var i = 0; i < groupSize; i++) {\n        var node = group[i];\n        if (node) {\n          var subnode = selector(node, node.datum, i, group);\n          if (subnode) {\n            subnode.datum = node.datum;\n          }\n          subgroup[i] = subnode;\n        }\n        // else this can be a group of the `enter` selection,\n        // for example, with no nodes at the i-th position,\n        // only nodes at the end of the group\n      }\n    }\n\n    return new Selection(subgroups, this.parents);\n  };\n  /**\n   * Same as {@link select}, but uses the given {@param Class} (constructor) as a selector.\n   * @param Class The constructor function to use to find matching nodes.\n   */\n  Selection.prototype.selectByClass = function (Class) {\n    return this.select(function (node) {\n      if (Node.isNode(node)) {\n        var children = node.children;\n        var n = children.length;\n        for (var i = 0; i < n; i++) {\n          var child = children[i];\n          if (child instanceof Class) {\n            return child;\n          }\n        }\n      }\n    });\n  };\n  Selection.prototype.selectByTag = function (tag) {\n    return this.select(function (node) {\n      if (Node.isNode(node)) {\n        var children = node.children;\n        var n = children.length;\n        for (var i = 0; i < n; i++) {\n          var child = children[i];\n          if (child.tag === tag) {\n            return child;\n          }\n        }\n      }\n    });\n  };\n  Selection.prototype.selectAllByClass = function (Class) {\n    return this.selectAll(function (node) {\n      var nodes = [];\n      if (Node.isNode(node)) {\n        var children = node.children;\n        var n = children.length;\n        for (var i = 0; i < n; i++) {\n          var child = children[i];\n          if (child instanceof Class) {\n            nodes.push(child);\n          }\n        }\n      }\n      return nodes;\n    });\n  };\n  Selection.prototype.selectAllByTag = function (tag) {\n    return this.selectAll(function (node) {\n      var nodes = [];\n      if (Node.isNode(node)) {\n        var children = node.children;\n        var n = children.length;\n        for (var i = 0; i < n; i++) {\n          var child = children[i];\n          if (child.tag === tag) {\n            nodes.push(child);\n          }\n        }\n      }\n      return nodes;\n    });\n  };\n  Selection.prototype.selectNone = function () {\n    return [];\n  };\n  /**\n   * Runs the given selector that returns a group of nodes for every node in each group.\n   * The original nodes are then replaced by the groups of nodes returned by the selector\n   * and returned as a new selection. The original nodes become the parent nodes for each\n   * group in the new selection. The selected nodes do not inherit the datums of the original nodes.\n   * If called without any parameters, creates a new selection with an empty group for each\n   * node in this selection.\n   */\n  Selection.prototype.selectAll = function (selectorAll) {\n    if (!selectorAll) {\n      selectorAll = this.selectNone;\n    }\n    // Each subgroup is populated with the selector (run on each group node) results.\n    var subgroups = [];\n    // In the new selection that we return, subgroups become groups,\n    // and group nodes become parents.\n    var parents = [];\n    var groups = this.groups;\n    var groupCount = groups.length;\n    for (var j = 0; j < groupCount; j++) {\n      var group = groups[j];\n      var groupLength = group.length;\n      for (var i = 0; i < groupLength; i++) {\n        var node = group[i];\n        if (node) {\n          subgroups.push(selectorAll(node, node.datum, i, group));\n          parents.push(node);\n        }\n      }\n    }\n    return new Selection(subgroups, parents);\n  };\n  /**\n   * Runs the given callback for every node in this selection and returns this selection.\n   * @param cb\n   */\n  Selection.prototype.each = function (cb) {\n    var groups = this.groups;\n    var numGroups = groups.length;\n    for (var j = 0; j < numGroups; j++) {\n      var group = groups[j];\n      var groupSize = group.length;\n      for (var i = 0; i < groupSize; i++) {\n        var node = group[i];\n        if (node) {\n          cb(node, node.datum, i, group);\n        }\n      }\n    }\n    return this;\n  };\n  Selection.prototype.remove = function () {\n    return this.each(function (node) {\n      if (Node.isNode(node)) {\n        var parent_1 = node.parent;\n        if (parent_1) {\n          parent_1.removeChild(node);\n        }\n      }\n    });\n  };\n  Selection.prototype.merge = function (other) {\n    var groups0 = this.groups;\n    var groups1 = other.groups;\n    var m0 = groups0.length;\n    var m1 = groups1.length;\n    var m = Math.min(m0, m1);\n    var merges = new Array(m0);\n    var j = 0;\n    for (; j < m; j++) {\n      var group0 = groups0[j];\n      var group1 = groups1[j];\n      var n = group0.length;\n      var merge = merges[j] = new Array(n);\n      for (var i = 0; i < n; i++) {\n        var node = group0[i] || group1[i];\n        merge[i] = node || undefined;\n      }\n    }\n    for (; j < m0; j++) {\n      merges[j] = groups0[j];\n    }\n    return new Selection(merges, this.parents);\n  };\n  /**\n   * Return the first non-null element in this selection.\n   * If the selection is empty, returns null.\n   */\n  Selection.prototype.node = function () {\n    var groups = this.groups;\n    var numGroups = groups.length;\n    for (var j = 0; j < numGroups; j++) {\n      var group = groups[j];\n      var groupSize = group.length;\n      for (var i = 0; i < groupSize; i++) {\n        var node = group[i];\n        if (node) {\n          return node;\n        }\n      }\n    }\n    return null;\n  };\n  Selection.prototype.attr = function (name, value) {\n    this.each(function (node) {\n      node[name] = value;\n    });\n    return this;\n  };\n  Selection.prototype.attrFn = function (name, value) {\n    this.each(function (node, datum, index, group) {\n      node[name] = value(node, datum, index, group);\n    });\n    return this;\n  };\n  /**\n   * Invokes the given function once, passing in this selection.\n   * Returns this selection. Facilitates method chaining.\n   * @param cb\n   */\n  Selection.prototype.call = function (cb) {\n    cb(this);\n    return this;\n  };\n  Object.defineProperty(Selection.prototype, \"size\", {\n    /**\n     * Returns the total number of nodes in this selection.\n     */\n    get: function get() {\n      var size = 0;\n      this.each(function () {\n        return size++;\n      });\n      return size;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Selection.prototype, \"data\", {\n    /**\n     * Returns the array of data for the selected elements.\n     */\n    get: function get() {\n      var data = [];\n      this.each(function (_, datum) {\n        return data.push(datum);\n      });\n      return data;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Selection.prototype, \"enter\", {\n    get: function get() {\n      return new Selection(this.enterGroups ? this.enterGroups : [[]], this.parents);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Selection.prototype, \"exit\", {\n    get: function get() {\n      return new Selection(this.exitGroups ? this.exitGroups : [[]], this.parents);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * Binds the given value to each selected node and returns this selection\n   * with its {@link GDatum} type changed to the type of the given value.\n   * This method doesn't compute a join and doesn't affect indexes or the enter and exit selections.\n   * This method can also be used to clear bound data.\n   * @param value\n   */\n  Selection.prototype.setDatum = function (value) {\n    return this.each(function (node) {\n      node.datum = value;\n    });\n  };\n  Object.defineProperty(Selection.prototype, \"datum\", {\n    /**\n     * Returns the bound datum for the first non-null element in the selection.\n     * This is generally useful only if you know the selection contains exactly one element.\n     */\n    get: function get() {\n      var node = this.node();\n      return node ? node.datum : null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * Binds the specified array of values with the selected nodes, returning a new selection\n   * that represents the _update_ selection: the nodes successfully bound to the values.\n   * Also defines the {@link enter} and {@link exit} selections on the returned selection,\n   * which can be used to add or remove the nodes to correspond to the new data.\n   * The `values` is an array of values of a particular type, or a function that returns\n   * an array of values for each group.\n   * When values are assigned to the nodes, they are stored in the {@link Node.datum} property.\n   * @param values\n   * @param key\n   */\n  Selection.prototype.setData = function (values, key) {\n    if (typeof values !== 'function') {\n      var data_1 = values;\n      values = function values() {\n        return data_1;\n      };\n    }\n    var groups = this.groups;\n    var parents = this.parents;\n    var numGroups = groups.length;\n    var updateGroups = new Array(numGroups);\n    var enterGroups = new Array(numGroups);\n    var exitGroups = new Array(numGroups);\n    for (var j = 0; j < numGroups; j++) {\n      var group = groups[j];\n      var parent_2 = parents[j];\n      if (!parent_2) {\n        throw new Error(\"Group #\" + j + \" has no parent: \" + group);\n      }\n      var groupSize = group.length;\n      var data = values(parent_2, parent_2.datum, j, parents);\n      var dataSize = data.length;\n      var enterGroup = enterGroups[j] = new Array(dataSize);\n      var updateGroup = updateGroups[j] = new Array(dataSize);\n      var exitGroup = exitGroups[j] = new Array(groupSize);\n      if (key) {\n        this.bindKey(parent_2, group, enterGroup, updateGroup, exitGroup, data, key);\n      } else {\n        this.bindIndex(parent_2, group, enterGroup, updateGroup, exitGroup, data);\n      }\n      // Now connect the enter nodes to their following update node, such that\n      // appendChild can insert the materialized enter node before this node,\n      // rather than at the end of the parent node.\n      for (var i0 = 0, i1 = 0; i0 < dataSize; i0++) {\n        var previous = enterGroup[i0];\n        if (previous) {\n          if (i0 >= i1) {\n            i1 = i0 + 1;\n          }\n          var next = void 0;\n          while (!(next = updateGroup[i1]) && i1 < dataSize) {\n            i1++;\n          }\n          previous.next = next || null;\n        }\n      }\n    }\n    var result = new Selection(updateGroups, parents);\n    result.enterGroups = enterGroups;\n    result.exitGroups = exitGroups;\n    return result;\n  };\n  Selection.prototype.bindIndex = function (parent, group, enter, update, exit, data) {\n    var groupSize = group.length;\n    var dataSize = data.length;\n    var i = 0;\n    for (; i < dataSize; i++) {\n      var node = group[i];\n      if (node) {\n        node.datum = data[i];\n        update[i] = node;\n      } else {\n        // more datums than group nodes\n        enter[i] = new EnterNode(parent, data[i]);\n      }\n    }\n    // more group nodes than datums\n    for (; i < groupSize; i++) {\n      var node = group[i];\n      if (node) {\n        exit[i] = node;\n      }\n    }\n  };\n  Selection.prototype.bindKey = function (parent, group, enter, update, exit, data, key) {\n    var groupSize = group.length;\n    var dataSize = data.length;\n    var keyValues = new Array(groupSize);\n    var nodeByKeyValue = {};\n    // Compute the key for each node.\n    // If multiple nodes have the same key, the duplicates are added to exit.\n    for (var i = 0; i < groupSize; i++) {\n      var node = group[i];\n      if (node) {\n        var keyValue = keyValues[i] = Selection.keyPrefix + key(node, node.datum, i, group);\n        if (keyValue in nodeByKeyValue) {\n          exit[i] = node;\n        } else {\n          nodeByKeyValue[keyValue] = node;\n        }\n      }\n    }\n    // Compute the key for each datum.\n    // If there is a node associated with this key, join and add it to update.\n    // If there is not (or the key is a duplicate), add it to enter.\n    for (var i = 0; i < dataSize; i++) {\n      var keyValue = Selection.keyPrefix + key(parent, data[i], i, data);\n      var node = nodeByKeyValue[keyValue];\n      if (node) {\n        update[i] = node;\n        node.datum = data[i];\n        nodeByKeyValue[keyValue] = undefined;\n      } else {\n        enter[i] = new EnterNode(parent, data[i]);\n      }\n    }\n    // Add any remaining nodes that were not bound to data to exit.\n    for (var i = 0; i < groupSize; i++) {\n      var node = group[i];\n      if (node && nodeByKeyValue[keyValues[i]] === node) {\n        exit[i] = node;\n      }\n    }\n  };\n  Selection.keyPrefix = '$'; // Protect against keys like '__proto__'.\n  return Selection;\n}();\nvar __extends$M = undefined && undefined.__extends || function () {\n  var _extendStatics49 = function extendStatics(d, b) {\n    _extendStatics49 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics49(d, b);\n  };\n  return function (d, b) {\n    _extendStatics49(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar Line = /** @class */function (_super) {\n  __extends$M(Line, _super);\n  function Line() {\n    var _this = _super.call(this) || this;\n    _this._x1 = 0;\n    _this._y1 = 0;\n    _this._x2 = 0;\n    _this._y2 = 0;\n    _this.restoreOwnStyles();\n    return _this;\n  }\n  Object.defineProperty(Line.prototype, \"x1\", {\n    get: function get() {\n      // TODO: Investigate getter performance further in the context\n      //       of the scene graph.\n      //       In isolated benchmarks using a getter has the same\n      //       performance as a direct property access in Firefox 64.\n      //       But in Chrome 71 the getter is 60% slower than direct access.\n      //       Direct read is 4.5+ times slower in Chrome than it is in Firefox.\n      //       Property access and direct read have the same performance\n      //       in Safari 12, which is 2+ times faster than Firefox at this.\n      // https://jsperf.com/es5-getters-setters-versus-getter-setter-methods/18\n      // This is a know Chrome issue. They say it's not a regression, since\n      // the behavior is observed since M60, but jsperf.com history shows the\n      // 10x slowdown happened between Chrome 48 and Chrome 57.\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=908743\n      return this._x1;\n    },\n    set: function set(value) {\n      if (this._x1 !== value) {\n        this._x1 = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Line.prototype, \"y1\", {\n    get: function get() {\n      return this._y1;\n    },\n    set: function set(value) {\n      if (this._y1 !== value) {\n        this._y1 = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Line.prototype, \"x2\", {\n    get: function get() {\n      return this._x2;\n    },\n    set: function set(value) {\n      if (this._x2 !== value) {\n        this._x2 = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Line.prototype, \"y2\", {\n    get: function get() {\n      return this._y2;\n    },\n    set: function set(value) {\n      if (this._y2 !== value) {\n        this._y2 = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Line.prototype.computeBBox = function () {\n    return new BBox(this.x1, this.y1, this.x2 - this.x1, this.y2 - this.y1);\n  };\n  Line.prototype.isPointInPath = function (x, y) {\n    return false;\n  };\n  Line.prototype.isPointInStroke = function (x, y) {\n    return false;\n  };\n  Line.prototype.render = function (ctx) {\n    if (this.dirtyTransform) {\n      this.computeTransformMatrix();\n    }\n    this.matrix.toContext(ctx);\n    var x1 = this.x1;\n    var y1 = this.y1;\n    var x2 = this.x2;\n    var y2 = this.y2;\n    // Align to the pixel grid if the line is strictly vertical\n    // or horizontal (but not both, i.e. a dot).\n    if (x1 === x2) {\n      var x = Math.round(x1) + Math.floor(this.strokeWidth) % 2 / 2;\n      x1 = x;\n      x2 = x;\n    } else if (y1 === y2) {\n      var y = Math.round(y1) + Math.floor(this.strokeWidth) % 2 / 2;\n      y1 = y;\n      y2 = y;\n    }\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    this.fillStroke(ctx);\n    this.dirty = false;\n  };\n  Line.className = 'Line';\n  Line.defaultStyles = chainObjects(Shape.defaultStyles, {\n    fill: undefined,\n    strokeWidth: 1\n  });\n  return Line;\n}(Shape);\nvar twoPi = Math.PI * 2;\n/**\n * Normalize the given angle to be in the [0, 2) interval.\n * @param radians Angle in radians.\n */\nfunction normalizeAngle360(radians) {\n  radians %= twoPi;\n  radians += twoPi;\n  radians %= twoPi;\n  return radians;\n}\nfunction normalizeAngle360Inclusive(radians) {\n  radians %= twoPi;\n  radians += twoPi;\n  if (radians !== twoPi) {\n    radians %= twoPi;\n  }\n  return radians;\n}\n/**\n * Normalize the given angle to be in the [-, ) interval.\n * @param radians Angle in radians.\n */\nfunction normalizeAngle180(radians) {\n  radians %= twoPi;\n  if (radians < -Math.PI) {\n    radians += twoPi;\n  } else if (radians >= Math.PI) {\n    radians -= twoPi;\n  }\n  return radians;\n}\nfunction toRadians(degrees) {\n  return degrees / 180 * Math.PI;\n}\n\n// @ts-ignore Suppress tsc error: Property 'sign' does not exist on type 'Math'\nvar sign = Math.sign ? Math.sign : function (x) {\n  x = +x;\n  if (x === 0 || isNaN(x)) {\n    return x;\n  }\n  return x > 0 ? 1 : -1;\n};\n/**\n * Finds the roots of a parametric linear equation in `t`,\n * where `t` lies in the interval of `[0,1]`.\n */\nfunction linearRoot(a, b) {\n  var t = -b / a;\n  return a !== 0 && t >= 0 && t <= 1 ? [t] : [];\n}\n/**\n * Finds the roots of a parametric quadratic equation in `t`,\n * where `t` lies in the interval of `[0,1]`.\n */\nfunction quadraticRoots(a, b, c) {\n  if (a === 0) {\n    return linearRoot(b, c);\n  }\n  var D = b * b - 4 * a * c; // The polynomial's discriminant.\n  var roots = [];\n  if (D === 0) {\n    // A single real root.\n    var t = -b / (2 * a);\n    if (t >= 0 && t <= 1) {\n      roots.push(t);\n    }\n  } else if (D > 0) {\n    // A pair of distinct real roots.\n    var rD = Math.sqrt(D);\n    var t1 = (-b - rD) / (2 * a);\n    var t2 = (-b + rD) / (2 * a);\n    if (t1 >= 0 && t1 <= 1) {\n      roots.push(t1);\n    }\n    if (t2 >= 0 && t2 <= 1) {\n      roots.push(t2);\n    }\n  }\n  // else -> Complex roots.\n  return roots;\n}\n/**\n * Finds the roots of a parametric cubic equation in `t`,\n * where `t` lies in the interval of `[0,1]`.\n * Returns an array of parametric intersection locations along the cubic,\n * excluding out-of-bounds intersections (before or after the end point\n * or in the imaginary plane).\n * An adaptation of http://www.particleincell.com/blog/2013/cubic-line-intersection/\n */\nfunction cubicRoots(a, b, c, d) {\n  if (a === 0) {\n    return quadraticRoots(b, c, d);\n  }\n  var A = b / a;\n  var B = c / a;\n  var C = d / a;\n  var Q = (3 * B - A * A) / 9;\n  var R = (9 * A * B - 27 * C - 2 * A * A * A) / 54;\n  var D = Q * Q * Q + R * R; // The polynomial's discriminant.\n  var third = 1 / 3;\n  var roots = [];\n  if (D >= 0) {\n    // Complex or duplicate roots.\n    var rD = Math.sqrt(D);\n    var S = sign(R + rD) * Math.pow(Math.abs(R + rD), third);\n    var T = sign(R - rD) * Math.pow(Math.abs(R - rD), third);\n    var Im = Math.abs(Math.sqrt(3) * (S - T) / 2); // Complex part of the root pair.\n    var t = -third * A + (S + T); // A real root.\n    if (t >= 0 && t <= 1) {\n      roots.push(t);\n    }\n    if (Im === 0) {\n      var t_1 = -third * A - (S + T) / 2; // The real part of a complex root.\n      if (t_1 >= 0 && t_1 <= 1) {\n        roots.push(t_1);\n      }\n    }\n  } else {\n    // Distinct real roots.\n    var theta = Math.acos(R / Math.sqrt(-Q * Q * Q));\n    var thirdA = third * A;\n    var twoSqrtQ = 2 * Math.sqrt(-Q);\n    var t1 = twoSqrtQ * Math.cos(third * theta) - thirdA;\n    var t2 = twoSqrtQ * Math.cos(third * (theta + 2 * Math.PI)) - thirdA;\n    var t3 = twoSqrtQ * Math.cos(third * (theta + 4 * Math.PI)) - thirdA;\n    if (t1 >= 0 && t1 <= 1) {\n      roots.push(t1);\n    }\n    if (t2 >= 0 && t2 <= 1) {\n      roots.push(t2);\n    }\n    if (t3 >= 0 && t3 <= 1) {\n      roots.push(t3);\n    }\n  }\n  return roots;\n}\n\n/**\n * Returns the intersection point for the given pair of line segments, or null,\n * if the segments are parallel or don't intersect.\n * Based on http://paulbourke.net/geometry/pointlineplane/\n */\nfunction segmentIntersection(ax1, ay1, ax2, ay2, bx1, by1, bx2, by2) {\n  var d = (ax2 - ax1) * (by2 - by1) - (ay2 - ay1) * (bx2 - bx1);\n  if (d === 0) {\n    // The lines are parallel.\n    return null;\n  }\n  var ua = ((bx2 - bx1) * (ay1 - by1) - (ax1 - bx1) * (by2 - by1)) / d;\n  var ub = ((ax2 - ax1) * (ay1 - by1) - (ay2 - ay1) * (ax1 - bx1)) / d;\n  if (ua >= 0 && ua <= 1 && ub >= 0 && ub <= 1) {\n    return {\n      x: ax1 + ua * (ax2 - ax1),\n      y: ay1 + ua * (ay2 - ay1)\n    };\n  }\n  return null; // The intersection point is outside either or both segments.\n}\n/**\n * Returns intersection points of the given cubic curve and the line segment.\n * Takes in x/y components of cubic control points and line segment start/end points\n * as parameters.\n */\nfunction cubicSegmentIntersections(px1, py1, px2, py2, px3, py3, px4, py4, x1, y1, x2, y2) {\n  var intersections = [];\n  // Find line equation coefficients.\n  var A = y1 - y2;\n  var B = x2 - x1;\n  var C = x1 * (y2 - y1) - y1 * (x2 - x1);\n  // Find cubic Bezier curve equation coefficients from control points.\n  var bx = bezierCoefficients(px1, px2, px3, px4);\n  var by = bezierCoefficients(py1, py2, py3, py4);\n  var a = A * bx[0] + B * by[0]; // t^3\n  var b = A * bx[1] + B * by[1]; // t^2\n  var c = A * bx[2] + B * by[2]; // t\n  var d = A * bx[3] + B * by[3] + C; // 1\n  var roots = cubicRoots(a, b, c, d);\n  // Verify that the roots are within bounds of the linear segment.\n  for (var i = 0; i < roots.length; i++) {\n    var t = roots[i];\n    var tt = t * t;\n    var ttt = t * tt;\n    // Find the cartesian plane coordinates for the parametric root `t`.\n    var x = bx[0] * ttt + bx[1] * tt + bx[2] * t + bx[3];\n    var y = by[0] * ttt + by[1] * tt + by[2] * t + by[3];\n    // The parametric cubic roots we found are intersection points\n    // with an infinite line, and so the x/y coordinates above are as well.\n    // Make sure the x/y is also within the bounds of the given segment.\n    var s = void 0;\n    if (x1 !== x2) {\n      s = (x - x1) / (x2 - x1);\n    } else {\n      // the line is vertical\n      s = (y - y1) / (y2 - y1);\n    }\n    if (s >= 0 && s <= 1) {\n      intersections.push({\n        x: x,\n        y: y\n      });\n    }\n  }\n  return intersections;\n}\n/**\n * Returns the given coordinates vector multiplied by the coefficient matrix\n * of the parametric cubic Bzier equation.\n */\nfunction bezierCoefficients(P1, P2, P3, P4) {\n  return [-P1 + 3 * P2 - 3 * P3 + P4, 3 * P1 - 6 * P2 + 3 * P3, -3 * P1 + 3 * P2, P1 //                 | 1  0  0  0| |P4|\n  ];\n}\n\nvar Path2D = /** @class */function () {\n  function Path2D() {\n    // The methods of this class will likely be called many times per animation frame,\n    // and any allocation can trigger a GC cycle during animation, so we attempt\n    // to minimize the number of allocations.\n    this.commands = [];\n    this.params = [];\n    this._closedPath = false;\n  }\n  Path2D.prototype.moveTo = function (x, y) {\n    if (this.xy) {\n      this.xy[0] = x;\n      this.xy[1] = y;\n    } else {\n      this.xy = [x, y];\n    }\n    this.commands.push('M');\n    this.params.push(x, y);\n  };\n  Path2D.prototype.lineTo = function (x, y) {\n    if (this.xy) {\n      this.commands.push('L');\n      this.params.push(x, y);\n      this.xy[0] = x;\n      this.xy[1] = y;\n    } else {\n      this.moveTo(x, y);\n    }\n  };\n  Path2D.prototype.rect = function (x, y, width, height) {\n    this.moveTo(x, y);\n    this.lineTo(x + width, y);\n    this.lineTo(x + width, y + height);\n    this.lineTo(x, y + height);\n    this.closePath();\n  };\n  /**\n   * Adds an arc segment to the path definition.\n   * https://www.w3.org/TR/SVG11/paths.html#PathDataEllipticalArcCommands\n   * @param rx The major-axis radius.\n   * @param ry The minor-axis radius.\n   * @param rotation The x-axis rotation, expressed in radians.\n   * @param fA The large arc flag. `1` to use angle > .\n   * @param fS The sweep flag. `1` for the arc that goes to `x`/`y` clockwise.\n   * @param x2 The x coordinate to arc to.\n   * @param y2 The y coordinate to arc to.\n   */\n  Path2D.prototype.arcTo = function (rx, ry, rotation, fA, fS, x2, y2) {\n    // Convert from endpoint to center parametrization:\n    // https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n    var xy = this.xy;\n    if (!xy) {\n      return;\n    }\n    if (rx < 0) {\n      rx = -rx;\n    }\n    if (ry < 0) {\n      ry = -ry;\n    }\n    var x1 = xy[0];\n    var y1 = xy[1];\n    var hdx = (x1 - x2) / 2;\n    var hdy = (y1 - y2) / 2;\n    var sinPhi = Math.sin(rotation);\n    var cosPhi = Math.cos(rotation);\n    var xp = cosPhi * hdx + sinPhi * hdy;\n    var yp = -sinPhi * hdx + cosPhi * hdy;\n    var ratX = xp / rx;\n    var ratY = yp / ry;\n    var lambda = ratX * ratX + ratY * ratY;\n    var cx = (x1 + x2) / 2;\n    var cy = (y1 + y2) / 2;\n    var cpx = 0;\n    var cpy = 0;\n    if (lambda >= 1) {\n      lambda = Math.sqrt(lambda);\n      rx *= lambda;\n      ry *= lambda;\n      // me gives lambda == cpx == cpy == 0;\n    } else {\n      lambda = Math.sqrt(1 / lambda - 1);\n      if (fA === fS) {\n        lambda = -lambda;\n      }\n      cpx = lambda * rx * ratY;\n      cpy = -lambda * ry * ratX;\n      cx += cosPhi * cpx - sinPhi * cpy;\n      cy += sinPhi * cpx + cosPhi * cpy;\n    }\n    var theta1 = Math.atan2((yp - cpy) / ry, (xp - cpx) / rx);\n    var deltaTheta = Math.atan2((-yp - cpy) / ry, (-xp - cpx) / rx) - theta1;\n    // if (fS) {\n    //     if (deltaTheta <= 0) {\n    //         deltaTheta += Math.PI * 2;\n    //     }\n    // }\n    // else {\n    //     if (deltaTheta >= 0) {\n    //         deltaTheta -= Math.PI * 2;\n    //     }\n    // }\n    this.cubicArc(cx, cy, rx, ry, rotation, theta1, theta1 + deltaTheta, 1 - fS);\n  };\n  Path2D.prototype.arcToAlt = function (rx, ry, rotation, fA, fS, x2, y2) {\n    // Convert from endpoint to center parametrization. See:\n    // https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n    if (!this.xy) {\n      return;\n    }\n    var x1 = this.xy[0];\n    var y1 = this.xy[1];\n  };\n  /**\n   * Approximates an elliptical arc with up to four cubic Bzier curves.\n   * @param commands The string array to write SVG command letters to.\n   * @param params The number array to write SVG command parameters (cubic control points) to.\n   * @param cx The x-axis coordinate for the ellipse's center.\n   * @param cy The y-axis coordinate for the ellipse's center.\n   * @param rx The ellipse's major-axis radius.\n   * @param ry The ellipse's minor-axis radius.\n   * @param phi The rotation for this ellipse, expressed in radians.\n   * @param theta1 The starting angle, measured clockwise from the positive x-axis and expressed in radians.\n   * @param theta2 The ending angle, measured clockwise from the positive x-axis and expressed in radians.\n   * @param anticlockwise The arc control points are always placed clockwise from `theta1` to `theta2`,\n   * even when `theta1 > theta2`, unless this flag is set to `1`.\n   */\n  Path2D.cubicArc = function (commands, params, cx, cy, rx, ry, phi, theta1, theta2, anticlockwise) {\n    if (anticlockwise) {\n      var temp = theta1;\n      theta1 = theta2;\n      theta2 = temp;\n    }\n    var start = params.length;\n    // See https://pomax.github.io/bezierinfo/#circles_cubic\n    // Arc of unit circle (start angle = 0, end angle <= /2) in cubic Bzier coordinates:\n    // S = [1, 0]\n    // C1 = [1, f]\n    // C2 = [cos() + f * sin(), sin() - f * cos()]\n    // E = [cos(), sin()]\n    // f = 4/3 * tan(/4)\n    var f90 = 0.5522847498307935; // f for  = /2 is 4/3 * (Math.sqrt(2) - 1)\n    var sinTheta1 = Math.sin(theta1);\n    var cosTheta1 = Math.cos(theta1);\n    var sinPhi = Math.sin(phi);\n    var cosPhi = Math.cos(phi);\n    var rightAngle = Math.PI / 2;\n    // Since we know how to draw an arc of a unit circle with a cubic Bzier,\n    // to draw an elliptical arc with arbitrary rotation and radii we:\n    // 1) rotate the Bzier coordinates that represent a circular arc by \n    // 2) scale the circular arc separately along the x/y axes, making it elliptical\n    // 3) rotate elliptical arc by \n    // |cos() -sin()| |sx  0| |cos() -sin()| -> |xx xy|\n    // |sin()  cos()| | 0 sy| |sin()  cos()| -> |yx yy|\n    var xx = cosPhi * cosTheta1 * rx - sinPhi * sinTheta1 * ry;\n    var yx = sinPhi * cosTheta1 * rx + cosPhi * sinTheta1 * ry;\n    var xy = -cosPhi * sinTheta1 * rx - sinPhi * cosTheta1 * ry;\n    var yy = -sinPhi * sinTheta1 * rx + cosPhi * cosTheta1 * ry;\n    // TODO: what if delta between 1 and 2 is greater than 2?\n    // Always draw clockwise from 1 to 2.\n    theta2 -= theta1;\n    if (theta2 < 0) {\n      theta2 += Math.PI * 2;\n    }\n    // Multiplying each point [x, y] by:\n    // |xx xy cx| |x|\n    // |yx yy cy| |y|\n    // | 0  0  1| |1|\n    // TODO: This move command may be redundant, if we are already at this point.\n    // The coordinates of the point calculated here may differ ever so slightly\n    // because of precision error.\n    commands.push('M');\n    params.push(xx + cx, yx + cy);\n    while (theta2 >= rightAngle) {\n      theta2 -= rightAngle;\n      commands.push('C');\n      // Temp workaround for https://bugs.chromium.org/p/chromium/issues/detail?id=993330\n      // Revert this commit when fixed ^^.\n      var lastX = xy + cx;\n      params.push(xx + xy * f90 + cx, yx + yy * f90 + cy, xx * f90 + xy + cx, yx * f90 + yy + cy, Math.abs(lastX) < 1e-8 ? 0 : lastX, yy + cy);\n      // Prepend /2 rotation matrix.\n      // |xx xy| | 0 1| -> | xy -xx|\n      // |yx yy| |-1 0| -> | yy -yx|\n      // [xx, yx, xy, yy] = [xy, yy, -xx, -yx];\n      // Compared to swapping with a temp variable, destructuring is:\n      // - 10% faster in Chrome 70\n      // - 99% slower in Firefox 63\n      // Temp variable solution is 45% faster in FF than Chrome.\n      // https://jsperf.com/multi-swap\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=1165569\n      var temp = xx;\n      xx = xy;\n      xy = -temp;\n      temp = yx;\n      yx = yy;\n      yy = -temp;\n    }\n    if (theta2) {\n      var f = 4 / 3 * Math.tan(theta2 / 4);\n      var sinPhi2 = Math.sin(theta2);\n      var cosPhi2 = Math.cos(theta2);\n      var C2x = cosPhi2 + f * sinPhi2;\n      var C2y = sinPhi2 - f * cosPhi2;\n      commands.push('C');\n      // Temp workaround for https://bugs.chromium.org/p/chromium/issues/detail?id=993330\n      // Revert this commit when fixed ^^.\n      var lastX = xx * cosPhi2 + xy * sinPhi2 + cx;\n      params.push(xx + xy * f + cx, yx + yy * f + cy, xx * C2x + xy * C2y + cx, yx * C2x + yy * C2y + cy, Math.abs(lastX) < 1e-8 ? 0 : lastX, yx * cosPhi2 + yy * sinPhi2 + cy);\n    }\n    if (anticlockwise) {\n      for (var i = start, j = params.length - 2; i < j; i += 2, j -= 2) {\n        var temp = params[i];\n        params[i] = params[j];\n        params[j] = temp;\n        temp = params[i + 1];\n        params[i + 1] = params[j + 1];\n        params[j + 1] = temp;\n      }\n    }\n  };\n  Path2D.prototype.cubicArc = function (cx, cy, rx, ry, phi, theta1, theta2, anticlockwise) {\n    var commands = this.commands;\n    var params = this.params;\n    var start = commands.length;\n    Path2D.cubicArc(commands, params, cx, cy, rx, ry, phi, theta1, theta2, anticlockwise);\n    var x = params[params.length - 2];\n    var y = params[params.length - 1];\n    if (this.xy) {\n      commands[start] = 'L';\n      this.xy[0] = x;\n      this.xy[1] = y;\n    } else {\n      this.xy = [x, y];\n    }\n  };\n  /**\n   * Returns the `[x, y]` coordinates of the curve at `t`.\n   * @param points `(n + 1) * 2` control point coordinates for a Bzier curve of n-th order.\n   * @param t\n   */\n  Path2D.prototype.deCasteljau = function (points, t) {\n    var n = points.length;\n    if (n < 2 || n % 2 === 1) {\n      throw new Error('Fewer than two points or not an even count.');\n    } else if (n === 2 || t === 0) {\n      return points.slice(0, 2);\n    } else if (t === 1) {\n      return points.slice(-2);\n    } else {\n      var newPoints = [];\n      var last = n - 2;\n      for (var i = 0; i < last; i += 2) {\n        newPoints.push((1 - t) * points[i] + t * points[i + 2],\n        // x\n        (1 - t) * points[i + 1] + t * points[i + 3] // y\n        );\n      }\n\n      return this.deCasteljau(newPoints, t);\n    }\n  };\n  /**\n   * Approximates the given curve using `n` line segments.\n   * @param points `(n + 1) * 2` control point coordinates for a Bzier curve of n-th order.\n   * @param n\n   */\n  Path2D.prototype.approximateCurve = function (points, n) {\n    var xy = this.deCasteljau(points, 0);\n    this.moveTo(xy[0], xy[1]);\n    var step = 1 / n;\n    for (var t = step; t <= 1; t += step) {\n      var xy_1 = this.deCasteljau(points, t);\n      this.lineTo(xy_1[0], xy_1[1]);\n    }\n  };\n  /**\n   * Adds a quadratic curve segment to the path definition.\n   * Note: the given quadratic segment is converted and stored as a cubic one.\n   * @param cx x-component of the curve's control point\n   * @param cy y-component of the curve's control point\n   * @param x x-component of the end point\n   * @param y y-component of the end point\n   */\n  Path2D.prototype.quadraticCurveTo = function (cx, cy, x, y) {\n    if (!this.xy) {\n      this.moveTo(cx, cy);\n    }\n    // See https://pomax.github.io/bezierinfo/#reordering\n    this.cubicCurveTo((this.xy[0] + 2 * cx) / 3, (this.xy[1] + 2 * cy) / 3,\n    // 1/3 start + 2/3 control\n    (2 * cx + x) / 3, (2 * cy + y) / 3,\n    // 2/3 control + 1/3 end\n    x, y);\n  };\n  Path2D.prototype.cubicCurveTo = function (cx1, cy1, cx2, cy2, x, y) {\n    if (!this.xy) {\n      this.moveTo(cx1, cy1);\n    }\n    this.commands.push('C');\n    this.params.push(cx1, cy1, cx2, cy2, x, y);\n    this.xy[0] = x;\n    this.xy[1] = y;\n  };\n  Object.defineProperty(Path2D.prototype, \"closedPath\", {\n    get: function get() {\n      return this._closedPath;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Path2D.prototype.closePath = function () {\n    if (this.xy) {\n      this.xy = undefined;\n      this.commands.push('Z');\n      this._closedPath = true;\n    }\n  };\n  Path2D.prototype.clear = function () {\n    this.commands.length = 0;\n    this.params.length = 0;\n    this.xy = undefined;\n    this._closedPath = false;\n  };\n  Path2D.prototype.isPointInPath = function (x, y) {\n    var commands = this.commands;\n    var params = this.params;\n    var cn = commands.length;\n    // Hit testing using ray casting method, where the ray's origin is some point\n    // outside the path. In this case, an offscreen point that is remote enough, so that\n    // even if the path itself is large and is partially offscreen, the ray's origin\n    // will likely be outside the path anyway. To test if the given point is inside the\n    // path or not, we cast a ray from the origin to the given point and check the number\n    // of intersections of this segment with the path. If the number of intersections is\n    // even, then the ray both entered and exited the path an equal number of times,\n    // therefore the point is outside the path, and inside the path, if the number of\n    // intersections is odd. Since the path is compound, we check if the ray segment\n    // intersects with each of the path's segments, which can be either a line segment\n    // (one or no intersection points) or a Bzier curve segment (up to 3 intersection\n    // points).\n    var ox = -10000;\n    var oy = -10000;\n    // the starting point of the  current path\n    var sx = NaN;\n    var sy = NaN;\n    // the previous point of the current path\n    var px = 0;\n    var py = 0;\n    var intersectionCount = 0;\n    for (var ci = 0, pi = 0; ci < cn; ci++) {\n      switch (commands[ci]) {\n        case 'M':\n          if (!isNaN(sx)) {\n            if (segmentIntersection(sx, sy, px, py, ox, oy, x, y)) {\n              intersectionCount++;\n            }\n          }\n          sx = px = params[pi++];\n          sy = py = params[pi++];\n          break;\n        case 'L':\n          if (segmentIntersection(px, py, px = params[pi++], py = params[pi++], ox, oy, x, y)) {\n            intersectionCount++;\n          }\n          break;\n        case 'C':\n          intersectionCount += cubicSegmentIntersections(px, py, params[pi++], params[pi++], params[pi++], params[pi++], px = params[pi++], py = params[pi++], ox, oy, x, y).length;\n          break;\n        case 'Z':\n          if (!isNaN(sx)) {\n            if (segmentIntersection(sx, sy, px, py, ox, oy, x, y)) {\n              intersectionCount++;\n            }\n          }\n          break;\n      }\n    }\n    return intersectionCount % 2 === 1;\n  };\n  Path2D.fromString = function (value) {\n    var path = new Path2D();\n    path.setFromString(value);\n    return path;\n  };\n  /**\n   * Split the SVG path at command letters,\n   * then extract the command letter and parameters from each substring.\n   * @param value\n   */\n  Path2D.parseSvgPath = function (value) {\n    return value.trim().split(Path2D.splitCommandsRe).map(function (part) {\n      var strParams = part.match(Path2D.matchParamsRe);\n      return {\n        command: part.substr(0, 1),\n        params: strParams ? strParams.map(parseFloat) : []\n      };\n    });\n  };\n  Path2D.prettifySvgPath = function (value) {\n    return Path2D.parseSvgPath(value).map(function (d) {\n      return d.command + d.params.join(',');\n    }).join('\\n');\n  };\n  /**\n   * See https://www.w3.org/TR/SVG11/paths.html\n   * @param value\n   */\n  Path2D.prototype.setFromString = function (value) {\n    var _this = this;\n    this.clear();\n    var parts = Path2D.parseSvgPath(value);\n    // Current point.\n    var x;\n    var y;\n    // Last control point. Used to calculate the reflection point\n    // for `S`, `s`, `T`, `t` commands.\n    var cpx;\n    var cpy;\n    var lastCommand;\n    function checkQuadraticCP() {\n      if (!lastCommand.match(Path2D.quadraticCommandRe)) {\n        cpx = x;\n        cpy = y;\n      }\n    }\n    function checkCubicCP() {\n      if (!lastCommand.match(Path2D.cubicCommandRe)) {\n        cpx = x;\n        cpy = y;\n      }\n    }\n    // But that will make compiler complain about x/y, cpx/cpy\n    // being used without being set first.\n    parts.forEach(function (part) {\n      var p = part.params;\n      var n = p.length;\n      var i = 0;\n      switch (part.command) {\n        case 'M':\n          _this.moveTo(x = p[i++], y = p[i++]);\n          while (i < n) {\n            _this.lineTo(x = p[i++], y = p[i++]);\n          }\n          break;\n        case 'm':\n          _this.moveTo(x += p[i++], y += p[i++]);\n          while (i < n) {\n            _this.lineTo(x += p[i++], y += p[i++]);\n          }\n          break;\n        case 'L':\n          while (i < n) {\n            _this.lineTo(x = p[i++], y = p[i++]);\n          }\n          break;\n        case 'l':\n          while (i < n) {\n            _this.lineTo(x += p[i++], y += p[i++]);\n          }\n          break;\n        case 'C':\n          while (i < n) {\n            _this.cubicCurveTo(p[i++], p[i++], cpx = p[i++], cpy = p[i++], x = p[i++], y = p[i++]);\n          }\n          break;\n        case 'c':\n          while (i < n) {\n            _this.cubicCurveTo(x + p[i++], y + p[i++], cpx = x + p[i++], cpy = y + p[i++], x += p[i++], y += p[i++]);\n          }\n          break;\n        case 'S':\n          checkCubicCP();\n          while (i < n) {\n            _this.cubicCurveTo(x + x - cpx, y + y - cpy, cpx = p[i++], cpy = p[i++], x = p[i++], y = p[i++]);\n          }\n          break;\n        case 's':\n          checkCubicCP();\n          while (i < n) {\n            _this.cubicCurveTo(x + x - cpx, y + y - cpy, cpx = x + p[i++], cpy = y + p[i++], x += p[i++], y += p[i++]);\n          }\n          break;\n        case 'Q':\n          while (i < n) {\n            _this.quadraticCurveTo(cpx = p[i++], cpy = p[i++], x = p[i++], y = p[i++]);\n          }\n          break;\n        case 'q':\n          while (i < n) {\n            _this.quadraticCurveTo(cpx = x + p[i++], cpy = y + p[i++], x += p[i++], y += p[i++]);\n          }\n          break;\n        case 'T':\n          checkQuadraticCP();\n          while (i < n) {\n            _this.quadraticCurveTo(cpx = x + x - cpx, cpy = y + y - cpy, x = p[i++], y = p[i++]);\n          }\n          break;\n        case 't':\n          checkQuadraticCP();\n          while (i < n) {\n            _this.quadraticCurveTo(cpx = x + x - cpx, cpy = y + y - cpy, x += p[i++], y += p[i++]);\n          }\n          break;\n        case 'A':\n          while (i < n) {\n            _this.arcTo(p[i++], p[i++], p[i++] * Math.PI / 180, p[i++], p[i++], x = p[i++], y = p[i++]);\n          }\n          break;\n        case 'a':\n          while (i < n) {\n            _this.arcTo(p[i++], p[i++], p[i++] * Math.PI / 180, p[i++], p[i++], x += p[i++], y += p[i++]);\n          }\n          break;\n        case 'Z':\n        case 'z':\n          _this.closePath();\n          break;\n        case 'H':\n          while (i < n) {\n            _this.lineTo(x = p[i++], y);\n          }\n          break;\n        case 'h':\n          while (i < n) {\n            _this.lineTo(x += p[i++], y);\n          }\n          break;\n        case 'V':\n          while (i < n) {\n            _this.lineTo(x, y = p[i++]);\n          }\n          break;\n        case 'v':\n          while (i < n) {\n            _this.lineTo(x, y += p[i++]);\n          }\n          break;\n      }\n      lastCommand = part.command;\n    });\n  };\n  Path2D.prototype.toString = function () {\n    var c = this.commands;\n    var p = this.params;\n    var cn = c.length;\n    var out = [];\n    for (var ci = 0, pi = 0; ci < cn; ci++) {\n      switch (c[ci]) {\n        case 'M':\n          out.push('M' + p[pi++] + ',' + p[pi++]);\n          break;\n        case 'L':\n          out.push('L' + p[pi++] + ',' + p[pi++]);\n          break;\n        case 'C':\n          out.push('C' + p[pi++] + ',' + p[pi++] + ' ' + p[pi++] + ',' + p[pi++] + ' ' + p[pi++] + ',' + p[pi++]);\n          break;\n        case 'Z':\n          out.push('Z');\n          break;\n      }\n    }\n    return out.join('');\n  };\n  Path2D.prototype.toPrettyString = function () {\n    return Path2D.prettifySvgPath(this.toString());\n  };\n  Path2D.prototype.toSvg = function () {\n    return Path2D.xmlDeclaration + \"\\n<svg width=\\\"100%\\\" height=\\\"100%\\\" viewBox=\\\"0 0 50 50\\\" version=\\\"1.1\\\" xmlns=\\\"\" + Path2D.xmlns + \"\\\">\\n    <path d=\\\"\" + this.toString() + \"\\\" style=\\\"fill:none;stroke:#000;stroke-width:0.5;\\\"/>\\n</svg>\";\n  };\n  Path2D.prototype.toDebugSvg = function () {\n    var d = Path2D.prettifySvgPath(this.toString());\n    return Path2D.xmlDeclaration + \"\\n<svg width=\\\"100%\\\" height=\\\"100%\\\" viewBox=\\\"0 0 100 100\\\" version=\\\"1.1\\\" xmlns=\\\"\" + Path2D.xmlns + \"\\\">\\n    <path d=\\\"\" + d + \"\\\" style=\\\"fill:none;stroke:#000;stroke-width:0.5;\\\"/>\\n</svg>\";\n  };\n  /**\n   * Returns an array of sub-paths of this Path,\n   * where each sub-path is represented exclusively by cubic segments.\n   */\n  Path2D.prototype.toCubicPaths = function () {\n    // Each sub-path is an array of `(n * 3 + 1) * 2` numbers,\n    // where `n` is the number of segments.\n    var paths = [];\n    var params = this.params;\n    // current path\n    var path;\n    // the starting point of the  current path\n    var sx;\n    var sy;\n    // the previous point of the current path\n    var px;\n    var py;\n    var i = 0; // current parameter\n    this.commands.forEach(function (command) {\n      switch (command) {\n        case 'M':\n          path = [sx = px = params[i++], sy = py = params[i++]];\n          paths.push(path);\n          break;\n        case 'L':\n          var x = params[i++];\n          var y = params[i++];\n          // Place control points along the line `a + (b - a) * t`\n          // at t = 1/3 and 2/3:\n          path.push((px + px + x) / 3, (py + py + y) / 3, (px + x + x) / 3, (py + y + y) / 3, px = x, py = y);\n          break;\n        case 'C':\n          path.push(params[i++], params[i++], params[i++], params[i++], px = params[i++], py = params[i++]);\n          break;\n        case 'Z':\n          path.push((px + px + sx) / 3, (py + py + sy) / 3, (px + sx + sx) / 3, (py + sy + sy) / 3, px = sx, py = sy);\n          break;\n      }\n    });\n    return paths;\n  };\n  Path2D.cubicPathToString = function (path) {\n    var n = path.length;\n    if (!(n % 2 === 0 && (n / 2 - 1) / 2 >= 1)) {\n      throw new Error('Invalid path.');\n    }\n    return 'M' + path.slice(0, 2).join(',') + 'C' + path.slice(2).join(',');\n  };\n  Path2D.splitCommandsRe = /(?=[AaCcHhLlMmQqSsTtVvZz])/g;\n  Path2D.matchParamsRe = /-?[0-9]*\\.?\\d+/g;\n  Path2D.quadraticCommandRe = /[QqTt]/;\n  Path2D.cubicCommandRe = /[CcSs]/;\n  Path2D.xmlDeclaration = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>';\n  Path2D.xmlns = 'http://www.w3.org/2000/svg';\n  return Path2D;\n}();\nvar __extends$N = undefined && undefined.__extends || function () {\n  var _extendStatics50 = function extendStatics(d, b) {\n    _extendStatics50 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics50(d, b);\n  };\n  return function (d, b) {\n    _extendStatics50(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar Path = /** @class */function (_super) {\n  __extends$N(Path, _super);\n  function Path() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /**\n     * Declare a path to retain for later rendering and hit testing\n     * using custom Path2D class. Think of it as a TypeScript version\n     * of the native Path2D (with some differences) that works in all browsers.\n     */\n    _this.path = new Path2D();\n    /**\n    * The path only has to be updated when certain attributes change.\n    * For example, if transform attributes (such as `translationX`)\n    * are changed, we don't have to update the path. The `dirtyPath` flag\n    * is how we keep track if the path has to be updated or not.\n    */\n    _this._dirtyPath = true;\n    /**\n     * Path definition in SVG path syntax:\n     * https://www.w3.org/TR/SVG11/paths.html#DAttribute\n     */\n    _this._svgPath = '';\n    return _this;\n  }\n  Object.defineProperty(Path.prototype, \"dirtyPath\", {\n    get: function get() {\n      return this._dirtyPath;\n    },\n    set: function set(value) {\n      if (this._dirtyPath !== value) {\n        this._dirtyPath = value;\n        if (value) {\n          this.dirty = true;\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Path.prototype, \"svgPath\", {\n    get: function get() {\n      return this._svgPath;\n    },\n    set: function set(value) {\n      if (this._svgPath !== value) {\n        this._svgPath = value;\n        this.path.setFromString(value);\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Path.prototype.isPointInPath = function (x, y) {\n    var point = this.transformPoint(x, y);\n    return this.path.closedPath && this.path.isPointInPath(point.x, point.y);\n  };\n  Path.prototype.isPointInStroke = function (x, y) {\n    return false;\n  };\n  Path.prototype.updatePath = function () {};\n  Path.prototype.render = function (ctx) {\n    var scene = this.scene;\n    if (this.dirtyTransform) {\n      this.computeTransformMatrix();\n    }\n    // if (scene.debug.renderBoundingBoxes) {\n    //     const bbox = this.computeBBox();\n    //     if (bbox) {\n    //         this.matrix.transformBBox(bbox).render(ctx);\n    //     }\n    // }\n    this.matrix.toContext(ctx);\n    if (this.dirtyPath) {\n      this.updatePath();\n      this.dirtyPath = false;\n    }\n    scene.appendPath(this.path);\n    this.fillStroke(ctx);\n    this.dirty = false;\n  };\n  Path.className = 'Path';\n  return Path;\n}(Shape);\nfunction isEqual(a, b, epsilon) {\n  if (epsilon === void 0) {\n    epsilon = 1e-10;\n  }\n  return Math.abs(a - b) < epsilon;\n}\n/**\n * `Number.toFixed(n)` always formats a number so that it has `n` digits after the decimal point.\n * For example, `Number(0.00003427).toFixed(2)` returns `0.00`.\n * That's not very helpful, because all the meaningful information is lost.\n * In this case we would want the formatted value to have at least two significant digits: `0.000034`,\n * not two fraction digits.\n * @param value\n * @param fractionOrSignificantDigits\n */\nfunction toFixed(value, fractionOrSignificantDigits) {\n  if (fractionOrSignificantDigits === void 0) {\n    fractionOrSignificantDigits = 2;\n  }\n  var power = Math.floor(Math.log(Math.abs(value)) / Math.LN10);\n  if (power >= 0 || !isFinite(power)) {\n    return value.toFixed(fractionOrSignificantDigits); // fraction digits\n  }\n\n  return value.toFixed(Math.abs(power) - 1 + fractionOrSignificantDigits); // significant digits\n}\n\nvar __extends$O = undefined && undefined.__extends || function () {\n  var _extendStatics51 = function extendStatics(d, b) {\n    _extendStatics51 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics51(d, b);\n  };\n  return function (d, b) {\n    _extendStatics51(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar ArcType;\n(function (ArcType) {\n  ArcType[ArcType[\"Open\"] = 0] = \"Open\";\n  ArcType[ArcType[\"Chord\"] = 1] = \"Chord\";\n  ArcType[ArcType[\"Round\"] = 2] = \"Round\";\n})(ArcType || (ArcType = {}));\n/**\n * Elliptical arc node.\n */\nvar Arc = /** @class */function (_super) {\n  __extends$O(Arc, _super);\n  function Arc() {\n    var _this = _super.call(this) || this;\n    _this._centerX = 0;\n    _this._centerY = 0;\n    _this._radiusX = 10;\n    _this._radiusY = 10;\n    _this._startAngle = 0;\n    _this._endAngle = Math.PI * 2;\n    _this._counterClockwise = false;\n    /**\n     * The type of arc to render:\n     * - {@link ArcType.Open} - end points of the arc segment are not connected (default)\n     * - {@link ArcType.Chord} - end points of the arc segment are connected by a line segment\n     * - {@link ArcType.Round} - each of the end points of the arc segment are connected\n     *                           to the center of the arc\n     * Arcs with {@link ArcType.Open} do not support hit testing, even if they have their\n     * {@link Shape.fillStyle} set, because they are not closed paths. Hit testing support\n     * would require using two paths - one for rendering, another for hit testing - and there\n     * doesn't seem to be a compelling reason to do that, when one can just use {@link ArcType.Chord}\n     * to create a closed path.\n     */\n    _this._type = ArcType.Open;\n    _this.restoreOwnStyles();\n    return _this;\n  }\n  Object.defineProperty(Arc.prototype, \"centerX\", {\n    get: function get() {\n      return this._centerX;\n    },\n    set: function set(value) {\n      if (this._centerX !== value) {\n        this._centerX = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Arc.prototype, \"centerY\", {\n    get: function get() {\n      return this._centerY;\n    },\n    set: function set(value) {\n      if (this._centerY !== value) {\n        this._centerY = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Arc.prototype, \"radiusX\", {\n    get: function get() {\n      return this._radiusX;\n    },\n    set: function set(value) {\n      if (this._radiusX !== value) {\n        this._radiusX = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Arc.prototype, \"radiusY\", {\n    get: function get() {\n      return this._radiusY;\n    },\n    set: function set(value) {\n      if (this._radiusY !== value) {\n        this._radiusY = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Arc.prototype, \"startAngle\", {\n    get: function get() {\n      return this._startAngle;\n    },\n    set: function set(value) {\n      if (this._startAngle !== value) {\n        this._startAngle = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Arc.prototype, \"endAngle\", {\n    get: function get() {\n      return this._endAngle;\n    },\n    set: function set(value) {\n      if (this._endAngle !== value) {\n        this._endAngle = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Arc.prototype, \"fullPie\", {\n    get: function get() {\n      return isEqual(normalizeAngle360(this.startAngle), normalizeAngle360(this.endAngle));\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Arc.prototype, \"counterClockwise\", {\n    get: function get() {\n      return this._counterClockwise;\n    },\n    set: function set(value) {\n      if (this._counterClockwise !== value) {\n        this._counterClockwise = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Arc.prototype, \"type\", {\n    get: function get() {\n      return this._type;\n    },\n    set: function set(value) {\n      if (this._type !== value) {\n        this._type = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Arc.prototype.updatePath = function () {\n    var path = this.path;\n    path.clear(); // No need to recreate the Path, can simply clear the existing one.\n    // This is much faster than the native Path2D implementation even though this `cubicArc`\n    // method is pure TypeScript and actually produces the definition of an elliptical arc,\n    // where you can specify two radii and rotation, while Path2D's `arc` method simply produces\n    // a circular arc. Maybe it's due to the experimental nature of the Path2D class,\n    // maybe it's because we have to create a new instance of it on each render, who knows...\n    path.cubicArc(this.centerX, this.centerY, this.radiusX, this.radiusY, 0, this.startAngle, this.endAngle, this.counterClockwise ? 1 : 0);\n    if (this.type === ArcType.Chord) {\n      path.closePath();\n    } else if (this.type === ArcType.Round && !this.fullPie) {\n      path.lineTo(this.centerX, this.centerY);\n      path.closePath();\n    }\n  };\n  Arc.prototype.computeBBox = function () {\n    // Only works with full arcs (circles) and untransformed ellipses.\n    return new BBox(this.centerX - this.radiusX, this.centerY - this.radiusY, this.radiusX * 2, this.radiusY * 2);\n  };\n  Arc.prototype.isPointInPath = function (x, y) {\n    var point = this.transformPoint(x, y);\n    var bbox = this.computeBBox();\n    return this.type !== ArcType.Open && bbox.containsPoint(point.x, point.y) && this.path.isPointInPath(point.x, point.y);\n  };\n  Arc.className = 'Arc';\n  Arc.defaultStyles = chainObjects(Shape.defaultStyles, {\n    lineWidth: 1,\n    fillStyle: null\n  });\n  return Arc;\n}(Path);\n\n// import { Rect } from \"./scene/shape/rect\"; // debug (bbox)\nvar Tags;\n(function (Tags) {\n  Tags[Tags[\"Tick\"] = 0] = \"Tick\";\n  Tags[Tags[\"GridLine\"] = 1] = \"GridLine\";\n})(Tags || (Tags = {}));\nvar AxisTick = /** @class */function () {\n  function AxisTick() {\n    /**\n     * The line width to be used by axis ticks.\n     */\n    this.width = 1;\n    /**\n     * The line length to be used by axis ticks.\n     */\n    this.size = 6;\n    /**\n     * The color of the axis ticks.\n     * Use `undefined` rather than `rgba(0, 0, 0, 0)` to make the ticks invisible.\n     */\n    this.color = 'rgba(195, 195, 195, 1)';\n    /**\n     * A hint of how many ticks to use (the exact number of ticks might differ),\n     * a `TimeInterval` or a `CountableTimeInterval`.\n     * For example:\n     *\n     *     axis.tick.count = 5;\n     *     axis.tick.count = year;\n     *     axis.tick.count = month.every(6);\n     */\n    this.count = 10;\n  }\n  return AxisTick;\n}();\nvar AxisLabel = /** @class */function () {\n  function AxisLabel() {\n    this.fontSize = 12;\n    this.fontFamily = 'Verdana, sans-serif';\n    /**\n     * The padding between the labels and the ticks.\n     */\n    this.padding = 5;\n    /**\n     * The color of the labels.\n     * Use `undefined` rather than `rgba(0, 0, 0, 0)` to make labels invisible.\n     */\n    this.color = 'rgba(87, 87, 87, 1)';\n    /**\n     * Custom label rotation in degrees.\n     * Labels are rendered perpendicular to the axis line by default.\n     * Or parallel to the axis line, if the {@link parallel} is set to `true`.\n     * The value of this config is used as the angular offset/deflection\n     * from the default rotation.\n     */\n    this.rotation = 0;\n    /**\n     * By default labels and ticks are positioned to the left of the axis line.\n     * `true` positions the labels to the right of the axis line.\n     * However, if the axis is rotated, its easier to think in terms\n     * of this side or the opposite side, rather than left and right.\n     * We use the term `mirror` for conciseness, although it's not\n     * true mirroring - for example, when a label is rotated, so that\n     * it is inclined at the 45 degree angle, text flowing from north-west\n     * to south-east, ending at the tick to the left of the axis line,\n     * and then we set this config to `true`, the text will still be flowing\n     * from north-west to south-east, _starting_ at the tick to the right\n     * of the axis line.\n     */\n    this.mirrored = false;\n    /**\n     * Labels are rendered perpendicular to the axis line by default.\n     * Setting this config to `true` makes labels render parallel to the axis line\n     * and center aligns labels' text at the ticks.\n     */\n    this.parallel = false;\n  }\n  Object.defineProperty(AxisLabel.prototype, \"format\", {\n    get: function get() {\n      return this._format;\n    },\n    set: function set(value) {\n      // See `TimeLocaleObject` docs for the list of supported format directives.\n      if (this._format !== value) {\n        this._format = value;\n        if (this.onFormatChange) {\n          this.onFormatChange(value);\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return AxisLabel;\n}();\n/**\n * A general purpose linear axis with no notion of orientation.\n * The axis is always rendered vertically, with horizontal labels positioned to the left\n * of the axis line by default. The axis can be {@link rotation | rotated} by an arbitrary angle,\n * so that it can be used as a top, right, bottom, left, radial or any other kind\n * of linear axis.\n * The generic `D` parameter is the type of the domain of the axis' scale.\n * The output range of the axis' scale is always numeric (screen coordinates).\n */\nvar Axis = /** @class */function () {\n  function Axis(scale) {\n    this.lineNode = new Line();\n    this.group = new Group();\n    this.line = {\n      width: 1,\n      color: 'rgba(195, 195, 195, 1)'\n    };\n    this.tick = new AxisTick();\n    this.label = new AxisLabel();\n    this.translation = {\n      x: 0,\n      y: 0\n    };\n    this.rotation = 0; // axis rotation angle in degrees\n    this._visibleRange = [0, 1];\n    this._title = undefined;\n    /**\n     * The length of the grid. The grid is only visible in case of a non-zero value.\n     * In case {@link radialGrid} is `true`, the value is interpreted as an angle\n     * (in degrees).\n     */\n    this._gridLength = 0;\n    /**\n     * The array of styles to cycle through when rendering grid lines.\n     * For example, use two {@link GridStyle} objects for alternating styles.\n     * Contains only one {@link GridStyle} object by default, meaning all grid lines\n     * have the same style.\n     */\n    this.gridStyle = [{\n      stroke: 'rgba(219, 219, 219, 1)',\n      lineDash: [4, 2]\n    }];\n    /**\n     * `false` - render grid as lines of {@link gridLength} that extend the ticks\n     *           on the opposite side of the axis\n     * `true` - render grid as concentric circles that go through the ticks\n     */\n    this._radialGrid = false;\n    this.scale = scale;\n    this.requestedRange = scale.range.slice();\n    this.groupSelection = Selection.select(this.group).selectAll();\n    this.label.onFormatChange = this.onTickFormatChange.bind(this);\n    this.group.append(this.lineNode);\n    this.onTickFormatChange();\n    // this.group.append(this.bboxRect); // debug (bbox)\n  }\n\n  Axis.prototype.updateRange = function () {\n    var _a = this,\n      rr = _a.requestedRange,\n      vr = _a.visibleRange,\n      scale = _a.scale;\n    var span = (rr[1] - rr[0]) / (vr[1] - vr[0]);\n    var shift = span * vr[0];\n    var start = rr[0] - shift;\n    scale.range = [start, start + span];\n  };\n  /**\n   * Checks if a point or an object is in range.\n   * @param x A point (or object's starting point).\n   * @param width Object's width.\n   * @param tolerance Expands the range on both ends by this amount.\n   */\n  Axis.prototype.inRange = function (x, width, tolerance) {\n    if (width === void 0) {\n      width = 0;\n    }\n    if (tolerance === void 0) {\n      tolerance = 0;\n    }\n    return this.inRangeEx(x, width, tolerance) === 0;\n  };\n  Axis.prototype.inRangeEx = function (x, width, tolerance) {\n    if (width === void 0) {\n      width = 0;\n    }\n    if (tolerance === void 0) {\n      tolerance = 0;\n    }\n    var range = this.range;\n    if (x + width < range[0] - tolerance) {\n      return -1; // left or range\n    }\n\n    if (x > range[1] + tolerance) {\n      return 1; // right of range\n    }\n\n    return 0; // in range\n  };\n\n  Object.defineProperty(Axis.prototype, \"range\", {\n    get: function get() {\n      return this.requestedRange.slice();\n    },\n    set: function set(value) {\n      this.requestedRange = value.slice();\n      this.updateRange();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Axis.prototype, \"visibleRange\", {\n    get: function get() {\n      return this._visibleRange.slice();\n    },\n    set: function set(value) {\n      if (value && value.length === 2) {\n        var min = value[0],\n          max = value[1];\n        min = Math.max(0, min);\n        max = Math.min(1, max);\n        min = Math.min(min, max);\n        max = Math.max(min, max);\n        this._visibleRange = [min, max];\n        this.updateRange();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Axis.prototype, \"domain\", {\n    get: function get() {\n      return this.scale.domain.slice();\n    },\n    set: function set(value) {\n      this.scale.domain = value.slice();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Axis.prototype.onTickFormatChange = function (format) {\n    if (format) {\n      if (this.scale.tickFormat) {\n        this.tickFormatter = this.scale.tickFormat(10, format);\n      }\n    } else {\n      if (this.scale.tickFormat) {\n        this.tickFormatter = this.scale.tickFormat(10, undefined);\n      } else {\n        this.tickFormatter = undefined;\n      }\n    }\n  };\n  Object.defineProperty(Axis.prototype, \"title\", {\n    get: function get() {\n      return this._title;\n    },\n    set: function set(value) {\n      var oldTitle = this._title;\n      if (oldTitle !== value) {\n        if (oldTitle) {\n          this.group.removeChild(oldTitle.node);\n        }\n        if (value) {\n          value.node.rotation = -Math.PI / 2;\n          this.group.appendChild(value.node);\n        }\n        this._title = value;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Axis.prototype, \"gridLength\", {\n    get: function get() {\n      return this._gridLength;\n    },\n    set: function set(value) {\n      // Was visible and now invisible, or was invisible and now visible.\n      if (this._gridLength && !value || !this._gridLength && value) {\n        this.groupSelection = this.groupSelection.remove().setData([]);\n      }\n      this._gridLength = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Axis.prototype, \"radialGrid\", {\n    get: function get() {\n      return this._radialGrid;\n    },\n    set: function set(value) {\n      if (this._radialGrid !== value) {\n        this._radialGrid = value;\n        this.groupSelection = this.groupSelection.remove().setData([]);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * Creates/removes/updates the scene graph nodes that constitute the axis.\n   * Supposed to be called _manually_ after changing _any_ of the axis properties.\n   * This allows to bulk set axis properties before updating the nodes.\n   * The node changes made by this method are rendered on the next animation frame.\n   * We could schedule this method call automatically on the next animation frame\n   * when any of the axis properties change (the way we do when properties of scene graph's\n   * nodes change), but this will mean that we first wait for the next animation\n   * frame to make changes to the nodes of the axis, then wait for another animation\n   * frame to render those changes. It's nice to have everything update automatically,\n   * but this extra level of async indirection will not just introduce an unwanted delay,\n   * it will also make it harder to reason about the program.\n   */\n  Axis.prototype.update = function () {\n    var _this = this;\n    var _a = this,\n      group = _a.group,\n      scale = _a.scale,\n      tick = _a.tick,\n      label = _a.label,\n      gridStyle = _a.gridStyle,\n      requestedRange = _a.requestedRange;\n    var requestedRangeMin = Math.min(requestedRange[0], requestedRange[1]);\n    var requestedRangeMax = Math.max(requestedRange[0], requestedRange[1]);\n    var rotation = toRadians(this.rotation);\n    var parallelLabels = label.parallel;\n    var labelRotation = normalizeAngle360(toRadians(label.rotation));\n    group.translationX = this.translation.x;\n    group.translationY = this.translation.y;\n    group.rotation = rotation;\n    var halfBandwidth = (scale.bandwidth || 0) / 2;\n    // The side of the axis line to position the labels on.\n    // -1 = left (default)\n    //  1 = right\n    var sideFlag = label.mirrored ? 1 : -1;\n    // When labels are parallel to the axis line, the `parallelFlipFlag` is used to\n    // flip the labels to avoid upside-down text, when the axis is rotated\n    // such that it is in the right hemisphere, i.e. the angle of rotation\n    // is in the [0, ] interval.\n    // The rotation angle is normalized, so that we have an easier time checking\n    // if it's in the said interval. Since the axis is always rendered vertically\n    // and then rotated, zero rotation means 12 (not 3) o-clock.\n    // -1 = flip\n    //  1 = don't flip (default)\n    var parallelFlipRotation = normalizeAngle360(rotation);\n    var parallelFlipFlag = !labelRotation && parallelFlipRotation >= 0 && parallelFlipRotation <= Math.PI ? -1 : 1;\n    var regularFlipRotation = normalizeAngle360(rotation - Math.PI / 2);\n    // Flip if the axis rotation angle is in the top hemisphere.\n    var regularFlipFlag = !labelRotation && regularFlipRotation >= 0 && regularFlipRotation <= Math.PI ? -1 : 1;\n    var alignFlag = labelRotation >= 0 && labelRotation <= Math.PI ? -1 : 1;\n    var ticks = scale.ticks(this.tick.count);\n    var update = this.groupSelection.setData(ticks);\n    update.exit.remove();\n    var enter = update.enter.append(Group);\n    // Line auto-snaps to pixel grid if vertical or horizontal.\n    enter.append(Line).each(function (node) {\n      return node.tag = Tags.Tick;\n    });\n    if (this.gridLength) {\n      if (this.radialGrid) {\n        enter.append(Arc).each(function (node) {\n          return node.tag = Tags.GridLine;\n        });\n      } else {\n        enter.append(Line).each(function (node) {\n          return node.tag = Tags.GridLine;\n        });\n      }\n    }\n    enter.append(Text);\n    var groupSelection = update.merge(enter);\n    groupSelection.attrFn('translationY', function (_, datum) {\n      return Math.round(scale.convert(datum) + halfBandwidth);\n    }).attrFn('visible', function (node) {\n      return node.translationY >= requestedRangeMin && node.translationY <= requestedRangeMax;\n    });\n    groupSelection.selectByTag(Tags.Tick).each(function (line) {\n      line.strokeWidth = tick.width;\n      line.stroke = tick.color;\n    }).attr('x1', sideFlag * tick.size).attr('x2', 0).attr('y1', 0).attr('y2', 0);\n    if (this.gridLength && gridStyle.length) {\n      var styleCount_1 = gridStyle.length;\n      var gridLines = void 0;\n      if (this.radialGrid) {\n        var angularGridLength_1 = normalizeAngle360Inclusive(toRadians(this.gridLength));\n        gridLines = groupSelection.selectByTag(Tags.GridLine).each(function (arc, datum) {\n          var radius = Math.round(scale.convert(datum) + halfBandwidth);\n          arc.centerX = 0;\n          arc.centerY = scale.range[0] - radius;\n          arc.endAngle = angularGridLength_1;\n          arc.radiusX = radius;\n          arc.radiusY = radius;\n        });\n      } else {\n        gridLines = groupSelection.selectByTag(Tags.GridLine).each(function (line) {\n          line.x1 = 0;\n          line.x2 = -sideFlag * _this.gridLength;\n          line.y1 = 0;\n          line.y2 = 0;\n          line.visible = Math.abs(line.parent.translationY - scale.range[0]) > 1;\n        });\n      }\n      gridLines.each(function (gridLine, _, index) {\n        var style = gridStyle[index % styleCount_1];\n        gridLine.stroke = style.stroke;\n        gridLine.strokeWidth = tick.width;\n        gridLine.lineDash = style.lineDash;\n        gridLine.fill = undefined;\n      });\n    }\n    var tickFormatter = this.tickFormatter;\n    // `ticks instanceof NumericTicks` doesn't work here, so we feature detect.\n    var fractionDigits = ticks.fractionDigits >= 0 ? ticks.fractionDigits : 0;\n    var labelSelection = groupSelection.selectByClass(Text).each(function (node, datum, index) {\n      node.fontStyle = label.fontStyle;\n      node.fontWeight = label.fontWeight;\n      node.fontSize = label.fontSize;\n      node.fontFamily = label.fontFamily;\n      node.fill = label.color;\n      node.textBaseline = parallelLabels && !labelRotation ? sideFlag * parallelFlipFlag === -1 ? 'hanging' : 'bottom' : 'middle';\n      node.text = label.formatter ? label.formatter({\n        value: fractionDigits >= 0 ? datum : String(datum),\n        index: index,\n        fractionDigits: fractionDigits,\n        formatter: tickFormatter\n      }) : fractionDigits\n      // the `datum` is a floating point number\n      ? datum.toFixed(fractionDigits)\n      // the `datum` is an integer, a string or an object\n      : tickFormatter ? tickFormatter(datum) : String(datum);\n      node.textAlign = parallelLabels ? labelRotation ? sideFlag * alignFlag === -1 ? 'end' : 'start' : 'center' : sideFlag * regularFlipFlag === -1 ? 'end' : 'start';\n    });\n    var labelX = sideFlag * (tick.size + label.padding);\n    var autoRotation = parallelLabels ? parallelFlipFlag * Math.PI / 2 : regularFlipFlag === -1 ? Math.PI : 0;\n    labelSelection.each(function (label) {\n      label.x = labelX;\n      label.rotationCenterX = labelX;\n      label.rotation = autoRotation + labelRotation;\n    });\n    this.groupSelection = groupSelection;\n    // Render axis line.\n    var lineNode = this.lineNode;\n    lineNode.x1 = 0;\n    lineNode.x2 = 0;\n    lineNode.y1 = requestedRange[0];\n    lineNode.y2 = requestedRange[1];\n    lineNode.strokeWidth = this.line.width;\n    lineNode.stroke = this.line.color;\n    lineNode.visible = ticks.length > 0;\n    var title = this.title;\n    var titleVisible = false;\n    if (title && title.enabled) {\n      titleVisible = true;\n      var padding = title.padding.bottom;\n      var titleNode = title.node;\n      var bbox = this.computeBBox({\n        excludeTitle: true\n      });\n      var titleRotationFlag = sideFlag === -1 && parallelFlipRotation > Math.PI && parallelFlipRotation < Math.PI * 2 ? -1 : 1;\n      titleNode.rotation = titleRotationFlag * sideFlag * Math.PI / 2;\n      titleNode.x = titleRotationFlag * sideFlag * (lineNode.y1 + lineNode.y2) / 2;\n      titleNode.x = titleRotationFlag * sideFlag * (requestedRange[0] + requestedRange[1]) / 2;\n      if (sideFlag === -1) {\n        titleNode.y = titleRotationFlag * (-padding - bbox.width + Math.max(bbox.x + bbox.width, 0));\n      } else {\n        titleNode.y = -padding - bbox.width - Math.min(bbox.x, 0);\n      }\n      // title.text = `Axis Title: ${sideFlag} ${toDegrees(parallelFlipRotation).toFixed(0)} ${titleRotationFlag}`;\n      titleNode.textBaseline = titleRotationFlag === 1 ? 'bottom' : 'top';\n    }\n    if (title) {\n      title.node.visible = titleVisible;\n    }\n    // debug (bbox)\n    // const bbox = this.computeBBox();\n    // const bboxRect = this.bboxRect;\n    // bboxRect.x = bbox.x;\n    // bboxRect.y = bbox.y;\n    // bboxRect.width = bbox.width;\n    // bboxRect.height = bbox.height;\n  };\n\n  Axis.prototype.computeBBox = function (options) {\n    var _a = this,\n      title = _a.title,\n      lineNode = _a.lineNode;\n    var labels = this.groupSelection.selectByClass(Text);\n    var left = Infinity;\n    var right = -Infinity;\n    var top = Infinity;\n    var bottom = -Infinity;\n    labels.each(function (label) {\n      // The label itself is rotated, but not translated, the group that\n      // contains it is. So to capture the group transform in the label bbox\n      // calculation we combine the transform matrices of the label and the group.\n      // Depending on the timing of the `axis.computeBBox()` method call, we may\n      // not have the group's and the label's transform matrices updated yet (because\n      // the transform matrix is not recalculated whenever a node's transform attributes\n      // change, instead it's marked for recalculation on the next frame by setting\n      // the node's `dirtyTransform` flag to `true`), so we force them to update\n      // right here by calling `computeTransformMatrix`.\n      label.computeTransformMatrix();\n      var matrix = Matrix.flyweight(label.matrix);\n      var group = label.parent;\n      group.computeTransformMatrix();\n      matrix.preMultiplySelf(group.matrix);\n      var labelBBox = label.computeBBox();\n      if (labelBBox) {\n        var bbox = matrix.transformBBox(labelBBox);\n        left = Math.min(left, bbox.x);\n        right = Math.max(right, bbox.x + bbox.width);\n        top = Math.min(top, bbox.y);\n        bottom = Math.max(bottom, bbox.y + bbox.height);\n      }\n    });\n    if (title && title.enabled && (!options || !options.excludeTitle)) {\n      var label = title.node;\n      label.computeTransformMatrix();\n      var matrix = Matrix.flyweight(label.matrix);\n      var labelBBox = label.computeBBox();\n      if (labelBBox) {\n        var bbox = matrix.transformBBox(labelBBox);\n        left = Math.min(left, bbox.x);\n        right = Math.max(right, bbox.x + bbox.width);\n        top = Math.min(top, bbox.y);\n        bottom = Math.max(bottom, bbox.y + bbox.height);\n      }\n    }\n    left = Math.min(left, 0);\n    right = Math.max(right, 0);\n    top = Math.min(top, lineNode.y1, lineNode.y2);\n    bottom = Math.max(bottom, lineNode.y1, lineNode.y2);\n    return new BBox(left, top, right - left, bottom - top);\n  };\n  return Axis;\n}();\nvar __extends$P = undefined && undefined.__extends || function () {\n  var _extendStatics52 = function extendStatics(d, b) {\n    _extendStatics52 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics52(d, b);\n  };\n  return function (d, b) {\n    _extendStatics52(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar ChartAxisDirection;\n(function (ChartAxisDirection) {\n  ChartAxisDirection[\"X\"] = \"x\";\n  ChartAxisDirection[\"Y\"] = \"y\"; // means 'radius' in polar charts\n})(ChartAxisDirection || (ChartAxisDirection = {}));\nfunction flipChartAxisDirection(direction) {\n  if (direction === ChartAxisDirection.X) {\n    return ChartAxisDirection.Y;\n  } else {\n    return ChartAxisDirection.X;\n  }\n}\nvar ChartAxisPosition;\n(function (ChartAxisPosition) {\n  ChartAxisPosition[\"Top\"] = \"top\";\n  ChartAxisPosition[\"Right\"] = \"right\";\n  ChartAxisPosition[\"Bottom\"] = \"bottom\";\n  ChartAxisPosition[\"Left\"] = \"left\";\n  ChartAxisPosition[\"Angle\"] = \"angle\";\n  ChartAxisPosition[\"Radius\"] = \"radius\";\n})(ChartAxisPosition || (ChartAxisPosition = {}));\nvar ChartAxis = /** @class */function (_super) {\n  __extends$P(ChartAxis, _super);\n  function ChartAxis() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.keys = [];\n    _this.boundSeries = [];\n    return _this;\n  }\n  Object.defineProperty(ChartAxis.prototype, \"type\", {\n    get: function get() {\n      return this.constructor.type || '';\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ChartAxis.prototype, \"position\", {\n    get: function get() {\n      return this._position;\n    },\n    set: function set(value) {\n      if (this._position !== value) {\n        this._position = value;\n        switch (value) {\n          case ChartAxisPosition.Top:\n            this.direction = ChartAxisDirection.X;\n            this.rotation = -90;\n            this.label.mirrored = true;\n            this.label.parallel = true;\n            break;\n          case ChartAxisPosition.Right:\n            this.direction = ChartAxisDirection.Y;\n            this.rotation = 0;\n            this.label.mirrored = true;\n            this.label.parallel = false;\n            break;\n          case ChartAxisPosition.Bottom:\n            this.direction = ChartAxisDirection.X;\n            this.rotation = -90;\n            this.label.mirrored = false;\n            this.label.parallel = true;\n            break;\n          case ChartAxisPosition.Left:\n            this.direction = ChartAxisDirection.Y;\n            this.rotation = 0;\n            this.label.mirrored = false;\n            this.label.parallel = false;\n            break;\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ChartAxis;\n}(Axis);\nvar __extends$Q = undefined && undefined.__extends || function () {\n  var _extendStatics53 = function extendStatics(d, b) {\n    _extendStatics53 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics53(d, b);\n  };\n  return function (d, b) {\n    _extendStatics53(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar NumberAxis = /** @class */function (_super) {\n  __extends$Q(NumberAxis, _super);\n  function NumberAxis() {\n    var _this = _super.call(this, new LinearScale()) || this;\n    _this._nice = true;\n    _this._min = NaN;\n    _this._max = NaN;\n    _this.scale.clamp = true;\n    return _this;\n  }\n  Object.defineProperty(NumberAxis.prototype, \"nice\", {\n    get: function get() {\n      return this._nice;\n    },\n    set: function set(value) {\n      if (this._nice !== value) {\n        this._nice = value;\n        if (value && this.scale.nice) {\n          this.scale.nice(10);\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NumberAxis.prototype, \"domain\", {\n    get: function get() {\n      return this.scale.domain;\n    },\n    set: function set(value) {\n      var _a = this,\n        min = _a.min,\n        max = _a.max;\n      value = [isNaN(min) ? value[0] : min, isNaN(max) ? value[1] : max];\n      this.scale.domain = value;\n      if (this.nice && this.scale.nice) {\n        this.scale.nice(10);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NumberAxis.prototype, \"min\", {\n    get: function get() {\n      return this._min;\n    },\n    set: function set(value) {\n      if (this._min !== value) {\n        this._min = value;\n        if (!isNaN(value)) {\n          this.scale.domain = [value, this.scale.domain[1]];\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NumberAxis.prototype, \"max\", {\n    get: function get() {\n      return this._max;\n    },\n    set: function set(value) {\n      if (this._max !== value) {\n        this._max = value;\n        if (!isNaN(value)) {\n          this.scale.domain = [this.scale.domain[0], value];\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  NumberAxis.className = 'NumberAxis';\n  NumberAxis.type = 'number';\n  return NumberAxis;\n}(ChartAxis);\n\n/**\n * Maps a discrete domain to a continuous numeric range.\n * See https://github.com/d3/d3-scale#band-scales for more info.\n */\nvar BandScale = /** @class */function () {\n  function BandScale() {\n    /**\n     * Maps datum to its index in the {@link domain} array.\n     * Used to check for duplicate datums (not allowed).\n     */\n    this.index = new Map();\n    /**\n     * The output range values for datum at each index.\n     */\n    this.ordinalRange = [];\n    /**\n     * Contains unique datums only. Since `{}` is used in place of `Map`\n     * for IE11 compatibility, the datums are converted `toString` before\n     * the uniqueness check.\n     */\n    this._domain = [];\n    this._range = [0, 1];\n    this._bandwidth = 1;\n    /**\n     * The ratio of the range that is reserved for space between bands.\n     */\n    this._paddingInner = 0;\n    /**\n     * The ratio of the range that is reserved for space before the first\n     * and after the last band.\n     */\n    this._paddingOuter = 0;\n    this._round = false;\n    /**\n     * How the leftover range is distributed.\n     * `0.5` - equal distribution of space before the first and after the last band,\n     * with bands effectively centered within the range.\n     */\n    this._align = 0.5;\n  }\n  Object.defineProperty(BandScale.prototype, \"domain\", {\n    get: function get() {\n      return this._domain;\n    },\n    set: function set(values) {\n      var domain = this._domain;\n      domain.length = 0;\n      this.index = new Map();\n      var index = this.index;\n      // In case one wants to have duplicate domain values, for example, two 'Italy' categories,\n      // one should use objects rather than strings for domain values like so:\n      // { toString: () => 'Italy' }\n      // { toString: () => 'Italy' }\n      values.forEach(function (value) {\n        if (index.get(value) === undefined) {\n          index.set(value, domain.push(value) - 1);\n        }\n      });\n      this.rescale();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BandScale.prototype, \"range\", {\n    get: function get() {\n      return this._range;\n    },\n    set: function set(values) {\n      this._range[0] = values[0];\n      this._range[1] = values[1];\n      this.rescale();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  BandScale.prototype.ticks = function () {\n    return this._domain;\n  };\n  BandScale.prototype.convert = function (d) {\n    var i = this.index.get(d);\n    if (i === undefined) {\n      return NaN;\n    }\n    var r = this.ordinalRange[i];\n    if (r === undefined) {\n      return NaN;\n    }\n    return r;\n  };\n  Object.defineProperty(BandScale.prototype, \"bandwidth\", {\n    get: function get() {\n      return this._bandwidth;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BandScale.prototype, \"padding\", {\n    get: function get() {\n      return this._paddingInner;\n    },\n    set: function set(value) {\n      value = Math.max(0, Math.min(1, value));\n      this._paddingInner = value;\n      this._paddingOuter = value;\n      this.rescale();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BandScale.prototype, \"paddingInner\", {\n    get: function get() {\n      return this._paddingInner;\n    },\n    set: function set(value) {\n      this._paddingInner = Math.max(0, Math.min(1, value)); // [0, 1]\n      this.rescale();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BandScale.prototype, \"paddingOuter\", {\n    get: function get() {\n      return this._paddingOuter;\n    },\n    set: function set(value) {\n      this._paddingOuter = Math.max(0, Math.min(1, value)); // [0, 1]\n      this.rescale();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BandScale.prototype, \"round\", {\n    get: function get() {\n      return this._round;\n    },\n    set: function set(value) {\n      this._round = value;\n      this.rescale();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BandScale.prototype, \"align\", {\n    get: function get() {\n      return this._align;\n    },\n    set: function set(value) {\n      this._align = Math.max(0, Math.min(1, value)); // [0, 1]\n      this.rescale();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  BandScale.prototype.rescale = function () {\n    var _a;\n    var n = this._domain.length;\n    if (!n) {\n      return;\n    }\n    var _b = this._range,\n      a = _b[0],\n      b = _b[1];\n    var reversed = b < a;\n    if (reversed) {\n      _a = [b, a], a = _a[0], b = _a[1];\n    }\n    var step = (b - a) / Math.max(1, n - this._paddingInner + this._paddingOuter * 2);\n    if (this._round) {\n      step = Math.floor(step);\n    }\n    a += (b - a - step * (n - this._paddingInner)) * this._align;\n    this._bandwidth = step * (1 - this._paddingInner);\n    if (this._round) {\n      a = Math.round(a);\n      this._bandwidth = Math.round(this._bandwidth);\n    }\n    var values = [];\n    for (var i = 0; i < n; i++) {\n      values.push(a + step * i);\n    }\n    this.ordinalRange = reversed ? values.reverse() : values;\n  };\n  return BandScale;\n}();\nvar __extends$R = undefined && undefined.__extends || function () {\n  var _extendStatics54 = function extendStatics(d, b) {\n    _extendStatics54 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics54(d, b);\n  };\n  return function (d, b) {\n    _extendStatics54(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar CategoryAxis = /** @class */function (_super) {\n  __extends$R(CategoryAxis, _super);\n  function CategoryAxis() {\n    var _this = this;\n    var scale = new BandScale();\n    scale.paddingInner = 0.2;\n    scale.paddingOuter = 0.3;\n    _this = _super.call(this, scale) || this;\n    return _this;\n  }\n  Object.defineProperty(CategoryAxis.prototype, \"paddingInner\", {\n    get: function get() {\n      return this.scale.paddingInner;\n    },\n    set: function set(value) {\n      this.scale.paddingInner = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CategoryAxis.prototype, \"paddingOuter\", {\n    get: function get() {\n      return this.scale.paddingOuter;\n    },\n    set: function set(value) {\n      this.scale.paddingOuter = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  CategoryAxis.className = 'CategoryAxis';\n  CategoryAxis.type = 'category';\n  return CategoryAxis;\n}(ChartAxis);\n\n// Custom `Array.find` implementation for legacy browsers.\nfunction find(arr, predicate) {\n  for (var i = 0; i < arr.length; i++) {\n    var value = arr[i];\n    if (predicate(value, i, arr)) {\n      return value;\n    }\n  }\n}\nfunction finiteExtent(values) {\n  var n = values.length;\n  var i = -1;\n  var value;\n  var min;\n  var max;\n  while (++i < n) {\n    // Find the first comparable finite value.\n    if ((value = values[i]) != null && value >= value && isFinite(value)) {\n      min = max = value;\n      while (++i < n) {\n        // Compare the remaining values.\n        if ((value = values[i]) != null && isFinite(value)) {\n          if (min > value) {\n            min = value;\n          }\n          if (max < value) {\n            max = value;\n          }\n        }\n      }\n    }\n  }\n  return min === undefined || max === undefined ? undefined : [min, max];\n}\n/**\n * This method will only return `undefined` if there's not a single valid finite number present\n * in the given array of values. Date values will be converted to timestamps.\n * @param values\n */\nfunction numericExtent(values) {\n  var calculatedExtent = finiteExtent(values);\n  if (typeof calculatedExtent === 'undefined') {\n    return;\n  }\n  var a = calculatedExtent[0],\n    b = calculatedExtent[1];\n  var min = a instanceof Date ? a.getTime() : a;\n  var max = b instanceof Date ? b.getTime() : b;\n  if (typeof min === 'number' && isFinite(min) && typeof max === 'number' && isFinite(max)) {\n    return [min, max];\n  }\n}\n/**\n * finds the min and max using a process appropriate for stacked values. Ie,\n * summing up the positive and negative numbers, and returning the totals of each\n */\nfunction findMinMax(values) {\n  var min = 0;\n  var max = 0;\n  for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n    var value = values_1[_i];\n    if (value < 0) {\n      min += value;\n    } else {\n      max += value;\n    }\n  }\n  return {\n    min: min,\n    max: max\n  };\n}\nfunction findLargestMinMax(totals) {\n  var min = 0;\n  var max = 0;\n  for (var _i = 0, totals_1 = totals; _i < totals_1.length; _i++) {\n    var total = totals_1[_i];\n    if (total.min < min) {\n      min = total.min;\n    }\n    if (total.max > max) {\n      max = total.max;\n    }\n  }\n  return {\n    min: min,\n    max: max\n  };\n}\nfunction copy(array, start, count) {\n  if (start === void 0) {\n    start = 0;\n  }\n  if (count === void 0) {\n    count = array.length;\n  }\n  var result = [];\n  var n = array.length;\n  if (n) {\n    for (var i = 0; i < count; i++) {\n      result.push(array[(start + i) % n]);\n    }\n  }\n  return result;\n}\n\n/**\n * The tree layout is calculated in abstract x/y coordinates, where the root is at (0, 0)\n * and the tree grows downward from the root.\n */\nvar TreeNode = /** @class */function () {\n  function TreeNode(label, parent, number) {\n    if (label === void 0) {\n      label = '';\n    }\n    if (number === void 0) {\n      number = 0;\n    }\n    this.x = 0;\n    this.y = 0;\n    this.subtreeLeft = NaN;\n    this.subtreeRight = NaN;\n    this.screenX = 0;\n    this.screenY = 0;\n    this.children = [];\n    this.leafCount = 0;\n    this.prelim = 0;\n    this.mod = 0;\n    this.ancestor = this;\n    this.change = 0;\n    this.shift = 0;\n    this.label = label;\n    // screenX and screenY are meant to be recomputed from (layout) x and y\n    // when the tree is resized (without performing another layout)\n    this.parent = parent;\n    this.depth = parent ? parent.depth + 1 : 0;\n    this.number = number;\n  }\n  TreeNode.prototype.getLeftSibling = function () {\n    return this.number > 0 && this.parent ? this.parent.children[this.number - 1] : undefined;\n  };\n  TreeNode.prototype.getLeftmostSibling = function () {\n    return this.number > 0 && this.parent ? this.parent.children[0] : undefined;\n  };\n  // traverse the left contour of a subtree, return the successor of v on this contour\n  TreeNode.prototype.nextLeft = function () {\n    return this.children ? this.children[0] : this.thread;\n  };\n  // traverse the right contour of a subtree, return the successor of v on this contour\n  TreeNode.prototype.nextRight = function () {\n    return this.children ? this.children[this.children.length - 1] : this.thread;\n  };\n  TreeNode.prototype.getSiblings = function () {\n    var _this = this;\n    return this.parent ? this.parent.children.filter(function (_, i) {\n      return i !== _this.number;\n    }) : [];\n  };\n  return TreeNode;\n}();\n/**\n * Converts an array of ticks, where each tick has an array of labels, to a label tree.\n * If `pad` is `true`, will ensure that every branch matches the depth of the tree by\n * creating empty labels.\n */\nfunction ticksToTree(ticks, pad) {\n  if (pad === void 0) {\n    pad = true;\n  }\n  var root = new TreeNode();\n  var depth = 0;\n  if (pad) {\n    ticks.forEach(function (tick) {\n      return depth = Math.max(depth, tick.labels.length);\n    });\n  }\n  ticks.forEach(function (tick) {\n    if (pad) {\n      while (tick.labels.length < depth) {\n        tick.labels.unshift('');\n      }\n    }\n    insertTick(root, tick);\n  });\n  return root;\n}\nfunction insertTick(root, tick) {\n  var pathParts = tick.labels.slice().reverse(); // path elements from root to leaf label\n  var lastPartIndex = pathParts.length - 1;\n  pathParts.forEach(function (pathPart, partIndex) {\n    var children = root.children;\n    var existingNode = find(children, function (child) {\n      return child.label === pathPart;\n    });\n    var isNotLeaf = partIndex !== lastPartIndex;\n    if (existingNode && isNotLeaf) {\n      // the isNotLeaf check is to allow duplicate leafs\n      root = existingNode;\n    } else {\n      var node = new TreeNode(pathPart, root);\n      node.number = children.length;\n      children.push(node);\n      if (isNotLeaf) {\n        root = node;\n      }\n    }\n  });\n}\n// Shift the subtree.\nfunction moveSubtree(wm, wp, shift) {\n  var subtrees = wp.number - wm.number;\n  var ratio = shift / subtrees;\n  wp.change -= ratio;\n  wp.shift += shift;\n  wm.change += ratio;\n  wp.prelim += shift;\n  wp.mod += shift;\n}\nfunction ancestor(vim, v, defaultAncestor) {\n  return v.getSiblings().indexOf(vim.ancestor) >= 0 ? vim.ancestor : defaultAncestor;\n}\n// Spaces out the children.\nfunction executeShifts(v) {\n  var children = v.children;\n  if (children) {\n    var shift = 0;\n    var change = 0;\n    for (var i = children.length - 1; i >= 0; i--) {\n      var w = children[i];\n      w.prelim += shift;\n      w.mod += shift;\n      change += w.change;\n      shift += w.shift + change;\n    }\n  }\n}\n// Moves current subtree with v as the root if some nodes are conflicting in space.\nfunction apportion(v, defaultAncestor, distance) {\n  var w = v.getLeftSibling();\n  if (w) {\n    var vop = v;\n    var vip = v;\n    var vim = w;\n    var vom = vip.getLeftmostSibling();\n    var sip = vip.mod;\n    var sop = vop.mod;\n    var sim = vim.mod;\n    var som = vom.mod;\n    while (vim.nextRight() && vip.nextLeft()) {\n      vim = vim.nextRight();\n      vip = vip.nextLeft();\n      vom = vom.nextLeft();\n      vop = vop.nextRight();\n      vop.ancestor = v;\n      var shift = vim.prelim + sim - (vip.prelim + sip) + distance;\n      if (shift > 0) {\n        moveSubtree(ancestor(vim, v, defaultAncestor), v, shift);\n        sip += shift;\n        sop += shift;\n      }\n      sim += vim.mod;\n      sip += vip.mod;\n      som += vom.mod;\n      sop += vop.mod;\n    }\n    if (vim.nextRight() && !vop.nextRight()) {\n      vop.thread = vim.nextRight();\n      vop.mod += sim - sop;\n    } else {\n      if (vip.nextLeft() && !vom.nextLeft()) {\n        vom.thread = vip.nextLeft();\n        vom.mod += sip - som;\n      }\n      defaultAncestor = v;\n    }\n  }\n  return defaultAncestor;\n}\n// Compute the preliminary x-coordinate of node and its children (recursively).\nfunction firstWalk(node, distance) {\n  var children = node.children;\n  if (children.length) {\n    var defaultAncestor_1 = children[0];\n    children.forEach(function (child) {\n      firstWalk(child, distance);\n      defaultAncestor_1 = apportion(child, defaultAncestor_1, distance);\n    });\n    executeShifts(node);\n    var midpoint = (children[0].prelim + children[children.length - 1].prelim) / 2;\n    var leftSibling = node.getLeftSibling();\n    if (leftSibling) {\n      node.prelim = leftSibling.prelim + distance;\n      node.mod = node.prelim - midpoint;\n    } else {\n      node.prelim = midpoint;\n    }\n  } else {\n    var leftSibling = node.getLeftSibling();\n    node.prelim = leftSibling ? leftSibling.prelim + distance : 0;\n  }\n}\nvar Dimensions = /** @class */function () {\n  function Dimensions() {\n    this.top = Infinity;\n    this.right = -Infinity;\n    this.bottom = -Infinity;\n    this.left = Infinity;\n  }\n  Dimensions.prototype.update = function (node, xy) {\n    var _a = xy(node),\n      x = _a.x,\n      y = _a.y;\n    if (x > this.right) {\n      this.right = x;\n    }\n    if (x < this.left) {\n      this.left = x;\n    }\n    if (y > this.bottom) {\n      this.bottom = y;\n    }\n    if (y < this.top) {\n      this.top = y;\n    }\n  };\n  return Dimensions;\n}();\nfunction secondWalk(v, m, layout) {\n  v.x = v.prelim + m;\n  v.y = v.depth;\n  layout.update(v);\n  v.children.forEach(function (w) {\n    return secondWalk(w, m + v.mod, layout);\n  });\n}\n// After the second walk the parent nodes are positioned at the center of their immediate children.\n// If we want the parent nodes to be positioned at the center of the subtree for which they are roots,\n// we need a third walk to adjust the positions.\nfunction thirdWalk(v) {\n  var children = v.children;\n  var leafCount = 0;\n  children.forEach(function (w) {\n    thirdWalk(w);\n    if (w.children.length) {\n      leafCount += w.leafCount;\n    } else {\n      leafCount++;\n    }\n  });\n  v.leafCount = leafCount;\n  if (children.length) {\n    v.subtreeLeft = children[0].subtreeLeft;\n    v.subtreeRight = children[v.children.length - 1].subtreeRight;\n    v.x = (v.subtreeLeft + v.subtreeRight) / 2;\n  } else {\n    v.subtreeLeft = v.x;\n    v.subtreeRight = v.x;\n  }\n}\nfunction treeLayout(root) {\n  var layout = new TreeLayout();\n  firstWalk(root, 1);\n  secondWalk(root, -root.prelim, layout);\n  thirdWalk(root);\n  return layout;\n}\nvar TreeLayout = /** @class */function () {\n  function TreeLayout() {\n    this.dimensions = new Dimensions();\n    this.leafCount = 0;\n    this.nodes = [];\n    // One might want to process leaf nodes separately from the rest of the tree.\n    // For example, position labels corresponding to leafs vertically, rather than horizontally.\n    this.leafNodes = [];\n    this.nonLeafNodes = [];\n    this.depth = 0;\n  }\n  TreeLayout.prototype.update = function (node) {\n    this.dimensions.update(node, function (node) {\n      return {\n        x: node.x,\n        y: node.y\n      };\n    });\n    if (!node.children.length) {\n      this.leafCount++;\n      this.leafNodes.push(node);\n    } else {\n      this.nonLeafNodes.push(node);\n    }\n    if (node.depth > this.depth) {\n      this.depth = node.depth;\n    }\n    this.nodes.push(node);\n  };\n  TreeLayout.prototype.resize = function (width, height, shiftX, shiftY, flipX) {\n    if (shiftX === void 0) {\n      shiftX = 0;\n    }\n    if (shiftY === void 0) {\n      shiftY = 0;\n    }\n    if (flipX === void 0) {\n      flipX = false;\n    }\n    var xSteps = this.leafCount - 1;\n    var ySteps = this.depth;\n    var dimensions = this.dimensions;\n    var scalingX = 1;\n    var scalingY = 1;\n    if (width > 0 && xSteps) {\n      var existingSpacingX = (dimensions.right - dimensions.left) / xSteps;\n      var desiredSpacingX = width / xSteps;\n      scalingX = desiredSpacingX / existingSpacingX;\n      if (flipX) {\n        scalingX = -scalingX;\n      }\n    }\n    if (height > 0 && ySteps) {\n      var existingSpacingY = (dimensions.bottom - dimensions.top) / ySteps;\n      var desiredSpacingY = height / ySteps;\n      scalingY = desiredSpacingY / existingSpacingY;\n    }\n    var screenDimensions = new Dimensions();\n    this.nodes.forEach(function (node) {\n      node.screenX = node.x * scalingX;\n      node.screenY = node.y * scalingY;\n      screenDimensions.update(node, function (node) {\n        return {\n          x: node.screenX,\n          y: node.screenY\n        };\n      });\n    });\n    // Normalize so that root top and leftmost leaf left start at zero.\n    var offsetX = -screenDimensions.left;\n    var offsetY = -screenDimensions.top;\n    this.nodes.forEach(function (node) {\n      node.screenX += offsetX + shiftX;\n      node.screenY += offsetY + shiftY;\n    });\n  };\n  return TreeLayout;\n}();\nvar __extends$S = undefined && undefined.__extends || function () {\n  var _extendStatics55 = function extendStatics(d, b) {\n    _extendStatics55 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics55(d, b);\n  };\n  return function (d, b) {\n    _extendStatics55(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar GroupedCategoryAxisLabel = /** @class */function (_super) {\n  __extends$S(GroupedCategoryAxisLabel, _super);\n  function GroupedCategoryAxisLabel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.grid = false;\n    return _this;\n  }\n  return GroupedCategoryAxisLabel;\n}(AxisLabel);\n/**\n * A general purpose linear axis with no notion of orientation.\n * The axis is always rendered vertically, with horizontal labels positioned to the left\n * of the axis line by default. The axis can be {@link rotation | rotated} by an arbitrary angle,\n * so that it can be used as a top, right, bottom, left, radial or any other kind\n * of linear axis.\n * The generic `D` parameter is the type of the domain of the axis' scale.\n * The output range of the axis' scale is always numeric (screen coordinates).\n */\nvar GroupedCategoryAxis = /** @class */function (_super) {\n  __extends$S(GroupedCategoryAxis, _super);\n  function GroupedCategoryAxis() {\n    var _this = _super.call(this, new BandScale()) || this;\n    _this.id = createId(_this);\n    _this.tickScale = new BandScale();\n    _this.group = new Group();\n    _this.longestSeparatorLength = 0;\n    _this.translation = {\n      x: 0,\n      y: 0\n    };\n    /**\n     * Axis rotation angle in degrees.\n     */\n    _this.rotation = 0;\n    _this.line = {\n      width: 1,\n      color: 'rgba(195, 195, 195, 1)'\n    };\n    // readonly tick = new AxisTick();\n    _this.label = new GroupedCategoryAxisLabel();\n    /**\n     * The color of the labels.\n     * Use `undefined` rather than `rgba(0, 0, 0, 0)` to make labels invisible.\n     */\n    _this.labelColor = 'rgba(87, 87, 87, 1)';\n    var _a = _this,\n      group = _a.group,\n      scale = _a.scale,\n      tickScale = _a.tickScale;\n    scale.paddingOuter = 0.1;\n    scale.paddingInner = scale.paddingOuter * 2;\n    _this.requestedRange = scale.range.slice();\n    tickScale.paddingInner = 1;\n    tickScale.paddingOuter = 0;\n    _this.gridLineSelection = Selection.select(group).selectAll();\n    _this.axisLineSelection = Selection.select(group).selectAll();\n    _this.separatorSelection = Selection.select(group).selectAll();\n    _this.labelSelection = Selection.select(group).selectAll();\n    return _this;\n    // this.group.append(this.bboxRect); // debug (bbox)\n  }\n\n  Object.defineProperty(GroupedCategoryAxis.prototype, \"domain\", {\n    get: function get() {\n      return this.scale.domain;\n    },\n    set: function set(value) {\n      this.scale.domain = value;\n      var tickTree = ticksToTree(value);\n      this.tickTreeLayout = treeLayout(tickTree);\n      var domain = value.slice();\n      domain.push('');\n      this.tickScale.domain = domain;\n      this.resizeTickTree();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(GroupedCategoryAxis.prototype, \"range\", {\n    get: function get() {\n      return this.requestedRange.slice();\n    },\n    set: function set(value) {\n      this.requestedRange = value.slice();\n      this.updateRange();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  GroupedCategoryAxis.prototype.updateRange = function () {\n    var _a = this,\n      rr = _a.requestedRange,\n      vr = _a.visibleRange,\n      scale = _a.scale;\n    var span = (rr[1] - rr[0]) / (vr[1] - vr[0]);\n    var shift = span * vr[0];\n    var start = rr[0] - shift;\n    this.tickScale.range = scale.range = [start, start + span];\n    this.resizeTickTree();\n  };\n  GroupedCategoryAxis.prototype.resizeTickTree = function () {\n    var s = this.scale;\n    var range = s.domain.length ? [s.convert(s.domain[0]), s.convert(s.domain[s.domain.length - 1])] : s.range;\n    var layout = this.tickTreeLayout;\n    var lineHeight = this.lineHeight;\n    if (layout) {\n      layout.resize(Math.abs(range[1] - range[0]), layout.depth * lineHeight, (Math.min(range[0], range[1]) || 0) + (s.bandwidth || 0) / 2, -layout.depth * lineHeight, range[1] - range[0] < 0);\n    }\n  };\n  Object.defineProperty(GroupedCategoryAxis.prototype, \"lineHeight\", {\n    get: function get() {\n      return this.label.fontSize * 1.5;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(GroupedCategoryAxis.prototype, \"gridLength\", {\n    get: function get() {\n      return this._gridLength;\n    },\n    /**\n     * The length of the grid. The grid is only visible in case of a non-zero value.\n     */\n    set: function set(value) {\n      // Was visible and now invisible, or was invisible and now visible.\n      if (this._gridLength && !value || !this._gridLength && value) {\n        this.gridLineSelection = this.gridLineSelection.remove().setData([]);\n        this.labelSelection = this.labelSelection.remove().setData([]);\n      }\n      this._gridLength = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * Creates/removes/updates the scene graph nodes that constitute the axis.\n   * Supposed to be called _manually_ after changing _any_ of the axis properties.\n   * This allows to bulk set axis properties before updating the nodes.\n   * The node changes made by this method are rendered on the next animation frame.\n   * We could schedule this method call automatically on the next animation frame\n   * when any of the axis properties change (the way we do when properties of scene graph's\n   * nodes change), but this will mean that we first wait for the next animation\n   * frame to make changes to the nodes of the axis, then wait for another animation\n   * frame to render those changes. It's nice to have everything update automatically,\n   * but this extra level of async indirection will not just introduce an unwanted delay,\n   * it will also make it harder to reason about the program.\n   */\n  GroupedCategoryAxis.prototype.update = function () {\n    var _this = this;\n    var _a = this,\n      group = _a.group,\n      scale = _a.scale,\n      label = _a.label,\n      tickScale = _a.tickScale,\n      requestedRange = _a.requestedRange;\n    var rangeStart = scale.range[0];\n    var rangeEnd = scale.range[1];\n    var rangeLength = Math.abs(rangeEnd - rangeStart);\n    var bandwidth = rangeLength / scale.domain.length || 0;\n    var parallelLabels = label.parallel;\n    var rotation = toRadians(this.rotation);\n    var isHorizontal = Math.abs(Math.cos(rotation)) < 1e-8;\n    var labelRotation = normalizeAngle360(toRadians(this.label.rotation));\n    group.translationX = this.translation.x;\n    group.translationY = this.translation.y;\n    group.rotation = rotation;\n    var title = this.title;\n    // The Text `node` of the Caption is not used to render the title of the grouped category axis.\n    // The phantom root of the tree layout is used instead.\n    if (title) {\n      title.node.visible = false;\n    }\n    var lineHeight = this.lineHeight;\n    // Render ticks and labels.\n    var tickTreeLayout = this.tickTreeLayout;\n    var labels = scale.ticks();\n    var treeLabels = tickTreeLayout ? tickTreeLayout.nodes : [];\n    var isLabelTree = tickTreeLayout ? tickTreeLayout.depth > 1 : false;\n    var ticks = tickScale.ticks();\n    // The side of the axis line to position the labels on.\n    // -1 = left (default)\n    //  1 = right\n    var sideFlag = label.mirrored ? 1 : -1;\n    // When labels are parallel to the axis line, the `parallelFlipFlag` is used to\n    // flip the labels to avoid upside-down text, when the axis is rotated\n    // such that it is in the right hemisphere, i.e. the angle of rotation\n    // is in the [0, ] interval.\n    // The rotation angle is normalized, so that we have an easier time checking\n    // if it's in the said interval. Since the axis is always rendered vertically\n    // and then rotated, zero rotation means 12 (not 3) o-clock.\n    // -1 = flip\n    //  1 = don't flip (default)\n    var parallelFlipRotation = normalizeAngle360(rotation);\n    var parallelFlipFlag = !labelRotation && parallelFlipRotation >= 0 && parallelFlipRotation <= Math.PI ? -1 : 1;\n    var regularFlipRotation = normalizeAngle360(rotation - Math.PI / 2);\n    // Flip if the axis rotation angle is in the top hemisphere.\n    var regularFlipFlag = !labelRotation && regularFlipRotation >= 0 && regularFlipRotation <= Math.PI ? -1 : 1;\n    var updateGridLines = this.gridLineSelection.setData(this.gridLength ? ticks : []);\n    updateGridLines.exit.remove();\n    var enterGridLines = updateGridLines.enter.append(Line);\n    var gridLineSelection = updateGridLines.merge(enterGridLines);\n    var updateLabels = this.labelSelection.setData(treeLabels);\n    updateLabels.exit.remove();\n    var enterLabels = updateLabels.enter.append(Text);\n    var labelSelection = updateLabels.merge(enterLabels);\n    var labelFormatter = label.formatter;\n    var maxLeafLabelWidth = 0;\n    labelSelection.each(function (node, datum, index) {\n      node.fontStyle = label.fontStyle;\n      node.fontWeight = label.fontWeight;\n      node.fontSize = label.fontSize;\n      node.fontFamily = label.fontFamily;\n      node.fill = label.color;\n      node.textBaseline = parallelFlipFlag === -1 ? 'bottom' : 'hanging';\n      // label.textBaseline = parallelLabels && !labelRotation\n      //     ? (sideFlag * parallelFlipFlag === -1 ? 'hanging' : 'bottom')\n      //     : 'middle';\n      node.textAlign = 'center';\n      node.translationX = datum.screenY - label.fontSize * 0.25;\n      node.translationY = datum.screenX;\n      if (index === 0) {\n        // use the phantom root as the axis title\n        if (title && title.enabled && labels.length > 0) {\n          node.visible = true;\n          node.text = title.text;\n          node.fontSize = title.fontSize;\n          node.fontStyle = title.fontStyle;\n          node.fontWeight = title.fontWeight;\n          node.fontFamily = title.fontFamily;\n          node.textBaseline = 'hanging';\n        } else {\n          node.visible = false;\n        }\n      } else {\n        node.text = labelFormatter ? labelFormatter({\n          value: String(datum.label),\n          index: index\n        }) : String(datum.label);\n        node.visible = datum.screenX >= requestedRange[0] && datum.screenX <= requestedRange[1];\n      }\n      var bbox = node.computeBBox();\n      if (bbox && bbox.width > maxLeafLabelWidth) {\n        maxLeafLabelWidth = bbox.width;\n      }\n    });\n    var labelX = sideFlag * label.padding;\n    var autoRotation = parallelLabels ? parallelFlipFlag * Math.PI / 2 : regularFlipFlag === -1 ? Math.PI : 0;\n    var labelGrid = this.label.grid;\n    var separatorData = [];\n    labelSelection.each(function (label, datum, index) {\n      label.x = labelX;\n      label.rotationCenterX = labelX;\n      if (!datum.children.length) {\n        label.rotation = labelRotation;\n        label.textAlign = 'end';\n        label.textBaseline = 'middle';\n      } else {\n        label.translationX -= maxLeafLabelWidth - lineHeight + _this.label.padding;\n        if (isHorizontal) {\n          label.rotation = autoRotation;\n        } else {\n          label.rotation = -Math.PI / 2;\n        }\n      }\n      // Calculate positions of label separators for all nodes except the root.\n      // Each separator is placed to the top of the current label.\n      if (datum.parent && isLabelTree) {\n        var y = !datum.children.length ? datum.screenX - bandwidth / 2 : datum.screenX - datum.leafCount * bandwidth / 2;\n        if (!datum.children.length) {\n          if (datum.number !== datum.children.length - 1 || labelGrid) {\n            separatorData.push({\n              y: y,\n              x1: 0,\n              x2: -maxLeafLabelWidth - _this.label.padding * 2,\n              toString: function toString() {\n                return String(index);\n              }\n            });\n          }\n        } else {\n          var x = -maxLeafLabelWidth - _this.label.padding * 2 + datum.screenY;\n          separatorData.push({\n            y: y,\n            x1: x + lineHeight,\n            x2: x,\n            toString: function toString() {\n              return String(index);\n            }\n          });\n        }\n      }\n    });\n    // Calculate the position of the long separator on the far bottom of the axis.\n    var minX = 0;\n    separatorData.forEach(function (d) {\n      return minX = Math.min(minX, d.x2);\n    });\n    this.longestSeparatorLength = Math.abs(minX);\n    separatorData.push({\n      y: Math.max(rangeStart, rangeEnd),\n      x1: 0,\n      x2: minX,\n      toString: function toString() {\n        return String(separatorData.length);\n      }\n    });\n    var updateSeparators = this.separatorSelection.setData(separatorData);\n    updateSeparators.exit.remove();\n    var enterSeparators = updateSeparators.enter.append(Line);\n    var separatorSelection = updateSeparators.merge(enterSeparators);\n    this.separatorSelection = separatorSelection;\n    var epsilon = 0.0000001;\n    separatorSelection.each(function (line, datum, i) {\n      line.x1 = datum.x1;\n      line.x2 = datum.x2;\n      line.y1 = datum.y;\n      line.y2 = datum.y;\n      line.visible = datum.y >= requestedRange[0] - epsilon && datum.y <= requestedRange[1] + epsilon;\n      line.stroke = _this.tick.color;\n      line.fill = undefined;\n      line.strokeWidth = 1;\n    });\n    this.gridLineSelection = gridLineSelection;\n    this.labelSelection = labelSelection;\n    // Render axis lines.\n    var lineCount = tickTreeLayout ? tickTreeLayout.depth + 1 : 1;\n    var lines = [];\n    for (var i = 0; i < lineCount; i++) {\n      lines.push(i);\n    }\n    var updateAxisLines = this.axisLineSelection.setData(lines);\n    updateAxisLines.exit.remove();\n    var enterAxisLines = updateAxisLines.enter.append(Line);\n    var axisLineSelection = updateAxisLines.merge(enterAxisLines);\n    this.axisLineSelection = axisLineSelection;\n    axisLineSelection.each(function (line, _, index) {\n      var x = index > 0 ? -maxLeafLabelWidth - _this.label.padding * 2 - (index - 1) * lineHeight : 0;\n      line.x1 = x;\n      line.x2 = x;\n      line.y1 = requestedRange[0];\n      line.y2 = requestedRange[1];\n      line.strokeWidth = _this.line.width;\n      line.stroke = _this.line.color;\n      line.visible = labels.length > 0 && (index === 0 || labelGrid && isLabelTree);\n    });\n    if (this.gridLength) {\n      var styles_1 = this.gridStyle;\n      var styleCount_1 = styles_1.length;\n      gridLineSelection.each(function (line, datum, index) {\n        var y = Math.round(tickScale.convert(datum));\n        line.x1 = 0;\n        line.x2 = -sideFlag * _this.gridLength;\n        line.y1 = y;\n        line.y2 = y;\n        line.visible = y >= requestedRange[0] && y <= requestedRange[1] && Math.abs(line.parent.translationY - rangeStart) > 1;\n        var style = styles_1[index % styleCount_1];\n        line.stroke = style.stroke;\n        line.strokeWidth = _this.tick.width;\n        line.lineDash = style.lineDash;\n        line.fill = undefined;\n      });\n    }\n    // debug (bbox)\n    // const bbox = this.computeBBox();\n    // const bboxRect = this.bboxRect;\n    // bboxRect.x = bbox.x;\n    // bboxRect.y = bbox.y;\n    // bboxRect.width = bbox.width;\n    // bboxRect.height = bbox.height;\n  };\n\n  GroupedCategoryAxis.prototype.computeBBox = function (options) {\n    var includeTitle = !options || !options.excludeTitle;\n    var left = Infinity;\n    var right = -Infinity;\n    var top = Infinity;\n    var bottom = -Infinity;\n    this.labelSelection.each(function (label, _, index) {\n      // The label itself is rotated, but not translated, the group that\n      // contains it is. So to capture the group transform in the label bbox\n      // calculation we combine the transform matrices of the label and the group.\n      // Depending on the timing of the `axis.computeBBox()` method call, we may\n      // not have the group's and the label's transform matrices updated yet (because\n      // the transform matrix is not recalculated whenever a node's transform attributes\n      // change, instead it's marked for recalculation on the next frame by setting\n      // the node's `dirtyTransform` flag to `true`), so we force them to update\n      // right here by calling `computeTransformMatrix`.\n      if (index > 0 || includeTitle) {\n        // first node is the root (title)\n        label.computeTransformMatrix();\n        var matrix = Matrix.flyweight(label.matrix);\n        var labelBBox = label.computeBBox();\n        if (labelBBox) {\n          var bbox = matrix.transformBBox(labelBBox);\n          left = Math.min(left, bbox.x);\n          right = Math.max(right, bbox.x + bbox.width);\n          top = Math.min(top, bbox.y);\n          bottom = Math.max(bottom, bbox.y + bbox.height);\n        }\n      }\n    });\n    return new BBox(left, top, Math.max(right - left, this.longestSeparatorLength), bottom - top);\n  };\n  // debug (bbox)\n  // private bboxRect = (() => {\n  //     const rect = new Rect();\n  //     rect.fill = undefined;\n  //     rect.stroke = 'red';\n  //     rect.strokeWidth = 1;\n  //     rect.strokeOpacity = 0.7;\n  //     return rect;\n  // })();\n  GroupedCategoryAxis.className = 'GroupedCategoryAxis';\n  GroupedCategoryAxis.type = 'groupedCategory';\n  return GroupedCategoryAxis;\n}(ChartAxis);\nvar __extends$T = undefined && undefined.__extends || function () {\n  var _extendStatics56 = function extendStatics(d, b) {\n    _extendStatics56 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics56(d, b);\n  };\n  return function (d, b) {\n    _extendStatics56(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar t0 = new Date();\nvar t1 = new Date();\n/**\n * The interval methods don't mutate Date parameters.\n */\nvar TimeInterval = /** @class */function () {\n  function TimeInterval(floor, offset) {\n    this._floor = floor;\n    this._offset = offset;\n  }\n  /**\n   * Returns a new date representing the latest interval boundary date before or equal to date.\n   * For example, `day.floor(date)` typically returns 12:00 AM local time on the given date.\n   * @param date\n   */\n  TimeInterval.prototype.floor = function (date) {\n    date = new Date(+date);\n    this._floor(date);\n    return date;\n  };\n  /**\n   * Returns a new date representing the earliest interval boundary date after or equal to date.\n   * @param date\n   */\n  TimeInterval.prototype.ceil = function (date) {\n    date = new Date(+date - 1);\n    this._floor(date);\n    this._offset(date, 1);\n    this._floor(date);\n    return date;\n  };\n  /**\n   * Returns a new date representing the closest interval boundary date to date.\n   * @param date\n   */\n  TimeInterval.prototype.round = function (date) {\n    var d0 = this.floor(date);\n    var d1 = this.ceil(date);\n    var ms = +date;\n    return ms - d0.getTime() < d1.getTime() - ms ? d0 : d1;\n  };\n  /**\n   * Returns a new date equal to date plus step intervals.\n   * @param date\n   * @param step\n   */\n  TimeInterval.prototype.offset = function (date, step) {\n    if (step === void 0) {\n      step = 1;\n    }\n    date = new Date(+date);\n    this._offset(date, Math.floor(step));\n    return date;\n  };\n  /**\n   * Returns an array of dates representing every interval boundary after or equal to start (inclusive) and before stop (exclusive).\n   * @param start\n   * @param stop\n   * @param step\n   */\n  TimeInterval.prototype.range = function (start, stop, step) {\n    if (step === void 0) {\n      step = 1;\n    }\n    var range = [];\n    start = this.ceil(start);\n    step = Math.floor(step);\n    if (start > stop || step <= 0) {\n      return range;\n    }\n    var previous;\n    do {\n      previous = new Date(+start);\n      range.push(previous);\n      this._offset(start, step);\n      this._floor(start);\n    } while (previous < start && start < stop);\n    return range;\n  };\n  // Returns an interval that is a subset of this interval.\n  // For example, to create an interval that return 1st, 11th, 21st and 31st of each month:\n  // day.filter(date => (date.getDate() - 1) % 10 === 0)\n  TimeInterval.prototype.filter = function (test) {\n    var _this = this;\n    var floor = function floor(date) {\n      if (date >= date) {\n        while (_this._floor(date), !test(date)) {\n          date.setTime(date.getTime() - 1);\n        }\n      }\n      return date;\n    };\n    var offset = function offset(date, step) {\n      if (date >= date) {\n        if (step < 0) {\n          while (++step <= 0) {\n            do {\n              _this._offset(date, -1);\n            } while (!test(date));\n          }\n        } else {\n          while (--step >= 0) {\n            do {\n              _this._offset(date, 1);\n            } while (!test(date));\n          }\n        }\n      }\n      return date;\n    };\n    return new TimeInterval(floor, offset);\n  };\n  return TimeInterval;\n}();\nvar CountableTimeInterval = /** @class */function (_super) {\n  __extends$T(CountableTimeInterval, _super);\n  function CountableTimeInterval(floor, offset, count, field) {\n    var _this = _super.call(this, floor, offset) || this;\n    _this._count = count;\n    _this._field = field;\n    return _this;\n  }\n  /**\n   * Returns the number of interval boundaries after start (exclusive) and before or equal to end (inclusive).\n   * @param start\n   * @param end\n   */\n  CountableTimeInterval.prototype.count = function (start, end) {\n    t0.setTime(+start);\n    t1.setTime(+end);\n    this._floor(t0);\n    this._floor(t1);\n    return Math.floor(this._count(t0, t1));\n  };\n  /**\n   * Returns a filtered view of this interval representing every step'th date.\n   * The meaning of step is dependent on this intervals parent interval as defined by the `field` function.\n   * @param step\n   */\n  CountableTimeInterval.prototype.every = function (step) {\n    var _this = this;\n    var result;\n    step = Math.floor(step);\n    if (isFinite(step) && step > 0) {\n      if (step > 1) {\n        var field_1 = this._field;\n        if (field_1) {\n          result = this.filter(function (d) {\n            return field_1(d) % step === 0;\n          });\n        } else {\n          result = this.filter(function (d) {\n            return _this.count(0, d) % step === 0;\n          });\n        }\n      } else {\n        result = this;\n      }\n    }\n    return result;\n  };\n  return CountableTimeInterval;\n}(TimeInterval);\nfunction floor(date) {\n  return date;\n}\nfunction offset(date, milliseconds) {\n  date.setTime(date.getTime() + milliseconds);\n}\nfunction count(start, end) {\n  return end.getTime() - start.getTime();\n}\nvar millisecond = new CountableTimeInterval(floor, offset, count);\n\n// Common time unit sizes in milliseconds.\nvar durationSecond = 1000;\nvar durationMinute = durationSecond * 60;\nvar durationHour = durationMinute * 60;\nvar durationDay = durationHour * 24;\nvar durationWeek = durationDay * 7;\nvar durationMonth = durationDay * 30;\nvar durationYear = durationDay * 365;\nfunction floor$1(date) {\n  date.setTime(date.getTime() - date.getMilliseconds());\n}\nfunction offset$1(date, seconds) {\n  date.setTime(date.getTime() + seconds * durationSecond);\n}\nfunction count$1(start, end) {\n  return (end.getTime() - start.getTime()) / durationSecond;\n}\nvar second = new CountableTimeInterval(floor$1, offset$1, count$1);\nfunction floor$2(date) {\n  date.setTime(date.getTime() - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}\nfunction offset$2(date, minutes) {\n  date.setTime(date.getTime() + minutes * durationMinute);\n}\nfunction count$2(start, end) {\n  return (end.getTime() - start.getTime()) / durationMinute;\n}\nfunction field(date) {\n  return date.getMinutes();\n}\nvar minute = new CountableTimeInterval(floor$2, offset$2, count$2, field);\nfunction floor$3(date) {\n  date.setTime(date.getTime() - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}\nfunction offset$3(date, hours) {\n  date.setTime(date.getTime() + hours * durationHour);\n}\nfunction count$3(start, end) {\n  return (end.getTime() - start.getTime()) / durationHour;\n}\nfunction field$1(date) {\n  return date.getHours();\n}\nvar hour = new CountableTimeInterval(floor$3, offset$3, count$3, field$1);\nfunction floor$4(date) {\n  date.setHours(0, 0, 0, 0);\n}\nfunction offset$4(date, days) {\n  date.setDate(date.getDate() + days);\n}\nfunction count$4(start, end) {\n  var tzMinuteDelta = end.getTimezoneOffset() - start.getTimezoneOffset();\n  return (end.getTime() - start.getTime() - tzMinuteDelta * durationMinute) / durationDay;\n}\nfunction field$2(date) {\n  return date.getDate() - 1;\n}\nvar day = new CountableTimeInterval(floor$4, offset$4, count$4, field$2);\n\n// Set date to n-th day of the week.\nfunction weekday(n) {\n  // Sets the `date` to the start of the `n`-th day of the current week.\n  // n == 0 is Sunday.\n  function floor(date) {\n    //                  1..31            1..7\n    date.setDate(date.getDate() - (date.getDay() + 7 - n) % 7);\n    date.setHours(0, 0, 0, 0); // h, m, s, ms\n  }\n  // Offset the date by the given number of weeks.\n  function offset(date, weeks) {\n    date.setDate(date.getDate() + weeks * 7);\n  }\n  // Count the number of weeks between the start and end dates.\n  function count(start, end) {\n    var msDelta = end.getTime() - start.getTime();\n    var tzMinuteDelta = end.getTimezoneOffset() - start.getTimezoneOffset();\n    return (msDelta - tzMinuteDelta * durationMinute) / durationWeek;\n  }\n  return new CountableTimeInterval(floor, offset, count);\n}\nvar sunday = weekday(0);\nvar monday = weekday(1);\nvar tuesday = weekday(2);\nvar wednesday = weekday(3);\nvar thursday = weekday(4);\nvar friday = weekday(5);\nvar saturday = weekday(6);\nfunction floor$5(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}\nfunction offset$5(date, months) {\n  date.setMonth(date.getMonth() + months);\n}\nfunction count$5(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}\nfunction field$3(date) {\n  return date.getMonth();\n}\nvar month = new CountableTimeInterval(floor$5, offset$5, count$5, field$3);\nfunction floor$6(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}\nfunction offset$6(date, years) {\n  date.setFullYear(date.getFullYear() + years);\n}\nfunction count$6(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}\nfunction field$4(date) {\n  return date.getFullYear();\n}\nvar year = new CountableTimeInterval(floor$6, offset$6, count$6, field$4);\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\nfunction complexBisectRight(list, x, map, lo, hi) {\n  if (lo === void 0) {\n    lo = 0;\n  }\n  if (hi === void 0) {\n    hi = list.length;\n  }\n  var comparator = ascendingComparator(map);\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n    if (comparator(list[mid], x) < 0) {\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n  return lo;\n}\nfunction ascendingComparator(map) {\n  return function (item, x) {\n    return ascending(map(item), x);\n  };\n}\nfunction floor$7(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}\nfunction offset$7(date, days) {\n  date.setUTCDate(date.getUTCDate() + days);\n}\nfunction count$7(start, end) {\n  return (end.getTime() - start.getTime()) / durationDay;\n}\nfunction field$5(date) {\n  return date.getUTCDate() - 1;\n}\nvar utcDay = new CountableTimeInterval(floor$7, offset$7, count$7, field$5);\nfunction floor$8(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}\nfunction offset$8(date, years) {\n  date.setUTCFullYear(date.getUTCFullYear() + years);\n}\nfunction count$8(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}\nfunction field$6(date) {\n  return date.getUTCFullYear();\n}\nvar utcYear = new CountableTimeInterval(floor$8, offset$8, count$8, field$6);\n\n// Set date to n-th day of the week.\nfunction weekday$1(n) {\n  // Sets the `date` to the start of the `n`-th day of the current week.\n  // n == 0 is Sunday.\n  function floor(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - n) % 7);\n    date.setHours(0, 0, 0, 0); // h, m, s, ms\n  }\n  // Offset the date by the given number of weeks.\n  function offset(date, weeks) {\n    date.setUTCDate(date.getUTCDate() + weeks * 7);\n  }\n  // Count the number of weeks between the start and end dates.\n  function count(start, end) {\n    return (end.getTime() - start.getTime()) / durationWeek;\n  }\n  return new CountableTimeInterval(floor, offset, count);\n}\nvar utcSunday = weekday$1(0);\nvar utcMonday = weekday$1(1);\nvar utcTuesday = weekday$1(2);\nvar utcWednesday = weekday$1(3);\nvar utcThursday = weekday$1(4);\nvar utcFriday = weekday$1(5);\nvar utcSaturday = weekday$1(6);\nfunction localDate(d) {\n  // For JS Dates the [0, 100) interval is a time warp, a fast forward to the 20th century.\n  // For example, -1 is -0001 BC, 0 is already 1900 AD.\n  if (d.y >= 0 && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\nfunction utcDate(d) {\n  if (d.y >= 0 && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n/**\n * Creates a lookup map for array of names to go from a name to index.\n * @param names\n */\nfunction formatLookup(names) {\n  var map = {};\n  for (var i = 0, n = names.length; i < n; i++) {\n    map[names[i].toLowerCase()] = i;\n  }\n  return map;\n}\nfunction newYear(y) {\n  return {\n    y: y,\n    m: 0,\n    d: 1,\n    H: 0,\n    M: 0,\n    S: 0,\n    L: 0\n  };\n}\nvar percentCharCode = 37;\nvar numberRe = /^\\s*\\d+/; // ignores next directive\nvar percentRe = /^%/;\nvar requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n/**\n * Prepends any character in the `requoteRe` set with a backslash.\n * @param s\n */\nvar requote = function requote(s) {\n  return s.replace(requoteRe, '\\\\$&');\n}; // $& - matched substring\n/**\n * Returns a RegExp that matches any string that starts with any of the given names (case insensitive).\n * @param names\n */\nvar formatRe = function formatRe(names) {\n  return new RegExp('^(?:' + names.map(requote).join('|') + ')', 'i');\n};\n// A map of padding modifiers to padding strings. Default is `0`.\nvar pads = {\n  '-': '',\n  '_': ' ',\n  '0': '0'\n};\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? '-' : '';\n  var string = String(sign ? -value : value);\n  var length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n/**\n * Create a new time-locale-based object which exposes time-formatting\n * methods for the specified locale definition.\n *\n * @param timeLocale A time locale definition.\n */\nfunction formatLocale(timeLocale) {\n  var lDateTime = timeLocale.dateTime;\n  var lDate = timeLocale.date;\n  var lTime = timeLocale.time;\n  var lPeriods = timeLocale.periods;\n  var lWeekdays = timeLocale.days;\n  var lShortWeekdays = timeLocale.shortDays;\n  var lMonths = timeLocale.months;\n  var lShortMonths = timeLocale.shortMonths;\n  var periodRe = formatRe(lPeriods);\n  var periodLookup = formatLookup(lPeriods);\n  var weekdayRe = formatRe(lWeekdays);\n  var weekdayLookup = formatLookup(lWeekdays);\n  var shortWeekdayRe = formatRe(lShortWeekdays);\n  var shortWeekdayLookup = formatLookup(lShortWeekdays);\n  var monthRe = formatRe(lMonths);\n  var monthLookup = formatLookup(lMonths);\n  var shortMonthRe = formatRe(lShortMonths);\n  var shortMonthLookup = formatLookup(lShortMonths);\n  var formats = {\n    'a': formatShortWeekday,\n    'A': formatWeekday,\n    'b': formatShortMonth,\n    'B': formatMonth,\n    'c': undefined,\n    'd': formatDayOfMonth,\n    'e': formatDayOfMonth,\n    'f': formatMicroseconds,\n    'H': formatHour24,\n    'I': formatHour12,\n    'j': formatDayOfYear,\n    'L': formatMilliseconds,\n    'm': formatMonthNumber,\n    'M': formatMinutes,\n    'p': formatPeriod,\n    'Q': formatUnixTimestamp,\n    's': formatUnixTimestampSeconds,\n    'S': formatSeconds,\n    'u': formatWeekdayNumberMonday,\n    'U': formatWeekNumberSunday,\n    'V': formatWeekNumberISO,\n    'w': formatWeekdayNumberSunday,\n    'W': formatWeekNumberMonday,\n    'x': undefined,\n    'X': undefined,\n    'y': formatYear,\n    'Y': formatFullYear,\n    'Z': formatZone,\n    '%': formatLiteralPercent\n  };\n  var utcFormats = {\n    'a': formatUTCShortWeekday,\n    'A': formatUTCWeekday,\n    'b': formatUTCShortMonth,\n    'B': formatUTCMonth,\n    'c': undefined,\n    'd': formatUTCDayOfMonth,\n    'e': formatUTCDayOfMonth,\n    'f': formatUTCMicroseconds,\n    'H': formatUTCHour24,\n    'I': formatUTCHour12,\n    'j': formatUTCDayOfYear,\n    'L': formatUTCMilliseconds,\n    'm': formatUTCMonthNumber,\n    'M': formatUTCMinutes,\n    'p': formatUTCPeriod,\n    'Q': formatUnixTimestamp,\n    's': formatUnixTimestampSeconds,\n    'S': formatUTCSeconds,\n    'u': formatUTCWeekdayNumberMonday,\n    'U': formatUTCWeekNumberSunday,\n    'V': formatUTCWeekNumberISO,\n    'w': formatUTCWeekdayNumberSunday,\n    'W': formatUTCWeekNumberMonday,\n    'x': undefined,\n    'X': undefined,\n    'y': formatUTCYear,\n    'Y': formatUTCFullYear,\n    'Z': formatUTCZone,\n    '%': formatLiteralPercent\n  };\n  var parses = {\n    'a': parseShortWeekday,\n    'A': parseWeekday,\n    'b': parseShortMonth,\n    'B': parseMonth,\n    'c': parseLocaleDateTime,\n    'd': parseDayOfMonth,\n    'e': parseDayOfMonth,\n    'f': parseMicroseconds,\n    'H': parseHour24,\n    'I': parseHour24,\n    'j': parseDayOfYear,\n    'L': parseMilliseconds,\n    'm': parseMonthNumber,\n    'M': parseMinutes,\n    'p': parsePeriod,\n    'Q': parseUnixTimestamp,\n    's': parseUnixTimestampSeconds,\n    'S': parseSeconds,\n    'u': parseWeekdayNumberMonday,\n    'U': parseWeekNumberSunday,\n    'V': parseWeekNumberISO,\n    'w': parseWeekdayNumberSunday,\n    'W': parseWeekNumberMonday,\n    'x': parseLocaleDate,\n    'X': parseLocaleTime,\n    'y': parseYear,\n    'Y': parseFullYear,\n    'Z': parseZone,\n    '%': parseLiteralPercent\n  };\n  // Recursive definitions.\n  formats.x = newFormat(lDate, formats);\n  formats.X = newFormat(lTime, formats);\n  formats.c = newFormat(lDateTime, formats);\n  utcFormats.x = newFormat(lDate, utcFormats);\n  utcFormats.X = newFormat(lTime, utcFormats);\n  utcFormats.c = newFormat(lDateTime, utcFormats);\n  function newParse(specifier, newDate) {\n    return function (str) {\n      var d = newYear(1900);\n      var i = parseSpecifier(d, specifier, str += '', 0);\n      if (i != str.length) {\n        return undefined;\n      }\n      // If a UNIX timestamp is specified, return it.\n      if ('Q' in d) {\n        return new Date(d.Q);\n      }\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if ('p' in d) {\n        d.H = d.H % 12 + d.p * 12;\n      }\n      // Convert day-of-week and week-of-year to day-of-year.\n      if ('V' in d) {\n        if (d.V < 1 || d.V > 53) {\n          return undefined;\n        }\n        if (!('w' in d)) {\n          d.w = 1;\n        }\n        if ('Z' in d) {\n          var week = utcDate(newYear(d.y));\n          var day$1 = week.getUTCDay();\n          week = day$1 > 4 || day$1 === 0 ? utcMonday.ceil(week) : utcMonday.floor(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          var week = newDate(newYear(d.y));\n          var day$1 = week.getDay();\n          week = day$1 > 4 || day$1 === 0 ? monday.ceil(week) : monday.floor(week);\n          week = day.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if ('W' in d || 'U' in d) {\n        if (!('w' in d)) {\n          d.w = 'u' in d ? d.u % 7 : 'W' in d ? 1 : 0;\n        }\n        var day$1 = 'Z' in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n        d.m = 0;\n        d.d = 'W' in d ? (d.w + 6) % 7 + d.W * 7 - (day$1 + 5) % 7 : d.w + d.U * 7 - (day$1 + 6) % 7;\n      }\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if ('Z' in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n      // Otherwise, all fields are in local time.\n      return newDate(d);\n    };\n  }\n  /**\n   * Creates a new function that formats the given Date or timestamp according to specifier.\n   * @param specifier\n   * @param formats\n   */\n  function newFormat(specifier, formats) {\n    return function (date) {\n      var string = [];\n      var n = specifier.length;\n      var i = -1;\n      var j = 0;\n      if (!(date instanceof Date)) {\n        date = new Date(+date);\n      }\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === percentCharCode) {\n          string.push(specifier.slice(j, i)); // copy the chunks of specifier with no directives as is\n          var c = specifier.charAt(++i);\n          var pad_1 = pads[c];\n          if (pad_1 != undefined) {\n            // if format directive has a padding modifier in front of it\n            c = specifier.charAt(++i); // fetch the directive itself\n          } else {\n            pad_1 = c === 'e' ? ' ' : '0'; // use the default padding modifier\n          }\n\n          var format = formats[c];\n          if (format) {\n            // if the directive has a corresponding formatting function\n            c = format(date, pad_1); // replace the directive with the formatted date\n          }\n\n          string.push(c);\n          j = i + 1;\n        }\n      }\n      string.push(specifier.slice(j, i));\n      return string.join('');\n    };\n  }\n  // Simultaneously walks over the specifier and the parsed string, populating the `d` map with parsed values.\n  // The returned number is expected to equal the length of the parsed `string`, if parsing succeeded.\n  function parseSpecifier(d, specifier, string, j) {\n    // i - `specifier` string index\n    // j - parsed `string` index\n    var i = 0;\n    var n = specifier.length;\n    var m = string.length;\n    while (i < n) {\n      if (j >= m) {\n        return -1;\n      }\n      var code = specifier.charCodeAt(i++);\n      if (code === percentCharCode) {\n        var char = specifier.charAt(i++);\n        var parse = parses[char in pads ? specifier.charAt(i++) : char];\n        if (!parse || (j = parse(d, string, j)) < 0) {\n          return -1;\n        }\n      } else if (code != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n    return j;\n  }\n  // ----------------------------- formats ----------------------------------\n  function formatMicroseconds(date, fill) {\n    return formatMilliseconds(date, fill) + '000';\n  }\n  function formatMilliseconds(date, fill) {\n    return pad(date.getMilliseconds(), fill, 3);\n  }\n  function formatSeconds(date, fill) {\n    return pad(date.getSeconds(), fill, 2);\n  }\n  function formatMinutes(date, fill) {\n    return pad(date.getMinutes(), fill, 2);\n  }\n  function formatHour12(date, fill) {\n    return pad(date.getHours() % 12 || 12, fill, 2);\n  }\n  function formatHour24(date, fill) {\n    return pad(date.getHours(), fill, 2);\n  }\n  function formatPeriod(date) {\n    return lPeriods[date.getHours() >= 12 ? 1 : 0];\n  }\n  function formatShortWeekday(date) {\n    return lShortWeekdays[date.getDay()];\n  }\n  function formatWeekday(date) {\n    return lWeekdays[date.getDay()];\n  }\n  function formatWeekdayNumberMonday(date) {\n    var dayOfWeek = date.getDay();\n    return dayOfWeek === 0 ? 7 : dayOfWeek;\n  }\n  function formatWeekNumberSunday(date, fill) {\n    return pad(sunday.count(year.floor(date), date), fill, 2);\n  }\n  function formatWeekNumberISO(date, fill) {\n    var day = date.getDay();\n    date = day >= 4 || day === 0 ? thursday.floor(date) : thursday.ceil(date);\n    var yearStart = year.floor(date);\n    return pad(thursday.count(yearStart, date) + (yearStart.getDay() === 4 ? 1 : 0), fill, 2);\n  }\n  function formatWeekdayNumberSunday(date) {\n    return date.getDay();\n  }\n  function formatWeekNumberMonday(date, fill) {\n    return pad(monday.count(year.floor(date), date), fill, 2);\n  }\n  function formatDayOfMonth(date, fill) {\n    return pad(date.getDate(), fill, 2);\n  }\n  function formatDayOfYear(date, fill) {\n    return pad(1 + day.count(year.floor(date), date), fill, 3);\n  }\n  function formatShortMonth(date) {\n    return lShortMonths[date.getMonth()];\n  }\n  function formatMonth(date) {\n    return lMonths[date.getMonth()];\n  }\n  function formatMonthNumber(date, fill) {\n    return pad(date.getMonth() + 1, fill, 2);\n  }\n  function formatYear(date, fill) {\n    return pad(date.getFullYear() % 100, fill, 2);\n  }\n  function formatFullYear(date, fill) {\n    return pad(date.getFullYear() % 10000, fill, 4);\n  }\n  function formatZone(date) {\n    var z = date.getTimezoneOffset();\n    return (z > 0 ? '-' : (z *= -1, '+')) + pad(Math.floor(z / 60), '0', 2) + pad(z % 60, '0', 2);\n  }\n  // -------------------------- UTC formats -----------------------------------\n  function formatUTCMicroseconds(date, fill) {\n    return formatUTCMilliseconds(date, fill) + '000';\n  }\n  function formatUTCMilliseconds(date, fill) {\n    return pad(date.getUTCMilliseconds(), fill, 3);\n  }\n  function formatUTCSeconds(date, fill) {\n    return pad(date.getUTCSeconds(), fill, 2);\n  }\n  function formatUTCMinutes(date, fill) {\n    return pad(date.getUTCMinutes(), fill, 2);\n  }\n  function formatUTCHour12(date, fill) {\n    return pad(date.getUTCHours() % 12 || 12, fill, 2);\n  }\n  function formatUTCHour24(date, fill) {\n    return pad(date.getUTCHours(), fill, 2);\n  }\n  function formatUTCPeriod(date) {\n    return lPeriods[date.getUTCHours() >= 12 ? 1 : 0];\n  }\n  function formatUTCDayOfMonth(date, fill) {\n    return pad(date.getUTCDate(), fill, 2);\n  }\n  function formatUTCDayOfYear(date, fill) {\n    return pad(1 + utcDay.count(utcYear.floor(date), date), fill, 3);\n  }\n  function formatUTCMonthNumber(date, fill) {\n    return pad(date.getUTCMonth() + 1, fill, 2);\n  }\n  function formatUTCShortMonth(date) {\n    return lShortMonths[date.getUTCMonth()];\n  }\n  function formatUTCMonth(date) {\n    return lMonths[date.getUTCMonth()];\n  }\n  function formatUTCShortWeekday(date) {\n    return lShortWeekdays[date.getUTCDay()];\n  }\n  function formatUTCWeekday(date) {\n    return lWeekdays[date.getUTCDay()];\n  }\n  function formatUTCWeekdayNumberMonday(date) {\n    var dayOfWeek = date.getUTCDay();\n    return dayOfWeek === 0 ? 7 : dayOfWeek;\n  }\n  function formatUTCWeekNumberSunday(date, fill) {\n    return pad(utcSunday.count(utcYear.floor(date), date), fill, 2);\n  }\n  function formatUTCWeekNumberISO(date, fill) {\n    var day = date.getUTCDay();\n    date = day >= 4 || day === 0 ? utcThursday.floor(date) : utcThursday.ceil(date);\n    var yearStart = utcYear.floor(date);\n    return pad(utcThursday.count(yearStart, date) + (yearStart.getUTCDay() === 4 ? 1 : 0), fill, 4);\n  }\n  function formatUTCWeekdayNumberSunday(date) {\n    return date.getUTCDay();\n  }\n  function formatUTCWeekNumberMonday(date, fill) {\n    return pad(utcMonday.count(utcYear.floor(date), date), fill, 2);\n  }\n  function formatUTCYear(date, fill) {\n    return pad(date.getUTCFullYear() % 100, fill, 2);\n  }\n  function formatUTCFullYear(date, fill) {\n    return pad(date.getUTCFullYear() % 10000, fill, 4);\n  }\n  function formatUTCZone() {\n    return '+0000';\n  }\n  function formatLiteralPercent(date) {\n    return '%';\n  }\n  function formatUnixTimestamp(date) {\n    return date.getTime();\n  }\n  function formatUnixTimestampSeconds(date) {\n    return Math.floor(date.getTime() / 1000);\n  }\n  // ------------------------------- parsers ------------------------------------\n  function parseMicroseconds(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 6));\n    return n ? (d.L = Math.floor(parseFloat(n[0]) / 1000), i + n[0].length) : -1;\n  }\n  function parseMilliseconds(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 3));\n    return n ? (d.L = +n[0], i + n[0].length) : -1;\n  }\n  function parseSeconds(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.S = +n[0], i + n[0].length) : -1;\n  }\n  function parseMinutes(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.M = +n[0], i + n[0].length) : -1;\n  }\n  function parseHour24(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.H = +n[0], i + n[0].length) : -1;\n  }\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n  function parseDayOfMonth(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.d = +n[0], i + n[0].length) : -1;\n  }\n  function parseDayOfYear(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 3));\n    return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n  }\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n  function parseWeekdayNumberMonday(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 1));\n    return n ? (d.u = +n[0], i + n[0].length) : -1;\n  }\n  function parseWeekNumberSunday(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.U = +n[0], i + n[0].length) : -1;\n  }\n  function parseWeekNumberISO(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.V = +n[0], i + n[0].length) : -1;\n  }\n  function parseWeekNumberMonday(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.W = +n[0], i + n[0].length) : -1;\n  }\n  function parseWeekdayNumberSunday(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 1));\n    return n ? (d.w = +n[0], i + n[0].length) : -1;\n  }\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n  function parseMonthNumber(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.m = parseFloat(n[0]) - 1, i + n[0].length) : -1;\n  }\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, lDateTime, string, i);\n  }\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, lDate, string, i);\n  }\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, lTime, string, i);\n  }\n  function parseUnixTimestamp(d, string, i) {\n    var n = numberRe.exec(string.slice(i));\n    return n ? (d.Q = +n[0], i + n[0].length) : -1;\n  }\n  function parseUnixTimestampSeconds(d, string, i) {\n    var n = numberRe.exec(string.slice(i));\n    return n ? (d.Q = +n[0] * 1000, i + n[0].length) : -1;\n  }\n  function parseYear(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n  }\n  function parseFullYear(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 4));\n    return n ? (d.y = +n[0], i + n[0].length) : -1;\n  }\n  function parseZone(d, string, i) {\n    var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n    return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || '00')), i + n[0].length) : -1;\n  }\n  function parseLiteralPercent(d, string, i) {\n    var n = percentRe.exec(string.slice(i, i + 1));\n    return n ? i + n[0].length : -1;\n  }\n  return {\n    format: function format(specifier) {\n      var f = newFormat(specifier, formats);\n      f.toString = function () {\n        return specifier;\n      };\n      return f;\n    },\n    parse: function parse(specifier) {\n      var p = newParse(specifier, localDate);\n      p.toString = function () {\n        return specifier;\n      };\n      return p;\n    },\n    utcFormat: function utcFormat(specifier) {\n      var f = newFormat(specifier, utcFormats);\n      f.toString = function () {\n        return specifier;\n      };\n      return f;\n    },\n    utcParse: function utcParse(specifier) {\n      var p = newParse(specifier, utcDate);\n      p.toString = function () {\n        return specifier;\n      };\n      return p;\n    }\n  };\n}\nvar locale;\nsetDefaultLocale({\n  dateTime: '%x, %X',\n  date: '%-m/%-d/%Y',\n  time: '%-I:%M:%S %p',\n  periods: ['AM', 'PM'],\n  days: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n  shortDays: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n  months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n  shortMonths: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\n});\nfunction setDefaultLocale(definition) {\n  return locale = formatLocale(definition);\n}\nvar __extends$U = undefined && undefined.__extends || function () {\n  var _extendStatics57 = function extendStatics(d, b) {\n    _extendStatics57 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics57(d, b);\n  };\n  return function (d, b) {\n    _extendStatics57(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar TimeScale = /** @class */function (_super) {\n  __extends$U(TimeScale, _super);\n  function TimeScale() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.year = year;\n    _this.month = month;\n    _this.week = sunday;\n    _this.day = day;\n    _this.hour = hour;\n    _this.minute = minute;\n    _this.second = second;\n    _this.millisecond = millisecond;\n    _this.format = locale.format;\n    /**\n     * Array of default tick intervals in the following format:\n     *\n     *     [\n     *         interval (unit of time),\n     *         number of units (step),\n     *         the length of that number of units in milliseconds\n     *     ]\n     */\n    _this.tickIntervals = [[_this.second, 1, durationSecond], [_this.second, 5, 5 * durationSecond], [_this.second, 15, 15 * durationSecond], [_this.second, 30, 30 * durationSecond], [_this.minute, 1, durationMinute], [_this.minute, 5, 5 * durationMinute], [_this.minute, 15, 15 * durationMinute], [_this.minute, 30, 30 * durationMinute], [_this.hour, 1, durationHour], [_this.hour, 3, 3 * durationHour], [_this.hour, 6, 6 * durationHour], [_this.hour, 12, 12 * durationHour], [_this.day, 1, durationDay], [_this.day, 2, 2 * durationDay], [_this.week, 1, durationWeek], [_this.month, 1, durationMonth], [_this.month, 3, 3 * durationMonth], [_this.year, 1, durationYear]];\n    _this.formatMillisecond = _this.format('.%L');\n    _this.formatSecond = _this.format(':%S');\n    _this.formatMinute = _this.format('%I:%M');\n    _this.formatHour = _this.format('%I %p');\n    _this.formatDay = _this.format('%a %d');\n    _this.formatWeek = _this.format('%b %d');\n    _this.formatMonth = _this.format('%B');\n    _this.formatYear = _this.format('%Y');\n    _this._domain = [new Date(2000, 0, 1), new Date(2000, 0, 2)];\n    return _this;\n  }\n  TimeScale.prototype.defaultTickFormat = function (date) {\n    return (this.second.floor(date) < date ? this.formatMillisecond : this.minute.floor(date) < date ? this.formatSecond : this.hour.floor(date) < date ? this.formatMinute : this.day.floor(date) < date ? this.formatHour : this.month.floor(date) < date ? this.week.floor(date) < date ? this.formatDay : this.formatWeek : this.year.floor(date) < date ? this.formatMonth : this.formatYear)(date);\n  };\n  /**\n   *\n   * @param interval If the `interval` is a number, it's interpreted as the desired tick count\n   * and the method tries to pick an appropriate interval automatically, based on the extent of the domain.\n   * If the `interval` is `undefined`, it defaults to `10`.\n   * If the `interval` is a time interval, simply use it.\n   * @param start The start time (timestamp).\n   * @param stop The end time (timestamp).\n   * @param step Number of intervals between ticks.\n   */\n  TimeScale.prototype.tickInterval = function (interval, start, stop, step) {\n    var _a;\n    if (interval === void 0) {\n      interval = 10;\n    }\n    if (typeof interval === 'number') {\n      var tickCount = interval;\n      var tickIntervals = this.tickIntervals;\n      var target = Math.abs(stop - start) / tickCount;\n      var i = complexBisectRight(tickIntervals, target, function (interval) {\n        return interval[2];\n      });\n      if (i === tickIntervals.length) {\n        step = tickStep(start / durationYear, stop / durationYear, tickCount);\n        interval = this.year;\n      } else if (i) {\n        _a = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i], interval = _a[0], step = _a[1];\n      } else {\n        step = Math.max(tickStep(start, stop, interval), 1);\n        interval = this.millisecond;\n      }\n    }\n    return step == undefined ? interval : interval.every(step);\n  };\n  Object.defineProperty(TimeScale.prototype, \"domain\", {\n    get: function get() {\n      return _super.prototype.getDomain.call(this).map(function (t) {\n        return new Date(t);\n      });\n    },\n    set: function set(values) {\n      _super.prototype.setDomain.call(this, Array.prototype.map.call(values, function (t) {\n        return t instanceof Date ? +t : +new Date(+t);\n      }));\n    },\n    enumerable: true,\n    configurable: true\n  });\n  TimeScale.prototype.invert = function (y) {\n    return new Date(_super.prototype.invert.call(this, y));\n  };\n  /**\n   * Returns uniformly-spaced dates that represent the scale's domain.\n   * @param interval The desired tick count or a time interval object.\n   */\n  TimeScale.prototype.ticks = function (interval) {\n    if (interval === void 0) {\n      interval = 10;\n    }\n    var d = _super.prototype.getDomain.call(this);\n    var t0 = d[0];\n    var t1 = d[d.length - 1];\n    var reverse = t1 < t0;\n    if (reverse) {\n      var _ = t0;\n      t0 = t1;\n      t1 = _;\n    }\n    var t = this.tickInterval(interval, t0, t1);\n    var i = t ? t.range(t0, t1 + 1) : []; // inclusive stop\n    return reverse ? i.reverse() : i;\n  };\n  /**\n   * Returns a time format function suitable for displaying tick values.\n   * @param count Ignored. Used only to satisfy the {@link Scale} interface.\n   * @param specifier If the specifier string is provided, this method is equivalent to\n   * the {@link TimeLocaleObject.format} method.\n   * If no specifier is provided, this method returns the default time format function.\n   */\n  TimeScale.prototype.tickFormat = function (count, specifier) {\n    return specifier == undefined ? this.defaultTickFormat.bind(this) : this.format(specifier);\n  };\n  /**\n   * Extends the domain so that it starts and ends on nice round values.\n   * This method typically modifies the scales domain, and may only extend the bounds to the nearest round value.\n   * @param interval\n   */\n  TimeScale.prototype.nice = function (interval) {\n    if (interval === void 0) {\n      interval = 10;\n    }\n    var d = _super.prototype.getDomain.call(this);\n    var i = this.tickInterval(interval, d[0], d[d.length - 1]);\n    if (i) {\n      this.domain = this._nice(d, i);\n    }\n  };\n  TimeScale.prototype._nice = function (domain, interval) {\n    var _a, _b;\n    domain = domain.slice();\n    var i0 = 0;\n    var i1 = domain.length - 1;\n    var x0 = domain[i0];\n    var x1 = domain[i1];\n    if (x1 < x0) {\n      _a = [i1, i0], i0 = _a[0], i1 = _a[1];\n      _b = [x1, x0], x0 = _b[0], x1 = _b[1];\n    }\n    domain[i0] = interval.floor(x0);\n    domain[i1] = interval.ceil(x1);\n    return domain;\n  };\n  return TimeScale;\n}(ContinuousScale);\nvar __extends$V = undefined && undefined.__extends || function () {\n  var _extendStatics58 = function extendStatics(d, b) {\n    _extendStatics58 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics58(d, b);\n  };\n  return function (d, b) {\n    _extendStatics58(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar TimeAxis = /** @class */function (_super) {\n  __extends$V(TimeAxis, _super);\n  function TimeAxis() {\n    var _this = _super.call(this, new TimeScale()) || this;\n    _this._nice = true;\n    _this.scale.clamp = true;\n    return _this;\n  }\n  Object.defineProperty(TimeAxis.prototype, \"nice\", {\n    get: function get() {\n      return this._nice;\n    },\n    set: function set(value) {\n      if (this._nice !== value) {\n        this._nice = value;\n        if (value && this.scale.nice) {\n          this.scale.nice(10);\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TimeAxis.prototype, \"domain\", {\n    get: function get() {\n      return this.scale.domain;\n    },\n    set: function set(value) {\n      this.scale.domain = value;\n      if (this.nice && this.scale.nice) {\n        this.scale.nice(10);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  TimeAxis.className = 'TimeAxis';\n  TimeAxis.type = 'time';\n  return TimeAxis;\n}(ChartAxis);\nvar Scene = /** @class */function () {\n  // As a rule of thumb, constructors with no parameters are preferred.\n  // A few exceptions are:\n  // - we absolutely need to know something at construction time (document)\n  // - knowing something at construction time meaningfully improves performance (width, height)\n  function Scene(document, width, height) {\n    var _this = this;\n    if (document === void 0) {\n      document = window.document;\n    }\n    this.id = createId(this);\n    this._dirty = false;\n    this.animationFrameId = 0;\n    this._root = null;\n    this.debug = {\n      renderFrameIndex: false,\n      renderBoundingBoxes: false\n    };\n    this._frameIndex = 0;\n    this.render = function () {\n      var _a;\n      var _b = _this,\n        ctx = _b.ctx,\n        root = _b.root,\n        pendingSize = _b.pendingSize;\n      _this.animationFrameId = 0;\n      if (pendingSize) {\n        (_a = _this.canvas).resize.apply(_a, pendingSize);\n        _this.pendingSize = undefined;\n      }\n      if (root && !root.visible) {\n        _this.dirty = false;\n        return;\n      }\n      // start with a blank canvas, clear previous drawing\n      ctx.clearRect(0, 0, _this.width, _this.height);\n      if (root) {\n        ctx.save();\n        if (root.visible) {\n          root.render(ctx);\n        }\n        ctx.restore();\n      }\n      _this._frameIndex++;\n      if (_this.debug.renderFrameIndex) {\n        ctx.fillStyle = 'white';\n        ctx.fillRect(0, 0, 40, 15);\n        ctx.fillStyle = 'black';\n        ctx.fillText(_this.frameIndex.toString(), 2, 10);\n      }\n      _this.dirty = false;\n    };\n    this.canvas = new HdpiCanvas(document, width, height);\n    this.ctx = this.canvas.context;\n  }\n  Object.defineProperty(Scene.prototype, \"container\", {\n    get: function get() {\n      return this.canvas.container;\n    },\n    set: function set(value) {\n      this.canvas.container = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Scene.prototype.download = function (fileName) {\n    this.canvas.download(fileName);\n  };\n  Scene.prototype.getDataURL = function (type) {\n    return this.canvas.getDataURL(type);\n  };\n  Object.defineProperty(Scene.prototype, \"width\", {\n    get: function get() {\n      return this.pendingSize ? this.pendingSize[0] : this.canvas.width;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Scene.prototype, \"height\", {\n    get: function get() {\n      return this.pendingSize ? this.pendingSize[1] : this.canvas.height;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Scene.prototype.resize = function (width, height) {\n    width = Math.round(width);\n    height = Math.round(height);\n    if (width === this.width && height === this.height) {\n      return;\n    }\n    this.pendingSize = [width, height];\n    this.dirty = true;\n  };\n  Object.defineProperty(Scene.prototype, \"dirty\", {\n    get: function get() {\n      return this._dirty;\n    },\n    set: function set(dirty) {\n      if (dirty && !this._dirty) {\n        this.animationFrameId = requestAnimationFrame(this.render);\n      }\n      this._dirty = dirty;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Scene.prototype.cancelRender = function () {\n    if (this.animationFrameId) {\n      cancelAnimationFrame(this.animationFrameId);\n      this.animationFrameId = 0;\n      this._dirty = false;\n    }\n  };\n  Object.defineProperty(Scene.prototype, \"root\", {\n    get: function get() {\n      return this._root;\n    },\n    set: function set(node) {\n      if (node === this._root) {\n        return;\n      }\n      if (this._root) {\n        this._root._setScene(undefined);\n      }\n      this._root = node;\n      if (node) {\n        // If `node` is the root node of another scene ...\n        if (node.parent === null && node.scene && node.scene !== this) {\n          node.scene.root = null;\n        }\n        node._setScene(this);\n      }\n      this.dirty = true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Scene.prototype.appendPath = function (path) {\n    var ctx = this.ctx;\n    var commands = path.commands;\n    var params = path.params;\n    var n = commands.length;\n    var j = 0;\n    ctx.beginPath();\n    for (var i = 0; i < n; i++) {\n      switch (commands[i]) {\n        case 'M':\n          ctx.moveTo(params[j++], params[j++]);\n          break;\n        case 'L':\n          ctx.lineTo(params[j++], params[j++]);\n          break;\n        case 'C':\n          ctx.bezierCurveTo(params[j++], params[j++], params[j++], params[j++], params[j++], params[j++]);\n          break;\n        case 'Z':\n          ctx.closePath();\n          break;\n      }\n    }\n  };\n  Object.defineProperty(Scene.prototype, \"frameIndex\", {\n    get: function get() {\n      return this._frameIndex;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Scene.className = 'Scene';\n  return Scene;\n}();\nvar __extends$W = undefined && undefined.__extends || function () {\n  var _extendStatics59 = function extendStatics(d, b) {\n    _extendStatics59 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics59(d, b);\n  };\n  return function (d, b) {\n    _extendStatics59(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar RectSizing;\n(function (RectSizing) {\n  RectSizing[RectSizing[\"Content\"] = 0] = \"Content\";\n  RectSizing[RectSizing[\"Border\"] = 1] = \"Border\";\n})(RectSizing || (RectSizing = {}));\nvar Rect = /** @class */function (_super) {\n  __extends$W(Rect, _super);\n  function Rect() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._x = 0;\n    _this._y = 0;\n    _this._width = 10;\n    _this._height = 10;\n    _this._radius = 0;\n    /**\n     * If `true`, the rect is aligned to the pixel grid for crisp looking lines.\n     * Animated rects may not look nice with this option enabled, for example\n     * when a rect is translated by a sub-pixel value on each frame.\n     */\n    _this._crisp = false;\n    _this.effectiveStrokeWidth = Shape.defaultStyles.strokeWidth;\n    /**\n     * Similar to https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing\n     */\n    _this._sizing = RectSizing.Content;\n    return _this;\n  }\n  Object.defineProperty(Rect.prototype, \"x\", {\n    get: function get() {\n      return this._x;\n    },\n    set: function set(value) {\n      if (this._x !== value) {\n        this._x = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Rect.prototype, \"y\", {\n    get: function get() {\n      return this._y;\n    },\n    set: function set(value) {\n      if (this._y !== value) {\n        this._y = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Rect.prototype, \"width\", {\n    get: function get() {\n      return this._width;\n    },\n    set: function set(value) {\n      if (this._width !== value) {\n        this._width = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Rect.prototype, \"height\", {\n    get: function get() {\n      return this._height;\n    },\n    set: function set(value) {\n      if (this._height !== value) {\n        this._height = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Rect.prototype, \"radius\", {\n    get: function get() {\n      return this._radius;\n    },\n    set: function set(value) {\n      if (this._radius !== value) {\n        this._radius = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Rect.prototype, \"crisp\", {\n    get: function get() {\n      return this._crisp;\n    },\n    set: function set(value) {\n      if (this._crisp !== value) {\n        this._crisp = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Rect.prototype, \"strokeWidth\", {\n    get: function get() {\n      return this._strokeWidth;\n    },\n    set: function set(value) {\n      if (this._strokeWidth !== value) {\n        this._strokeWidth = value;\n        // Normally, when the `lineWidth` changes, we only need to repaint the rect\n        // without updating the path. If the `isCrisp` is set to `true` however,\n        // we need to update the path to make sure the new stroke aligns to\n        // the pixel grid. This is the reason we override the `lineWidth` setter\n        // and getter here.\n        if (this.crisp || this.sizing === RectSizing.Border) {\n          this.dirtyPath = true;\n        } else {\n          this.effectiveStrokeWidth = value;\n          this.dirty = true;\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Rect.prototype, \"sizing\", {\n    get: function get() {\n      return this._sizing;\n    },\n    set: function set(value) {\n      if (this._sizing !== value) {\n        this._sizing = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Rect.prototype.updatePath = function () {\n    var borderSizing = this.sizing === RectSizing.Border;\n    var path = this.path;\n    path.clear();\n    var x = this.x;\n    var y = this.y;\n    var width = this.width;\n    var height = this.height;\n    var strokeWidth;\n    if (borderSizing) {\n      var halfWidth = width / 2;\n      var halfHeight = height / 2;\n      strokeWidth = Math.min(this.strokeWidth, halfWidth, halfHeight);\n      x = Math.min(x + strokeWidth / 2, x + halfWidth);\n      y = Math.min(y + strokeWidth / 2, y + halfHeight);\n      width = Math.max(width - strokeWidth, 0);\n      height = Math.max(height - strokeWidth, 0);\n    } else {\n      strokeWidth = this.strokeWidth;\n    }\n    this.effectiveStrokeWidth = strokeWidth;\n    if (this.crisp && !borderSizing) {\n      var _a = this,\n        a = _a.alignment,\n        al = _a.align;\n      path.rect(al(a, x), al(a, y), al(a, x, width), al(a, y, height));\n    } else {\n      path.rect(x, y, width, height);\n    }\n  };\n  Rect.prototype.computeBBox = function () {\n    var _a = this,\n      x = _a.x,\n      y = _a.y,\n      width = _a.width,\n      height = _a.height;\n    return new BBox(x, y, width, height);\n  };\n  Rect.prototype.isPointInPath = function (x, y) {\n    var point = this.transformPoint(x, y);\n    var bbox = this.computeBBox();\n    return bbox.containsPoint(point.x, point.y);\n  };\n  Rect.prototype.isPointInStroke = function (x, y) {\n    return false;\n  };\n  Rect.prototype.fillStroke = function (ctx) {\n    if (!this.scene) {\n      return;\n    }\n    var pixelRatio = this.scene.canvas.pixelRatio || 1;\n    if (this.fill) {\n      ctx.fillStyle = this.fill;\n      ctx.globalAlpha = this.opacity * this.fillOpacity;\n      // The canvas context scaling (depends on the device's pixel ratio)\n      // has no effect on shadows, so we have to account for the pixel ratio\n      // manually here.\n      var fillShadow = this.fillShadow;\n      if (fillShadow && fillShadow.enabled) {\n        ctx.shadowColor = fillShadow.color;\n        ctx.shadowOffsetX = fillShadow.xOffset * pixelRatio;\n        ctx.shadowOffsetY = fillShadow.yOffset * pixelRatio;\n        ctx.shadowBlur = fillShadow.blur * pixelRatio;\n      }\n      ctx.fill();\n    }\n    ctx.shadowColor = 'rgba(0, 0, 0, 0)';\n    if (this.stroke && this.effectiveStrokeWidth) {\n      ctx.strokeStyle = this.stroke;\n      ctx.globalAlpha = this.opacity * this.strokeOpacity;\n      ctx.lineWidth = this.effectiveStrokeWidth;\n      if (this.lineDash) {\n        ctx.setLineDash(this.lineDash);\n      }\n      if (this.lineDashOffset) {\n        ctx.lineDashOffset = this.lineDashOffset;\n      }\n      if (this.lineCap) {\n        ctx.lineCap = this.lineCap;\n      }\n      if (this.lineJoin) {\n        ctx.lineJoin = this.lineJoin;\n      }\n      var strokeShadow = this.strokeShadow;\n      if (strokeShadow && strokeShadow.enabled) {\n        ctx.shadowColor = strokeShadow.color;\n        ctx.shadowOffsetX = strokeShadow.xOffset * pixelRatio;\n        ctx.shadowOffsetY = strokeShadow.yOffset * pixelRatio;\n        ctx.shadowBlur = strokeShadow.blur * pixelRatio;\n      }\n      ctx.stroke();\n    }\n  };\n  Rect.className = 'Rect';\n  return Rect;\n}(Path);\nvar __extends$X = undefined && undefined.__extends || function () {\n  var _extendStatics60 = function extendStatics(d, b) {\n    _extendStatics60 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics60(d, b);\n  };\n  return function (d, b) {\n    _extendStatics60(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar Marker = /** @class */function (_super) {\n  __extends$X(Marker, _super);\n  function Marker() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._x = 0;\n    _this._y = 0;\n    _this._size = 12;\n    return _this;\n  }\n  Object.defineProperty(Marker.prototype, \"x\", {\n    get: function get() {\n      return this._x;\n    },\n    set: function set(value) {\n      if (this._x !== value) {\n        this._x = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Marker.prototype, \"y\", {\n    get: function get() {\n      return this._y;\n    },\n    set: function set(value) {\n      if (this._y !== value) {\n        this._y = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Marker.prototype, \"size\", {\n    get: function get() {\n      return this._size;\n    },\n    set: function set(value) {\n      if (this._size !== value) {\n        this._size = Math.abs(value);\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Marker.prototype.computeBBox = function () {\n    var _a = this,\n      x = _a.x,\n      y = _a.y,\n      size = _a.size;\n    var half = size / 2;\n    return new BBox(x - half, y - half, size, size);\n  };\n  return Marker;\n}(Path);\nvar __extends$Y = undefined && undefined.__extends || function () {\n  var _extendStatics61 = function extendStatics(d, b) {\n    _extendStatics61 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics61(d, b);\n  };\n  return function (d, b) {\n    _extendStatics61(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar Square = /** @class */function (_super) {\n  __extends$Y(Square, _super);\n  function Square() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Square.prototype.updatePath = function () {\n    var _a = this,\n      path = _a.path,\n      x = _a.x,\n      y = _a.y;\n    var hs = this.size / 2;\n    var _b = this,\n      a = _b.alignment,\n      al = _b.align;\n    path.clear();\n    path.moveTo(al(a, x - hs), al(a, y - hs));\n    path.lineTo(al(a, x + hs), al(a, y - hs));\n    path.lineTo(al(a, x + hs), al(a, y + hs));\n    path.lineTo(al(a, x - hs), al(a, y + hs));\n    path.closePath();\n  };\n  Square.className = 'Square';\n  return Square;\n}(Marker);\nvar __extends$Z = undefined && undefined.__extends || function () {\n  var _extendStatics62 = function extendStatics(d, b) {\n    _extendStatics62 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics62(d, b);\n  };\n  return function (d, b) {\n    _extendStatics62(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MarkerLabel = /** @class */function (_super) {\n  __extends$Z(MarkerLabel, _super);\n  function MarkerLabel() {\n    var _this = _super.call(this) || this;\n    _this.label = new Text();\n    _this._marker = new Square();\n    _this._markerSize = 15;\n    _this._spacing = 8;\n    var label = _this.label;\n    label.textBaseline = 'middle';\n    label.fontSize = 12;\n    label.fontFamily = 'Verdana, sans-serif';\n    label.fill = 'black';\n    // For better looking vertical alignment of labels to markers.\n    label.y = HdpiCanvas.has.textMetrics ? 1 : 0;\n    _this.append([_this.marker, label]);\n    _this.update();\n    return _this;\n  }\n  Object.defineProperty(MarkerLabel.prototype, \"text\", {\n    get: function get() {\n      return this.label.text;\n    },\n    set: function set(value) {\n      this.label.text = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MarkerLabel.prototype, \"fontStyle\", {\n    get: function get() {\n      return this.label.fontStyle;\n    },\n    set: function set(value) {\n      this.label.fontStyle = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MarkerLabel.prototype, \"fontWeight\", {\n    get: function get() {\n      return this.label.fontWeight;\n    },\n    set: function set(value) {\n      this.label.fontWeight = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MarkerLabel.prototype, \"fontSize\", {\n    get: function get() {\n      return this.label.fontSize;\n    },\n    set: function set(value) {\n      this.label.fontSize = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MarkerLabel.prototype, \"fontFamily\", {\n    get: function get() {\n      return this.label.fontFamily;\n    },\n    set: function set(value) {\n      this.label.fontFamily = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MarkerLabel.prototype, \"color\", {\n    get: function get() {\n      return this.label.fill;\n    },\n    set: function set(value) {\n      this.label.fill = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MarkerLabel.prototype, \"marker\", {\n    get: function get() {\n      return this._marker;\n    },\n    set: function set(value) {\n      if (this._marker !== value) {\n        this.removeChild(this._marker);\n        this._marker = value;\n        this.appendChild(value);\n        this.update();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MarkerLabel.prototype, \"markerSize\", {\n    get: function get() {\n      return this._markerSize;\n    },\n    set: function set(value) {\n      if (this._markerSize !== value) {\n        this._markerSize = value;\n        this.update();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MarkerLabel.prototype, \"markerFill\", {\n    get: function get() {\n      return this.marker.fill;\n    },\n    set: function set(value) {\n      this.marker.fill = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MarkerLabel.prototype, \"markerStroke\", {\n    get: function get() {\n      return this.marker.stroke;\n    },\n    set: function set(value) {\n      this.marker.stroke = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MarkerLabel.prototype, \"markerStrokeWidth\", {\n    get: function get() {\n      return this.marker.strokeWidth;\n    },\n    set: function set(value) {\n      this.marker.strokeWidth = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MarkerLabel.prototype, \"markerFillOpacity\", {\n    get: function get() {\n      return this.marker.fillOpacity;\n    },\n    set: function set(value) {\n      this.marker.fillOpacity = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MarkerLabel.prototype, \"markerStrokeOpacity\", {\n    get: function get() {\n      return this.marker.strokeOpacity;\n    },\n    set: function set(value) {\n      this.marker.strokeOpacity = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MarkerLabel.prototype, \"opacity\", {\n    get: function get() {\n      return this.marker.opacity;\n    },\n    set: function set(value) {\n      this.marker.opacity = value;\n      this.label.opacity = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MarkerLabel.prototype, \"spacing\", {\n    get: function get() {\n      return this._spacing;\n    },\n    set: function set(value) {\n      if (this._spacing !== value) {\n        this._spacing = value;\n        this.update();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  MarkerLabel.prototype.update = function () {\n    var marker = this.marker;\n    var markerSize = this.markerSize;\n    marker.size = markerSize;\n    this.label.x = markerSize / 2 + this.spacing;\n  };\n  MarkerLabel.className = 'MarkerLabel';\n  return MarkerLabel;\n}(Group);\nvar __extends$_ = undefined && undefined.__extends || function () {\n  var _extendStatics63 = function extendStatics(d, b) {\n    _extendStatics63 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics63(d, b);\n  };\n  return function (d, b) {\n    _extendStatics63(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar Circle = /** @class */function (_super) {\n  __extends$_(Circle, _super);\n  function Circle() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Circle.prototype.updatePath = function () {\n    var _a = this,\n      x = _a.x,\n      y = _a.y,\n      path = _a.path,\n      size = _a.size;\n    var r = size / 2;\n    path.clear();\n    path.cubicArc(x, y, r, r, 0, 0, Math.PI * 2, 0);\n    path.closePath();\n  };\n  Circle.className = 'Circle';\n  return Circle;\n}(Marker);\nvar __extends$$ = undefined && undefined.__extends || function () {\n  var _extendStatics64 = function extendStatics(d, b) {\n    _extendStatics64 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics64(d, b);\n  };\n  return function (d, b) {\n    _extendStatics64(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar Cross = /** @class */function (_super) {\n  __extends$$(Cross, _super);\n  function Cross() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Cross.prototype.updatePath = function () {\n    var _a = this,\n      x = _a.x,\n      y = _a.y;\n    var _b = this,\n      path = _b.path,\n      size = _b.size;\n    var s = size / 4.2;\n    path.clear();\n    path.moveTo(x -= s, y);\n    path.lineTo(x -= s, y -= s);\n    path.lineTo(x += s, y -= s);\n    path.lineTo(x += s, y += s);\n    path.lineTo(x += s, y -= s);\n    path.lineTo(x += s, y += s);\n    path.lineTo(x -= s, y += s);\n    path.lineTo(x += s, y += s);\n    path.lineTo(x -= s, y += s);\n    path.lineTo(x -= s, y -= s);\n    path.lineTo(x -= s, y += s);\n    path.lineTo(x -= s, y -= s);\n    path.closePath();\n  };\n  Cross.className = 'Cross';\n  return Cross;\n}(Marker);\nvar __extends$10 = undefined && undefined.__extends || function () {\n  var _extendStatics65 = function extendStatics(d, b) {\n    _extendStatics65 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics65(d, b);\n  };\n  return function (d, b) {\n    _extendStatics65(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar Diamond = /** @class */function (_super) {\n  __extends$10(Diamond, _super);\n  function Diamond() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Diamond.prototype.updatePath = function () {\n    var _a = this,\n      x = _a.x,\n      y = _a.y;\n    var _b = this,\n      path = _b.path,\n      size = _b.size;\n    var s = size / 2;\n    path.clear();\n    path.moveTo(x, y -= s);\n    path.lineTo(x += s, y += s);\n    path.lineTo(x -= s, y += s);\n    path.lineTo(x -= s, y -= s);\n    path.lineTo(x += s, y -= s);\n    path.closePath();\n  };\n  Diamond.className = 'Diamond';\n  return Diamond;\n}(Marker);\nvar __extends$11 = undefined && undefined.__extends || function () {\n  var _extendStatics66 = function extendStatics(d, b) {\n    _extendStatics66 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics66(d, b);\n  };\n  return function (d, b) {\n    _extendStatics66(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar Heart = /** @class */function (_super) {\n  __extends$11(Heart, _super);\n  function Heart() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Heart.prototype.rad = function (degree) {\n    return degree / 180 * Math.PI;\n  };\n  Heart.prototype.updatePath = function () {\n    var _a = this,\n      x = _a.x,\n      path = _a.path,\n      size = _a.size,\n      rad = _a.rad;\n    var r = size / 4;\n    var y = this.y + r / 2;\n    path.clear();\n    path.cubicArc(x - r, y - r, r, r, 0, rad(130), rad(330), 0);\n    path.cubicArc(x + r, y - r, r, r, 0, rad(220), rad(50), 0);\n    path.lineTo(x, y + r);\n    path.closePath();\n  };\n  Heart.className = 'Heart';\n  return Heart;\n}(Marker);\nvar __extends$12 = undefined && undefined.__extends || function () {\n  var _extendStatics67 = function extendStatics(d, b) {\n    _extendStatics67 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics67(d, b);\n  };\n  return function (d, b) {\n    _extendStatics67(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar Plus = /** @class */function (_super) {\n  __extends$12(Plus, _super);\n  function Plus() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Plus.prototype.updatePath = function () {\n    var _a = this,\n      x = _a.x,\n      y = _a.y;\n    var _b = this,\n      path = _b.path,\n      size = _b.size;\n    var s = size / 3;\n    var hs = s / 2;\n    path.clear();\n    path.moveTo(x -= hs, y -= hs);\n    path.lineTo(x, y -= s);\n    path.lineTo(x += s, y);\n    path.lineTo(x, y += s);\n    path.lineTo(x += s, y);\n    path.lineTo(x, y += s);\n    path.lineTo(x -= s, y);\n    path.lineTo(x, y += s);\n    path.lineTo(x -= s, y);\n    path.lineTo(x, y -= s);\n    path.lineTo(x -= s, y);\n    path.lineTo(x, y -= s);\n    path.closePath();\n  };\n  Plus.className = 'Plus';\n  return Plus;\n}(Marker);\nvar __extends$13 = undefined && undefined.__extends || function () {\n  var _extendStatics68 = function extendStatics(d, b) {\n    _extendStatics68 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics68(d, b);\n  };\n  return function (d, b) {\n    _extendStatics68(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar Triangle = /** @class */function (_super) {\n  __extends$13(Triangle, _super);\n  function Triangle() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Triangle.prototype.updatePath = function () {\n    var _a = this,\n      x = _a.x,\n      y = _a.y;\n    var _b = this,\n      path = _b.path,\n      size = _b.size;\n    var s = size * 1.1;\n    path.clear();\n    path.moveTo(x, y -= s * 0.48);\n    path.lineTo(x += s * 0.5, y += s * 0.87);\n    path.lineTo(x -= s, y);\n    path.closePath();\n  };\n  Triangle.className = 'Triangle';\n  return Triangle;\n}(Marker);\n\n// This function is in its own file because putting it into SeriesMarker makes the Legend\n// suddenly aware of the series (it's an agnostic component), and putting it into Marker\n// introduces circular dependencies.\nfunction getMarker(shape) {\n  if (shape === void 0) {\n    shape = Square;\n  }\n  if (typeof shape === 'string') {\n    switch (shape) {\n      case 'circle':\n        return Circle;\n      case 'cross':\n        return Cross;\n      case 'diamond':\n        return Diamond;\n      case 'heart':\n        return Heart;\n      case 'plus':\n        return Plus;\n      case 'triangle':\n        return Triangle;\n      default:\n        return Square;\n    }\n  }\n  if (typeof shape === 'function') {\n    return shape;\n  }\n  return Square;\n}\nvar __extends$14 = undefined && undefined.__extends || function () {\n  var _extendStatics69 = function extendStatics(d, b) {\n    _extendStatics69 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics69(d, b);\n  };\n  return function (d, b) {\n    _extendStatics69(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$G = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar LegendOrientation;\n(function (LegendOrientation) {\n  LegendOrientation[LegendOrientation[\"Vertical\"] = 0] = \"Vertical\";\n  LegendOrientation[LegendOrientation[\"Horizontal\"] = 1] = \"Horizontal\";\n})(LegendOrientation || (LegendOrientation = {}));\nvar LegendPosition;\n(function (LegendPosition) {\n  LegendPosition[\"Top\"] = \"top\";\n  LegendPosition[\"Right\"] = \"right\";\n  LegendPosition[\"Bottom\"] = \"bottom\";\n  LegendPosition[\"Left\"] = \"left\";\n})(LegendPosition || (LegendPosition = {}));\nvar LegendLabel = /** @class */function (_super) {\n  __extends$14(LegendLabel, _super);\n  function LegendLabel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.color = 'black';\n    _this.fontSize = 12;\n    _this.fontFamily = 'Verdana, sans-serif';\n    return _this;\n  }\n  __decorate$G([reactive('change')], LegendLabel.prototype, \"color\", void 0);\n  __decorate$G([reactive('layoutChange')], LegendLabel.prototype, \"fontStyle\", void 0);\n  __decorate$G([reactive('layoutChange')], LegendLabel.prototype, \"fontWeight\", void 0);\n  __decorate$G([reactive('layoutChange')], LegendLabel.prototype, \"fontSize\", void 0);\n  __decorate$G([reactive('layoutChange')], LegendLabel.prototype, \"fontFamily\", void 0);\n  return LegendLabel;\n}(Observable);\nvar LegendMarker = /** @class */function (_super) {\n  __extends$14(LegendMarker, _super);\n  function LegendMarker() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.size = 15;\n    /**\n     * Padding between the marker and the label within each legend item.\n     */\n    _this.padding = 8;\n    _this.strokeWidth = 1;\n    return _this;\n  }\n  __decorate$G([reactive('layoutChange')], LegendMarker.prototype, \"size\", void 0);\n  __decorate$G([reactive('layoutChange')], LegendMarker.prototype, \"shape\", void 0);\n  __decorate$G([reactive('layoutChange')], LegendMarker.prototype, \"padding\", void 0);\n  __decorate$G([reactive('change')], LegendMarker.prototype, \"strokeWidth\", void 0);\n  return LegendMarker;\n}(Observable);\nvar LegendItem = /** @class */function (_super) {\n  __extends$14(LegendItem, _super);\n  function LegendItem() {\n    var _this = _super.call(this) || this;\n    _this.marker = new LegendMarker();\n    _this.label = new LegendLabel();\n    /**\n     * The legend uses grid layout for its items, occupying as few columns as possible when positioned to left or right,\n     * and as few rows as possible when positioned to top or bottom. This config specifies the amount of horizontal\n     * padding between legend items.\n     */\n    _this.paddingX = 16;\n    /**\n     * The legend uses grid layout for its items, occupying as few columns as possible when positioned to left or right,\n     * and as few rows as possible when positioned to top or bottom. This config specifies the amount of vertical\n     * padding between legend items.\n     */\n    _this.paddingY = 8;\n    var changeListener = function changeListener() {\n      return _this.fireEvent({\n        type: 'change'\n      });\n    };\n    _this.marker.addEventListener('change', changeListener);\n    _this.label.addEventListener('change', changeListener);\n    var layoutChangeListener = function layoutChangeListener() {\n      return _this.fireEvent({\n        type: 'layoutChange'\n      });\n    };\n    _this.marker.addEventListener('layoutChange', layoutChangeListener);\n    _this.label.addEventListener('layoutChange', layoutChangeListener);\n    return _this;\n  }\n  __decorate$G([reactive('layoutChange')], LegendItem.prototype, \"paddingX\", void 0);\n  __decorate$G([reactive('layoutChange')], LegendItem.prototype, \"paddingY\", void 0);\n  return LegendItem;\n}(Observable);\nvar Legend = /** @class */function (_super) {\n  __extends$14(Legend, _super);\n  function Legend() {\n    var _this = _super.call(this) || this;\n    _this.id = createId(_this);\n    _this.group = new Group();\n    _this.itemSelection = Selection.select(_this.group).selectAll();\n    _this.oldSize = [0, 0];\n    _this.item = new LegendItem();\n    _this.data = [];\n    _this.enabled = true;\n    _this.orientation = LegendOrientation.Vertical;\n    _this.position = LegendPosition.Right;\n    /**\n     * Spacing between the legend and the edge of the chart's element.\n     */\n    _this.spacing = 20;\n    _this._size = [0, 0];\n    _this.addPropertyListener('data', _this.onDataChange);\n    _this.addPropertyListener('enabled', _this.onEnabledChange);\n    _this.addPropertyListener('position', _this.onPositionChange);\n    _this.item.marker.addPropertyListener('shape', _this.onMarkerShapeChange, _this);\n    _this.addEventListener('change', _this.update);\n    _this.item.addEventListener('change', function () {\n      return _this.fireEvent({\n        type: 'change'\n      });\n    });\n    _this.item.addEventListener('layoutChange', function () {\n      return _this.fireEvent({\n        type: 'layoutChange'\n      });\n    });\n    return _this;\n  }\n  Object.defineProperty(Legend.prototype, \"layoutHorizontalSpacing\", {\n    get: function get() {\n      return this.item.paddingX;\n    },\n    /**\n     * @deprecated Please use {@link item.paddingX} instead.\n     */\n    set: function set(value) {\n      this.item.paddingX = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Legend.prototype, \"layoutVerticalSpacing\", {\n    get: function get() {\n      return this.item.paddingY;\n    },\n    /**\n     * @deprecated Please use {@link item.paddingY} instead.\n     */\n    set: function set(value) {\n      this.item.paddingY = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Legend.prototype, \"itemSpacing\", {\n    get: function get() {\n      return this.item.marker.padding;\n    },\n    /**\n     * @deprecated Please use {@link item.marker.padding} instead.\n     */\n    set: function set(value) {\n      this.item.marker.padding = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Legend.prototype, \"markerShape\", {\n    get: function get() {\n      return this.item.marker.shape;\n    },\n    /**\n     * @deprecated Please use {@link item.marker.shape} instead.\n     */\n    set: function set(value) {\n      this.item.marker.shape = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Legend.prototype, \"markerSize\", {\n    get: function get() {\n      return this.item.marker.size;\n    },\n    /**\n     * @deprecated Please use {@link item.marker.size} instead.\n     */\n    set: function set(value) {\n      this.item.marker.size = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Legend.prototype, \"strokeWidth\", {\n    get: function get() {\n      return this.item.marker.strokeWidth;\n    },\n    /**\n     * @deprecated Please use {@link item.marker.strokeWidth} instead.\n     */\n    set: function set(value) {\n      this.item.marker.strokeWidth = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Legend.prototype, \"color\", {\n    get: function get() {\n      return this.item.label.color;\n    },\n    /**\n     * @deprecated Please use {@link item.label.color} instead.\n     */\n    set: function set(value) {\n      this.item.label.color = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Legend.prototype, \"fontStyle\", {\n    get: function get() {\n      return this.item.label.fontStyle;\n    },\n    /**\n     * @deprecated Please use {@link item.label.fontStyle} instead.\n     */\n    set: function set(value) {\n      this.item.label.fontStyle = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Legend.prototype, \"fontWeight\", {\n    get: function get() {\n      return this.item.label.fontWeight;\n    },\n    /**\n     * @deprecated Please use {@link item.label.fontWeight} instead.\n     */\n    set: function set(value) {\n      this.item.label.fontWeight = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Legend.prototype, \"fontSize\", {\n    get: function get() {\n      return this.item.label.fontSize;\n    },\n    /**\n     * @deprecated Please use {@link item.label.fontSize} instead.\n     */\n    set: function set(value) {\n      this.item.label.fontSize = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Legend.prototype, \"fontFamily\", {\n    get: function get() {\n      return this.item.label.fontFamily;\n    },\n    /**\n     * @deprecated Please use {@link item.label.fontFamily} instead.\n     */\n    set: function set(value) {\n      this.item.label.fontFamily = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Legend.prototype, \"size\", {\n    get: function get() {\n      return this._size;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Legend.prototype.onDataChange = function (event) {\n    this.group.visible = event.value.length > 0 && this.enabled;\n  };\n  Legend.prototype.onEnabledChange = function (event) {\n    this.group.visible = event.value && this.data.length > 0;\n  };\n  Legend.prototype.onPositionChange = function (event) {\n    switch (event.value) {\n      case 'right':\n      case 'left':\n        this.orientation = LegendOrientation.Vertical;\n        break;\n      case 'bottom':\n      case 'top':\n        this.orientation = LegendOrientation.Horizontal;\n        break;\n    }\n  };\n  Legend.prototype.onMarkerShapeChange = function () {\n    this.itemSelection = this.itemSelection.setData([]);\n    this.itemSelection.exit.remove();\n  };\n  /**\n   * The method is given the desired size of the legend, which only serves as a hint.\n   * The vertically oriented legend will take as much horizontal space as needed, but will\n   * respect the height constraints, and the horizontal legend will take as much vertical\n   * space as needed in an attempt not to exceed the given width.\n   * After the layout is done, the {@link size} will contain the actual size of the legend.\n   * If the actual size is not the same as the previous actual size, the legend will fire\n   * the 'layoutChange' event to communicate that another layout is needed, and the above\n   * process should be repeated.\n   * @param width\n   * @param height\n   */\n  Legend.prototype.performLayout = function (width, height) {\n    var item = this.item;\n    var marker = item.marker,\n      paddingX = item.paddingX,\n      paddingY = item.paddingY;\n    var updateSelection = this.itemSelection.setData(this.data, function (_, datum) {\n      var MarkerShape = getMarker(marker.shape || datum.marker.shape);\n      return datum.id + '-' + datum.itemId + '-' + MarkerShape.name;\n    });\n    updateSelection.exit.remove();\n    var enterSelection = updateSelection.enter.append(MarkerLabel).each(function (node, datum) {\n      var MarkerShape = getMarker(marker.shape || datum.marker.shape);\n      node.marker = new MarkerShape();\n    });\n    var itemSelection = this.itemSelection = updateSelection.merge(enterSelection);\n    var itemCount = itemSelection.size;\n    // Update properties that affect the size of the legend items and measure them.\n    var bboxes = [];\n    var itemMarker = this.item.marker;\n    var itemLabel = this.item.label;\n    itemSelection.each(function (markerLabel, datum) {\n      // TODO: measure only when one of these properties or data change (in a separate routine)\n      markerLabel.markerSize = itemMarker.size;\n      markerLabel.spacing = itemMarker.padding;\n      markerLabel.fontStyle = itemLabel.fontStyle;\n      markerLabel.fontWeight = itemLabel.fontWeight;\n      markerLabel.fontSize = itemLabel.fontSize;\n      markerLabel.fontFamily = itemLabel.fontFamily;\n      markerLabel.text = datum.label.text;\n      bboxes.push(markerLabel.computeBBox());\n    });\n    var itemHeight = bboxes.length && bboxes[0].height;\n    var rowCount = 0;\n    var columnWidth = 0;\n    var paddedItemsWidth = 0;\n    var paddedItemsHeight = 0;\n    switch (this.orientation) {\n      case LegendOrientation.Horizontal:\n        if (!(isFinite(width) && width > 0)) {\n          return false;\n        }\n        rowCount = 0;\n        var columnCount = 0;\n        // Split legend items into columns until the width is suitable.\n        do {\n          var itemsWidth = 0;\n          columnCount = 0;\n          columnWidth = 0;\n          rowCount++;\n          var i = 0;\n          while (i < itemCount) {\n            var bbox = bboxes[i];\n            if (bbox.width > columnWidth) {\n              columnWidth = bbox.width;\n            }\n            i++;\n            if (i % rowCount === 0) {\n              itemsWidth += columnWidth;\n              columnWidth = 0;\n              columnCount++;\n            }\n          }\n          if (i % rowCount !== 0) {\n            itemsWidth += columnWidth;\n            columnCount++;\n          }\n          paddedItemsWidth = itemsWidth + (columnCount - 1) * paddingX;\n        } while (paddedItemsWidth > width && columnCount > 1);\n        paddedItemsHeight = itemHeight * rowCount + (rowCount - 1) * paddingY;\n        break;\n      case LegendOrientation.Vertical:\n        if (!(isFinite(height) && height > 0)) {\n          return false;\n        }\n        rowCount = itemCount * 2;\n        // Split legend items into columns until the height is suitable.\n        do {\n          rowCount = (rowCount >> 1) + rowCount % 2;\n          columnWidth = 0;\n          var itemsWidth = 0;\n          var itemsHeight = 0;\n          var columnCount_1 = 0;\n          var i = 0;\n          while (i < itemCount) {\n            var bbox = bboxes[i];\n            if (!columnCount_1) {\n              itemsHeight += bbox.height;\n            }\n            if (bbox.width > columnWidth) {\n              columnWidth = bbox.width;\n            }\n            i++;\n            if (i % rowCount === 0) {\n              itemsWidth += columnWidth;\n              columnWidth = 0;\n              columnCount_1++;\n            }\n          }\n          if (i % rowCount !== 0) {\n            itemsWidth += columnWidth;\n            columnCount_1++;\n          }\n          paddedItemsWidth = itemsWidth + (columnCount_1 - 1) * paddingX;\n          paddedItemsHeight = itemsHeight + (rowCount - 1) * paddingY;\n        } while (paddedItemsHeight > height && rowCount > 1);\n        break;\n    }\n    // Top-left corner of the first legend item.\n    var startX = (width - paddedItemsWidth) / 2;\n    var startY = (height - paddedItemsHeight) / 2;\n    var x = 0;\n    var y = 0;\n    columnWidth = 0;\n    // Position legend items using the layout computed above.\n    itemSelection.each(function (markerLabel, datum, i) {\n      // Round off for pixel grid alignment to work properly.\n      markerLabel.translationX = Math.floor(startX + x);\n      markerLabel.translationY = Math.floor(startY + y);\n      var bbox = bboxes[i];\n      if (bbox.width > columnWidth) {\n        columnWidth = bbox.width;\n      }\n      if ((i + 1) % rowCount === 0) {\n        x += columnWidth + paddingX;\n        y = 0;\n        columnWidth = 0;\n      } else {\n        y += bbox.height + paddingY;\n      }\n    });\n    // Update legend item properties that don't affect the layout.\n    this.update();\n    var size = this._size;\n    var oldSize = this.oldSize;\n    size[0] = paddedItemsWidth;\n    size[1] = paddedItemsHeight;\n    if (size[0] !== oldSize[0] || size[1] !== oldSize[1]) {\n      oldSize[0] = size[0];\n      oldSize[1] = size[1];\n    }\n  };\n  Legend.prototype.update = function () {\n    var _this = this;\n    this.itemSelection.each(function (markerLabel, datum) {\n      var marker = datum.marker;\n      markerLabel.markerFill = marker.fill;\n      markerLabel.markerStroke = marker.stroke;\n      markerLabel.markerStrokeWidth = _this.item.marker.strokeWidth;\n      markerLabel.markerFillOpacity = marker.fillOpacity;\n      markerLabel.markerStrokeOpacity = marker.strokeOpacity;\n      markerLabel.opacity = datum.enabled ? 1 : 0.5;\n      markerLabel.color = _this.color;\n    });\n  };\n  Legend.prototype.getDatumForPoint = function (x, y) {\n    var node = this.group.pickNode(x, y);\n    if (node && node.parent) {\n      return node.parent.datum;\n    }\n  };\n  Legend.className = 'Legend';\n  __decorate$G([reactive('layoutChange')], Legend.prototype, \"data\", void 0);\n  __decorate$G([reactive('layoutChange')], Legend.prototype, \"enabled\", void 0);\n  __decorate$G([reactive('layoutChange')], Legend.prototype, \"orientation\", void 0);\n  __decorate$G([reactive('layoutChange')], Legend.prototype, \"position\", void 0);\n  __decorate$G([reactive('layoutChange')], Legend.prototype, \"spacing\", void 0);\n  return Legend;\n}(Observable);\nvar SizeMonitor = /** @class */function () {\n  function SizeMonitor() {}\n  SizeMonitor.init = function () {\n    var _this = this;\n    var NativeResizeObserver = window.ResizeObserver;\n    if (NativeResizeObserver) {\n      this.resizeObserver = new NativeResizeObserver(function (entries) {\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n          var entry = entries_1[_i];\n          var _a = entry.contentRect,\n            width = _a.width,\n            height = _a.height;\n          _this.checkSize(_this.elements.get(entry.target), entry.target, width, height);\n        }\n      });\n    } else {\n      // polyfill (more reliable even in browsers that support ResizeObserver)\n      var step = function step() {\n        _this.elements.forEach(function (entry, element) {\n          var width = element.clientWidth ? element.clientWidth : 0;\n          var height = element.clientHeight ? element.clientHeight : 0;\n          _this.checkSize(entry, element, width, height);\n        });\n      };\n      window.setInterval(step, 100);\n    }\n    this.ready = true;\n  };\n  SizeMonitor.checkSize = function (entry, element, width, height) {\n    if (entry) {\n      if (!entry.size || width !== entry.size.width || height !== entry.size.height) {\n        entry.size = {\n          width: width,\n          height: height\n        };\n        entry.cb(entry.size, element);\n      }\n    }\n  };\n  // Only a single callback is supported.\n  SizeMonitor.observe = function (element, cb) {\n    if (!this.ready) {\n      this.init();\n    }\n    this.unobserve(element);\n    if (this.resizeObserver) {\n      this.resizeObserver.observe(element);\n    }\n    this.elements.set(element, {\n      cb: cb\n    });\n  };\n  SizeMonitor.unobserve = function (element) {\n    if (this.resizeObserver) {\n      this.resizeObserver.unobserve(element);\n    }\n    this.elements.delete(element);\n  };\n  SizeMonitor.elements = new Map();\n  SizeMonitor.requestAnimationFrameId = 0;\n  SizeMonitor.ready = false;\n  return SizeMonitor;\n}();\nvar __extends$15 = undefined && undefined.__extends || function () {\n  var _extendStatics70 = function extendStatics(d, b) {\n    _extendStatics70 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics70(d, b);\n  };\n  return function (d, b) {\n    _extendStatics70(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$H = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar Series = /** @class */function (_super) {\n  __extends$15(Series, _super);\n  function Series() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.id = createId(_this);\n    /**\n     * The group node that contains all the nodes used to render this series.\n     */\n    _this.group = new Group();\n    _this.directions = [ChartAxisDirection.X, ChartAxisDirection.Y];\n    _this.tooltipEnabled = true;\n    _this.data = undefined;\n    _this.visible = true;\n    _this.showInLegend = true;\n    _this.scheduleLayout = function () {\n      _this.fireEvent({\n        type: 'layoutChange'\n      });\n    };\n    _this.scheduleData = function () {\n      _this.fireEvent({\n        type: 'dataChange'\n      });\n    };\n    return _this;\n  }\n  Object.defineProperty(Series.prototype, \"type\", {\n    get: function get() {\n      return this.constructor.type || '';\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Series.prototype.setColors = function (fills, strokes) {};\n  /**\n   * Returns the actual keys used (to fetch the values from `data` items) for the given direction.\n   */\n  Series.prototype.getKeys = function (direction) {\n    var _this = this;\n    var directionKeys = this.directionKeys;\n    var keys = directionKeys && directionKeys[direction];\n    var values = [];\n    if (keys) {\n      keys.forEach(function (key) {\n        var value = _this[key];\n        if (value) {\n          if (Array.isArray(value)) {\n            values.push.apply(values, value);\n          } else {\n            values.push(value);\n          }\n        }\n      });\n    }\n    return values;\n  };\n  // Returns node data associated with the rendered portion of the series' data.\n  Series.prototype.getNodeData = function () {\n    return [];\n  };\n  Series.prototype.fireNodeClickEvent = function (datum) {};\n  Series.prototype.toggleSeriesItem = function (itemId, enabled) {\n    this.visible = enabled;\n  };\n  // Each series is expected to have its own logic to efficiently update its nodes\n  // on hightlight changes.\n  Series.prototype.onHighlightChange = function () {};\n  Series.prototype.fixNumericExtent = function (extent, type) {\n    if (!extent) {\n      // if (type) {\n      //     console.warn(`The ${type}-domain could not be found (no valid values), using the default of [0, 1].`);\n      // }\n      return [0, 1];\n    }\n    var min = extent[0],\n      max = extent[1];\n    if (min === max) {\n      var padding = Math.abs(min * 0.01);\n      min -= padding;\n      max += padding;\n      // if (type) {\n      //     console.warn(`The ${type}-domain has zero length and has been automatically expanded`\n      //         + ` by 1 in each direction (from the single valid ${type}-value: ${min}).`);\n      // }\n    }\n\n    if (!isFinite(min) || !isFinite(max)) {\n      min = 0;\n      max = 1;\n      // if (type) {\n      //     console.warn(`The ${type}-domain has infinite length, using the default of [0, 1].`);\n      // }\n    }\n\n    return [min, max];\n  };\n  __decorate$H([reactive('dataChange')], Series.prototype, \"data\", void 0);\n  __decorate$H([reactive('dataChange')], Series.prototype, \"visible\", void 0);\n  __decorate$H([reactive('layoutChange')], Series.prototype, \"showInLegend\", void 0);\n  return Series;\n}(Observable);\nvar __extends$16 = undefined && undefined.__extends || function () {\n  var _extendStatics71 = function extendStatics(d, b) {\n    _extendStatics71 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics71(d, b);\n  };\n  return function (d, b) {\n    _extendStatics71(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$I = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar SeriesMarker = /** @class */function (_super) {\n  __extends$16(SeriesMarker, _super);\n  function SeriesMarker() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.enabled = true;\n    /**\n     * One of the predefined marker names, or a marker constructor function (for user-defined markers).\n     * A series will create one marker instance per data point.\n     */\n    _this.shape = Circle;\n    _this.size = 6;\n    /**\n     * In case a series has the `sizeKey` set, the `sizeKey` values along with the `size` and `maxSize` configs\n     * will be used to determine the size of the marker. All values will be mapped to a marker size\n     * within the `[size, maxSize]` range, where the largest values will correspond to the `maxSize`\n     * and the lowest to the `size`.\n     */\n    _this.maxSize = 30;\n    _this.strokeWidth = 1;\n    return _this;\n  }\n  __decorate$I([reactive('change')], SeriesMarker.prototype, \"enabled\", void 0);\n  __decorate$I([reactive('change')], SeriesMarker.prototype, \"shape\", void 0);\n  __decorate$I([reactive('change')], SeriesMarker.prototype, \"size\", void 0);\n  __decorate$I([reactive('change')], SeriesMarker.prototype, \"maxSize\", void 0);\n  __decorate$I([reactive('change')], SeriesMarker.prototype, \"fill\", void 0);\n  __decorate$I([reactive('change')], SeriesMarker.prototype, \"stroke\", void 0);\n  __decorate$I([reactive('change')], SeriesMarker.prototype, \"strokeWidth\", void 0);\n  return SeriesMarker;\n}(Observable);\nvar __extends$17 = undefined && undefined.__extends || function () {\n  var _extendStatics72 = function extendStatics(d, b) {\n    _extendStatics72 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics72(d, b);\n  };\n  return function (d, b) {\n    _extendStatics72(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar CartesianSeries = /** @class */function (_super) {\n  __extends$17(CartesianSeries, _super);\n  function CartesianSeries() {\n    var _a;\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.directionKeys = (_a = {}, _a[ChartAxisDirection.X] = ['xKey'], _a[ChartAxisDirection.Y] = ['yKey'], _a);\n    return _this;\n  }\n  return CartesianSeries;\n}(Series);\nvar CartesianSeriesMarker = /** @class */function (_super) {\n  __extends$17(CartesianSeriesMarker, _super);\n  function CartesianSeriesMarker() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return CartesianSeriesMarker;\n}(SeriesMarker);\nvar __extends$18 = undefined && undefined.__extends || function () {\n  var _extendStatics73 = function extendStatics(d, b) {\n    _extendStatics73 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics73(d, b);\n  };\n  return function (d, b) {\n    _extendStatics73(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign$2 = undefined && undefined.__assign || function () {\n  __assign$2 = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$2.apply(this, arguments);\n};\nvar __decorate$J = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar defaultTooltipCss = \"\\n.ag-chart-tooltip {\\n    display: none;\\n    position: absolute;\\n    user-select: none;\\n    pointer-events: none;\\n    white-space: nowrap;\\n    z-index: 99999;\\n    font: 12px Verdana, sans-serif;\\n    color: black;\\n    background: rgb(244, 244, 244);\\n    border-radius: 5px;\\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\\n}\\n\\n.ag-chart-tooltip-visible {\\n    display: table;\\n}\\n\\n.ag-chart-tooltip-title {\\n    font-weight: bold;\\n    padding: 7px;\\n    border-top-left-radius: 5px;\\n    border-top-right-radius: 5px;\\n    color: white;\\n    background-color: #888888;\\n    border-top-left-radius: 5px;\\n    border-top-right-radius: 5px;\\n}\\n\\n.ag-chart-tooltip-content {\\n    padding: 7px;\\n    line-height: 1.7em;\\n    border-bottom-left-radius: 5px;\\n    border-bottom-right-radius: 5px;\\n}\\n\\n.ag-chart-tooltip-arrow::before {\\n    content: \\\"\\\";\\n\\n    position: absolute;\\n    top: 100%;\\n    left: 50%;\\n    transform: translateX(-50%);\\n\\n    border: 6px solid #989898;\\n\\n    border-left-color: transparent;\\n    border-right-color: transparent;\\n    border-top-color: #989898;\\n    border-bottom-color: transparent;\\n\\n    width: 0;\\n    height: 0;\\n\\n    margin: 0 auto;\\n}\\n\\n.ag-chart-tooltip-arrow::after {\\n    content: \\\"\\\";\\n\\n    position: absolute;\\n    top: 100%;\\n    left: 50%;\\n    transform: translateX(-50%);\\n\\n    border: 5px solid black;\\n\\n    border-left-color: transparent;\\n    border-right-color: transparent;\\n    border-top-color: rgb(244, 244, 244);\\n    border-bottom-color: transparent;\\n\\n    width: 0;\\n    height: 0;\\n\\n    margin: 0 auto;\\n}\\n\\n.ag-chart-wrapper {\\n    box-sizing: border-box;\\n    overflow: hidden;\\n}\\n\";\nfunction toTooltipHtml(input, defaults) {\n  if (typeof input === 'string') {\n    return input;\n  }\n  defaults = defaults || {};\n  var _a = input.content,\n    content = _a === void 0 ? defaults.content || '' : _a,\n    _b = input.title,\n    title = _b === void 0 ? defaults.title || undefined : _b,\n    _c = input.titleColor,\n    titleColor = _c === void 0 ? defaults.titleColor || 'white' : _c,\n    _d = input.titleBackgroundColor,\n    titleBackgroundColor = _d === void 0 ? defaults.titleBackgroundColor || '#888' : _d;\n  var titleHtml = title ? \"<div class=\\\"\" + Chart.defaultTooltipClass + \"-title\\\"\\n        style=\\\"color: \" + titleColor + \"; background-color: \" + titleBackgroundColor + \"\\\">\" + title + \"</div>\" : '';\n  return titleHtml + \"<div class=\\\"\" + Chart.defaultTooltipClass + \"-content\\\">\" + content + \"</div>\";\n}\nvar Chart = /** @class */function (_super) {\n  __extends$18(Chart, _super);\n  function Chart(document) {\n    if (document === void 0) {\n      document = window.document;\n    }\n    var _this = _super.call(this) || this;\n    _this.id = createId(_this);\n    _this.background = new Rect();\n    _this.legend = new Legend();\n    _this.legendAutoPadding = new Padding();\n    _this.captionAutoPadding = 0; // top padding only\n    _this._container = undefined;\n    _this._data = [];\n    _this._autoSize = false;\n    _this.padding = new Padding(20);\n    _this._axes = [];\n    _this._series = [];\n    _this._axesChanged = false;\n    _this._seriesChanged = false;\n    _this.layoutCallbackId = 0;\n    _this._performLayout = function () {\n      _this.layoutCallbackId = 0;\n      _this.background.width = _this.width;\n      _this.background.height = _this.height;\n      _this.performLayout();\n      if (!_this.layoutPending) {\n        _this.fireEvent({\n          type: 'layoutDone'\n        });\n      }\n    };\n    _this.dataCallbackId = 0;\n    _this._onMouseDown = _this.onMouseDown.bind(_this);\n    _this._onMouseUp = _this.onMouseUp.bind(_this);\n    _this._onMouseMove = _this.onMouseMove.bind(_this);\n    _this._onMouseOut = _this.onMouseOut.bind(_this);\n    _this._onClick = _this.onClick.bind(_this);\n    _this._tooltipClass = Chart.defaultTooltipClass;\n    /**\n     * If `true`, the tooltip will be shown for the marker closest to the mouse cursor.\n     * Only has effect on series with markers.\n     */\n    _this.tooltipTracking = true;\n    var root = new Group();\n    var background = _this.background;\n    background.fill = 'white';\n    root.appendChild(background);\n    var element = _this._element = document.createElement('div');\n    element.setAttribute('class', 'ag-chart-wrapper');\n    var scene = new Scene(document);\n    _this.scene = scene;\n    scene.root = root;\n    scene.container = element;\n    _this.autoSize = true;\n    var legend = _this.legend;\n    legend.addEventListener('layoutChange', _this.onLayoutChange, _this);\n    legend.addPropertyListener('position', _this.onLegendPositionChange, _this);\n    _this.tooltipElement = document.createElement('div');\n    _this.tooltipClass = '';\n    document.body.appendChild(_this.tooltipElement);\n    if (Chart.tooltipDocuments.indexOf(document) < 0) {\n      var styleElement = document.createElement('style');\n      styleElement.innerHTML = defaultTooltipCss;\n      // Make sure the default tooltip style goes before other styles so it can be overridden.\n      document.head.insertBefore(styleElement, document.head.querySelector('style'));\n      Chart.tooltipDocuments.push(document);\n    }\n    _this.setupDomListeners(scene.canvas.element);\n    _this.addPropertyListener('title', _this.onCaptionChange);\n    _this.addPropertyListener('subtitle', _this.onCaptionChange);\n    _this.addEventListener('layoutChange', function () {\n      return _this.layoutPending = true;\n    });\n    return _this;\n  }\n  Object.defineProperty(Chart.prototype, \"container\", {\n    get: function get() {\n      return this._container;\n    },\n    set: function set(value) {\n      if (this._container !== value) {\n        var parentNode = this.element.parentNode;\n        if (parentNode != null) {\n          parentNode.removeChild(this.element);\n        }\n        if (value) {\n          value.appendChild(this.element);\n        }\n        this._container = value;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"data\", {\n    get: function get() {\n      return this._data;\n    },\n    set: function set(data) {\n      this._data = data;\n      this.series.forEach(function (series) {\n        return series.data = data;\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"width\", {\n    get: function get() {\n      return this.scene.width;\n    },\n    set: function set(value) {\n      this.autoSize = false;\n      if (this.width !== value) {\n        this.scene.resize(value, this.height);\n        this.fireEvent({\n          type: 'layoutChange'\n        });\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"height\", {\n    get: function get() {\n      return this.scene.height;\n    },\n    set: function set(value) {\n      this.autoSize = false;\n      if (this.height !== value) {\n        this.scene.resize(this.width, value);\n        this.fireEvent({\n          type: 'layoutChange'\n        });\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"autoSize\", {\n    get: function get() {\n      return this._autoSize;\n    },\n    set: function set(value) {\n      if (this._autoSize !== value) {\n        this._autoSize = value;\n        var style = this.element.style;\n        if (value) {\n          var chart_1 = this; // capture `this` for IE11\n          SizeMonitor.observe(this.element, function (size) {\n            if (size.width !== chart_1.width || size.height !== chart_1.height) {\n              chart_1.scene.resize(size.width, size.height);\n              chart_1.fireEvent({\n                type: 'layoutChange'\n              });\n            }\n          });\n          style.display = 'block';\n          style.width = '100%';\n          style.height = '100%';\n        } else {\n          SizeMonitor.unobserve(this.element);\n          style.display = 'inline-block';\n          style.width = 'auto';\n          style.height = 'auto';\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Chart.prototype.download = function (fileName) {\n    this.scene.download(fileName);\n  };\n  Chart.prototype.destroy = function () {\n    var tooltipParent = this.tooltipElement.parentNode;\n    if (tooltipParent) {\n      tooltipParent.removeChild(this.tooltipElement);\n    }\n    SizeMonitor.unobserve(this.element);\n    this.container = undefined;\n    this.cleanupDomListeners(this.scene.canvas.element);\n    this.scene.container = undefined;\n  };\n  Chart.prototype.onLayoutChange = function () {\n    this.layoutPending = true;\n  };\n  Chart.prototype.onLegendPositionChange = function () {\n    this.legendAutoPadding.clear();\n    this.layoutPending = true;\n  };\n  Chart.prototype.onCaptionChange = function (event) {\n    var value = event.value,\n      oldValue = event.oldValue;\n    if (oldValue) {\n      oldValue.removeEventListener('change', this.onLayoutChange, this);\n      this.scene.root.removeChild(oldValue.node);\n    }\n    if (value) {\n      value.addEventListener('change', this.onLayoutChange, this);\n      this.scene.root.appendChild(value.node);\n    }\n  };\n  Object.defineProperty(Chart.prototype, \"element\", {\n    get: function get() {\n      return this._element;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"axes\", {\n    get: function get() {\n      return this._axes;\n    },\n    set: function set(values) {\n      var _this = this;\n      this._axes.forEach(function (axis) {\n        return _this.detachAxis(axis);\n      });\n      // make linked axes go after the regular ones (simulates stable sort by `linkedTo` property)\n      this._axes = values.filter(function (a) {\n        return !a.linkedTo;\n      }).concat(values.filter(function (a) {\n        return a.linkedTo;\n      }));\n      this._axes.forEach(function (axis) {\n        return _this.attachAxis(axis);\n      });\n      this.axesChanged = true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Chart.prototype.attachAxis = function (axis) {\n    this.scene.root.insertBefore(axis.group, this.seriesRoot);\n  };\n  Chart.prototype.detachAxis = function (axis) {\n    this.scene.root.removeChild(axis.group);\n  };\n  Object.defineProperty(Chart.prototype, \"series\", {\n    get: function get() {\n      return this._series;\n    },\n    set: function set(values) {\n      var _this = this;\n      this.removeAllSeries();\n      values.forEach(function (series) {\n        return _this.addSeries(series);\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Chart.prototype.scheduleLayout = function () {\n    this.layoutPending = true;\n  };\n  Chart.prototype.scheduleData = function () {\n    // To prevent the chart from thinking the cursor is over the same node\n    // after a change to data (the nodes are reused on data changes).\n    this.dehighlightDatum();\n    this.dataPending = true;\n  };\n  Chart.prototype.addSeries = function (series, before) {\n    var _a = this,\n      allSeries = _a.series,\n      seriesRoot = _a.seriesRoot;\n    var canAdd = allSeries.indexOf(series) < 0;\n    if (canAdd) {\n      var beforeIndex = before ? allSeries.indexOf(before) : -1;\n      if (beforeIndex >= 0) {\n        allSeries.splice(beforeIndex, 0, series);\n        seriesRoot.insertBefore(series.group, before.group);\n      } else {\n        allSeries.push(series);\n        seriesRoot.append(series.group);\n      }\n      this.initSeries(series);\n      this.seriesChanged = true;\n      this.axesChanged = true;\n      return true;\n    }\n    return false;\n  };\n  Chart.prototype.initSeries = function (series) {\n    series.chart = this;\n    if (!series.data) {\n      series.data = this.data;\n    }\n    series.addEventListener('layoutChange', this.scheduleLayout, this);\n    series.addEventListener('dataChange', this.scheduleData, this);\n    series.addEventListener('legendChange', this.updateLegend, this);\n    series.addEventListener('nodeClick', this.onSeriesNodeClick, this);\n  };\n  Chart.prototype.freeSeries = function (series) {\n    series.chart = undefined;\n    series.removeEventListener('layoutChange', this.scheduleLayout, this);\n    series.removeEventListener('dataChange', this.scheduleData, this);\n    series.removeEventListener('legendChange', this.updateLegend, this);\n    series.removeEventListener('nodeClick', this.onSeriesNodeClick, this);\n  };\n  Chart.prototype.addSeriesAfter = function (series, after) {\n    var _a = this,\n      allSeries = _a.series,\n      seriesRoot = _a.seriesRoot;\n    var canAdd = allSeries.indexOf(series) < 0;\n    if (canAdd) {\n      var afterIndex = after ? this.series.indexOf(after) : -1;\n      if (afterIndex >= 0) {\n        if (afterIndex + 1 < allSeries.length) {\n          seriesRoot.insertBefore(series.group, allSeries[afterIndex + 1].group);\n        } else {\n          seriesRoot.append(series.group);\n        }\n        this.initSeries(series);\n        allSeries.splice(afterIndex + 1, 0, series);\n      } else {\n        if (allSeries.length > 0) {\n          seriesRoot.insertBefore(series.group, allSeries[0].group);\n        } else {\n          seriesRoot.append(series.group);\n        }\n        this.initSeries(series);\n        allSeries.unshift(series);\n      }\n      this.seriesChanged = true;\n      this.axesChanged = true;\n    }\n    return false;\n  };\n  Chart.prototype.removeSeries = function (series) {\n    var index = this.series.indexOf(series);\n    if (index >= 0) {\n      this.series.splice(index, 1);\n      this.freeSeries(series);\n      this.seriesRoot.removeChild(series.group);\n      this.seriesChanged = true;\n      return true;\n    }\n    return false;\n  };\n  Chart.prototype.removeAllSeries = function () {\n    var _this = this;\n    this.series.forEach(function (series) {\n      _this.freeSeries(series);\n      _this.seriesRoot.removeChild(series.group);\n    });\n    this._series = []; // using `_series` instead of `series` to prevent infinite recursion\n    this.seriesChanged = true;\n  };\n  Chart.prototype.assignSeriesToAxes = function () {\n    var _this = this;\n    this.axes.forEach(function (axis) {\n      var axisName = axis.direction + 'Axis';\n      var boundSeries = [];\n      _this.series.forEach(function (series) {\n        if (series[axisName] === axis) {\n          boundSeries.push(series);\n        }\n      });\n      axis.boundSeries = boundSeries;\n    });\n    this.seriesChanged = false;\n  };\n  Chart.prototype.assignAxesToSeries = function (force) {\n    var _this = this;\n    if (force === void 0) {\n      force = false;\n    }\n    // This method has to run before `assignSeriesToAxes`.\n    var directionToAxesMap = {};\n    this.axes.forEach(function (axis) {\n      var direction = axis.direction;\n      var directionAxes = directionToAxesMap[direction] || (directionToAxesMap[direction] = []);\n      directionAxes.push(axis);\n    });\n    this.series.forEach(function (series) {\n      series.directions.forEach(function (direction) {\n        var axisName = direction + 'Axis';\n        if (!series[axisName] || force) {\n          var directionAxes = directionToAxesMap[direction];\n          if (directionAxes) {\n            var axis = _this.findMatchingAxis(directionAxes, series.getKeys(direction));\n            if (axis) {\n              series[axisName] = axis;\n            }\n          }\n        }\n      });\n      if (series instanceof CartesianSeries) {\n        if (!series.xAxis) {\n          console.warn(\"Could not find a matching xAxis for the \" + series.id + \" series.\");\n          return;\n        }\n        if (!series.yAxis) {\n          console.warn(\"Could not find a matching yAxis for the \" + series.id + \" series.\");\n          return;\n        }\n      }\n    });\n    this.axesChanged = false;\n  };\n  Chart.prototype.findMatchingAxis = function (directionAxes, directionKeys) {\n    for (var i = 0; i < directionAxes.length; i++) {\n      var axis = directionAxes[i];\n      var axisKeys = axis.keys;\n      if (!axisKeys.length) {\n        return axis;\n      } else if (directionKeys) {\n        for (var j = 0; j < directionKeys.length; j++) {\n          if (axisKeys.indexOf(directionKeys[j]) >= 0) {\n            return axis;\n          }\n        }\n      }\n    }\n  };\n  Object.defineProperty(Chart.prototype, \"axesChanged\", {\n    get: function get() {\n      return this._axesChanged;\n    },\n    set: function set(value) {\n      this._axesChanged = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"seriesChanged\", {\n    get: function get() {\n      return this._seriesChanged;\n    },\n    set: function set(value) {\n      this._seriesChanged = value;\n      if (value) {\n        this.dataPending = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"layoutPending\", {\n    /**\n     * Only `true` while we are waiting for the layout to start.\n     * This will be `false` if the layout has already started and is ongoing.\n     */\n    get: function get() {\n      return !!this.layoutCallbackId;\n    },\n    set: function set(value) {\n      if (value) {\n        if (!(this.layoutCallbackId || this.dataPending)) {\n          this.layoutCallbackId = requestAnimationFrame(this._performLayout);\n        }\n      } else if (this.layoutCallbackId) {\n        cancelAnimationFrame(this.layoutCallbackId);\n        this.layoutCallbackId = 0;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"dataPending\", {\n    get: function get() {\n      return !!this.dataCallbackId;\n    },\n    set: function set(value) {\n      var _this = this;\n      if (this.dataCallbackId) {\n        clearTimeout(this.dataCallbackId);\n        this.dataCallbackId = 0;\n      }\n      if (value) {\n        this.dataCallbackId = window.setTimeout(function () {\n          _this.dataPending = false;\n          _this.processData();\n        }, 0);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Chart.prototype.processData = function () {\n    this.layoutPending = false;\n    if (this.axesChanged) {\n      this.assignAxesToSeries(true);\n      this.assignSeriesToAxes();\n    }\n    if (this.seriesChanged) {\n      this.assignSeriesToAxes();\n    }\n    this.series.filter(function (s) {\n      return s.visible;\n    }).forEach(function (series) {\n      return series.processData();\n    });\n    this.updateLegend();\n    this.layoutPending = true;\n  };\n  Chart.prototype.updateLegend = function () {\n    var legendData = [];\n    this.series.filter(function (s) {\n      return s.showInLegend;\n    }).forEach(function (series) {\n      return series.listSeriesItems(legendData);\n    });\n    this.legend.data = legendData;\n  };\n  Chart.prototype.positionCaptions = function () {\n    var _a = this,\n      title = _a.title,\n      subtitle = _a.subtitle;\n    var titleVisible = false;\n    var subtitleVisible = false;\n    var spacing = 10;\n    var paddingTop = spacing;\n    if (title && title.enabled) {\n      title.node.x = this.width / 2;\n      title.node.y = paddingTop;\n      titleVisible = true;\n      var titleBBox = title.node.computeBBox(); // make sure to set node's x/y, then computeBBox\n      if (titleBBox) {\n        paddingTop = titleBBox.y + titleBBox.height;\n      }\n      if (subtitle && subtitle.enabled) {\n        subtitle.node.x = this.width / 2;\n        subtitle.node.y = paddingTop + spacing;\n        subtitleVisible = true;\n        var subtitleBBox = subtitle.node.computeBBox();\n        if (subtitleBBox) {\n          paddingTop = subtitleBBox.y + subtitleBBox.height;\n        }\n      }\n    }\n    if (title) {\n      title.node.visible = titleVisible;\n    }\n    if (subtitle) {\n      subtitle.node.visible = subtitleVisible;\n    }\n    this.captionAutoPadding = Math.floor(paddingTop);\n  };\n  Chart.prototype.positionLegend = function () {\n    if (!this.legend.enabled || !this.legend.data.length) {\n      return;\n    }\n    var _a = this,\n      legend = _a.legend,\n      captionAutoPadding = _a.captionAutoPadding,\n      legendAutoPadding = _a.legendAutoPadding;\n    var width = this.width;\n    var height = this.height - captionAutoPadding;\n    var legendGroup = legend.group;\n    var legendSpacing = legend.spacing;\n    var translationX = 0;\n    var translationY = 0;\n    var legendBBox;\n    switch (legend.position) {\n      case 'bottom':\n        legend.performLayout(width - legendSpacing * 2, 0);\n        legendBBox = legendGroup.computeBBox();\n        translationX = (width - legendBBox.width) / 2 - legendBBox.x;\n        translationY = captionAutoPadding + height - legendBBox.height - legendBBox.y - legendSpacing;\n        legendAutoPadding.bottom = legendBBox.height;\n        break;\n      case 'top':\n        legend.performLayout(width - legendSpacing * 2, 0);\n        legendBBox = legendGroup.computeBBox();\n        translationX = (width - legendBBox.width) / 2 - legendBBox.x;\n        translationY = captionAutoPadding + legendSpacing - legendBBox.y;\n        legendAutoPadding.top = legendBBox.height;\n        break;\n      case 'left':\n        legend.performLayout(0, height - legendSpacing * 2);\n        legendBBox = legendGroup.computeBBox();\n        translationX = legendSpacing - legendBBox.x;\n        translationY = captionAutoPadding + (height - legendBBox.height) / 2 - legendBBox.y;\n        legendAutoPadding.left = legendBBox.width;\n        break;\n      default:\n        // case 'right':\n        legend.performLayout(0, height - legendSpacing * 2);\n        legendBBox = legendGroup.computeBBox();\n        translationX = width - legendBBox.width - legendBBox.x - legendSpacing;\n        translationY = captionAutoPadding + (height - legendBBox.height) / 2 - legendBBox.y;\n        legendAutoPadding.right = legendBBox.width;\n        break;\n    }\n    // Round off for pixel grid alignment to work properly.\n    legendGroup.translationX = Math.floor(translationX + legendGroup.translationX);\n    legendGroup.translationY = Math.floor(translationY + legendGroup.translationY);\n  };\n  Chart.prototype.setupDomListeners = function (chartElement) {\n    chartElement.addEventListener('mousedown', this._onMouseDown);\n    chartElement.addEventListener('mousemove', this._onMouseMove);\n    chartElement.addEventListener('mouseup', this._onMouseUp);\n    chartElement.addEventListener('mouseout', this._onMouseOut);\n    chartElement.addEventListener('click', this._onClick);\n  };\n  Chart.prototype.cleanupDomListeners = function (chartElement) {\n    chartElement.removeEventListener('mousedown', this._onMouseDown);\n    chartElement.removeEventListener('mousemove', this._onMouseMove);\n    chartElement.removeEventListener('mouseup', this._onMouseUp);\n    chartElement.removeEventListener('mouseout', this._onMouseOut);\n    chartElement.removeEventListener('click', this._onClick);\n  };\n  // x/y are local canvas coordinates in CSS pixels, not actual pixels\n  Chart.prototype.pickSeriesNode = function (x, y) {\n    if (!this.seriesRect || !this.seriesRect.containsPoint(x, y)) {\n      return undefined;\n    }\n    var allSeries = this.series;\n    var node = undefined;\n    for (var i = allSeries.length - 1; i >= 0; i--) {\n      var series = allSeries[i];\n      node = series.group.pickNode(x, y);\n      if (node) {\n        return {\n          series: series,\n          node: node\n        };\n      }\n    }\n  };\n  // Provided x/y are in canvas coordinates.\n  Chart.prototype.pickClosestSeriesNodeDatum = function (x, y) {\n    if (!this.seriesRect || !this.seriesRect.containsPoint(x, y)) {\n      return undefined;\n    }\n    var allSeries = this.series;\n    function getDistance(p1, p2) {\n      return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n    }\n    var minDistance = Infinity;\n    var closestDatum;\n    var _loop_1 = function _loop_1(i) {\n      var series = allSeries[i];\n      if (!series.visible) {\n        return \"continue\";\n      }\n      var hitPoint = series.group.transformPoint(x, y);\n      series.getNodeData().forEach(function (datum) {\n        if (!datum.point) {\n          return;\n        }\n        var distance = getDistance(hitPoint, datum.point);\n        if (distance < minDistance) {\n          minDistance = distance;\n          closestDatum = datum;\n        }\n      });\n    };\n    for (var i = allSeries.length - 1; i >= 0; i--) {\n      _loop_1(i);\n    }\n    if (closestDatum) {\n      return closestDatum;\n    }\n  };\n  Chart.prototype.onMouseMove = function (event) {\n    var _a = this,\n      lastPick = _a.lastPick,\n      tooltipTracking = _a.tooltipTracking;\n    var pick = this.pickSeriesNode(event.offsetX, event.offsetY);\n    var nodeDatum;\n    if (pick && pick.node instanceof Shape) {\n      var node = pick.node;\n      nodeDatum = node.datum;\n      if (lastPick && lastPick.datum === nodeDatum) {\n        lastPick.node = node;\n      }\n      // Marker nodes will have the `point` info in their datums.\n      // Highlight if not a marker node or, if not in the tracking mode, highlight markers too.\n      if (!node.datum.point || !tooltipTracking) {\n        if (!lastPick // cursor moved from empty space to a node\n        || lastPick.node !== node) {\n          // cursor moved from one node to another\n          this.onSeriesDatumPick(event, node.datum, node);\n        } else if (pick.series.tooltipEnabled) {\n          // cursor moved within the same node\n          this.showTooltip(event);\n        }\n        // A non-marker node (takes precedence over marker nodes) was highlighted.\n        // Or we are not in the tracking mode.\n        // Either way, we are done at this point.\n        return;\n      }\n    }\n    var hideTooltip = false;\n    // In tracking mode a tooltip is shown for the closest rendered datum.\n    // This makes it easier to show tooltips when markers are small and/or plentiful\n    // and also gives the ability to show tooltips even when the series were configured\n    // to not render markers.\n    if (tooltipTracking) {\n      var closestDatum = this.pickClosestSeriesNodeDatum(event.offsetX, event.offsetY);\n      if (closestDatum && closestDatum.point) {\n        var _b = closestDatum.point,\n          x = _b.x,\n          y = _b.y;\n        var canvas = this.scene.canvas;\n        var point = closestDatum.series.group.inverseTransformPoint(x, y);\n        var canvasRect = canvas.element.getBoundingClientRect();\n        this.onSeriesDatumPick({\n          pageX: Math.round(canvasRect.left + window.pageXOffset + point.x),\n          pageY: Math.round(canvasRect.top + window.pageYOffset + point.y)\n        }, closestDatum, nodeDatum === closestDatum && pick ? pick.node : undefined);\n      } else {\n        hideTooltip = true;\n      }\n    }\n    if (lastPick && (hideTooltip || !tooltipTracking)) {\n      // cursor moved from a non-marker node to empty space\n      this.dehighlightDatum();\n      this.hideTooltip();\n      this.lastPick = undefined;\n    }\n  };\n  Chart.prototype.onMouseDown = function (event) {};\n  Chart.prototype.onMouseUp = function (event) {};\n  Chart.prototype.onMouseOut = function (event) {\n    this.toggleTooltip(false);\n  };\n  Chart.prototype.onClick = function (event) {\n    this.checkSeriesNodeClick();\n    this.checkLegendClick(event);\n  };\n  Chart.prototype.checkSeriesNodeClick = function () {\n    var lastPick = this.lastPick;\n    if (lastPick && lastPick.node) {\n      var datum = lastPick.datum;\n      datum.series.fireNodeClickEvent(datum);\n    }\n  };\n  Chart.prototype.onSeriesNodeClick = function (event) {\n    this.fireEvent(__assign$2(__assign$2({}, event), {\n      type: 'seriesNodeClick'\n    }));\n  };\n  Chart.prototype.checkLegendClick = function (event) {\n    var datum = this.legend.getDatumForPoint(event.offsetX, event.offsetY);\n    if (datum) {\n      var id_1 = datum.id,\n        itemId = datum.itemId,\n        enabled = datum.enabled;\n      var series = find(this.series, function (series) {\n        return series.id === id_1;\n      });\n      if (series) {\n        series.toggleSeriesItem(itemId, !enabled);\n        if (enabled) {\n          this.hideTooltip();\n        }\n      }\n    }\n  };\n  Chart.prototype.onSeriesDatumPick = function (meta, datum, node) {\n    if (this.lastPick) {\n      // this.lastPick.datum.series.dehighlightDatum();\n      this.dehighlightDatum();\n    }\n    this.lastPick = {\n      datum: datum,\n      node: node\n    };\n    this.highlightDatum(datum);\n    var html = datum.series.tooltipEnabled && datum.series.getTooltipHtml(datum);\n    if (html) {\n      this.showTooltip(meta, html);\n    }\n  };\n  Chart.prototype.highlightDatum = function (datum) {\n    this.highlightedDatum = datum;\n    this.series.forEach(function (s) {\n      return s.onHighlightChange();\n    });\n  };\n  Chart.prototype.dehighlightDatum = function () {\n    if (this.highlightedDatum) {\n      this.highlightedDatum = undefined;\n      this.series.forEach(function (s) {\n        return s.onHighlightChange();\n      });\n    }\n  };\n  Object.defineProperty(Chart.prototype, \"tooltipClass\", {\n    get: function get() {\n      return this._tooltipClass;\n    },\n    set: function set(value) {\n      if (this._tooltipClass !== value) {\n        this._tooltipClass = value;\n        this.toggleTooltip();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Chart.prototype.toggleTooltip = function (visible) {\n    if (!visible && this.lastPick) {\n      this.dehighlightDatum();\n      this.lastPick = undefined;\n    }\n    this.updateTooltipClass(visible);\n  };\n  Chart.prototype.updateTooltipClass = function (visible, constrained) {\n    var classList = [Chart.defaultTooltipClass, this.tooltipClass];\n    if (visible === true) {\n      classList.push(Chart.defaultTooltipClass + \"-visible\");\n    }\n    if (constrained !== true) {\n      classList.push(Chart.defaultTooltipClass + \"-arrow\");\n    }\n    this.tooltipElement.setAttribute('class', classList.join(' '));\n  };\n  /**\n   * Shows tooltip at the given event's coordinates.\n   * If the `html` parameter is missing, moves the existing tooltip to the new position.\n   */\n  Chart.prototype.showTooltip = function (meta, html) {\n    var el = this.tooltipElement;\n    var container = this.container;\n    if (html !== undefined) {\n      el.innerHTML = html;\n    } else if (!el.innerHTML) {\n      return;\n    }\n    if (html) {\n      this.toggleTooltip(true);\n    }\n    var left = meta.pageX - el.clientWidth / 2;\n    var top = meta.pageY - el.clientHeight - 8;\n    if (container) {\n      var tooltipRect = el.getBoundingClientRect();\n      var minLeft = 0;\n      var maxLeft = window.innerWidth - tooltipRect.width;\n      if (left < minLeft) {\n        left = minLeft;\n        this.updateTooltipClass(true, true);\n      } else if (left > maxLeft) {\n        left = maxLeft;\n        this.updateTooltipClass(true, true);\n      }\n    }\n    el.style.left = left + \"px\";\n    el.style.top = top + \"px\";\n  };\n  Chart.prototype.hideTooltip = function () {\n    this.toggleTooltip(false);\n  };\n  Chart.defaultTooltipClass = 'ag-chart-tooltip';\n  Chart.tooltipDocuments = [];\n  __decorate$J([reactive('layoutChange')], Chart.prototype, \"padding\", void 0);\n  __decorate$J([reactive('layoutChange')], Chart.prototype, \"title\", void 0);\n  __decorate$J([reactive('layoutChange')], Chart.prototype, \"subtitle\", void 0);\n  return Chart;\n}(Observable);\nvar __extends$19 = undefined && undefined.__extends || function () {\n  var _extendStatics74 = function extendStatics(d, b) {\n    _extendStatics74 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics74(d, b);\n  };\n  return function (d, b) {\n    _extendStatics74(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * Acts as `Group` node but with specified bounds that form a rectangle.\n * Any parts of the child nodes outside that rectangle will not be visible.\n * Unlike the `Group` node, the `ClipRect` node cannot be transformed.\n */\nvar ClipRect = /** @class */function (_super) {\n  __extends$19(ClipRect, _super);\n  function ClipRect() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.isContainerNode = true;\n    _this.path = new Path2D();\n    _this._enabled = true;\n    _this._dirtyPath = true;\n    _this._x = 0;\n    _this._y = 0;\n    _this._width = 10;\n    _this._height = 10;\n    return _this;\n  }\n  ClipRect.prototype.containsPoint = function (x, y) {\n    var point = this.transformPoint(x, y);\n    return point.x >= this.x && point.x <= this.x + this.width && point.y >= this.y && point.y <= this.y + this.height;\n  };\n  Object.defineProperty(ClipRect.prototype, \"enabled\", {\n    get: function get() {\n      return this._enabled;\n    },\n    set: function set(value) {\n      if (this._enabled !== value) {\n        this._enabled = value;\n        this.dirty = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ClipRect.prototype, \"dirtyPath\", {\n    get: function get() {\n      return this._dirtyPath;\n    },\n    set: function set(value) {\n      if (this._dirtyPath !== value) {\n        this._dirtyPath = value;\n        if (value) {\n          this.dirty = true;\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ClipRect.prototype, \"x\", {\n    get: function get() {\n      return this._x;\n    },\n    set: function set(value) {\n      if (this._x !== value) {\n        this._x = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ClipRect.prototype, \"y\", {\n    get: function get() {\n      return this._y;\n    },\n    set: function set(value) {\n      if (this._y !== value) {\n        this._y = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ClipRect.prototype, \"width\", {\n    get: function get() {\n      return this._width;\n    },\n    set: function set(value) {\n      if (this._width !== value) {\n        this._width = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ClipRect.prototype, \"height\", {\n    get: function get() {\n      return this._height;\n    },\n    set: function set(value) {\n      if (this._height !== value) {\n        this._height = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ClipRect.prototype.updatePath = function () {\n    var path = this.path;\n    path.clear();\n    path.rect(this.x, this.y, this.width, this.height);\n    this.dirtyPath = false;\n  };\n  ClipRect.prototype.computeBBox = function () {\n    var _a = this,\n      x = _a.x,\n      y = _a.y,\n      width = _a.width,\n      height = _a.height;\n    return new BBox(x, y, width, height);\n  };\n  ClipRect.prototype.render = function (ctx) {\n    if (this.enabled) {\n      if (this.dirtyPath) {\n        this.updatePath();\n      }\n      this.scene.appendPath(this.path);\n      ctx.clip();\n    }\n    var children = this.children;\n    var n = children.length;\n    for (var i = 0; i < n; i++) {\n      ctx.save();\n      var child = children[i];\n      if (child.visible) {\n        child.render(ctx);\n      }\n      ctx.restore();\n    }\n    // debug\n    // this.computeBBox().render(ctx, {\n    //     label: this.id,\n    //     resetTransform: true,\n    //     fillStyle: 'rgba(0, 0, 0, 0.5)'\n    // });\n  };\n\n  ClipRect.className = 'ClipRect';\n  return ClipRect;\n}(Node);\nvar __extends$1a = undefined && undefined.__extends || function () {\n  var _extendStatics75 = function extendStatics(d, b) {\n    _extendStatics75 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics75(d, b);\n  };\n  return function (d, b) {\n    _extendStatics75(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar RangeHandle = /** @class */function (_super) {\n  __extends$1a(RangeHandle, _super);\n  function RangeHandle() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._fill = '#f2f2f2';\n    _this._stroke = '#999999';\n    _this._strokeWidth = 1;\n    _this._lineCap = 'square';\n    _this._centerX = 0;\n    _this._centerY = 0;\n    // Use an even number for better looking results.\n    _this._width = 8;\n    // Use an even number for better looking results.\n    _this._gripLineGap = 2;\n    // Use an even number for better looking results.\n    _this._gripLineLength = 8;\n    _this._height = 16;\n    return _this;\n  }\n  Object.defineProperty(RangeHandle.prototype, \"centerX\", {\n    get: function get() {\n      return this._centerX;\n    },\n    set: function set(value) {\n      if (this._centerX !== value) {\n        this._centerX = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RangeHandle.prototype, \"centerY\", {\n    get: function get() {\n      return this._centerY;\n    },\n    set: function set(value) {\n      if (this._centerY !== value) {\n        this._centerY = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RangeHandle.prototype, \"width\", {\n    get: function get() {\n      return this._width;\n    },\n    set: function set(value) {\n      if (this._width !== value) {\n        this._width = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RangeHandle.prototype, \"gripLineGap\", {\n    get: function get() {\n      return this._gripLineGap;\n    },\n    set: function set(value) {\n      if (this._gripLineGap !== value) {\n        this._gripLineGap = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RangeHandle.prototype, \"gripLineLength\", {\n    get: function get() {\n      return this._gripLineLength;\n    },\n    set: function set(value) {\n      if (this._gripLineLength !== value) {\n        this._gripLineLength = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RangeHandle.prototype, \"height\", {\n    get: function get() {\n      return this._height;\n    },\n    set: function set(value) {\n      if (this._height !== value) {\n        this._height = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  RangeHandle.prototype.computeBBox = function () {\n    var _a = this,\n      centerX = _a.centerX,\n      centerY = _a.centerY,\n      width = _a.width,\n      height = _a.height;\n    var x = centerX - width / 2;\n    var y = centerY - height / 2;\n    return new BBox(x, y, width, height);\n  };\n  RangeHandle.prototype.isPointInPath = function (x, y) {\n    var point = this.transformPoint(x, y);\n    var bbox = this.computeBBox();\n    return bbox.containsPoint(point.x, point.y);\n  };\n  RangeHandle.prototype.updatePath = function () {\n    var _a = this,\n      path = _a.path,\n      centerX = _a.centerX,\n      centerY = _a.centerY,\n      width = _a.width,\n      height = _a.height;\n    var _b = this,\n      a = _b.alignment,\n      al = _b.align;\n    path.clear();\n    var x = centerX - width / 2;\n    var y = centerY - height / 2;\n    var ax = al(a, x);\n    var ay = al(a, y);\n    var axw = ax + al(a, x, width);\n    var ayh = ay + al(a, y, height);\n    // Handle.\n    path.moveTo(ax, ay);\n    path.lineTo(axw, ay);\n    path.lineTo(axw, ayh);\n    path.lineTo(ax, ayh);\n    path.lineTo(ax, ay);\n    // Grip lines.\n    var dx = this.gripLineGap / 2;\n    var dy = this.gripLineLength / 2;\n    path.moveTo(al(a, centerX - dx), al(a, centerY - dy));\n    path.lineTo(al(a, centerX - dx), al(a, centerY + dy));\n    path.moveTo(al(a, centerX + dx), al(a, centerY - dy));\n    path.lineTo(al(a, centerX + dx), al(a, centerY + dy));\n  };\n  RangeHandle.className = 'RangeHandle';\n  return RangeHandle;\n}(Path);\nvar __extends$1b = undefined && undefined.__extends || function () {\n  var _extendStatics76 = function extendStatics(d, b) {\n    _extendStatics76 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics76(d, b);\n  };\n  return function (d, b) {\n    _extendStatics76(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar RangeMask = /** @class */function (_super) {\n  __extends$1b(RangeMask, _super);\n  function RangeMask() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._stroke = '#999999';\n    _this._strokeWidth = 1;\n    _this._fill = '#999999';\n    _this._fillOpacity = 0.2;\n    _this._lineCap = 'square';\n    _this._x = 0;\n    _this._y = 0;\n    _this._width = 200;\n    _this._height = 30;\n    _this.minRange = 0.05;\n    _this._min = 0;\n    _this._max = 1;\n    return _this;\n  }\n  Object.defineProperty(RangeMask.prototype, \"x\", {\n    get: function get() {\n      return this._x;\n    },\n    set: function set(value) {\n      if (this._x !== value) {\n        this._x = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RangeMask.prototype, \"y\", {\n    get: function get() {\n      return this._y;\n    },\n    set: function set(value) {\n      if (this._y !== value) {\n        this._y = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RangeMask.prototype, \"width\", {\n    get: function get() {\n      return this._width;\n    },\n    set: function set(value) {\n      if (this._width !== value) {\n        this._width = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RangeMask.prototype, \"height\", {\n    get: function get() {\n      return this._height;\n    },\n    set: function set(value) {\n      if (this._height !== value) {\n        this._height = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RangeMask.prototype, \"min\", {\n    get: function get() {\n      return this._min;\n    },\n    set: function set(value) {\n      value = Math.min(Math.max(value, 0), this.max - this.minRange);\n      if (isNaN(value)) {\n        return;\n      }\n      if (this._min !== value) {\n        this._min = value;\n        this.dirtyPath = true;\n        this.onRangeChange && this.onRangeChange(value, this.max);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RangeMask.prototype, \"max\", {\n    get: function get() {\n      return this._max;\n    },\n    set: function set(value) {\n      value = Math.max(Math.min(value, 1), this.min + this.minRange);\n      if (isNaN(value)) {\n        return;\n      }\n      if (this._max !== value) {\n        this._max = value;\n        this.dirtyPath = true;\n        this.onRangeChange && this.onRangeChange(this.min, value);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  RangeMask.prototype.computeBBox = function () {\n    var _a = this,\n      x = _a.x,\n      y = _a.y,\n      width = _a.width,\n      height = _a.height;\n    return new BBox(x, y, width, height);\n  };\n  RangeMask.prototype.computeVisibleRangeBBox = function () {\n    var _a = this,\n      x = _a.x,\n      y = _a.y,\n      width = _a.width,\n      height = _a.height,\n      min = _a.min,\n      max = _a.max;\n    var minX = x + width * min;\n    var maxX = x + width * max;\n    return new BBox(minX, y, maxX - minX, height);\n  };\n  RangeMask.prototype.updatePath = function () {\n    var _a = this,\n      path = _a.path,\n      x = _a.x,\n      y = _a.y,\n      width = _a.width,\n      height = _a.height,\n      min = _a.min,\n      max = _a.max;\n    var _b = this,\n      a = _b.alignment,\n      al = _b.align;\n    path.clear();\n    var ax = al(a, x);\n    var ay = al(a, y);\n    var axw = ax + al(a, x, width);\n    var ayh = ay + al(a, y, height);\n    // Whole range.\n    path.moveTo(ax, ay);\n    path.lineTo(axw, ay);\n    path.lineTo(axw, ayh);\n    path.lineTo(ax, ayh);\n    path.lineTo(ax, ay);\n    var minX = al(a, x + width * min);\n    var maxX = al(a, x + width * max);\n    // Visible range.\n    path.moveTo(minX, ay);\n    path.lineTo(minX, ayh);\n    path.lineTo(maxX, ayh);\n    path.lineTo(maxX, ay);\n    path.lineTo(minX, ay);\n  };\n  RangeMask.className = 'RangeMask';\n  return RangeMask;\n}(Path);\nvar __extends$1c = undefined && undefined.__extends || function () {\n  var _extendStatics77 = function extendStatics(d, b) {\n    _extendStatics77 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics77(d, b);\n  };\n  return function (d, b) {\n    _extendStatics77(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar RangeSelector = /** @class */function (_super) {\n  __extends$1c(RangeSelector, _super);\n  function RangeSelector() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.isContainerNode = true;\n    _this.minHandle = new RangeHandle();\n    _this.maxHandle = new RangeHandle();\n    _this.mask = function () {\n      var _a = RangeSelector.defaults,\n        x = _a.x,\n        y = _a.y,\n        width = _a.width,\n        height = _a.height,\n        min = _a.min,\n        max = _a.max;\n      var mask = new RangeMask();\n      mask.x = x;\n      mask.y = y;\n      mask.width = width;\n      mask.height = height;\n      mask.min = min;\n      mask.max = max;\n      var _b = _this,\n        minHandle = _b.minHandle,\n        maxHandle = _b.maxHandle;\n      minHandle.centerX = x;\n      maxHandle.centerX = x + width;\n      minHandle.centerY = maxHandle.centerY = y + height / 2;\n      _this.append([mask, minHandle, maxHandle]);\n      mask.onRangeChange = function (min, max) {\n        _this.updateHandles();\n        _this.onRangeChange && _this.onRangeChange(min, max);\n      };\n      return mask;\n    }();\n    _this._x = RangeSelector.defaults.x;\n    _this._y = RangeSelector.defaults.y;\n    _this._width = RangeSelector.defaults.width;\n    _this._height = RangeSelector.defaults.height;\n    _this._min = RangeSelector.defaults.min;\n    _this._max = RangeSelector.defaults.max;\n    return _this;\n  }\n  Object.defineProperty(RangeSelector.prototype, \"x\", {\n    get: function get() {\n      return this.mask.x;\n    },\n    set: function set(value) {\n      this.mask.x = value;\n      this.updateHandles();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RangeSelector.prototype, \"y\", {\n    get: function get() {\n      return this.mask.y;\n    },\n    set: function set(value) {\n      this.mask.y = value;\n      this.updateHandles();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RangeSelector.prototype, \"width\", {\n    get: function get() {\n      return this.mask.width;\n    },\n    set: function set(value) {\n      this.mask.width = value;\n      this.updateHandles();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RangeSelector.prototype, \"height\", {\n    get: function get() {\n      return this.mask.height;\n    },\n    set: function set(value) {\n      this.mask.height = value;\n      this.updateHandles();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RangeSelector.prototype, \"min\", {\n    get: function get() {\n      return this.mask.min;\n    },\n    set: function set(value) {\n      this.mask.min = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RangeSelector.prototype, \"max\", {\n    get: function get() {\n      return this.mask.max;\n    },\n    set: function set(value) {\n      this.mask.max = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  RangeSelector.prototype.updateHandles = function () {\n    var _a = this,\n      minHandle = _a.minHandle,\n      maxHandle = _a.maxHandle,\n      x = _a.x,\n      y = _a.y,\n      width = _a.width,\n      height = _a.height,\n      mask = _a.mask;\n    minHandle.centerX = x + width * mask.min;\n    maxHandle.centerX = x + width * mask.max;\n    minHandle.centerY = maxHandle.centerY = y + height / 2;\n  };\n  RangeSelector.prototype.computeBBox = function () {\n    return this.mask.computeBBox();\n  };\n  RangeSelector.prototype.computeVisibleRangeBBox = function () {\n    return this.mask.computeVisibleRangeBBox();\n  };\n  RangeSelector.prototype.render = function (ctx) {\n    if (this.dirtyTransform) {\n      this.computeTransformMatrix();\n    }\n    this.matrix.toContext(ctx);\n    var _a = this,\n      mask = _a.mask,\n      minHandle = _a.minHandle,\n      maxHandle = _a.maxHandle;\n    [mask, minHandle, maxHandle].forEach(function (child) {\n      ctx.save();\n      if (child.visible) {\n        child.render(ctx);\n      }\n      ctx.restore();\n    });\n  };\n  RangeSelector.className = 'Range';\n  RangeSelector.defaults = {\n    x: 0,\n    y: 0,\n    width: 200,\n    height: 30,\n    min: 0,\n    max: 1\n  };\n  return RangeSelector;\n}(Group);\nvar NavigatorMask = /** @class */function () {\n  function NavigatorMask(rangeMask) {\n    this.rm = rangeMask;\n  }\n  Object.defineProperty(NavigatorMask.prototype, \"fill\", {\n    get: function get() {\n      return this.rm.fill;\n    },\n    set: function set(value) {\n      this.rm.fill = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NavigatorMask.prototype, \"stroke\", {\n    get: function get() {\n      return this.rm.stroke;\n    },\n    set: function set(value) {\n      this.rm.stroke = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NavigatorMask.prototype, \"strokeWidth\", {\n    get: function get() {\n      return this.rm.strokeWidth;\n    },\n    set: function set(value) {\n      this.rm.strokeWidth = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NavigatorMask.prototype, \"fillOpacity\", {\n    get: function get() {\n      return this.rm.fillOpacity;\n    },\n    set: function set(value) {\n      this.rm.fillOpacity = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return NavigatorMask;\n}();\nvar NavigatorHandle = /** @class */function () {\n  function NavigatorHandle(rangeHandle) {\n    this.rh = rangeHandle;\n  }\n  Object.defineProperty(NavigatorHandle.prototype, \"fill\", {\n    get: function get() {\n      return this.rh.fill;\n    },\n    set: function set(value) {\n      this.rh.fill = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NavigatorHandle.prototype, \"stroke\", {\n    get: function get() {\n      return this.rh.stroke;\n    },\n    set: function set(value) {\n      this.rh.stroke = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NavigatorHandle.prototype, \"strokeWidth\", {\n    get: function get() {\n      return this.rh.strokeWidth;\n    },\n    set: function set(value) {\n      this.rh.strokeWidth = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NavigatorHandle.prototype, \"width\", {\n    get: function get() {\n      return this.rh.width;\n    },\n    set: function set(value) {\n      this.rh.width = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NavigatorHandle.prototype, \"height\", {\n    get: function get() {\n      return this.rh.height;\n    },\n    set: function set(value) {\n      this.rh.height = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NavigatorHandle.prototype, \"gripLineGap\", {\n    get: function get() {\n      return this.rh.gripLineGap;\n    },\n    set: function set(value) {\n      this.rh.gripLineGap = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NavigatorHandle.prototype, \"gripLineLength\", {\n    get: function get() {\n      return this.rh.gripLineLength;\n    },\n    set: function set(value) {\n      this.rh.gripLineLength = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return NavigatorHandle;\n}();\nvar Navigator = /** @class */function () {\n  function Navigator(chart) {\n    var _this = this;\n    this.rs = new RangeSelector();\n    this.mask = new NavigatorMask(this.rs.mask);\n    this.minHandle = new NavigatorHandle(this.rs.minHandle);\n    this.maxHandle = new NavigatorHandle(this.rs.maxHandle);\n    this.minHandleDragging = false;\n    this.maxHandleDragging = false;\n    this.panHandleOffset = NaN;\n    this._margin = 10;\n    this.chart = chart;\n    chart.scene.root.append(this.rs);\n    this.rs.onRangeChange = function (min, max) {\n      return _this.updateAxes(min, max);\n    };\n  }\n  Object.defineProperty(Navigator.prototype, \"enabled\", {\n    get: function get() {\n      return this.rs.visible;\n    },\n    set: function set(value) {\n      this.rs.visible = value;\n      this.chart.layoutPending = true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"x\", {\n    get: function get() {\n      return this.rs.x;\n    },\n    set: function set(value) {\n      this.rs.x = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"y\", {\n    get: function get() {\n      return this.rs.y;\n    },\n    set: function set(value) {\n      this.rs.y = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"width\", {\n    get: function get() {\n      return this.rs.width;\n    },\n    set: function set(value) {\n      this.rs.width = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"height\", {\n    get: function get() {\n      return this.rs.height;\n    },\n    set: function set(value) {\n      this.rs.height = value;\n      this.chart.layoutPending = true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"margin\", {\n    get: function get() {\n      return this._margin;\n    },\n    set: function set(value) {\n      this._margin = value;\n      this.chart.layoutPending = true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"min\", {\n    get: function get() {\n      return this.rs.min;\n    },\n    set: function set(value) {\n      this.rs.min = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"max\", {\n    get: function get() {\n      return this.rs.max;\n    },\n    set: function set(value) {\n      this.rs.max = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Navigator.prototype.updateAxes = function (min, max) {\n    var chart = this.chart;\n    var clipSeries = false;\n    chart.axes.forEach(function (axis) {\n      if (axis.direction === ChartAxisDirection.X) {\n        if (!clipSeries && (min > 0 || max < 1)) {\n          clipSeries = true;\n        }\n        axis.visibleRange = [min, max];\n        axis.update();\n      }\n    });\n    chart.seriesRoot.enabled = clipSeries;\n    chart.series.forEach(function (series) {\n      return series.update();\n    });\n  };\n  Navigator.prototype.onMouseDown = function (event) {\n    if (!this.enabled) {\n      return;\n    }\n    var offsetX = event.offsetX,\n      offsetY = event.offsetY;\n    var rs = this.rs;\n    var minHandle = rs.minHandle,\n      maxHandle = rs.maxHandle,\n      x = rs.x,\n      width = rs.width,\n      min = rs.min;\n    var visibleRange = rs.computeVisibleRangeBBox();\n    if (!(this.minHandleDragging || this.maxHandleDragging)) {\n      if (minHandle.containsPoint(offsetX, offsetY)) {\n        this.minHandleDragging = true;\n      } else if (maxHandle.containsPoint(offsetX, offsetY)) {\n        this.maxHandleDragging = true;\n      } else if (visibleRange.containsPoint(offsetX, offsetY)) {\n        this.panHandleOffset = (offsetX - x) / width - min;\n      }\n    }\n  };\n  Navigator.prototype.onMouseMove = function (event) {\n    if (!this.enabled) {\n      return;\n    }\n    var _a = this,\n      rs = _a.rs,\n      panHandleOffset = _a.panHandleOffset;\n    var x = rs.x,\n      y = rs.y,\n      width = rs.width,\n      height = rs.height,\n      minHandle = rs.minHandle,\n      maxHandle = rs.maxHandle;\n    var style = this.chart.element.style;\n    var offsetX = event.offsetX,\n      offsetY = event.offsetY;\n    var minX = x + width * rs.min;\n    var maxX = x + width * rs.max;\n    var visibleRange = new BBox(minX, y, maxX - minX, height);\n    function getRatio() {\n      return Math.min(Math.max((offsetX - x) / width, 0), 1);\n    }\n    if (minHandle.containsPoint(offsetX, offsetY)) {\n      style.cursor = 'ew-resize';\n    } else if (maxHandle.containsPoint(offsetX, offsetY)) {\n      style.cursor = 'ew-resize';\n    } else if (visibleRange.containsPoint(offsetX, offsetY)) {\n      style.cursor = 'grab';\n    } else {\n      style.cursor = 'default';\n    }\n    if (this.minHandleDragging) {\n      rs.min = getRatio();\n    } else if (this.maxHandleDragging) {\n      rs.max = getRatio();\n    } else if (!isNaN(panHandleOffset)) {\n      var span = rs.max - rs.min;\n      var min = Math.min(getRatio() - panHandleOffset, 1 - span);\n      if (min <= rs.min) {\n        // pan left\n        rs.min = min;\n        rs.max = rs.min + span;\n      } else {\n        // pan right\n        rs.max = min + span;\n        rs.min = rs.max - span;\n      }\n    }\n  };\n  Navigator.prototype.onMouseOut = function (event) {\n    this.stopHandleDragging();\n  };\n  Navigator.prototype.onMouseUp = function (event) {\n    this.stopHandleDragging();\n  };\n  Navigator.prototype.stopHandleDragging = function () {\n    this.minHandleDragging = this.maxHandleDragging = false;\n    this.panHandleOffset = NaN;\n  };\n  return Navigator;\n}();\nvar __extends$1d = undefined && undefined.__extends || function () {\n  var _extendStatics78 = function extendStatics(d, b) {\n    _extendStatics78 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics78(d, b);\n  };\n  return function (d, b) {\n    _extendStatics78(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar CartesianChart = /** @class */function (_super) {\n  __extends$1d(CartesianChart, _super);\n  function CartesianChart(document) {\n    if (document === void 0) {\n      document = window.document;\n    }\n    var _this = _super.call(this, document) || this;\n    _this._seriesRoot = new ClipRect();\n    _this.navigator = new Navigator(_this);\n    // Prevent the scene from rendering chart components in an invalid state\n    // (before first layout is performed).\n    _this.scene.root.visible = false;\n    var root = _this.scene.root;\n    root.append(_this.seriesRoot);\n    root.append(_this.legend.group);\n    _this.navigator.enabled = false;\n    return _this;\n  }\n  Object.defineProperty(CartesianChart.prototype, \"seriesRoot\", {\n    get: function get() {\n      return this._seriesRoot;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  CartesianChart.prototype.performLayout = function () {\n    if (this.dataPending) {\n      return;\n    }\n    this.scene.root.visible = true;\n    var _a = this,\n      width = _a.width,\n      height = _a.height,\n      axes = _a.axes,\n      legend = _a.legend,\n      navigator = _a.navigator;\n    var shrinkRect = new BBox(0, 0, width, height);\n    this.positionCaptions();\n    this.positionLegend();\n    if (legend.enabled && legend.data.length) {\n      var legendAutoPadding = this.legendAutoPadding;\n      var legendPadding = this.legend.spacing;\n      shrinkRect.x += legendAutoPadding.left;\n      shrinkRect.y += legendAutoPadding.top;\n      shrinkRect.width -= legendAutoPadding.left + legendAutoPadding.right;\n      shrinkRect.height -= legendAutoPadding.top + legendAutoPadding.bottom;\n      switch (this.legend.position) {\n        case 'right':\n          shrinkRect.width -= legendPadding;\n          break;\n        case 'bottom':\n          shrinkRect.height -= legendPadding;\n          break;\n        case 'left':\n          shrinkRect.x += legendPadding;\n          shrinkRect.width -= legendPadding;\n          break;\n        case 'top':\n          shrinkRect.y += legendPadding;\n          shrinkRect.height -= legendPadding;\n          break;\n      }\n    }\n    var _b = this,\n      captionAutoPadding = _b.captionAutoPadding,\n      padding = _b.padding;\n    this.updateAxes();\n    shrinkRect.x += padding.left;\n    shrinkRect.width -= padding.left + padding.right;\n    shrinkRect.y += padding.top + captionAutoPadding;\n    shrinkRect.height -= padding.top + captionAutoPadding + padding.bottom;\n    if (navigator.enabled) {\n      shrinkRect.height -= navigator.height + navigator.margin;\n    }\n    var bottomAxesHeight = 0;\n    axes.forEach(function (axis) {\n      axis.group.visible = true;\n      var axisThickness = Math.floor(axis.computeBBox().width);\n      switch (axis.position) {\n        case ChartAxisPosition.Top:\n          shrinkRect.y += axisThickness;\n          shrinkRect.height -= axisThickness;\n          axis.translation.y = Math.floor(shrinkRect.y + 1);\n          axis.label.mirrored = true;\n          break;\n        case ChartAxisPosition.Right:\n          shrinkRect.width -= axisThickness;\n          axis.translation.x = Math.floor(shrinkRect.x + shrinkRect.width);\n          axis.label.mirrored = true;\n          break;\n        case ChartAxisPosition.Bottom:\n          shrinkRect.height -= axisThickness;\n          bottomAxesHeight += axisThickness;\n          axis.translation.y = Math.floor(shrinkRect.y + shrinkRect.height + 1);\n          break;\n        case ChartAxisPosition.Left:\n          shrinkRect.x += axisThickness;\n          shrinkRect.width -= axisThickness;\n          axis.translation.x = Math.floor(shrinkRect.x);\n          break;\n      }\n    });\n    axes.forEach(function (axis) {\n      switch (axis.position) {\n        case ChartAxisPosition.Top:\n          axis.translation.x = Math.floor(shrinkRect.x);\n          axis.range = [0, shrinkRect.width];\n          axis.gridLength = shrinkRect.height;\n          break;\n        case ChartAxisPosition.Right:\n          axis.translation.y = Math.floor(shrinkRect.y);\n          if (axis instanceof CategoryAxis || axis instanceof GroupedCategoryAxis) {\n            axis.range = [0, shrinkRect.height];\n          } else {\n            axis.range = [shrinkRect.height, 0];\n          }\n          axis.gridLength = shrinkRect.width;\n          break;\n        case ChartAxisPosition.Bottom:\n          axis.translation.x = Math.floor(shrinkRect.x);\n          axis.range = [0, shrinkRect.width];\n          axis.gridLength = shrinkRect.height;\n          break;\n        case ChartAxisPosition.Left:\n          axis.translation.y = Math.floor(shrinkRect.y);\n          if (axis instanceof CategoryAxis || axis instanceof GroupedCategoryAxis) {\n            axis.range = [0, shrinkRect.height];\n          } else {\n            axis.range = [shrinkRect.height, 0];\n          }\n          axis.gridLength = shrinkRect.width;\n          break;\n      }\n    });\n    this.seriesRect = shrinkRect;\n    this.series.forEach(function (series) {\n      series.group.translationX = Math.floor(shrinkRect.x);\n      series.group.translationY = Math.floor(shrinkRect.y);\n      series.update(); // this has to happen after the `updateAxes` call\n    });\n\n    var seriesRoot = this.seriesRoot;\n    seriesRoot.x = shrinkRect.x;\n    seriesRoot.y = shrinkRect.y;\n    seriesRoot.width = shrinkRect.width;\n    seriesRoot.height = shrinkRect.height;\n    if (navigator.enabled) {\n      navigator.x = shrinkRect.x;\n      navigator.y = shrinkRect.y + shrinkRect.height + bottomAxesHeight + navigator.margin;\n      navigator.width = shrinkRect.width;\n    }\n    this.axes.forEach(function (axis) {\n      return axis.update();\n    });\n  };\n  CartesianChart.prototype.initSeries = function (series) {\n    _super.prototype.initSeries.call(this, series);\n    series.addEventListener('dataProcessed', this.updateAxes, this);\n  };\n  CartesianChart.prototype.freeSeries = function (series) {\n    _super.prototype.freeSeries.call(this, series);\n    series.removeEventListener('dataProcessed', this.updateAxes, this);\n  };\n  CartesianChart.prototype.onMouseDown = function (event) {\n    _super.prototype.onMouseDown.call(this, event);\n    this.navigator.onMouseDown(event);\n  };\n  CartesianChart.prototype.onMouseMove = function (event) {\n    _super.prototype.onMouseMove.call(this, event);\n    this.navigator.onMouseMove(event);\n  };\n  CartesianChart.prototype.onMouseUp = function (event) {\n    _super.prototype.onMouseUp.call(this, event);\n    this.navigator.onMouseUp(event);\n  };\n  CartesianChart.prototype.onMouseOut = function (event) {\n    _super.prototype.onMouseOut.call(this, event);\n    this.navigator.onMouseUp(event);\n  };\n  CartesianChart.prototype.updateAxes = function () {\n    var navigator = this.navigator;\n    var clipSeries = false;\n    this.axes.forEach(function (axis) {\n      var _a;\n      var direction = axis.direction,\n        boundSeries = axis.boundSeries;\n      if (axis.linkedTo) {\n        axis.domain = axis.linkedTo.domain;\n      } else {\n        var domains_1 = [];\n        boundSeries.filter(function (s) {\n          return s.visible;\n        }).forEach(function (series) {\n          domains_1.push(series.getDomain(direction));\n        });\n        var domain = (_a = new Array()).concat.apply(_a, domains_1);\n        axis.domain = numericExtent(domain) || domain; // if numeric extent can't be found, it's categories\n      }\n\n      if (axis.direction === ChartAxisDirection.X) {\n        axis.visibleRange = [navigator.min, navigator.max];\n      }\n      if (!clipSeries && (axis.visibleRange[0] > 0 || axis.visibleRange[1] < 1)) {\n        clipSeries = true;\n      }\n      axis.update();\n    });\n    this.seriesRoot.enabled = clipSeries;\n  };\n  CartesianChart.className = 'CartesianChart';\n  CartesianChart.type = 'cartesian';\n  return CartesianChart;\n}(Chart);\nvar __extends$1e = undefined && undefined.__extends || function () {\n  var _extendStatics79 = function extendStatics(d, b) {\n    _extendStatics79 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics79(d, b);\n  };\n  return function (d, b) {\n    _extendStatics79(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar GroupedCategoryChart = /** @class */function (_super) {\n  __extends$1e(GroupedCategoryChart, _super);\n  function GroupedCategoryChart() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  GroupedCategoryChart.prototype.updateAxes = function () {\n    this.axes.forEach(function (axis) {\n      var _a;\n      var direction = axis.direction,\n        boundSeries = axis.boundSeries;\n      var domains = [];\n      var isNumericX = undefined;\n      boundSeries.filter(function (s) {\n        return s.visible;\n      }).forEach(function (series) {\n        if (direction === ChartAxisDirection.X) {\n          if (isNumericX === undefined) {\n            // always add first X domain\n            var domain_1 = series.getDomain(direction);\n            domains.push(domain_1);\n            isNumericX = typeof domain_1[0] === 'number';\n          } else if (isNumericX) {\n            // only add further X domains if the axis is numeric\n            domains.push(series.getDomain(direction));\n          }\n        } else {\n          domains.push(series.getDomain(direction));\n        }\n      });\n      var domain = (_a = new Array()).concat.apply(_a, domains);\n      axis.domain = numericExtent(domain) || domain;\n      axis.update();\n    });\n  };\n  GroupedCategoryChart.className = 'GroupedCategoryChart';\n  GroupedCategoryChart.type = 'groupedCategory';\n  return GroupedCategoryChart;\n}(CartesianChart);\nvar __extends$1f = undefined && undefined.__extends || function () {\n  var _extendStatics80 = function extendStatics(d, b) {\n    _extendStatics80 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics80(d, b);\n  };\n  return function (d, b) {\n    _extendStatics80(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar PolarSeries = /** @class */function (_super) {\n  __extends$1f(PolarSeries, _super);\n  function PolarSeries() {\n    var _a;\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.directionKeys = (_a = {}, _a[ChartAxisDirection.X] = ['angleKey'], _a[ChartAxisDirection.Y] = ['radiusKey'], _a);\n    /**\n     * The center of the polar series (for example, the center of a pie).\n     * If the polar chart has multiple series, all of them will have their\n     * center set to the same value as a result of the polar chart layout.\n     * The center coordinates are not supposed to be set by the user.\n     */\n    _this.centerX = 0;\n    _this.centerY = 0;\n    /**\n     * The maximum radius the series can use.\n     * This value is set automatically as a result of the polar chart layout\n     * and is not supposed to be set by the user.\n     */\n    _this.radius = 0;\n    return _this;\n  }\n  return PolarSeries;\n}(Series);\nvar PolarSeriesMarker = /** @class */function (_super) {\n  __extends$1f(PolarSeriesMarker, _super);\n  function PolarSeriesMarker() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return PolarSeriesMarker;\n}(SeriesMarker);\nvar __extends$1g = undefined && undefined.__extends || function () {\n  var _extendStatics81 = function extendStatics(d, b) {\n    _extendStatics81 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics81(d, b);\n  };\n  return function (d, b) {\n    _extendStatics81(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$K = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PolarChart = /** @class */function (_super) {\n  __extends$1g(PolarChart, _super);\n  function PolarChart(document) {\n    if (document === void 0) {\n      document = window.document;\n    }\n    var _this = _super.call(this, document) || this;\n    _this.padding = new Padding(40);\n    _this.scene.root.append(_this.legend.group);\n    return _this;\n  }\n  Object.defineProperty(PolarChart.prototype, \"seriesRoot\", {\n    get: function get() {\n      return this.scene.root;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  PolarChart.prototype.performLayout = function () {\n    var shrinkRect = new BBox(0, 0, this.width, this.height);\n    this.positionCaptions();\n    this.positionLegend();\n    var captionAutoPadding = this.captionAutoPadding;\n    shrinkRect.y += captionAutoPadding;\n    shrinkRect.height -= captionAutoPadding;\n    if (this.legend.enabled && this.legend.data.length) {\n      var legendAutoPadding = this.legendAutoPadding;\n      shrinkRect.x += legendAutoPadding.left;\n      shrinkRect.y += legendAutoPadding.top;\n      shrinkRect.width -= legendAutoPadding.left + legendAutoPadding.right;\n      shrinkRect.height -= legendAutoPadding.top + legendAutoPadding.bottom;\n      var legendPadding = this.legend.spacing;\n      switch (this.legend.position) {\n        case 'right':\n          shrinkRect.width -= legendPadding;\n          break;\n        case 'bottom':\n          shrinkRect.height -= legendPadding;\n          break;\n        case 'left':\n          shrinkRect.x += legendPadding;\n          shrinkRect.width -= legendPadding;\n          break;\n        case 'top':\n          shrinkRect.y += legendPadding;\n          shrinkRect.height -= legendPadding;\n          break;\n      }\n    }\n    var padding = this.padding;\n    shrinkRect.x += padding.left;\n    shrinkRect.y += padding.top;\n    shrinkRect.width -= padding.left + padding.right;\n    shrinkRect.height -= padding.top + padding.bottom;\n    this.seriesRect = shrinkRect;\n    var centerX = shrinkRect.x + shrinkRect.width / 2;\n    var centerY = shrinkRect.y + shrinkRect.height / 2;\n    var radius = Math.min(shrinkRect.width, shrinkRect.height) / 2;\n    this.series.forEach(function (series) {\n      if (series instanceof PolarSeries) {\n        series.centerX = centerX;\n        series.centerY = centerY;\n        series.radius = radius;\n        series.update();\n      }\n    });\n  };\n  PolarChart.className = 'PolarChart';\n  PolarChart.type = 'polar';\n  __decorate$K([reactive('layoutChange')], PolarChart.prototype, \"padding\", void 0);\n  return PolarChart;\n}(Chart);\nfunction equal(a, b) {\n  if (a === b) return true;\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n    var length_1,\n      i = void 0;\n    if (Array.isArray(a)) {\n      length_1 = a.length;\n      if (length_1 != b.length) return false;\n      for (i = length_1; i-- !== 0;) {\n        if (!equal(a[i], b[i])) return false;\n      }\n      return true;\n    }\n    // if ((a instanceof Map) && (b instanceof Map)) {\n    //     if (a.size !== b.size) return false;\n    //     for (i of a.entries())\n    //         if (!b.has(i[0])) return false;\n    //     for (i of a.entries())\n    //         if (!equal(i[1], b.get(i[0]))) return false;\n    //     return true;\n    // }\n    //\n    // if ((a instanceof Set) && (b instanceof Set)) {\n    //     if (a.size !== b.size) return false;\n    //     for (i of a.entries())\n    //         if (!b.has(i[0])) return false;\n    //     return true;\n    // }\n    //\n    // if (ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n    //     length = a.length;\n    //     if (length != b.length) return false;\n    //     for (i = length; i-- !== 0;)\n    //         if (a[i] !== b[i]) return false;\n    //     return true;\n    // }\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n    var keys = Object.keys(a);\n    length_1 = keys.length;\n    if (length_1 !== Object.keys(b).length) return false;\n    for (i = length_1; i-- !== 0;) {\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    }\n    for (i = length_1; i-- !== 0;) {\n      var key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n    return true;\n  }\n  // true if both NaN, false otherwise\n  return a !== a && b !== b;\n}\nvar interpolatePattern = /(#\\{(.*?)\\})/g;\nfunction interpolate(input, values, formats) {\n  return input.replace(interpolatePattern, function () {\n    var name = arguments[2];\n    var _a = name.split(':'),\n      valueName = _a[0],\n      formatName = _a[1];\n    var value = values[valueName];\n    if (typeof value === 'number') {\n      var format = formatName && formats && formats[formatName];\n      if (format) {\n        var _b = format,\n          locales = _b.locales,\n          options = _b.options;\n        return value.toLocaleString(locales, options);\n      }\n      return String(value);\n    }\n    if (value instanceof Date) {\n      var format = formatName && formats && formats[formatName];\n      if (typeof format === 'string') {\n        var formatter = locale.format(format);\n        return formatter(value);\n      }\n      return value.toDateString();\n    }\n    if (typeof value === 'string' || value && value.toString) {\n      return String(value);\n    }\n    return '';\n  });\n}\nvar __extends$1h = undefined && undefined.__extends || function () {\n  var _extendStatics82 = function extendStatics(d, b) {\n    _extendStatics82 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics82(d, b);\n  };\n  return function (d, b) {\n    _extendStatics82(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$L = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar AreaSeries = /** @class */function (_super) {\n  __extends$1h(AreaSeries, _super);\n  function AreaSeries() {\n    var _this = _super.call(this) || this;\n    _this.areaGroup = _this.group.appendChild(new Group());\n    _this.strokeGroup = _this.group.appendChild(new Group());\n    _this.markerGroup = _this.group.appendChild(new Group());\n    _this.areaSelection = Selection.select(_this.areaGroup).selectAll();\n    _this.strokeSelection = Selection.select(_this.strokeGroup).selectAll();\n    _this.markerSelection = Selection.select(_this.markerGroup).selectAll();\n    _this.markerSelectionData = [];\n    /**\n     * The assumption is that the values will be reset (to `true`)\n     * in the {@link yKeys} setter.\n     */\n    _this.seriesItemEnabled = new Map();\n    _this.xData = [];\n    _this.yData = [];\n    _this.yDomain = [];\n    _this.directionKeys = {\n      x: ['xKey'],\n      y: ['yKeys']\n    };\n    _this.marker = new CartesianSeriesMarker();\n    _this.fills = ['#c16068', '#a2bf8a', '#ebcc87', '#80a0c3', '#b58dae', '#85c0d1'];\n    _this.strokes = ['#874349', '#718661', '#a48f5f', '#5a7088', '#7f637a', '#5d8692'];\n    _this.fillOpacity = 1;\n    _this.strokeOpacity = 1;\n    _this.lineDash = undefined;\n    _this.lineDashOffset = 0;\n    _this._xKey = '';\n    _this.xName = '';\n    _this._yKeys = [];\n    _this.yNames = [];\n    _this.strokeWidth = 2;\n    _this.highlightStyle = {\n      fill: 'yellow'\n    };\n    _this.addEventListener('update', _this.update);\n    _this.marker.enabled = false;\n    _this.marker.addPropertyListener('shape', _this.onMarkerShapeChange, _this);\n    _this.marker.addEventListener('change', _this.update, _this);\n    return _this;\n  }\n  AreaSeries.prototype.onMarkerShapeChange = function () {\n    this.markerSelection = this.markerSelection.setData([]);\n    this.markerSelection.exit.remove();\n    this.update();\n    this.fireEvent({\n      type: 'legendChange'\n    });\n  };\n  Object.defineProperty(AreaSeries.prototype, \"xKey\", {\n    get: function get() {\n      return this._xKey;\n    },\n    set: function set(value) {\n      if (this._xKey !== value) {\n        this._xKey = value;\n        this.xData = [];\n        this.scheduleData();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(AreaSeries.prototype, \"yKeys\", {\n    get: function get() {\n      return this._yKeys;\n    },\n    set: function set(values) {\n      if (!equal(this._yKeys, values)) {\n        this._yKeys = values;\n        this.yData = [];\n        var seriesItemEnabled_1 = this.seriesItemEnabled;\n        seriesItemEnabled_1.clear();\n        values.forEach(function (key) {\n          return seriesItemEnabled_1.set(key, true);\n        });\n        this.scheduleData();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  AreaSeries.prototype.setColors = function (fills, strokes) {\n    this.fills = fills;\n    this.strokes = strokes;\n  };\n  Object.defineProperty(AreaSeries.prototype, \"normalizedTo\", {\n    get: function get() {\n      return this._normalizedTo;\n    },\n    set: function set(value) {\n      var absValue = value ? Math.abs(value) : undefined;\n      if (this._normalizedTo !== absValue) {\n        this._normalizedTo = absValue;\n        this.scheduleData();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  AreaSeries.prototype.onHighlightChange = function () {\n    this.updateMarkerNodes();\n  };\n  AreaSeries.prototype.processData = function () {\n    var _a = this,\n      xKey = _a.xKey,\n      yKeys = _a.yKeys,\n      seriesItemEnabled = _a.seriesItemEnabled;\n    var data = xKey && yKeys.length && this.data ? this.data : [];\n    // if (!(chart && chart.xAxis && chart.yAxis)) {\n    //     return false;\n    // }\n    // If the data is an array of rows like so:\n    //\n    // [{\n    //   xKy: 'Jan',\n    //   yKey1: 5,\n    //   yKey2: 7,\n    //   yKey3: -9,\n    // }, {\n    //   xKey: 'Feb',\n    //   yKey1: 10,\n    //   yKey2: -15,\n    //   yKey3: 20\n    // }]\n    //\n    var keysFound = true; // only warn once\n    this.xData = data.map(function (datum) {\n      if (keysFound && !(xKey in datum)) {\n        keysFound = false;\n        console.warn(\"The key '\" + xKey + \"' was not found in the data: \", datum);\n      }\n      return datum[xKey];\n    });\n    this.yData = data.map(function (datum) {\n      return yKeys.map(function (yKey) {\n        if (keysFound && !(yKey in datum)) {\n          keysFound = false;\n          console.warn(\"The key '\" + yKey + \"' was not found in the data: \", datum);\n        }\n        var value = datum[yKey];\n        return isFinite(value) && seriesItemEnabled.get(yKey) ? value : 0;\n      });\n    });\n    // xData: ['Jan', 'Feb']\n    //\n    // yData: [\n    //   [5, 7, -9],\n    //   [10, -15, 20]\n    // ]\n    var _b = this,\n      yData = _b.yData,\n      normalizedTo = _b.normalizedTo;\n    var yMinMax = yData.map(function (values) {\n      return findMinMax(values);\n    }); // used for normalization\n    var yLargestMinMax = findLargestMinMax(yMinMax);\n    var yMin;\n    var yMax;\n    if (normalizedTo && isFinite(normalizedTo)) {\n      yMin = yLargestMinMax.min < 0 ? -normalizedTo : 0;\n      yMax = normalizedTo;\n      yData.forEach(function (stack, i) {\n        return stack.forEach(function (y, j) {\n          if (y < 0) {\n            stack[j] = -y / yMinMax[i].min * normalizedTo;\n          } else {\n            stack[j] = y / yMinMax[i].max * normalizedTo;\n          }\n        });\n      });\n    } else {\n      yMin = yLargestMinMax.min;\n      yMax = yLargestMinMax.max;\n    }\n    if (yMin === 0 && yMax === 0) {\n      yMax = 1;\n    }\n    this.yDomain = this.fixNumericExtent([yMin, yMax], 'y');\n    this.fireEvent({\n      type: 'dataProcessed'\n    });\n    return true;\n  };\n  AreaSeries.prototype.getDomain = function (direction) {\n    if (direction === ChartAxisDirection.X) {\n      return this.xData;\n    } else {\n      return this.yDomain;\n    }\n  };\n  AreaSeries.prototype.update = function () {\n    var _a = this,\n      visible = _a.visible,\n      chart = _a.chart,\n      xAxis = _a.xAxis,\n      yAxis = _a.yAxis,\n      xData = _a.xData,\n      yData = _a.yData;\n    this.group.visible = visible && !!(xData.length && yData.length);\n    if (!xAxis || !yAxis || !visible || !chart || chart.layoutPending || chart.dataPending || !xData.length || !yData.length) {\n      return;\n    }\n    var selectionData = this.generateSelectionData();\n    if (!selectionData) {\n      return;\n    }\n    var areaSelectionData = selectionData.areaSelectionData,\n      markerSelectionData = selectionData.markerSelectionData;\n    this.updateAreaSelection(areaSelectionData);\n    this.updateStrokeSelection(areaSelectionData);\n    this.updateMarkerSelection(markerSelectionData);\n    this.updateMarkerNodes();\n    this.markerSelectionData = markerSelectionData;\n  };\n  AreaSeries.prototype.generateSelectionData = function () {\n    var _this = this;\n    if (!this.data) {\n      return;\n    }\n    var _a = this,\n      yKeys = _a.yKeys,\n      data = _a.data,\n      xData = _a.xData,\n      yData = _a.yData,\n      marker = _a.marker,\n      fills = _a.fills,\n      strokes = _a.strokes,\n      xScale = _a.xAxis.scale,\n      yScale = _a.yAxis.scale;\n    var xOffset = (xScale.bandwidth || 0) / 2;\n    var yOffset = (yScale.bandwidth || 0) / 2;\n    var areaSelectionData = [];\n    var markerSelectionData = [];\n    var last = xData.length * 2 - 1;\n    xData.forEach(function (xDatum, i) {\n      var yDatum = yData[i];\n      var seriesDatum = data[i];\n      var x = xScale.convert(xDatum) + xOffset;\n      var prevMin = 0;\n      var prevMax = 0;\n      yDatum.forEach(function (curr, j) {\n        var prev = curr < 0 ? prevMin : prevMax;\n        var y = yScale.convert(prev + curr) + yOffset;\n        var yKey = yKeys[j];\n        var yValue = seriesDatum[yKey];\n        if (marker) {\n          markerSelectionData.push({\n            series: _this,\n            seriesDatum: seriesDatum,\n            yValue: yValue,\n            yKey: yKey,\n            point: {\n              x: x,\n              y: y\n            },\n            fill: fills[j % fills.length],\n            stroke: strokes[j % strokes.length]\n          });\n        }\n        var areaDatum = areaSelectionData[j] || (areaSelectionData[j] = {\n          yKey: yKey,\n          points: []\n        });\n        var areaPoints = areaDatum.points;\n        areaPoints[i] = {\n          x: x,\n          y: y\n        };\n        areaPoints[last - i] = {\n          x: x,\n          y: yScale.convert(prev) + yOffset\n        }; // bottom y\n        if (curr < 0) {\n          prevMin += curr;\n        } else {\n          prevMax += curr;\n        }\n      });\n    });\n    return {\n      areaSelectionData: areaSelectionData,\n      markerSelectionData: markerSelectionData\n    };\n  };\n  AreaSeries.prototype.updateAreaSelection = function (areaSelectionData) {\n    var _this = this;\n    var _a = this,\n      fills = _a.fills,\n      fillOpacity = _a.fillOpacity,\n      strokes = _a.strokes,\n      strokeOpacity = _a.strokeOpacity,\n      strokeWidth = _a.strokeWidth,\n      seriesItemEnabled = _a.seriesItemEnabled,\n      shadow = _a.shadow;\n    var updateAreas = this.areaSelection.setData(areaSelectionData);\n    updateAreas.exit.remove();\n    var enterAreas = updateAreas.enter.append(Path).each(function (path) {\n      path.lineJoin = 'round';\n      path.stroke = undefined;\n      path.pointerEvents = PointerEvents.None;\n    });\n    var areaSelection = updateAreas.merge(enterAreas);\n    areaSelection.each(function (shape, datum, index) {\n      var path = shape.path;\n      shape.fill = fills[index % fills.length];\n      shape.fillOpacity = fillOpacity;\n      shape.stroke = strokes[index % strokes.length];\n      shape.strokeOpacity = strokeOpacity;\n      shape.strokeWidth = strokeWidth;\n      shape.lineDash = _this.lineDash;\n      shape.lineDashOffset = _this.lineDashOffset;\n      shape.fillShadow = shadow;\n      shape.visible = !!seriesItemEnabled.get(datum.yKey);\n      path.clear();\n      var points = datum.points;\n      points.forEach(function (_a, i) {\n        var x = _a.x,\n          y = _a.y;\n        if (i > 0) {\n          path.lineTo(x, y);\n        } else {\n          path.moveTo(x, y);\n        }\n      });\n      path.closePath();\n    });\n    this.areaSelection = areaSelection;\n  };\n  AreaSeries.prototype.updateStrokeSelection = function (areaSelectionData) {\n    var _this = this;\n    if (!this.data) {\n      return;\n    }\n    var _a = this,\n      strokes = _a.strokes,\n      strokeWidth = _a.strokeWidth,\n      strokeOpacity = _a.strokeOpacity,\n      data = _a.data,\n      seriesItemEnabled = _a.seriesItemEnabled;\n    var updateStrokes = this.strokeSelection.setData(areaSelectionData);\n    updateStrokes.exit.remove();\n    var enterStrokes = updateStrokes.enter.append(Path).each(function (path) {\n      path.fill = undefined;\n      path.lineJoin = path.lineCap = 'round';\n      path.pointerEvents = PointerEvents.None;\n    });\n    var strokeSelection = updateStrokes.merge(enterStrokes);\n    strokeSelection.each(function (shape, datum, index) {\n      var path = shape.path;\n      shape.stroke = strokes[index % strokes.length];\n      shape.strokeWidth = strokeWidth;\n      shape.visible = !!seriesItemEnabled.get(datum.yKey);\n      shape.strokeOpacity = strokeOpacity;\n      shape.lineDash = _this.lineDash;\n      shape.lineDashOffset = _this.lineDashOffset;\n      path.clear();\n      var points = datum.points;\n      // The stroke doesn't go all the way around the fill, only on top,\n      // that's why we iterate until `data.length` (rather than `points.length`) and stop.\n      for (var i = 0; i < data.length; i++) {\n        var _a = points[i],\n          x = _a.x,\n          y = _a.y;\n        if (i > 0) {\n          path.lineTo(x, y);\n        } else {\n          path.moveTo(x, y);\n        }\n      }\n    });\n    this.strokeSelection = strokeSelection;\n  };\n  AreaSeries.prototype.updateMarkerSelection = function (markerSelectionData) {\n    var marker = this.marker;\n    var data = marker.shape ? markerSelectionData : [];\n    var MarkerShape = getMarker(marker.shape);\n    var updateMarkers = this.markerSelection.setData(data);\n    updateMarkers.exit.remove();\n    var enterMarkers = updateMarkers.enter.append(MarkerShape);\n    this.markerSelection = updateMarkers.merge(enterMarkers);\n  };\n  AreaSeries.prototype.updateMarkerNodes = function () {\n    if (!this.chart) {\n      return;\n    }\n    var marker = this.marker;\n    var markerFormatter = marker.formatter;\n    var markerStrokeWidth = marker.strokeWidth !== undefined ? marker.strokeWidth : this.strokeWidth;\n    var markerSize = marker.size;\n    var _a = this,\n      xKey = _a.xKey,\n      seriesItemEnabled = _a.seriesItemEnabled;\n    var highlightedDatum = this.chart.highlightedDatum;\n    var _b = this.highlightStyle,\n      highlightFill = _b.fill,\n      highlightStroke = _b.stroke;\n    this.markerSelection.each(function (node, datum) {\n      var highlighted = datum === highlightedDatum;\n      var markerFill = highlighted && highlightFill !== undefined ? highlightFill : marker.fill || datum.fill;\n      var markerStroke = highlighted && highlightStroke !== undefined ? highlightStroke : marker.stroke || datum.stroke;\n      var markerFormat = undefined;\n      if (markerFormatter) {\n        markerFormat = markerFormatter({\n          datum: datum.seriesDatum,\n          xKey: xKey,\n          yKey: datum.yKey,\n          fill: markerFill,\n          stroke: markerStroke,\n          strokeWidth: markerStrokeWidth,\n          size: markerSize,\n          highlighted: highlighted\n        });\n      }\n      node.fill = markerFormat && markerFormat.fill || markerFill;\n      node.stroke = markerFormat && markerFormat.stroke || markerStroke;\n      node.strokeWidth = markerFormat && markerFormat.strokeWidth !== undefined ? markerFormat.strokeWidth : markerStrokeWidth;\n      node.size = markerFormat && markerFormat.size !== undefined ? markerFormat.size : markerSize;\n      node.translationX = datum.point.x;\n      node.translationY = datum.point.y;\n      node.visible = marker.enabled && node.size > 0 && !!seriesItemEnabled.get(datum.yKey);\n    });\n  };\n  AreaSeries.prototype.getNodeData = function () {\n    return this.markerSelectionData;\n  };\n  AreaSeries.prototype.fireNodeClickEvent = function (datum) {\n    this.fireEvent({\n      type: 'nodeClick',\n      series: this,\n      datum: datum.seriesDatum,\n      xKey: this.xKey,\n      yKey: datum.yKey\n    });\n  };\n  AreaSeries.prototype.getTooltipHtml = function (nodeDatum) {\n    var xKey = this.xKey;\n    var yKey = nodeDatum.yKey;\n    if (!xKey || !yKey) {\n      return '';\n    }\n    var _a = this,\n      xName = _a.xName,\n      yKeys = _a.yKeys,\n      yNames = _a.yNames,\n      fills = _a.fills,\n      tooltipFormat = _a.tooltipFormat,\n      tooltipRenderer = _a.tooltipRenderer;\n    var datum = nodeDatum.seriesDatum;\n    var xValue = datum[xKey];\n    var yValue = datum[yKey];\n    var yKeyIndex = yKeys.indexOf(yKey);\n    var yName = yNames[yKeyIndex];\n    var color = fills[yKeyIndex % fills.length];\n    var xString = typeof xValue === 'number' ? toFixed(xValue) : String(xValue);\n    var yString = typeof yValue === 'number' ? toFixed(yValue) : String(yValue);\n    var title = yName;\n    var content = xString + ': ' + yString;\n    var defaults = {\n      title: title,\n      titleBackgroundColor: color,\n      content: content\n    };\n    if (tooltipFormat || tooltipRenderer) {\n      var params = {\n        datum: datum,\n        xKey: xKey,\n        xName: xName,\n        xValue: xValue,\n        yKey: yKey,\n        yValue: yValue,\n        yName: yName,\n        color: color\n      };\n      if (tooltipFormat) {\n        return toTooltipHtml({\n          content: interpolate(tooltipFormat, params)\n        }, defaults);\n      }\n      if (tooltipRenderer) {\n        return toTooltipHtml(tooltipRenderer(params), defaults);\n      }\n    }\n    return toTooltipHtml(defaults);\n  };\n  AreaSeries.prototype.listSeriesItems = function (legendData) {\n    var _a = this,\n      data = _a.data,\n      id = _a.id,\n      xKey = _a.xKey,\n      yKeys = _a.yKeys,\n      yNames = _a.yNames,\n      seriesItemEnabled = _a.seriesItemEnabled,\n      marker = _a.marker,\n      fills = _a.fills,\n      strokes = _a.strokes,\n      fillOpacity = _a.fillOpacity,\n      strokeOpacity = _a.strokeOpacity;\n    if (data && data.length && xKey && yKeys.length) {\n      yKeys.forEach(function (yKey, index) {\n        legendData.push({\n          id: id,\n          itemId: yKey,\n          enabled: seriesItemEnabled.get(yKey) || false,\n          label: {\n            text: yNames[index] || yKeys[index]\n          },\n          marker: {\n            shape: marker.shape,\n            fill: marker.fill || fills[index % fills.length],\n            stroke: marker.stroke || strokes[index % strokes.length],\n            fillOpacity: fillOpacity,\n            strokeOpacity: strokeOpacity\n          }\n        });\n      });\n    }\n  };\n  AreaSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n    this.seriesItemEnabled.set(itemId, enabled);\n    this.scheduleData();\n  };\n  AreaSeries.className = 'AreaSeries';\n  AreaSeries.type = 'area';\n  __decorate$L([reactive('dataChange')], AreaSeries.prototype, \"fills\", void 0);\n  __decorate$L([reactive('dataChange')], AreaSeries.prototype, \"strokes\", void 0);\n  __decorate$L([reactive('update')], AreaSeries.prototype, \"fillOpacity\", void 0);\n  __decorate$L([reactive('update')], AreaSeries.prototype, \"strokeOpacity\", void 0);\n  __decorate$L([reactive('update')], AreaSeries.prototype, \"lineDash\", void 0);\n  __decorate$L([reactive('update')], AreaSeries.prototype, \"lineDashOffset\", void 0);\n  __decorate$L([reactive('update')], AreaSeries.prototype, \"xName\", void 0);\n  __decorate$L([reactive('update')], AreaSeries.prototype, \"yNames\", void 0);\n  __decorate$L([reactive('update')], AreaSeries.prototype, \"strokeWidth\", void 0);\n  __decorate$L([reactive('update')], AreaSeries.prototype, \"shadow\", void 0);\n  return AreaSeries;\n}(CartesianSeries);\nvar __extends$1i = undefined && undefined.__extends || function () {\n  var _extendStatics83 = function extendStatics(d, b) {\n    _extendStatics83 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics83(d, b);\n  };\n  return function (d, b) {\n    _extendStatics83(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$M = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar Label = /** @class */function (_super) {\n  __extends$1i(Label, _super);\n  function Label() {\n    var _this = _super.call(this) || this;\n    _this.enabled = true;\n    _this.fontSize = 12;\n    _this.fontFamily = 'Verdana, sans-serif';\n    _this.color = 'rgba(70, 70, 70, 1)';\n    return _this;\n  }\n  __decorate$M([reactive('change', 'dataChange')], Label.prototype, \"enabled\", void 0);\n  __decorate$M([reactive('change')], Label.prototype, \"fontStyle\", void 0);\n  __decorate$M([reactive('change')], Label.prototype, \"fontWeight\", void 0);\n  __decorate$M([reactive('change')], Label.prototype, \"fontSize\", void 0);\n  __decorate$M([reactive('change')], Label.prototype, \"fontFamily\", void 0);\n  __decorate$M([reactive('change')], Label.prototype, \"color\", void 0);\n  return Label;\n}(Observable);\nvar __extends$1j = undefined && undefined.__extends || function () {\n  var _extendStatics84 = function extendStatics(d, b) {\n    _extendStatics84 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics84(d, b);\n  };\n  return function (d, b) {\n    _extendStatics84(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$N = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays$4 = undefined && undefined.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nvar BarSeriesNodeTag;\n(function (BarSeriesNodeTag) {\n  BarSeriesNodeTag[BarSeriesNodeTag[\"Bar\"] = 0] = \"Bar\";\n  BarSeriesNodeTag[BarSeriesNodeTag[\"Label\"] = 1] = \"Label\";\n})(BarSeriesNodeTag || (BarSeriesNodeTag = {}));\nvar BarSeriesLabel = /** @class */function (_super) {\n  __extends$1j(BarSeriesLabel, _super);\n  function BarSeriesLabel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  __decorate$N([reactive('change')], BarSeriesLabel.prototype, \"formatter\", void 0);\n  return BarSeriesLabel;\n}(Label);\nvar BarSeries = /** @class */function (_super) {\n  __extends$1j(BarSeries, _super);\n  function BarSeries() {\n    var _a;\n    var _this = _super.call(this) || this;\n    // Need to put bar and label nodes into separate groups, because even though label nodes are\n    // created after the bar nodes, this only guarantees that labels will always be on top of bars\n    // on the first run. If on the next run more bars are added, they might clip the labels\n    // rendered during the previous run.\n    _this.rectGroup = _this.group.appendChild(new Group());\n    _this.textGroup = _this.group.appendChild(new Group());\n    _this.rectSelection = Selection.select(_this.rectGroup).selectAll();\n    _this.textSelection = Selection.select(_this.textGroup).selectAll();\n    _this.xData = [];\n    _this.yData = [];\n    _this.yDomain = [];\n    _this.label = new BarSeriesLabel();\n    /**\n     * The assumption is that the values will be reset (to `true`)\n     * in the {@link yKeys} setter.\n     */\n    _this.seriesItemEnabled = new Map();\n    _this.flipXY = false;\n    _this.fills = ['#c16068', '#a2bf8a', '#ebcc87', '#80a0c3', '#b58dae', '#85c0d1'];\n    _this.strokes = ['#874349', '#718661', '#a48f5f', '#5a7088', '#7f637a', '#5d8692'];\n    _this.fillOpacity = 1;\n    _this.strokeOpacity = 1;\n    _this.lineDash = undefined;\n    _this.lineDashOffset = 0;\n    /**\n     * Used to get the position of bars within each group.\n     */\n    _this.groupScale = new BandScale();\n    _this.directionKeys = (_a = {}, _a[ChartAxisDirection.X] = ['xKey'], _a[ChartAxisDirection.Y] = ['yKeys'], _a);\n    _this._xKey = '';\n    _this._xName = '';\n    /**\n     * With a single value in the `yKeys` array we get the regular bar series.\n     * With multiple values, we get the stacked bar series.\n     * If the {@link grouped} set to `true`, we get the grouped bar series.\n     * @param values\n     */\n    _this._yKeys = [];\n    _this._yNames = [];\n    _this.grouped = false;\n    _this._strokeWidth = 1;\n    _this.highlightStyle = {\n      fill: 'yellow'\n    };\n    _this.addEventListener('update', _this.update);\n    _this.label.enabled = false;\n    _this.label.addEventListener('change', _this.update, _this);\n    return _this;\n  }\n  BarSeries.prototype.getKeys = function (direction) {\n    var _this = this;\n    var directionKeys = this.directionKeys;\n    var keys = directionKeys && directionKeys[this.flipXY ? flipChartAxisDirection(direction) : direction];\n    var values = [];\n    if (keys) {\n      keys.forEach(function (key) {\n        var value = _this[key];\n        if (value) {\n          if (Array.isArray(value)) {\n            values.push.apply(values, value);\n          } else {\n            values.push(value);\n          }\n        }\n      });\n    }\n    return values;\n  };\n  Object.defineProperty(BarSeries.prototype, \"xKey\", {\n    get: function get() {\n      return this._xKey;\n    },\n    set: function set(value) {\n      if (this._xKey !== value) {\n        this._xKey = value;\n        this.xData = [];\n        this.scheduleData();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BarSeries.prototype, \"xName\", {\n    get: function get() {\n      return this._xName;\n    },\n    set: function set(value) {\n      if (this._xName !== value) {\n        this._xName = value;\n        this.update();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BarSeries.prototype, \"yKeys\", {\n    get: function get() {\n      return this._yKeys;\n    },\n    set: function set(values) {\n      if (!equal(this._yKeys, values)) {\n        this._yKeys = values;\n        this.yData = [];\n        var seriesItemEnabled_1 = this.seriesItemEnabled;\n        seriesItemEnabled_1.clear();\n        values.forEach(function (key) {\n          return seriesItemEnabled_1.set(key, true);\n        });\n        var groupScale = this.groupScale;\n        groupScale.domain = values;\n        groupScale.padding = 0.1;\n        groupScale.round = true;\n        this.scheduleData();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BarSeries.prototype, \"yNames\", {\n    get: function get() {\n      return this._yNames;\n    },\n    set: function set(values) {\n      this._yNames = values;\n      this.scheduleData();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  BarSeries.prototype.setColors = function (fills, strokes) {\n    this.fills = fills;\n    this.strokes = strokes;\n  };\n  Object.defineProperty(BarSeries.prototype, \"normalizedTo\", {\n    get: function get() {\n      return this._normalizedTo;\n    },\n    set: function set(value) {\n      var absValue = value ? Math.abs(value) : undefined;\n      if (this._normalizedTo !== absValue) {\n        this._normalizedTo = absValue;\n        this.scheduleData();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BarSeries.prototype, \"strokeWidth\", {\n    get: function get() {\n      return this._strokeWidth;\n    },\n    set: function set(value) {\n      if (this._strokeWidth !== value) {\n        this._strokeWidth = value;\n        this.update();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BarSeries.prototype, \"shadow\", {\n    get: function get() {\n      return this._shadow;\n    },\n    set: function set(value) {\n      if (this._shadow !== value) {\n        this._shadow = value;\n        this.update();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  BarSeries.prototype.onHighlightChange = function () {\n    this.updateRectNodes();\n  };\n  BarSeries.prototype.processData = function () {\n    var _a = this,\n      xKey = _a.xKey,\n      yKeys = _a.yKeys,\n      seriesItemEnabled = _a.seriesItemEnabled;\n    var data = xKey && yKeys.length && this.data ? this.data : [];\n    // If the data is an array of rows like so:\n    //\n    // [{\n    //   xKey: 'Jan',\n    //   yKey1: 5,\n    //   yKey2: 7,\n    //   yKey3: -9,\n    // }, {\n    //   xKey: 'Feb',\n    //   yKey1: 10,\n    //   yKey2: -15,\n    //   yKey3: 20\n    // }]\n    //\n    var keysFound = true; // only warn once\n    this.xData = data.map(function (datum) {\n      if (keysFound && !(xKey in datum)) {\n        keysFound = false;\n        console.warn(\"The key '\" + xKey + \"' was not found in the data: \", datum);\n      }\n      return datum[xKey];\n    });\n    this.yData = data.map(function (datum) {\n      return yKeys.map(function (yKey) {\n        if (keysFound && !(yKey in datum)) {\n          keysFound = false;\n          console.warn(\"The key '\" + yKey + \"' was not found in the data: \", datum);\n        }\n        var value = datum[yKey];\n        return isFinite(value) && seriesItemEnabled.get(yKey) ? value : 0;\n      });\n    });\n    // xData: ['Jan', 'Feb']\n    //\n    // yData: [\n    //   [5, 7, -9],\n    //   [10, -15, 20]\n    // ]\n    var yMinMax = this.yData.map(function (values) {\n      return findMinMax(values);\n    }); // used for normalization of stacked bars\n    var _b = this,\n      yData = _b.yData,\n      normalizedTo = _b.normalizedTo;\n    var yMin = Infinity;\n    var yMax = -Infinity;\n    if (this.grouped) {\n      // Find the tallest positive/negative bar in each group,\n      // then find the tallest positive/negative bar overall.\n      // The `yMin` should always be <= 0,\n      // otherwise with the `yData` like [300, 200, 100] the last bar\n      // will have zero height, because the y-axis range is [100, 300].\n      yMin = Math.min.apply(Math, __spreadArrays$4([0], yData.map(function (values) {\n        return Math.min.apply(Math, values);\n      })));\n      yMax = Math.max.apply(Math, yData.map(function (values) {\n        return Math.max.apply(Math, values);\n      }));\n    } else {\n      // stacked or regular\n      var yLargestMinMax = findLargestMinMax(yMinMax);\n      if (normalizedTo && isFinite(normalizedTo)) {\n        yMin = yLargestMinMax.min < 0 ? -normalizedTo : 0;\n        yMax = normalizedTo;\n        yData.forEach(function (stackValues, i) {\n          return stackValues.forEach(function (y, j) {\n            if (y < 0) {\n              stackValues[j] = -y / yMinMax[i].min * normalizedTo;\n            } else {\n              stackValues[j] = y / yMinMax[i].max * normalizedTo;\n            }\n          });\n        });\n      } else {\n        yMin = yLargestMinMax.min;\n        yMax = yLargestMinMax.max;\n      }\n    }\n    this.yDomain = this.fixNumericExtent([yMin, yMax], 'y');\n    this.fireEvent({\n      type: 'dataProcessed'\n    });\n    return true;\n  };\n  BarSeries.prototype.getDomain = function (direction) {\n    if (this.flipXY) {\n      direction = flipChartAxisDirection(direction);\n    }\n    if (direction === ChartAxisDirection.X) {\n      return this.xData;\n    } else {\n      return this.yDomain;\n    }\n  };\n  BarSeries.prototype.fireNodeClickEvent = function (datum) {\n    this.fireEvent({\n      type: 'nodeClick',\n      series: this,\n      datum: datum.seriesDatum,\n      xKey: this.xKey,\n      yKey: datum.yKey\n    });\n  };\n  BarSeries.prototype.generateNodeData = function () {\n    var _this = this;\n    if (!this.data) {\n      return [];\n    }\n    var flipXY = this.flipXY;\n    var xAxis = flipXY ? this.yAxis : this.xAxis;\n    var yAxis = flipXY ? this.xAxis : this.yAxis;\n    var xScale = xAxis.scale;\n    var yScale = yAxis.scale;\n    var _a = this,\n      groupScale = _a.groupScale,\n      yKeys = _a.yKeys,\n      fills = _a.fills,\n      strokes = _a.strokes,\n      grouped = _a.grouped,\n      strokeWidth = _a.strokeWidth,\n      seriesItemEnabled = _a.seriesItemEnabled,\n      data = _a.data,\n      xData = _a.xData,\n      yData = _a.yData;\n    var label = this.label;\n    var labelFontStyle = label.fontStyle;\n    var labelFontWeight = label.fontWeight;\n    var labelFontSize = label.fontSize;\n    var labelFontFamily = label.fontFamily;\n    var labelColor = label.color;\n    var labelFormatter = label.formatter;\n    groupScale.range = [0, xScale.bandwidth];\n    var barWidth = grouped ? groupScale.bandwidth : xScale.bandwidth;\n    var nodeData = [];\n    xData.forEach(function (category, i) {\n      var yDatum = yData[i];\n      var seriesDatum = data[i];\n      var x = xScale.convert(category);\n      var prevMin = 0;\n      var prevMax = 0;\n      for (var j = 0; j < yDatum.length; j++) {\n        var curr = yDatum[j];\n        var yKey = yKeys[j];\n        var barX = grouped ? x + groupScale.convert(yKey) : x;\n        if (!xAxis.inRange(barX, barWidth)) {\n          continue;\n        }\n        var prev = curr < 0 ? prevMin : prevMax;\n        var y = yScale.convert(grouped ? curr : prev + curr);\n        var bottomY = yScale.convert(grouped ? 0 : prev);\n        var yValue = seriesDatum[yKey]; // unprocessed y-value\n        var yValueIsNumber = typeof yValue === 'number';\n        var labelText = void 0;\n        if (labelFormatter) {\n          labelText = labelFormatter({\n            value: yValueIsNumber ? yValue : undefined\n          });\n        } else {\n          labelText = yValueIsNumber && isFinite(yValue) ? yValue.toFixed(2) : '';\n        }\n        nodeData.push({\n          series: _this,\n          seriesDatum: seriesDatum,\n          yValue: yValue,\n          yKey: yKey,\n          x: flipXY ? Math.min(y, bottomY) : barX,\n          y: flipXY ? barX : Math.min(y, bottomY),\n          width: flipXY ? Math.abs(bottomY - y) : barWidth,\n          height: flipXY ? barWidth : Math.abs(bottomY - y),\n          fill: fills[j % fills.length],\n          stroke: strokes[j % strokes.length],\n          strokeWidth: strokeWidth,\n          label: seriesItemEnabled.get(yKey) && labelText ? {\n            text: labelText,\n            fontStyle: labelFontStyle,\n            fontWeight: labelFontWeight,\n            fontSize: labelFontSize,\n            fontFamily: labelFontFamily,\n            fill: labelColor,\n            x: flipXY ? y + (yValue >= 0 ? -1 : 1) * Math.abs(bottomY - y) / 2 : barX + barWidth / 2,\n            y: flipXY ? barX + barWidth / 2 : y + (yValue >= 0 ? 1 : -1) * Math.abs(bottomY - y) / 2\n          } : undefined\n        });\n        if (!grouped) {\n          if (curr < 0) {\n            prevMin += curr;\n          } else {\n            prevMax += curr;\n          }\n        }\n      }\n    });\n    return nodeData;\n  };\n  BarSeries.prototype.update = function () {\n    var _a = this,\n      visible = _a.visible,\n      chart = _a.chart,\n      xAxis = _a.xAxis,\n      yAxis = _a.yAxis,\n      xData = _a.xData,\n      yData = _a.yData;\n    this.group.visible = visible;\n    if (!chart || chart.layoutPending || chart.dataPending || !xAxis || !yAxis || !visible || !xData.length || !yData.length) {\n      return;\n    }\n    var nodeData = this.generateNodeData();\n    this.updateRectSelection(nodeData);\n    this.updateRectNodes();\n    this.updateTextSelection(nodeData);\n    this.updateTextNodes();\n  };\n  BarSeries.prototype.updateRectSelection = function (selectionData) {\n    var updateRects = this.rectSelection.setData(selectionData);\n    updateRects.exit.remove();\n    var enterRects = updateRects.enter.append(Rect).each(function (rect) {\n      rect.tag = BarSeriesNodeTag.Bar;\n      rect.crisp = true;\n    });\n    this.rectSelection = updateRects.merge(enterRects);\n  };\n  BarSeries.prototype.updateRectNodes = function () {\n    var _this = this;\n    if (!this.chart) {\n      return;\n    }\n    var _a = this,\n      fillOpacity = _a.fillOpacity,\n      strokeOpacity = _a.strokeOpacity,\n      _b = _a.highlightStyle,\n      fill = _b.fill,\n      stroke = _b.stroke,\n      shadow = _a.shadow,\n      formatter = _a.formatter,\n      xKey = _a.xKey,\n      flipXY = _a.flipXY;\n    var highlightedDatum = this.chart.highlightedDatum;\n    this.rectSelection.each(function (rect, datum) {\n      var highlighted = datum === highlightedDatum;\n      var rectFill = highlighted && fill !== undefined ? fill : datum.fill;\n      var rectStroke = highlighted && stroke !== undefined ? stroke : datum.stroke;\n      var format = undefined;\n      if (formatter) {\n        format = formatter({\n          datum: datum.seriesDatum,\n          fill: rectFill,\n          stroke: rectStroke,\n          strokeWidth: datum.strokeWidth,\n          highlighted: highlighted,\n          xKey: xKey,\n          yKey: datum.yKey\n        });\n      }\n      rect.x = datum.x;\n      rect.y = datum.y;\n      rect.width = datum.width;\n      rect.height = datum.height;\n      rect.fill = format && format.fill || rectFill;\n      rect.stroke = format && format.stroke || rectStroke;\n      rect.strokeWidth = format && format.strokeWidth !== undefined ? format.strokeWidth : datum.strokeWidth;\n      rect.fillOpacity = fillOpacity;\n      rect.strokeOpacity = strokeOpacity;\n      rect.lineDash = _this.lineDash;\n      rect.lineDashOffset = _this.lineDashOffset;\n      rect.fillShadow = shadow;\n      // Prevent stroke from rendering for zero height columns and zero width bars.\n      rect.visible = flipXY ? datum.width > 0 : datum.height > 0;\n    });\n  };\n  BarSeries.prototype.updateTextSelection = function (selectionData) {\n    var updateTexts = this.textSelection.setData(selectionData);\n    updateTexts.exit.remove();\n    var enterTexts = updateTexts.enter.append(Text).each(function (text) {\n      text.tag = BarSeriesNodeTag.Label;\n      text.pointerEvents = PointerEvents.None;\n      text.textAlign = 'center';\n      text.textBaseline = 'middle';\n    });\n    this.textSelection = updateTexts.merge(enterTexts);\n  };\n  BarSeries.prototype.updateTextNodes = function () {\n    var labelEnabled = this.label.enabled;\n    this.textSelection.each(function (text, datum) {\n      var label = datum.label;\n      if (label && labelEnabled) {\n        text.fontStyle = label.fontStyle;\n        text.fontWeight = label.fontWeight;\n        text.fontSize = label.fontSize;\n        text.fontFamily = label.fontFamily;\n        text.text = label.text;\n        text.x = label.x;\n        text.y = label.y;\n        text.fill = label.fill;\n        text.visible = true;\n      } else {\n        text.visible = false;\n      }\n    });\n  };\n  BarSeries.prototype.getTooltipHtml = function (nodeDatum) {\n    var xKey = this.xKey;\n    var yKey = nodeDatum.yKey;\n    if (!xKey || !yKey) {\n      return '';\n    }\n    var _a = this,\n      xName = _a.xName,\n      yKeys = _a.yKeys,\n      yNames = _a.yNames,\n      fills = _a.fills,\n      tooltipRenderer = _a.tooltipRenderer;\n    var datum = nodeDatum.seriesDatum;\n    var yKeyIndex = yKeys.indexOf(yKey);\n    var yName = yNames[yKeyIndex];\n    var color = fills[yKeyIndex % fills.length];\n    var xValue = datum[xKey];\n    var yValue = datum[yKey];\n    var xString = typeof xValue === 'number' ? toFixed(xValue) : String(xValue);\n    var yString = typeof yValue === 'number' ? toFixed(yValue) : String(yValue);\n    var title = yName;\n    var content = xString + ': ' + yString;\n    var defaults = {\n      title: title,\n      titleBackgroundColor: color,\n      content: content\n    };\n    if (tooltipRenderer) {\n      return toTooltipHtml(tooltipRenderer({\n        datum: datum,\n        xKey: xKey,\n        xValue: xValue,\n        xName: xName,\n        yKey: yKey,\n        yValue: yValue,\n        yName: yName,\n        color: color\n      }), defaults);\n    }\n    return toTooltipHtml(defaults);\n  };\n  BarSeries.prototype.listSeriesItems = function (legendData) {\n    var _a = this,\n      id = _a.id,\n      data = _a.data,\n      xKey = _a.xKey,\n      yKeys = _a.yKeys,\n      yNames = _a.yNames,\n      seriesItemEnabled = _a.seriesItemEnabled,\n      fills = _a.fills,\n      strokes = _a.strokes,\n      fillOpacity = _a.fillOpacity,\n      strokeOpacity = _a.strokeOpacity;\n    if (data && data.length && xKey && yKeys.length) {\n      yKeys.forEach(function (yKey, index) {\n        legendData.push({\n          id: id,\n          itemId: yKey,\n          enabled: seriesItemEnabled.get(yKey) || false,\n          label: {\n            text: yNames[index] || yKeys[index]\n          },\n          marker: {\n            fill: fills[index % fills.length],\n            stroke: strokes[index % strokes.length],\n            fillOpacity: fillOpacity,\n            strokeOpacity: strokeOpacity\n          }\n        });\n      });\n    }\n  };\n  BarSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n    var seriesItemEnabled = this.seriesItemEnabled;\n    var enabledSeriesItems = [];\n    seriesItemEnabled.set(itemId, enabled);\n    seriesItemEnabled.forEach(function (enabled, yKey) {\n      if (enabled) {\n        enabledSeriesItems.push(yKey);\n      }\n    });\n    this.groupScale.domain = enabledSeriesItems;\n    this.scheduleData();\n  };\n  BarSeries.className = 'BarSeries';\n  BarSeries.type = 'bar';\n  __decorate$N([reactive('layoutChange')], BarSeries.prototype, \"flipXY\", void 0);\n  __decorate$N([reactive('dataChange')], BarSeries.prototype, \"fills\", void 0);\n  __decorate$N([reactive('dataChange')], BarSeries.prototype, \"strokes\", void 0);\n  __decorate$N([reactive('layoutChange')], BarSeries.prototype, \"fillOpacity\", void 0);\n  __decorate$N([reactive('layoutChange')], BarSeries.prototype, \"strokeOpacity\", void 0);\n  __decorate$N([reactive('update')], BarSeries.prototype, \"lineDash\", void 0);\n  __decorate$N([reactive('update')], BarSeries.prototype, \"lineDashOffset\", void 0);\n  __decorate$N([reactive('update')], BarSeries.prototype, \"formatter\", void 0);\n  __decorate$N([reactive('dataChange')], BarSeries.prototype, \"grouped\", void 0);\n  return BarSeries;\n}(CartesianSeries);\nvar __extends$1k = undefined && undefined.__extends || function () {\n  var _extendStatics85 = function extendStatics(d, b) {\n    _extendStatics85 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics85(d, b);\n  };\n  return function (d, b) {\n    _extendStatics85(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$O = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar LineSeries = /** @class */function (_super) {\n  __extends$1k(LineSeries, _super);\n  function LineSeries() {\n    var _this = _super.call(this) || this;\n    _this.xDomain = [];\n    _this.yDomain = [];\n    _this.xData = [];\n    _this.yData = [];\n    _this.lineNode = new Path();\n    // We use groups for this selection even though each group only contains a marker ATM\n    // because in the future we might want to add label support as well.\n    _this.nodeSelection = Selection.select(_this.group).selectAll();\n    _this.nodeData = [];\n    _this.marker = new CartesianSeriesMarker();\n    _this.stroke = '#874349';\n    _this.lineDash = undefined;\n    _this.lineDashOffset = 0;\n    _this.strokeWidth = 2;\n    _this.strokeOpacity = 1;\n    _this._xKey = '';\n    _this.xName = '';\n    _this._yKey = '';\n    _this.yName = '';\n    _this.highlightStyle = {\n      fill: 'yellow'\n    };\n    var lineNode = _this.lineNode;\n    lineNode.fill = undefined;\n    lineNode.lineJoin = 'round';\n    lineNode.pointerEvents = PointerEvents.None;\n    _this.group.append(lineNode);\n    _this.addEventListener('update', _this.update);\n    var marker = _this.marker;\n    marker.fill = '#c16068';\n    marker.stroke = '#874349';\n    marker.addPropertyListener('shape', _this.onMarkerShapeChange, _this);\n    marker.addPropertyListener('enabled', _this.onMarkerEnabledChange, _this);\n    marker.addEventListener('change', _this.update, _this);\n    return _this;\n  }\n  LineSeries.prototype.onMarkerShapeChange = function () {\n    this.nodeSelection = this.nodeSelection.setData([]);\n    this.nodeSelection.exit.remove();\n    this.update();\n    this.fireEvent({\n      type: 'legendChange'\n    });\n  };\n  LineSeries.prototype.onMarkerEnabledChange = function (event) {\n    if (!event.value) {\n      this.nodeSelection = this.nodeSelection.setData([]);\n      this.nodeSelection.exit.remove();\n    }\n  };\n  LineSeries.prototype.setColors = function (fills, strokes) {\n    this.stroke = fills[0];\n    this.marker.stroke = strokes[0];\n    this.marker.fill = fills[0];\n  };\n  Object.defineProperty(LineSeries.prototype, \"xKey\", {\n    get: function get() {\n      return this._xKey;\n    },\n    set: function set(value) {\n      if (this._xKey !== value) {\n        this._xKey = value;\n        this.xData = [];\n        this.scheduleData();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(LineSeries.prototype, \"yKey\", {\n    get: function get() {\n      return this._yKey;\n    },\n    set: function set(value) {\n      if (this._yKey !== value) {\n        this._yKey = value;\n        this.yData = [];\n        this.scheduleData();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  LineSeries.prototype.processData = function () {\n    var _a = this,\n      xAxis = _a.xAxis,\n      yAxis = _a.yAxis,\n      xKey = _a.xKey,\n      yKey = _a.yKey,\n      xData = _a.xData,\n      yData = _a.yData;\n    var data = xKey && yKey && this.data ? this.data : [];\n    if (!xAxis) {\n      return false;\n    }\n    var isContinuousX = xAxis.scale instanceof ContinuousScale;\n    var isContinuousY = yAxis.scale instanceof ContinuousScale;\n    xData.length = 0;\n    yData.length = 0;\n    for (var i = 0, n = data.length; i < n; i++) {\n      var datum = data[i];\n      var x = datum[xKey];\n      var y = datum[yKey];\n      xData.push(x);\n      yData.push(y);\n    }\n    this.xDomain = isContinuousX ? this.fixNumericExtent(numericExtent(xData), 'x') : xData;\n    this.yDomain = isContinuousY ? this.fixNumericExtent(numericExtent(yData), 'y') : yData;\n    return true;\n  };\n  LineSeries.prototype.getDomain = function (direction) {\n    if (direction === ChartAxisDirection.X) {\n      return this.xDomain;\n    }\n    return this.yDomain;\n  };\n  LineSeries.prototype.onHighlightChange = function () {\n    this.updateNodes();\n  };\n  LineSeries.prototype.update = function () {\n    this.group.visible = this.visible;\n    var _a = this,\n      chart = _a.chart,\n      xAxis = _a.xAxis,\n      yAxis = _a.yAxis;\n    if (!chart || chart.layoutPending || chart.dataPending || !xAxis || !yAxis) {\n      return;\n    }\n    this.updateLinePath(); // this will generate node data too\n    this.updateNodeSelection();\n    this.updateNodes();\n  };\n  LineSeries.prototype.getXYDatums = function (i, xData, yData, xScale, yScale) {\n    var isContinuousX = xScale instanceof ContinuousScale;\n    var isContinuousY = yScale instanceof ContinuousScale;\n    var xDatum = xData[i];\n    var yDatum = yData[i];\n    var noDatum = yDatum == null || isContinuousY && (isNaN(yDatum) || !isFinite(yDatum)) || xDatum == null || isContinuousX && (isNaN(xDatum) || !isFinite(xDatum));\n    return noDatum ? undefined : [xDatum, yDatum];\n  };\n  LineSeries.prototype.updateLinePath = function () {\n    if (!this.data) {\n      return;\n    }\n    var _a = this,\n      xAxis = _a.xAxis,\n      yAxis = _a.yAxis,\n      data = _a.data,\n      xData = _a.xData,\n      yData = _a.yData,\n      lineNode = _a.lineNode;\n    var xScale = xAxis.scale;\n    var yScale = yAxis.scale;\n    var xOffset = (xScale.bandwidth || 0) / 2;\n    var yOffset = (yScale.bandwidth || 0) / 2;\n    var linePath = lineNode.path;\n    var nodeData = [];\n    linePath.clear();\n    var moveTo = true;\n    var prevXInRange = undefined;\n    var nextXYDatums = undefined;\n    for (var i = 0; i < xData.length; i++) {\n      var xyDatums = nextXYDatums || this.getXYDatums(i, xData, yData, xScale, yScale);\n      if (!xyDatums) {\n        prevXInRange = undefined;\n        moveTo = true;\n      } else {\n        var xDatum = xyDatums[0],\n          yDatum = xyDatums[1];\n        var x = xScale.convert(xDatum) + xOffset;\n        var tolerance = (xScale.bandwidth || this.marker.size * 0.5 + (this.marker.strokeWidth || 0)) + 1;\n        nextXYDatums = this.getXYDatums(i + 1, xData, yData, xScale, yScale);\n        var xInRange = xAxis.inRangeEx(x, 0, tolerance);\n        var nextXInRange = nextXYDatums && xAxis.inRangeEx(xScale.convert(nextXYDatums[0]) + xOffset, 0, tolerance);\n        if (xInRange === -1 && nextXInRange === -1) {\n          moveTo = true;\n          continue;\n        }\n        if (xInRange === 1 && prevXInRange === 1) {\n          moveTo = true;\n          continue;\n        }\n        prevXInRange = xInRange;\n        var y = yScale.convert(yDatum) + yOffset;\n        if (moveTo) {\n          linePath.moveTo(x, y);\n          moveTo = false;\n        } else {\n          linePath.lineTo(x, y);\n        }\n        nodeData.push({\n          series: this,\n          seriesDatum: data[i],\n          point: {\n            x: x,\n            y: y\n          }\n        });\n      }\n    }\n    lineNode.stroke = this.stroke;\n    lineNode.strokeWidth = this.strokeWidth;\n    lineNode.lineDash = this.lineDash;\n    lineNode.lineDashOffset = this.lineDashOffset;\n    lineNode.strokeOpacity = this.strokeOpacity;\n    // Used by marker nodes and for hit-testing even when not using markers\n    // when `chart.tooltipTracking` is true.\n    this.nodeData = nodeData;\n  };\n  LineSeries.prototype.updateNodeSelection = function () {\n    var marker = this.marker;\n    var nodeData = marker.shape ? this.nodeData : [];\n    var MarkerShape = getMarker(marker.shape);\n    var updateSelection = this.nodeSelection.setData(nodeData);\n    updateSelection.exit.remove();\n    var enterSelection = updateSelection.enter.append(Group);\n    enterSelection.append(MarkerShape);\n    this.nodeSelection = updateSelection.merge(enterSelection);\n  };\n  LineSeries.prototype.updateNodes = function () {\n    if (!this.chart) {\n      return;\n    }\n    var _a = this,\n      marker = _a.marker,\n      xKey = _a.xKey,\n      yKey = _a.yKey,\n      stroke = _a.stroke,\n      strokeWidth = _a.strokeWidth;\n    var MarkerShape = getMarker(marker.shape);\n    var highlightedDatum = this.chart.highlightedDatum;\n    var _b = this.highlightStyle,\n      highlightFill = _b.fill,\n      highlightStroke = _b.stroke;\n    var markerFormatter = marker.formatter;\n    var markerSize = marker.size;\n    var markerStrokeWidth = marker.strokeWidth !== undefined ? marker.strokeWidth : strokeWidth;\n    this.nodeSelection.selectByClass(MarkerShape).each(function (node, datum) {\n      var highlighted = datum === highlightedDatum;\n      var markerFill = highlighted && highlightFill !== undefined ? highlightFill : marker.fill;\n      var markerStroke = highlighted && highlightStroke !== undefined ? highlightStroke : marker.stroke || stroke;\n      var markerFormat = undefined;\n      if (markerFormatter) {\n        markerFormat = markerFormatter({\n          datum: datum.seriesDatum,\n          xKey: xKey,\n          yKey: yKey,\n          fill: markerFill,\n          stroke: markerStroke,\n          strokeWidth: markerStrokeWidth,\n          size: markerSize,\n          highlighted: highlighted\n        });\n      }\n      node.fill = markerFormat && markerFormat.fill || markerFill;\n      node.stroke = markerFormat && markerFormat.stroke || markerStroke;\n      node.strokeWidth = markerFormat && markerFormat.strokeWidth !== undefined ? markerFormat.strokeWidth : markerStrokeWidth;\n      node.size = markerFormat && markerFormat.size !== undefined ? markerFormat.size : markerSize;\n      node.translationX = datum.point.x;\n      node.translationY = datum.point.y;\n      node.visible = marker.enabled && node.size > 0;\n    });\n  };\n  LineSeries.prototype.getNodeData = function () {\n    return this.nodeData;\n  };\n  LineSeries.prototype.fireNodeClickEvent = function (datum) {\n    this.fireEvent({\n      type: 'nodeClick',\n      series: this,\n      datum: datum.seriesDatum,\n      xKey: this.xKey,\n      yKey: this.yKey\n    });\n  };\n  LineSeries.prototype.getTooltipHtml = function (nodeDatum) {\n    var _a = this,\n      xKey = _a.xKey,\n      yKey = _a.yKey;\n    if (!xKey || !yKey) {\n      return '';\n    }\n    var _b = this,\n      xName = _b.xName,\n      yName = _b.yName,\n      color = _b.stroke,\n      tooltipRenderer = _b.tooltipRenderer;\n    var datum = nodeDatum.seriesDatum;\n    var xValue = datum[xKey];\n    var yValue = datum[yKey];\n    var xString = typeof xValue === 'number' ? toFixed(xValue) : String(xValue);\n    var yString = typeof yValue === 'number' ? toFixed(yValue) : String(yValue);\n    var title = this.title || yName;\n    var content = xString + ': ' + yString;\n    var defaults = {\n      title: title,\n      titleBackgroundColor: color,\n      content: content\n    };\n    if (tooltipRenderer) {\n      var datum_1 = nodeDatum.seriesDatum;\n      return toTooltipHtml(tooltipRenderer({\n        datum: datum_1,\n        xKey: xKey,\n        xValue: xValue,\n        xName: xName,\n        yKey: yKey,\n        yValue: yValue,\n        yName: yName,\n        title: title,\n        color: color\n      }), defaults);\n    }\n    return toTooltipHtml(defaults);\n  };\n  LineSeries.prototype.listSeriesItems = function (legendData) {\n    var _a = this,\n      id = _a.id,\n      data = _a.data,\n      xKey = _a.xKey,\n      yKey = _a.yKey,\n      yName = _a.yName,\n      visible = _a.visible,\n      title = _a.title,\n      marker = _a.marker,\n      stroke = _a.stroke,\n      strokeOpacity = _a.strokeOpacity;\n    if (data && data.length && xKey && yKey) {\n      legendData.push({\n        id: id,\n        itemId: undefined,\n        enabled: visible,\n        label: {\n          text: title || yName || yKey\n        },\n        marker: {\n          shape: marker.shape,\n          fill: marker.fill || 'rgba(0, 0, 0, 0)',\n          stroke: marker.stroke || stroke || 'rgba(0, 0, 0, 0)',\n          fillOpacity: 1,\n          strokeOpacity: strokeOpacity\n        }\n      });\n    }\n  };\n  LineSeries.className = 'LineSeries';\n  LineSeries.type = 'line';\n  __decorate$O([reactive('layoutChange')], LineSeries.prototype, \"title\", void 0);\n  __decorate$O([reactive('update')], LineSeries.prototype, \"stroke\", void 0);\n  __decorate$O([reactive('update')], LineSeries.prototype, \"lineDash\", void 0);\n  __decorate$O([reactive('update')], LineSeries.prototype, \"lineDashOffset\", void 0);\n  __decorate$O([reactive('update')], LineSeries.prototype, \"strokeWidth\", void 0);\n  __decorate$O([reactive('update')], LineSeries.prototype, \"strokeOpacity\", void 0);\n  __decorate$O([reactive('update')], LineSeries.prototype, \"xName\", void 0);\n  __decorate$O([reactive('update')], LineSeries.prototype, \"yName\", void 0);\n  return LineSeries;\n}(CartesianSeries);\nvar __extends$1l = undefined && undefined.__extends || function () {\n  var _extendStatics86 = function extendStatics(d, b) {\n    _extendStatics86 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics86(d, b);\n  };\n  return function (d, b) {\n    _extendStatics86(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$P = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ScatterSeries = /** @class */function (_super) {\n  __extends$1l(ScatterSeries, _super);\n  function ScatterSeries() {\n    var _this = _super.call(this) || this;\n    _this.xDomain = [];\n    _this.yDomain = [];\n    _this.xData = [];\n    _this.yData = [];\n    _this.sizeData = [];\n    _this.sizeScale = new LinearScale();\n    _this.nodeSelection = Selection.select(_this.group).selectAll();\n    _this.nodeData = [];\n    _this.marker = new CartesianSeriesMarker();\n    _this._fill = '#c16068';\n    _this._stroke = '#874349';\n    _this._strokeWidth = 2;\n    _this._fillOpacity = 1;\n    _this._strokeOpacity = 1;\n    _this.highlightStyle = {\n      fill: 'yellow'\n    };\n    _this.xKey = '';\n    _this.yKey = '';\n    _this.xName = '';\n    _this.yName = '';\n    _this.sizeName = 'Size';\n    _this.labelName = 'Label';\n    var marker = _this.marker;\n    marker.addPropertyListener('shape', _this.onMarkerShapeChange, _this);\n    marker.addEventListener('change', _this.update, _this);\n    _this.addPropertyListener('xKey', function () {\n      return _this.xData = [];\n    });\n    _this.addPropertyListener('yKey', function () {\n      return _this.yData = [];\n    });\n    _this.addPropertyListener('sizeKey', function () {\n      return _this.sizeData = [];\n    });\n    return _this;\n  }\n  Object.defineProperty(ScatterSeries.prototype, \"fill\", {\n    get: function get() {\n      return this._fill;\n    },\n    set: function set(value) {\n      if (this._fill !== value) {\n        this._fill = value;\n        this.scheduleData();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ScatterSeries.prototype, \"stroke\", {\n    get: function get() {\n      return this._stroke;\n    },\n    set: function set(value) {\n      if (this._stroke !== value) {\n        this._stroke = value;\n        this.scheduleData();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ScatterSeries.prototype, \"strokeWidth\", {\n    get: function get() {\n      return this._strokeWidth;\n    },\n    set: function set(value) {\n      if (this._strokeWidth !== value) {\n        this._strokeWidth = value;\n        this.update();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ScatterSeries.prototype, \"fillOpacity\", {\n    get: function get() {\n      return this._fillOpacity;\n    },\n    set: function set(value) {\n      if (this._fillOpacity !== value) {\n        this._fillOpacity = value;\n        this.scheduleLayout();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ScatterSeries.prototype, \"strokeOpacity\", {\n    get: function get() {\n      return this._strokeOpacity;\n    },\n    set: function set(value) {\n      if (this._strokeOpacity !== value) {\n        this._strokeOpacity = value;\n        this.scheduleLayout();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ScatterSeries.prototype.onHighlightChange = function () {\n    this.updateNodes();\n  };\n  ScatterSeries.prototype.onMarkerShapeChange = function () {\n    this.nodeSelection = this.nodeSelection.setData([]);\n    this.nodeSelection.exit.remove();\n    this.update();\n    this.fireEvent({\n      type: 'legendChange'\n    });\n  };\n  ScatterSeries.prototype.setColors = function (fills, strokes) {\n    this.fill = fills[0];\n    this.stroke = strokes[0];\n    this.marker.fill = fills[0];\n    this.marker.stroke = strokes[0];\n  };\n  ScatterSeries.prototype.processData = function () {\n    var _a = this,\n      xKey = _a.xKey,\n      yKey = _a.yKey,\n      sizeKey = _a.sizeKey,\n      xAxis = _a.xAxis,\n      yAxis = _a.yAxis;\n    var data = xKey && yKey && this.data ? this.data : [];\n    this.xData = data.map(function (d) {\n      return d[xKey];\n    });\n    this.yData = data.map(function (d) {\n      return d[yKey];\n    });\n    if (sizeKey) {\n      this.sizeData = data.map(function (d) {\n        return d[sizeKey];\n      });\n    } else {\n      this.sizeData = [];\n    }\n    this.sizeScale.domain = finiteExtent(this.sizeData) || [1, 1];\n    if (xAxis.scale instanceof ContinuousScale) {\n      this.xDomain = this.fixNumericExtent(finiteExtent(this.xData), 'x');\n    } else {\n      this.xDomain = this.xData;\n    }\n    if (yAxis.scale instanceof ContinuousScale) {\n      this.yDomain = this.fixNumericExtent(finiteExtent(this.yData), 'y');\n    } else {\n      this.yDomain = this.yData;\n    }\n    return true;\n  };\n  ScatterSeries.prototype.getDomain = function (direction) {\n    if (direction === ChartAxisDirection.X) {\n      return this.xDomain;\n    } else {\n      return this.yDomain;\n    }\n  };\n  ScatterSeries.prototype.getNodeData = function () {\n    return this.nodeData;\n  };\n  ScatterSeries.prototype.fireNodeClickEvent = function (datum) {\n    this.fireEvent({\n      type: 'nodeClick',\n      series: this,\n      datum: datum.seriesDatum,\n      xKey: this.xKey,\n      yKey: this.yKey,\n      sizeKey: this.sizeKey\n    });\n  };\n  ScatterSeries.prototype.generateNodeData = function () {\n    if (!this.data) {\n      return [];\n    }\n    var _a = this,\n      xAxis = _a.xAxis,\n      yAxis = _a.yAxis;\n    var xScale = xAxis.scale;\n    var yScale = yAxis.scale;\n    var xOffset = (xScale.bandwidth || 0) / 2;\n    var yOffset = (yScale.bandwidth || 0) / 2;\n    var _b = this,\n      data = _b.data,\n      xData = _b.xData,\n      yData = _b.yData,\n      sizeData = _b.sizeData,\n      sizeScale = _b.sizeScale,\n      marker = _b.marker;\n    sizeScale.range = [marker.size, marker.maxSize];\n    var nodeData = [];\n    for (var i = 0; i < xData.length; i++) {\n      var xDatum = xData[i];\n      var x = xScale.convert(xDatum) + xOffset;\n      if (!xAxis.inRange(x)) {\n        continue;\n      }\n      nodeData.push({\n        series: this,\n        seriesDatum: data[i],\n        point: {\n          x: x,\n          y: yScale.convert(yData[i]) + yOffset\n        },\n        size: sizeData.length ? sizeScale.convert(sizeData[i]) : marker.size\n      });\n    }\n    return nodeData;\n  };\n  ScatterSeries.prototype.update = function () {\n    var _a = this,\n      visible = _a.visible,\n      chart = _a.chart,\n      xAxis = _a.xAxis,\n      yAxis = _a.yAxis;\n    this.group.visible = visible;\n    if (!visible || !chart || chart.layoutPending || chart.dataPending || !xAxis || !yAxis) {\n      return;\n    }\n    var nodeData = this.nodeData = this.generateNodeData();\n    this.updateNodeSelection(nodeData);\n    this.updateNodes();\n  };\n  ScatterSeries.prototype.updateNodeSelection = function (nodeData) {\n    var MarkerShape = getMarker(this.marker.shape);\n    var updateSelection = this.nodeSelection.setData(nodeData);\n    updateSelection.exit.remove();\n    var enterSelection = updateSelection.enter.append(Group);\n    enterSelection.append(MarkerShape);\n    this.nodeSelection = updateSelection.merge(enterSelection);\n  };\n  ScatterSeries.prototype.updateNodes = function () {\n    if (!this.chart) {\n      return;\n    }\n    var highlightedDatum = this.chart.highlightedDatum;\n    var _a = this,\n      marker = _a.marker,\n      xKey = _a.xKey,\n      yKey = _a.yKey,\n      fill = _a.fill,\n      stroke = _a.stroke,\n      strokeWidth = _a.strokeWidth,\n      fillOpacity = _a.fillOpacity,\n      strokeOpacity = _a.strokeOpacity;\n    var _b = this.highlightStyle,\n      highlightFill = _b.fill,\n      highlightStroke = _b.stroke;\n    var markerStrokeWidth = marker.strokeWidth !== undefined ? marker.strokeWidth : strokeWidth;\n    var MarkerShape = getMarker(marker.shape);\n    var markerFormatter = marker.formatter;\n    this.nodeSelection.selectByClass(MarkerShape).each(function (node, datum) {\n      var highlighted = datum === highlightedDatum;\n      var markerFill = highlighted && highlightFill !== undefined ? highlightFill : marker.fill || fill;\n      var markerStroke = highlighted && highlightStroke !== undefined ? highlightStroke : marker.stroke || stroke;\n      var markerFormat = undefined;\n      if (markerFormatter) {\n        markerFormat = markerFormatter({\n          datum: datum.seriesDatum,\n          xKey: xKey,\n          yKey: yKey,\n          fill: markerFill,\n          stroke: markerStroke,\n          strokeWidth: markerStrokeWidth,\n          size: datum.size,\n          highlighted: highlighted\n        });\n      }\n      node.fill = markerFormat && markerFormat.fill || markerFill;\n      node.stroke = markerFormat && markerFormat.stroke || markerStroke;\n      node.strokeWidth = markerFormat && markerFormat.strokeWidth !== undefined ? markerFormat.strokeWidth : markerStrokeWidth;\n      node.size = markerFormat && markerFormat.size !== undefined ? markerFormat.size : datum.size;\n      node.fillOpacity = fillOpacity;\n      node.strokeOpacity = strokeOpacity;\n      node.translationX = datum.point.x;\n      node.translationY = datum.point.y;\n      node.visible = marker.enabled && node.size > 0;\n    });\n  };\n  ScatterSeries.prototype.getTooltipHtml = function (nodeDatum) {\n    var _a = this,\n      xKey = _a.xKey,\n      yKey = _a.yKey;\n    if (!xKey || !yKey) {\n      return '';\n    }\n    var _b = this,\n      tooltipRenderer = _b.tooltipRenderer,\n      xName = _b.xName,\n      yName = _b.yName,\n      sizeKey = _b.sizeKey,\n      sizeName = _b.sizeName,\n      labelKey = _b.labelKey,\n      labelName = _b.labelName,\n      fill = _b.fill;\n    var color = fill || 'gray';\n    var title = this.title || yName;\n    var datum = nodeDatum.seriesDatum;\n    var xValue = datum[xKey];\n    var yValue = datum[yKey];\n    var content = \"<b>\" + (xName || xKey) + \"</b>: \" + (typeof xValue === 'number' ? toFixed(xValue) : xValue) + (\"<br><b>\" + (yName || yKey) + \"</b>: \" + (typeof yValue === 'number' ? toFixed(yValue) : yValue));\n    if (sizeKey) {\n      content += \"<br><b>\" + sizeName + \"</b>: \" + datum[sizeKey];\n    }\n    if (labelKey) {\n      content = \"<b>\" + labelName + \"</b>: \" + datum[labelKey] + \"<br>\" + content;\n    }\n    var defaults = {\n      title: title,\n      titleBackgroundColor: color,\n      content: content\n    };\n    if (tooltipRenderer) {\n      return toTooltipHtml(tooltipRenderer({\n        datum: datum,\n        xKey: xKey,\n        xValue: xValue,\n        xName: xName,\n        yKey: yKey,\n        yValue: yValue,\n        yName: yName,\n        sizeKey: sizeKey,\n        sizeName: sizeName,\n        labelKey: labelKey,\n        labelName: labelName,\n        title: title,\n        color: color\n      }), defaults);\n    }\n    return toTooltipHtml(defaults);\n  };\n  ScatterSeries.prototype.listSeriesItems = function (legendData) {\n    var _a = this,\n      id = _a.id,\n      data = _a.data,\n      xKey = _a.xKey,\n      yKey = _a.yKey,\n      yName = _a.yName,\n      title = _a.title,\n      visible = _a.visible,\n      marker = _a.marker,\n      fill = _a.fill,\n      stroke = _a.stroke,\n      fillOpacity = _a.fillOpacity,\n      strokeOpacity = _a.strokeOpacity;\n    if (data && data.length && xKey && yKey) {\n      legendData.push({\n        id: id,\n        itemId: undefined,\n        enabled: visible,\n        label: {\n          text: title || yName || yKey\n        },\n        marker: {\n          shape: marker.shape,\n          fill: marker.fill || fill || 'rgba(0, 0, 0, 0)',\n          stroke: marker.stroke || stroke || 'rgba(0, 0, 0, 0)',\n          fillOpacity: fillOpacity,\n          strokeOpacity: strokeOpacity\n        }\n      });\n    }\n  };\n  ScatterSeries.className = 'ScatterSeries';\n  ScatterSeries.type = 'scatter';\n  __decorate$P([reactive('layoutChange')], ScatterSeries.prototype, \"title\", void 0);\n  __decorate$P([reactive('dataChange')], ScatterSeries.prototype, \"xKey\", void 0);\n  __decorate$P([reactive('dataChange')], ScatterSeries.prototype, \"yKey\", void 0);\n  __decorate$P([reactive('dataChange')], ScatterSeries.prototype, \"sizeKey\", void 0);\n  __decorate$P([reactive('dataChange')], ScatterSeries.prototype, \"labelKey\", void 0);\n  return ScatterSeries;\n}(CartesianSeries);\nvar __extends$1m = undefined && undefined.__extends || function () {\n  var _extendStatics87 = function extendStatics(d, b) {\n    _extendStatics87 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics87(d, b);\n  };\n  return function (d, b) {\n    _extendStatics87(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$Q = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays$5 = undefined && undefined.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nvar HistogramSeriesNodeTag;\n(function (HistogramSeriesNodeTag) {\n  HistogramSeriesNodeTag[HistogramSeriesNodeTag[\"Bin\"] = 0] = \"Bin\";\n  HistogramSeriesNodeTag[HistogramSeriesNodeTag[\"Label\"] = 1] = \"Label\";\n})(HistogramSeriesNodeTag || (HistogramSeriesNodeTag = {}));\nvar HistogramSeriesLabel = /** @class */function (_super) {\n  __extends$1m(HistogramSeriesLabel, _super);\n  function HistogramSeriesLabel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  __decorate$Q([reactive('change')], HistogramSeriesLabel.prototype, \"formatter\", void 0);\n  return HistogramSeriesLabel;\n}(Label);\nvar defaultBinCount = 10;\nvar aggregationFunctions = {\n  count: function count(bin) {\n    return bin.data.length;\n  },\n  sum: function sum(bin, yKey) {\n    return bin.data.reduce(function (acc, datum) {\n      return acc + datum[yKey];\n    }, 0);\n  },\n  mean: function mean(bin, yKey) {\n    return aggregationFunctions.sum(bin, yKey) / aggregationFunctions.count(bin, yKey);\n  }\n};\nvar HistogramBin = /** @class */function () {\n  function HistogramBin(_a) {\n    var domainMin = _a[0],\n      domainMax = _a[1];\n    this.data = [];\n    this.aggregatedValue = 0;\n    this.frequency = 0;\n    this.domain = [domainMin, domainMax];\n  }\n  HistogramBin.prototype.addDatum = function (datum) {\n    this.data.push(datum);\n    this.frequency++;\n  };\n  Object.defineProperty(HistogramBin.prototype, \"domainWidth\", {\n    get: function get() {\n      var _a = this.domain,\n        domainMin = _a[0],\n        domainMax = _a[1];\n      return domainMax - domainMin;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HistogramBin.prototype, \"relativeHeight\", {\n    get: function get() {\n      return this.aggregatedValue / this.domainWidth;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  HistogramBin.prototype.calculateAggregatedValue = function (aggregationName, yKey) {\n    if (!yKey) {\n      // not having a yKey forces us into a frequency plot\n      aggregationName = 'count';\n    }\n    var aggregationFunction = aggregationFunctions[aggregationName];\n    this.aggregatedValue = aggregationFunction(this, yKey);\n  };\n  HistogramBin.prototype.getY = function (areaPlot) {\n    return areaPlot ? this.relativeHeight : this.aggregatedValue;\n  };\n  return HistogramBin;\n}();\nvar HistogramSeries = /** @class */function (_super) {\n  __extends$1m(HistogramSeries, _super);\n  function HistogramSeries() {\n    var _a;\n    var _this = _super.call(this) || this;\n    // Need to put column and label nodes into separate groups, because even though label nodes are\n    // created after the column nodes, this only guarantees that labels will always be on top of columns\n    // on the first run. If on the next run more columns are added, they might clip the labels\n    // rendered during the previous run.\n    _this.rectGroup = _this.group.appendChild(new Group());\n    _this.textGroup = _this.group.appendChild(new Group());\n    _this.rectSelection = Selection.select(_this.rectGroup).selectAll();\n    _this.textSelection = Selection.select(_this.textGroup).selectAll();\n    _this.binnedData = [];\n    _this.xDomain = [];\n    _this.yDomain = [];\n    _this.label = new HistogramSeriesLabel();\n    _this.seriesItemEnabled = true;\n    _this.fill = undefined;\n    _this.stroke = undefined;\n    _this.fillOpacity = 1;\n    _this.strokeOpacity = 1;\n    _this.lineDash = undefined;\n    _this.lineDashOffset = 0;\n    _this.directionKeys = (_a = {}, _a[ChartAxisDirection.X] = ['xKey'], _a[ChartAxisDirection.Y] = ['yKey'], _a);\n    _this._xKey = '';\n    _this._areaPlot = false;\n    _this._xName = '';\n    _this._yKey = '';\n    _this._yName = '';\n    _this._strokeWidth = 1;\n    _this.highlightStyle = {\n      fill: 'yellow'\n    };\n    _this.label.enabled = false;\n    _this.label.addEventListener('change', _this.update, _this);\n    return _this;\n  }\n  HistogramSeries.prototype.getKeys = function (direction) {\n    var _this = this;\n    var directionKeys = this.directionKeys;\n    var keys = directionKeys && directionKeys[direction];\n    var values = [];\n    if (keys) {\n      keys.forEach(function (key) {\n        var value = _this[key];\n        if (value) {\n          if (Array.isArray(value)) {\n            values.push.apply(values, value);\n          } else {\n            values.push(value);\n          }\n        }\n      });\n    }\n    return values;\n  };\n  Object.defineProperty(HistogramSeries.prototype, \"xKey\", {\n    get: function get() {\n      return this._xKey;\n    },\n    set: function set(value) {\n      if (this._xKey !== value) {\n        this._xKey = value;\n        this.scheduleData();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HistogramSeries.prototype, \"areaPlot\", {\n    get: function get() {\n      return this._areaPlot;\n    },\n    set: function set(c) {\n      this._areaPlot = c;\n      this.scheduleData();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HistogramSeries.prototype, \"bins\", {\n    get: function get() {\n      return this._bins;\n    },\n    set: function set(bins) {\n      this._bins = bins;\n      this.scheduleData();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HistogramSeries.prototype, \"aggregation\", {\n    get: function get() {\n      return this._aggregation;\n    },\n    set: function set(aggregation) {\n      this._aggregation = aggregation;\n      this.scheduleData();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HistogramSeries.prototype, \"binCount\", {\n    get: function get() {\n      return this._binCount;\n    },\n    set: function set(binCount) {\n      this._binCount = binCount;\n      this.scheduleData();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HistogramSeries.prototype, \"xName\", {\n    get: function get() {\n      return this._xName;\n    },\n    set: function set(value) {\n      if (this._xName !== value) {\n        this._xName = value;\n        this.update();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HistogramSeries.prototype, \"yKey\", {\n    get: function get() {\n      return this._yKey;\n    },\n    set: function set(yKey) {\n      this._yKey = yKey;\n      this.seriesItemEnabled = true;\n      this.scheduleData();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HistogramSeries.prototype, \"yName\", {\n    get: function get() {\n      return this._yName;\n    },\n    set: function set(values) {\n      this._yName = values;\n      this.scheduleData();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HistogramSeries.prototype, \"strokeWidth\", {\n    get: function get() {\n      return this._strokeWidth;\n    },\n    set: function set(value) {\n      if (this._strokeWidth !== value) {\n        this._strokeWidth = value;\n        this.update();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HistogramSeries.prototype, \"shadow\", {\n    get: function get() {\n      return this._shadow;\n    },\n    set: function set(value) {\n      if (this._shadow !== value) {\n        this._shadow = value;\n        this.update();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  HistogramSeries.prototype.onHighlightChange = function () {\n    this.updateRectNodes();\n  };\n  HistogramSeries.prototype.setColors = function (fills, strokes) {\n    this.fill = fills[0];\n    this.stroke = strokes[0];\n  };\n  /*  during processData phase, used to unify different ways of the user specifying\n      the bins. Returns bins in format [[min1, max1], [min2, max2] ... ] */\n  HistogramSeries.prototype.deriveBins = function () {\n    var _this = this;\n    var _a = this,\n      bins = _a.bins,\n      binCount = _a.binCount;\n    if (!this.data) {\n      return [];\n    }\n    if (bins && binCount) {\n      console.warn('bin domain and bin count both specified - these are mutually exclusive properties');\n    }\n    if (bins) {\n      // we have explicity set bins from user. Use those.\n      return bins;\n    }\n    var xData = this.data.map(function (datum) {\n      return datum[_this.xKey];\n    });\n    var xDomain = this.fixNumericExtent(finiteExtent(xData), 'x');\n    var binStarts = ticks(xDomain[0], xDomain[1], this.binCount || defaultBinCount);\n    var binSize = tickStep(xDomain[0], xDomain[1], this.binCount || defaultBinCount);\n    var firstBinEnd = binStarts[0];\n    var expandStartToBin = function expandStartToBin(n) {\n      return [n, n + binSize];\n    };\n    return __spreadArrays$5([[firstBinEnd - binSize, firstBinEnd]], binStarts.map(expandStartToBin));\n  };\n  HistogramSeries.prototype.placeDataInBins = function (data) {\n    var _this = this;\n    var xKey = this.xKey;\n    var derivedBins = this.deriveBins();\n    // creating a sorted copy allows binning in O(n) rather than O(n)\n    // but at the expense of more temporary memory\n    var sortedData = data.slice().sort(function (a, b) {\n      if (a[xKey] < b[xKey]) {\n        return -1;\n      }\n      if (a[xKey] > b[xKey]) {\n        return 1;\n      }\n      return 0;\n    });\n    var currentBin = 0;\n    var bins = [new HistogramBin(derivedBins[0])];\n    sortedData.forEach(function (datum) {\n      while (datum[xKey] > derivedBins[currentBin][1]) {\n        currentBin++;\n        bins.push(new HistogramBin(derivedBins[currentBin]));\n      }\n      bins[currentBin].addDatum(datum);\n    });\n    bins.forEach(function (b) {\n      return b.calculateAggregatedValue(_this._aggregation, _this.yKey);\n    });\n    return bins;\n  };\n  Object.defineProperty(HistogramSeries.prototype, \"xMax\", {\n    get: function get() {\n      var _this = this;\n      return this.data && this.data.reduce(function (acc, datum) {\n        return Math.max(acc, datum[_this.xKey]);\n      }, Number.NEGATIVE_INFINITY);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  HistogramSeries.prototype.processData = function () {\n    var _this = this;\n    var _a = this,\n      xKey = _a.xKey,\n      data = _a.data;\n    this.binnedData = this.placeDataInBins(xKey && data ? data : []);\n    var yData = this.binnedData.map(function (b) {\n      return b.getY(_this.areaPlot);\n    });\n    var yMinMax = numericExtent(yData);\n    this.yDomain = this.fixNumericExtent([0, yMinMax ? yMinMax[1] : 1], 'y');\n    var firstBin = this.binnedData[0];\n    var lastBin = this.binnedData[this.binnedData.length - 1];\n    var xMin = firstBin.domain[0];\n    var xMax = lastBin.domain[1];\n    this.xDomain = [xMin, xMax];\n    this.fireEvent({\n      type: 'dataProcessed'\n    });\n    return true;\n  };\n  HistogramSeries.prototype.getDomain = function (direction) {\n    if (direction === ChartAxisDirection.X) {\n      return this.xDomain;\n    } else {\n      return this.yDomain;\n    }\n  };\n  HistogramSeries.prototype.fireNodeClickEvent = function (datum) {\n    this.fireEvent({\n      type: 'nodeClick',\n      series: this,\n      datum: datum.seriesDatum,\n      xKey: this.xKey\n    });\n  };\n  HistogramSeries.prototype.update = function () {\n    var _a = this,\n      visible = _a.visible,\n      chart = _a.chart,\n      xAxis = _a.xAxis,\n      yAxis = _a.yAxis;\n    this.group.visible = visible;\n    if (!xAxis || !yAxis || !visible || !chart || chart.layoutPending || chart.dataPending) {\n      return;\n    }\n    var nodeData = this.generateNodeData();\n    this.updateRectSelection(nodeData);\n    this.updateRectNodes();\n    this.updateTextSelection(nodeData);\n    this.updateTextNodes();\n  };\n  HistogramSeries.prototype.generateNodeData = function () {\n    var _this = this;\n    if (!this.seriesItemEnabled) {\n      return [];\n    }\n    var _a = this,\n      xScale = _a.xAxis.scale,\n      yScale = _a.yAxis.scale,\n      fill = _a.fill,\n      stroke = _a.stroke,\n      strokeWidth = _a.strokeWidth;\n    var nodeData = [];\n    var defaultLabelFormatter = function defaultLabelFormatter(params) {\n      return String(params.value);\n    };\n    var _b = this.label,\n      _c = _b.formatter,\n      labelFormatter = _c === void 0 ? defaultLabelFormatter : _c,\n      labelFontStyle = _b.fontStyle,\n      labelFontWeight = _b.fontWeight,\n      labelFontSize = _b.fontSize,\n      labelFontFamily = _b.fontFamily,\n      labelColor = _b.color;\n    this.binnedData.forEach(function (binOfData) {\n      var total = binOfData.aggregatedValue,\n        frequency = binOfData.frequency,\n        _a = binOfData.domain,\n        xDomainMin = _a[0],\n        xDomainMax = _a[1],\n        relativeHeight = binOfData.relativeHeight;\n      var xMinPx = xScale.convert(xDomainMin),\n        xMaxPx = xScale.convert(xDomainMax),\n        // note: assuming can't be negative:\n        y = _this.areaPlot ? relativeHeight : _this.yKey ? total : frequency,\n        yZeroPx = yScale.convert(0),\n        yMaxPx = yScale.convert(y),\n        w = xMaxPx - xMinPx,\n        h = Math.abs(yMaxPx - yZeroPx);\n      var selectionDatumLabel = y !== 0 ? {\n        text: labelFormatter({\n          value: binOfData.aggregatedValue\n        }),\n        fontStyle: labelFontStyle,\n        fontWeight: labelFontWeight,\n        fontSize: labelFontSize,\n        fontFamily: labelFontFamily,\n        fill: labelColor,\n        x: xMinPx + w / 2,\n        y: yMaxPx + h / 2\n      } : undefined;\n      nodeData.push({\n        series: _this,\n        seriesDatum: binOfData,\n        // since each selection is an aggregation of multiple data.\n        x: xMinPx,\n        y: yMaxPx,\n        width: w,\n        height: h,\n        fill: fill,\n        stroke: stroke,\n        strokeWidth: strokeWidth,\n        label: selectionDatumLabel\n      });\n    });\n    return nodeData;\n  };\n  HistogramSeries.prototype.updateRectSelection = function (nodeData) {\n    var updateRects = this.rectSelection.setData(nodeData);\n    updateRects.exit.remove();\n    var enterRects = updateRects.enter.append(Rect).each(function (rect) {\n      rect.tag = HistogramSeriesNodeTag.Bin;\n      rect.crisp = true;\n    });\n    this.rectSelection = updateRects.merge(enterRects);\n  };\n  HistogramSeries.prototype.updateRectNodes = function () {\n    var _this = this;\n    if (!this.chart) {\n      return;\n    }\n    var highlightedDatum = this.chart.highlightedDatum;\n    var _a = this,\n      fillOpacity = _a.fillOpacity,\n      strokeOpacity = _a.strokeOpacity,\n      shadow = _a.shadow,\n      _b = _a.highlightStyle,\n      fill = _b.fill,\n      stroke = _b.stroke;\n    this.rectSelection.each(function (rect, datum) {\n      var highlighted = datum === highlightedDatum;\n      rect.x = datum.x;\n      rect.y = datum.y;\n      rect.width = datum.width;\n      rect.height = datum.height;\n      rect.fill = highlighted && fill !== undefined ? fill : datum.fill;\n      rect.stroke = highlighted && stroke !== undefined ? stroke : datum.stroke;\n      rect.fillOpacity = fillOpacity;\n      rect.strokeOpacity = strokeOpacity;\n      rect.strokeWidth = datum.strokeWidth;\n      rect.lineDash = _this.lineDash;\n      rect.lineDashOffset = _this.lineDashOffset;\n      rect.fillShadow = shadow;\n      rect.visible = datum.height > 0; // prevent stroke from rendering for zero height columns\n    });\n  };\n\n  HistogramSeries.prototype.updateTextSelection = function (nodeData) {\n    var updateTexts = this.textSelection.setData(nodeData);\n    updateTexts.exit.remove();\n    var enterTexts = updateTexts.enter.append(Text).each(function (text) {\n      text.tag = HistogramSeriesNodeTag.Label;\n      text.pointerEvents = PointerEvents.None;\n      text.textAlign = 'center';\n      text.textBaseline = 'middle';\n    });\n    this.textSelection = updateTexts.merge(enterTexts);\n  };\n  HistogramSeries.prototype.updateTextNodes = function () {\n    var labelEnabled = this.label.enabled;\n    this.textSelection.each(function (text, datum) {\n      var label = datum.label;\n      if (label && labelEnabled) {\n        text.text = label.text;\n        text.x = label.x;\n        text.y = label.y;\n        text.fontStyle = label.fontStyle;\n        text.fontWeight = label.fontWeight;\n        text.fontSize = label.fontSize;\n        text.fontFamily = label.fontFamily;\n        text.fill = label.fill;\n        text.visible = true;\n      } else {\n        text.visible = false;\n      }\n    });\n  };\n  HistogramSeries.prototype.getTooltipHtml = function (nodeDatum) {\n    var _a = this,\n      xKey = _a.xKey,\n      yKey = _a.yKey;\n    if (!xKey) {\n      return '';\n    }\n    var _b = this,\n      xName = _b.xName,\n      yName = _b.yName,\n      color = _b.fill,\n      tooltipRenderer = _b.tooltipRenderer,\n      aggregation = _b.aggregation;\n    var bin = nodeDatum.seriesDatum;\n    var aggregatedValue = bin.aggregatedValue,\n      frequency = bin.frequency,\n      _c = bin.domain,\n      rangeMin = _c[0],\n      rangeMax = _c[1];\n    var title = (xName || xKey) + \" \" + toFixed(rangeMin) + \" - \" + toFixed(rangeMax);\n    var content = yKey ? \"<b>\" + (yName || yKey) + \" (\" + aggregation + \")</b>: \" + toFixed(aggregatedValue) + \"<br>\" : '';\n    content += \"<b>Frequency</b>: \" + frequency;\n    var defaults = {\n      title: title,\n      titleBackgroundColor: color,\n      content: content\n    };\n    if (tooltipRenderer) {\n      return toTooltipHtml(tooltipRenderer({\n        datum: bin,\n        xKey: xKey,\n        xValue: bin.domain,\n        xName: xName,\n        yKey: yKey,\n        yValue: bin.aggregatedValue,\n        yName: yName,\n        color: color\n      }), defaults);\n    }\n    return toTooltipHtml(defaults);\n  };\n  HistogramSeries.prototype.listSeriesItems = function (legendData) {\n    var _a = this,\n      id = _a.id,\n      data = _a.data,\n      yKey = _a.yKey,\n      yName = _a.yName,\n      seriesItemEnabled = _a.seriesItemEnabled,\n      fill = _a.fill,\n      stroke = _a.stroke,\n      fillOpacity = _a.fillOpacity,\n      strokeOpacity = _a.strokeOpacity;\n    if (data && data.length) {\n      legendData.push({\n        id: id,\n        itemId: yKey,\n        enabled: seriesItemEnabled,\n        label: {\n          text: yName || yKey || 'Frequency'\n        },\n        marker: {\n          fill: fill || 'rgba(0, 0, 0, 0)',\n          stroke: stroke || 'rgba(0, 0, 0, 0)',\n          fillOpacity: fillOpacity,\n          strokeOpacity: strokeOpacity\n        }\n      });\n    }\n  };\n  HistogramSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n    if (itemId === this.yKey) {\n      this.seriesItemEnabled = enabled;\n    }\n    this.scheduleData();\n  };\n  HistogramSeries.className = 'HistogramSeries';\n  HistogramSeries.type = 'histogram';\n  __decorate$Q([reactive('dataChange')], HistogramSeries.prototype, \"fill\", void 0);\n  __decorate$Q([reactive('dataChange')], HistogramSeries.prototype, \"stroke\", void 0);\n  __decorate$Q([reactive('layoutChange')], HistogramSeries.prototype, \"fillOpacity\", void 0);\n  __decorate$Q([reactive('layoutChange')], HistogramSeries.prototype, \"strokeOpacity\", void 0);\n  __decorate$Q([reactive('update')], HistogramSeries.prototype, \"lineDash\", void 0);\n  __decorate$Q([reactive('update')], HistogramSeries.prototype, \"lineDashOffset\", void 0);\n  return HistogramSeries;\n}(CartesianSeries);\nvar __extends$1n = undefined && undefined.__extends || function () {\n  var _extendStatics88 = function extendStatics(d, b) {\n    _extendStatics88 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics88(d, b);\n  };\n  return function (d, b) {\n    _extendStatics88(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar Sector = /** @class */function (_super) {\n  __extends$1n(Sector, _super);\n  function Sector() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.path = new Path2D();\n    _this._dirtyPath = true;\n    _this._centerX = 0;\n    _this._centerY = 0;\n    _this._centerOffset = 0;\n    _this._innerRadius = 10;\n    _this._outerRadius = 20;\n    _this._startAngle = 0;\n    _this._endAngle = Math.PI * 2;\n    _this._angleOffset = 0;\n    return _this;\n  }\n  Object.defineProperty(Sector.prototype, \"dirtyPath\", {\n    get: function get() {\n      return this._dirtyPath;\n    },\n    set: function set(value) {\n      if (this._dirtyPath !== value) {\n        this._dirtyPath = value;\n        if (value) {\n          this.dirty = true;\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sector.prototype, \"centerX\", {\n    get: function get() {\n      return this._centerX;\n    },\n    set: function set(value) {\n      if (this._centerX !== value) {\n        this._centerX = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sector.prototype, \"centerY\", {\n    get: function get() {\n      return this._centerY;\n    },\n    set: function set(value) {\n      if (this._centerY !== value) {\n        this._centerY = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sector.prototype, \"centerOffset\", {\n    get: function get() {\n      return this._centerOffset;\n    },\n    set: function set(value) {\n      if (this._centerOffset !== value) {\n        this._centerOffset = Math.max(0, value);\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sector.prototype, \"innerRadius\", {\n    get: function get() {\n      return this._innerRadius;\n    },\n    set: function set(value) {\n      if (this._innerRadius !== value) {\n        this._innerRadius = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sector.prototype, \"outerRadius\", {\n    get: function get() {\n      return this._outerRadius;\n    },\n    set: function set(value) {\n      if (this._outerRadius !== value) {\n        this._outerRadius = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sector.prototype, \"startAngle\", {\n    get: function get() {\n      return this._startAngle;\n    },\n    set: function set(value) {\n      if (this._startAngle !== value) {\n        this._startAngle = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sector.prototype, \"endAngle\", {\n    get: function get() {\n      return this._endAngle;\n    },\n    set: function set(value) {\n      if (this._endAngle !== value) {\n        this._endAngle = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sector.prototype, \"angleOffset\", {\n    get: function get() {\n      return this._angleOffset;\n    },\n    set: function set(value) {\n      if (this._angleOffset !== value) {\n        this._angleOffset = value;\n        this.dirtyPath = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Sector.prototype.computeBBox = function () {\n    var radius = this.outerRadius;\n    return new BBox(this.centerX - radius, this.centerY - radius, radius * 2, radius * 2);\n  };\n  Sector.prototype.isPointInPath = function (x, y) {\n    var point = this.transformPoint(x, y);\n    return this.path.isPointInPath(point.x, point.y);\n  };\n  Sector.prototype.isPointInStroke = function (x, y) {\n    return false;\n  };\n  Object.defineProperty(Sector.prototype, \"fullPie\", {\n    get: function get() {\n      return isEqual(normalizeAngle360(this.startAngle), normalizeAngle360(this.endAngle));\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Sector.prototype.updatePath = function () {\n    if (!this.dirtyPath) {\n      return;\n    }\n    var path = this.path;\n    var angleOffset = this.angleOffset;\n    var startAngle = Math.min(this.startAngle, this.endAngle) + angleOffset;\n    var endAngle = Math.max(this.startAngle, this.endAngle) + angleOffset;\n    var midAngle = (startAngle + endAngle) * 0.5;\n    var innerRadius = Math.min(this.innerRadius, this.outerRadius);\n    var outerRadius = Math.max(this.innerRadius, this.outerRadius);\n    var centerOffset = this.centerOffset;\n    var fullPie = this.fullPie;\n    // const tipOffset = radiiGap / 3;\n    // const showTip = radiiGap < outerRadius / 2;\n    var centerX = this.centerX;\n    var centerY = this.centerY;\n    path.clear();\n    if (centerOffset) {\n      centerX += centerOffset * Math.cos(midAngle);\n      centerY += centerOffset * Math.sin(midAngle);\n    }\n    if (!fullPie) {\n      path.moveTo(centerX + innerRadius * Math.cos(startAngle), centerY + innerRadius * Math.sin(startAngle));\n      // if (showTip) {\n      //     path.lineTo(\n      //         centerX + 0.5 * (innerRadius + outerRadius) * Math.cos(startAngle) + tipOffset * Math.cos(startAngle + Math.PI / 2),\n      //         centerY + 0.5 * (innerRadius + outerRadius) * Math.sin(startAngle) + tipOffset * Math.sin(startAngle + Math.PI / 2)\n      //     );\n      // }\n      path.lineTo(centerX + outerRadius * Math.cos(startAngle), centerY + outerRadius * Math.sin(startAngle));\n    }\n    path.cubicArc(centerX, centerY, outerRadius, outerRadius, 0, startAngle, endAngle, 0);\n    // path[fullPie ? 'moveTo' : 'lineTo'](\n    //     centerX + innerRadius * Math.cos(endAngle),\n    //     centerY + innerRadius * Math.sin(endAngle)\n    // );\n    if (fullPie) {\n      path.moveTo(centerX + innerRadius * Math.cos(endAngle), centerY + innerRadius * Math.sin(endAngle));\n    } else {\n      // if (showTip) {\n      //     path.lineTo(\n      //         centerX + 0.5 * (innerRadius + outerRadius) * Math.cos(endAngle) + tipOffset * Math.cos(endAngle + Math.PI / 2),\n      //         centerY + 0.5 * (innerRadius + outerRadius) * Math.sin(endAngle) + tipOffset * Math.sin(endAngle + Math.PI / 2)\n      //     );\n      // }\n      // Temp workaround for https://bugs.chromium.org/p/chromium/issues/detail?id=993330\n      // Revert this commit when fixed ^^.\n      var x = centerX + innerRadius * Math.cos(endAngle);\n      path.lineTo(Math.abs(x) < 1e-8 ? 0 : x, centerY + innerRadius * Math.sin(endAngle));\n    }\n    path.cubicArc(centerX, centerY, innerRadius, innerRadius, 0, endAngle, startAngle, 1);\n    path.closePath();\n    this.dirtyPath = false;\n  };\n  Sector.prototype.render = function (ctx) {\n    if (this.dirtyTransform) {\n      this.computeTransformMatrix();\n    }\n    this.matrix.toContext(ctx);\n    this.updatePath();\n    this.scene.appendPath(this.path);\n    this.fillStroke(ctx);\n    this.dirty = false;\n  };\n  Sector.className = 'Sector';\n  return Sector;\n}(Shape);\nvar Color = /** @class */function () {\n  /**\n   * Every color component should be in the [0, 1] range.\n   * Some easing functions (such as elastic easing) can overshoot the target value by some amount.\n   * So, when animating colors, if the source or target color components are already near\n   * or at the edge of the allowed [0, 1] range, it is possible for the intermediate color\n   * component value to end up outside of that range mid-animation. For this reason the constructor\n   * performs range checking/constraining.\n   * @param r Red component.\n   * @param g Green component.\n   * @param b Blue component.\n   * @param a Alpha (opacity) component.\n   */\n  function Color(r, g, b, a) {\n    if (a === void 0) {\n      a = 1;\n    }\n    // NaN is treated as 0.\n    this.r = Math.min(1, Math.max(0, r || 0));\n    this.g = Math.min(1, Math.max(0, g || 0));\n    this.b = Math.min(1, Math.max(0, b || 0));\n    this.a = Math.min(1, Math.max(0, a || 0));\n  }\n  /**\n   * The given string can be in one of the following formats:\n   * - #rgb\n   * - #rrggbb\n   * - rgb(r, g, b)\n   * - rgba(r, g, b, a)\n   * - CSS color name such as 'white', 'orange', 'cyan', etc.\n   * @param str\n   */\n  Color.fromString = function (str) {\n    // hexadecimal notation\n    if (str.indexOf('#') >= 0) {\n      // there can be some leading whitespace\n      return Color.fromHexString(str);\n    }\n    // color name\n    var hex = Color.nameToHex[str];\n    if (hex) {\n      return Color.fromHexString(hex);\n    }\n    // rgb(a) notation\n    if (str.indexOf('rgb') >= 0) {\n      return Color.fromRgbaString(str);\n    }\n    throw new Error(\"Invalid color string: '\" + str + \"'\");\n  };\n  // Using separate RegExp for the short hex notation because strings like `#abcd`\n  // are matched as ['#abcd', 'ab', 'c', 'd', undefined] when the `{1,2}` quantifier is used.\n  Color.fromHexString = function (str) {\n    var values = str.match(Color.hexRe);\n    if (values) {\n      var r = parseInt(values[1], 16);\n      var g = parseInt(values[2], 16);\n      var b = parseInt(values[3], 16);\n      var a = values[4] !== undefined ? parseInt(values[4], 16) : 255;\n      return new Color(r / 255, g / 255, b / 255, a / 255);\n    }\n    values = str.match(Color.shortHexRe);\n    if (values) {\n      var r = parseInt(values[1], 16);\n      var g = parseInt(values[2], 16);\n      var b = parseInt(values[3], 16);\n      var a = values[4] !== undefined ? parseInt(values[4], 16) : 15;\n      r += r * 16;\n      g += g * 16;\n      b += b * 16;\n      a += a * 16;\n      return new Color(r / 255, g / 255, b / 255, a / 255);\n    }\n    throw new Error(\"Malformed hexadecimal color string: '\" + str + \"'\");\n  };\n  Color.fromRgbaString = function (str) {\n    var values = str.match(Color.rgbRe);\n    if (values) {\n      return new Color(+values[1] / 255, +values[2] / 255, +values[3] / 255);\n    }\n    values = str.match(Color.rgbaRe);\n    if (values) {\n      return new Color(+values[1] / 255, +values[2] / 255, +values[3] / 255, +values[4]);\n    }\n    throw new Error(\"Malformed rgb/rgba color string: '\" + str + \"'\");\n  };\n  Color.fromArray = function (arr) {\n    if (arr.length === 4) {\n      return new Color(arr[0], arr[1], arr[2], arr[3]);\n    }\n    if (arr.length === 3) {\n      return new Color(arr[0], arr[1], arr[2]);\n    }\n    throw new Error('The given array should contain 3 or 4 color components (numbers).');\n  };\n  Color.fromHSB = function (h, s, b, alpha) {\n    if (alpha === void 0) {\n      alpha = 1;\n    }\n    var rgb = Color.HSBtoRGB(h, s, b);\n    return new Color(rgb[0], rgb[1], rgb[2], alpha);\n  };\n  Color.padHex = function (str) {\n    // Can't use `padStart(2, '0')` here because of IE.\n    return str.length === 1 ? '0' + str : str;\n  };\n  Color.prototype.toHexString = function () {\n    var hex = '#' + Color.padHex(Math.round(this.r * 255).toString(16)) + Color.padHex(Math.round(this.g * 255).toString(16)) + Color.padHex(Math.round(this.b * 255).toString(16));\n    if (this.a < 1) {\n      hex += Color.padHex(Math.round(this.a * 255).toString(16));\n    }\n    return hex;\n  };\n  Color.prototype.toRgbaString = function (fractionDigits) {\n    if (fractionDigits === void 0) {\n      fractionDigits = 3;\n    }\n    var components = [Math.round(this.r * 255), Math.round(this.g * 255), Math.round(this.b * 255)];\n    var k = Math.pow(10, fractionDigits);\n    if (this.a !== 1) {\n      components.push(Math.round(this.a * k) / k);\n      return \"rgba(\" + components.join(', ') + \")\";\n    }\n    return \"rgb(\" + components.join(', ') + \")\";\n  };\n  Color.prototype.toString = function () {\n    if (this.a === 1) {\n      return this.toHexString();\n    }\n    return this.toRgbaString();\n  };\n  Color.prototype.toHSB = function () {\n    return Color.RGBtoHSB(this.r, this.g, this.b);\n  };\n  /**\n   * Converts the given RGB triple to an array of HSB (HSV) components.\n   * The hue component will be `NaN` for achromatic colors.\n   */\n  Color.RGBtoHSB = function (r, g, b) {\n    var min = Math.min(r, g, b);\n    var max = Math.max(r, g, b);\n    var S = max !== 0 ? (max - min) / max : 0;\n    var H = NaN;\n    // min == max, means all components are the same\n    // and the color is a shade of gray with no hue (H is NaN)\n    if (min !== max) {\n      var delta = max - min;\n      var rc = (max - r) / delta;\n      var gc = (max - g) / delta;\n      var bc = (max - b) / delta;\n      if (r === max) {\n        H = bc - gc;\n      } else if (g === max) {\n        H = 2.0 + rc - bc;\n      } else {\n        H = 4.0 + gc - rc;\n      }\n      H /= 6.0;\n      if (H < 0) {\n        H = H + 1.0;\n      }\n    }\n    return [H * 360, S, max];\n  };\n  /**\n   * Converts the given HSB (HSV) triple to an array of RGB components.\n   */\n  Color.HSBtoRGB = function (H, S, B) {\n    if (isNaN(H)) {\n      H = 0;\n    }\n    H = (H % 360 + 360) % 360 / 360; // normalize hue to [0, 360] interval, then scale to [0, 1]\n    var r = 0;\n    var g = 0;\n    var b = 0;\n    if (S === 0) {\n      r = g = b = B;\n    } else {\n      var h = (H - Math.floor(H)) * 6;\n      var f = h - Math.floor(h);\n      var p = B * (1 - S);\n      var q = B * (1 - S * f);\n      var t = B * (1 - S * (1 - f));\n      switch (h >> 0) {\n        // discard the floating point part of the number\n        case 0:\n          r = B;\n          g = t;\n          b = p;\n          break;\n        case 1:\n          r = q;\n          g = B;\n          b = p;\n          break;\n        case 2:\n          r = p;\n          g = B;\n          b = t;\n          break;\n        case 3:\n          r = p;\n          g = q;\n          b = B;\n          break;\n        case 4:\n          r = t;\n          g = p;\n          b = B;\n          break;\n        case 5:\n          r = B;\n          g = p;\n          b = q;\n          break;\n      }\n    }\n    return [r, g, b];\n  };\n  Color.prototype.derive = function (hueShift, saturationFactor, brightnessFactor, opacityFactor) {\n    var hsb = Color.RGBtoHSB(this.r, this.g, this.b);\n    var b = hsb[2];\n    if (b == 0 && brightnessFactor > 1.0) {\n      b = 0.05;\n    }\n    var h = ((hsb[0] + hueShift) % 360 + 360) % 360;\n    var s = Math.max(Math.min(hsb[1] * saturationFactor, 1.0), 0.0);\n    b = Math.max(Math.min(b * brightnessFactor, 1.0), 0.0);\n    var a = Math.max(Math.min(this.a * opacityFactor, 1.0), 0.0);\n    var rgba = Color.HSBtoRGB(h, s, b);\n    rgba.push(a);\n    return Color.fromArray(rgba);\n  };\n  Color.prototype.brighter = function () {\n    return this.derive(0, 1.0, 1.0 / 0.7, 1.0);\n  };\n  Color.prototype.darker = function () {\n    return this.derive(0, 1.0, 0.7, 1.0);\n  };\n  // See https://drafts.csswg.org/css-color/#hex-notation\n  Color.hexRe = /\\s*#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?\\s*$/;\n  Color.shortHexRe = /\\s*#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])?\\s*$/;\n  Color.rgbRe = /\\s*rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)\\s*/;\n  Color.rgbaRe = /\\s*rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*([.\\d]+)\\)\\s*/;\n  /**\n   * CSS Color Module Level 4:\n   * https://drafts.csswg.org/css-color/#named-colors\n   */\n  Color.nameToHex = Object.freeze({\n    aliceblue: '#F0F8FF',\n    antiquewhite: '#FAEBD7',\n    aqua: '#00FFFF',\n    aquamarine: '#7FFFD4',\n    azure: '#F0FFFF',\n    beige: '#F5F5DC',\n    bisque: '#FFE4C4',\n    black: '#000000',\n    blanchedalmond: '#FFEBCD',\n    blue: '#0000FF',\n    blueviolet: '#8A2BE2',\n    brown: '#A52A2A',\n    burlywood: '#DEB887',\n    cadetblue: '#5F9EA0',\n    chartreuse: '#7FFF00',\n    chocolate: '#D2691E',\n    coral: '#FF7F50',\n    cornflowerblue: '#6495ED',\n    cornsilk: '#FFF8DC',\n    crimson: '#DC143C',\n    cyan: '#00FFFF',\n    darkblue: '#00008B',\n    darkcyan: '#008B8B',\n    darkgoldenrod: '#B8860B',\n    darkgray: '#A9A9A9',\n    darkgreen: '#006400',\n    darkgrey: '#A9A9A9',\n    darkkhaki: '#BDB76B',\n    darkmagenta: '#8B008B',\n    darkolivegreen: '#556B2F',\n    darkorange: '#FF8C00',\n    darkorchid: '#9932CC',\n    darkred: '#8B0000',\n    darksalmon: '#E9967A',\n    darkseagreen: '#8FBC8F',\n    darkslateblue: '#483D8B',\n    darkslategray: '#2F4F4F',\n    darkslategrey: '#2F4F4F',\n    darkturquoise: '#00CED1',\n    darkviolet: '#9400D3',\n    deeppink: '#FF1493',\n    deepskyblue: '#00BFFF',\n    dimgray: '#696969',\n    dimgrey: '#696969',\n    dodgerblue: '#1E90FF',\n    firebrick: '#B22222',\n    floralwhite: '#FFFAF0',\n    forestgreen: '#228B22',\n    fuchsia: '#FF00FF',\n    gainsboro: '#DCDCDC',\n    ghostwhite: '#F8F8FF',\n    gold: '#FFD700',\n    goldenrod: '#DAA520',\n    gray: '#808080',\n    green: '#008000',\n    greenyellow: '#ADFF2F',\n    grey: '#808080',\n    honeydew: '#F0FFF0',\n    hotpink: '#FF69B4',\n    indianred: '#CD5C5C',\n    indigo: '#4B0082',\n    ivory: '#FFFFF0',\n    khaki: '#F0E68C',\n    lavender: '#E6E6FA',\n    lavenderblush: '#FFF0F5',\n    lawngreen: '#7CFC00',\n    lemonchiffon: '#FFFACD',\n    lightblue: '#ADD8E6',\n    lightcoral: '#F08080',\n    lightcyan: '#E0FFFF',\n    lightgoldenrodyellow: '#FAFAD2',\n    lightgray: '#D3D3D3',\n    lightgreen: '#90EE90',\n    lightgrey: '#D3D3D3',\n    lightpink: '#FFB6C1',\n    lightsalmon: '#FFA07A',\n    lightseagreen: '#20B2AA',\n    lightskyblue: '#87CEFA',\n    lightslategray: '#778899',\n    lightslategrey: '#778899',\n    lightsteelblue: '#B0C4DE',\n    lightyellow: '#FFFFE0',\n    lime: '#00FF00',\n    limegreen: '#32CD32',\n    linen: '#FAF0E6',\n    magenta: '#FF00FF',\n    maroon: '#800000',\n    mediumaquamarine: '#66CDAA',\n    mediumblue: '#0000CD',\n    mediumorchid: '#BA55D3',\n    mediumpurple: '#9370DB',\n    mediumseagreen: '#3CB371',\n    mediumslateblue: '#7B68EE',\n    mediumspringgreen: '#00FA9A',\n    mediumturquoise: '#48D1CC',\n    mediumvioletred: '#C71585',\n    midnightblue: '#191970',\n    mintcream: '#F5FFFA',\n    mistyrose: '#FFE4E1',\n    moccasin: '#FFE4B5',\n    navajowhite: '#FFDEAD',\n    navy: '#000080',\n    oldlace: '#FDF5E6',\n    olive: '#808000',\n    olivedrab: '#6B8E23',\n    orange: '#FFA500',\n    orangered: '#FF4500',\n    orchid: '#DA70D6',\n    palegoldenrod: '#EEE8AA',\n    palegreen: '#98FB98',\n    paleturquoise: '#AFEEEE',\n    palevioletred: '#DB7093',\n    papayawhip: '#FFEFD5',\n    peachpuff: '#FFDAB9',\n    peru: '#CD853F',\n    pink: '#FFC0CB',\n    plum: '#DDA0DD',\n    powderblue: '#B0E0E6',\n    purple: '#800080',\n    rebeccapurple: '#663399',\n    red: '#FF0000',\n    rosybrown: '#BC8F8F',\n    royalblue: '#4169E1',\n    saddlebrown: '#8B4513',\n    salmon: '#FA8072',\n    sandybrown: '#F4A460',\n    seagreen: '#2E8B57',\n    seashell: '#FFF5EE',\n    sienna: '#A0522D',\n    silver: '#C0C0C0',\n    skyblue: '#87CEEB',\n    slateblue: '#6A5ACD',\n    slategray: '#708090',\n    slategrey: '#708090',\n    snow: '#FFFAFA',\n    springgreen: '#00FF7F',\n    steelblue: '#4682B4',\n    tan: '#D2B48C',\n    teal: '#008080',\n    thistle: '#D8BFD8',\n    tomato: '#FF6347',\n    turquoise: '#40E0D0',\n    violet: '#EE82EE',\n    wheat: '#F5DEB3',\n    white: '#FFFFFF',\n    whitesmoke: '#F5F5F5',\n    yellow: '#FFFF00',\n    yellowgreen: '#9ACD32'\n  });\n  return Color;\n}();\nvar __extends$1o = undefined && undefined.__extends || function () {\n  var _extendStatics89 = function extendStatics(d, b) {\n    _extendStatics89 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics89(d, b);\n  };\n  return function (d, b) {\n    _extendStatics89(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$R = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PieNodeTag;\n(function (PieNodeTag) {\n  PieNodeTag[PieNodeTag[\"Sector\"] = 0] = \"Sector\";\n  PieNodeTag[PieNodeTag[\"Callout\"] = 1] = \"Callout\";\n  PieNodeTag[PieNodeTag[\"Label\"] = 2] = \"Label\";\n})(PieNodeTag || (PieNodeTag = {}));\nvar PieSeriesLabel = /** @class */function (_super) {\n  __extends$1o(PieSeriesLabel, _super);\n  function PieSeriesLabel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.offset = 3; // from the callout line\n    _this.minAngle = 20; // in degrees\n    return _this;\n  }\n  __decorate$R([reactive('change')], PieSeriesLabel.prototype, \"offset\", void 0);\n  __decorate$R([reactive('dataChange')], PieSeriesLabel.prototype, \"minAngle\", void 0);\n  return PieSeriesLabel;\n}(Label);\nvar PieSeriesCallout = /** @class */function (_super) {\n  __extends$1o(PieSeriesCallout, _super);\n  function PieSeriesCallout() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.colors = [];\n    _this.length = 10;\n    _this.strokeWidth = 1;\n    return _this;\n  }\n  __decorate$R([reactive('change')], PieSeriesCallout.prototype, \"colors\", void 0);\n  __decorate$R([reactive('change')], PieSeriesCallout.prototype, \"length\", void 0);\n  __decorate$R([reactive('change')], PieSeriesCallout.prototype, \"strokeWidth\", void 0);\n  return PieSeriesCallout;\n}(Observable);\nvar PieSeries = /** @class */function (_super) {\n  __extends$1o(PieSeries, _super);\n  function PieSeries() {\n    var _this = _super.call(this) || this;\n    _this.radiusScale = new LinearScale();\n    _this.groupSelection = Selection.select(_this.group).selectAll();\n    /**\n     * The processed data that gets visualized.\n     */\n    _this.groupSelectionData = [];\n    _this.angleScale = function () {\n      var scale = new LinearScale();\n      // Each slice is a ratio of the whole, where all ratios add up to 1.\n      scale.domain = [0, 1];\n      // Add 90 deg to start the first pie at 12 o'clock.\n      scale.range = [-Math.PI, Math.PI].map(function (angle) {\n        return angle + Math.PI / 2;\n      });\n      return scale;\n    }();\n    // When a user toggles a series item (e.g. from the legend), its boolean state is recorded here.\n    _this.seriesItemEnabled = [];\n    _this.label = new PieSeriesLabel();\n    _this.callout = new PieSeriesCallout();\n    /**\n     * The key of the numeric field to use to determine the angle (for example,\n     * a pie slice angle).\n     */\n    _this.angleKey = '';\n    _this.angleName = '';\n    _this._fills = ['#c16068', '#a2bf8a', '#ebcc87', '#80a0c3', '#b58dae', '#85c0d1'];\n    _this._strokes = ['#874349', '#718661', '#a48f5f', '#5a7088', '#7f637a', '#5d8692'];\n    _this.fillOpacity = 1;\n    _this.strokeOpacity = 1;\n    _this.lineDash = undefined;\n    _this.lineDashOffset = 0;\n    /**\n     * The series rotation in degrees.\n     */\n    _this.rotation = 0;\n    _this.outerRadiusOffset = 0;\n    _this.innerRadiusOffset = 0;\n    _this.strokeWidth = 1;\n    _this.highlightStyle = {\n      fill: 'yellow'\n    };\n    _this.addEventListener('update', _this.update, _this);\n    _this.label.addEventListener('change', _this.scheduleLayout, _this);\n    _this.label.addEventListener('dataChange', _this.scheduleData, _this);\n    _this.callout.addEventListener('change', _this.scheduleLayout, _this);\n    _this.addPropertyListener('data', function (event) {\n      if (event.value) {\n        event.source.seriesItemEnabled = event.value.map(function () {\n          return true;\n        });\n      }\n    });\n    return _this;\n  }\n  Object.defineProperty(PieSeries.prototype, \"title\", {\n    get: function get() {\n      return this._title;\n    },\n    set: function set(value) {\n      var oldTitle = this._title;\n      if (oldTitle !== value) {\n        if (oldTitle) {\n          oldTitle.removeEventListener('change', this.scheduleLayout);\n          this.group.removeChild(oldTitle.node);\n        }\n        if (value) {\n          value.node.textBaseline = 'bottom';\n          value.addEventListener('change', this.scheduleLayout);\n          this.group.appendChild(value.node);\n        }\n        this._title = value;\n        this.scheduleLayout();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PieSeries.prototype, \"fills\", {\n    get: function get() {\n      return this._fills;\n    },\n    set: function set(values) {\n      this._fills = values;\n      this.strokes = values.map(function (color) {\n        return Color.fromString(color).darker().toHexString();\n      });\n      this.scheduleData();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PieSeries.prototype, \"strokes\", {\n    get: function get() {\n      return this._strokes;\n    },\n    set: function set(values) {\n      this._strokes = values;\n      this.callout.colors = values;\n      this.scheduleData();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  PieSeries.prototype.onHighlightChange = function () {\n    this.updateNodes();\n  };\n  PieSeries.prototype.setColors = function (fills, strokes) {\n    this.fills = fills;\n    this.strokes = strokes;\n    this.callout.colors = strokes;\n  };\n  PieSeries.prototype.getDomain = function (direction) {\n    if (direction === ChartAxisDirection.X) {\n      return this.angleScale.domain;\n    } else {\n      return this.radiusScale.domain;\n    }\n  };\n  PieSeries.prototype.processData = function () {\n    var _this = this;\n    var _a = this,\n      angleKey = _a.angleKey,\n      radiusKey = _a.radiusKey,\n      seriesItemEnabled = _a.seriesItemEnabled,\n      angleScale = _a.angleScale,\n      groupSelectionData = _a.groupSelectionData;\n    var data = angleKey && this.data ? this.data : [];\n    var angleData = data.map(function (datum, index) {\n      return seriesItemEnabled[index] && Math.abs(+datum[angleKey]) || 0;\n    });\n    var angleDataTotal = angleData.reduce(function (a, b) {\n      return a + b;\n    }, 0);\n    // The ratios (in [0, 1] interval) used to calculate the end angle value for every pie slice.\n    // Each slice starts where the previous one ends, so we only keep the ratios for end angles.\n    var angleDataRatios = function () {\n      var sum = 0;\n      return angleData.map(function (datum) {\n        return sum += datum / angleDataTotal;\n      });\n    }();\n    var labelKey = this.label.enabled && this.labelKey;\n    var labelData = labelKey ? data.map(function (datum) {\n      return String(datum[labelKey]);\n    }) : [];\n    var useRadiusKey = !!radiusKey && !this.innerRadiusOffset;\n    var radiusData = [];\n    if (useRadiusKey) {\n      var radii = data.map(function (datum) {\n        return Math.abs(datum[radiusKey]);\n      });\n      var maxDatum_1 = Math.max.apply(Math, radii);\n      radiusData = radii.map(function (value) {\n        return value / maxDatum_1;\n      });\n    }\n    groupSelectionData.length = 0;\n    var rotation = toRadians(this.rotation);\n    var halfPi = Math.PI / 2;\n    var datumIndex = 0;\n    // Simply use reduce here to pair up adjacent ratios.\n    angleDataRatios.reduce(function (start, end) {\n      var radius = useRadiusKey ? radiusData[datumIndex] : 1;\n      var startAngle = angleScale.convert(start) + rotation;\n      var endAngle = angleScale.convert(end) + rotation;\n      var midAngle = (startAngle + endAngle) / 2;\n      var span = Math.abs(endAngle - startAngle);\n      var midCos = Math.cos(midAngle);\n      var midSin = Math.sin(midAngle);\n      var labelMinAngle = toRadians(_this.label.minAngle);\n      var labelVisible = labelKey && span > labelMinAngle;\n      var midAngle180 = normalizeAngle180(midAngle);\n      // Split the circle into quadrants like so: \n      var quadrantStart = -3 * Math.PI / 4; // same as `normalizeAngle180(toRadians(-135))`\n      var textAlign;\n      var textBaseline;\n      if (midAngle180 >= quadrantStart && midAngle180 < (quadrantStart += halfPi)) {\n        textAlign = 'center';\n        textBaseline = 'bottom';\n      } else if (midAngle180 >= quadrantStart && midAngle180 < (quadrantStart += halfPi)) {\n        textAlign = 'left';\n        textBaseline = 'middle';\n      } else if (midAngle180 >= quadrantStart && midAngle180 < (quadrantStart += halfPi)) {\n        textAlign = 'center';\n        textBaseline = 'hanging';\n      } else {\n        textAlign = 'right';\n        textBaseline = 'middle';\n      }\n      groupSelectionData.push({\n        series: _this,\n        seriesDatum: data[datumIndex],\n        index: datumIndex,\n        radius: radius,\n        startAngle: startAngle,\n        endAngle: endAngle,\n        midAngle: midAngle,\n        midCos: midCos,\n        midSin: midSin,\n        label: labelVisible ? {\n          text: labelData[datumIndex],\n          textAlign: textAlign,\n          textBaseline: textBaseline\n        } : undefined\n      });\n      datumIndex++;\n      return end;\n    }, 0);\n    return true;\n  };\n  PieSeries.prototype.update = function () {\n    var chart = this.chart;\n    var visible = this.group.visible = this.visible && this.seriesItemEnabled.indexOf(true) >= 0;\n    if (!visible || !chart || chart.dataPending || chart.layoutPending) {\n      return;\n    }\n    this.radiusScale.range = [0, this.radius];\n    this.group.translationX = this.centerX;\n    this.group.translationY = this.centerY;\n    var title = this.title;\n    if (title) {\n      title.node.translationY = -this.radius - this.outerRadiusOffset - 2;\n      title.node.visible = title.enabled;\n    }\n    this.updateGroupSelection();\n    this.updateNodes();\n  };\n  PieSeries.prototype.updateGroupSelection = function () {\n    var updateGroups = this.groupSelection.setData(this.groupSelectionData);\n    updateGroups.exit.remove();\n    var enterGroups = updateGroups.enter.append(Group);\n    enterGroups.append(Sector).each(function (node) {\n      return node.tag = PieNodeTag.Sector;\n    });\n    enterGroups.append(Line).each(function (node) {\n      node.tag = PieNodeTag.Callout;\n      node.pointerEvents = PointerEvents.None;\n    });\n    enterGroups.append(Text).each(function (node) {\n      node.tag = PieNodeTag.Label;\n      node.pointerEvents = PointerEvents.None;\n    });\n    this.groupSelection = updateGroups.merge(enterGroups);\n  };\n  PieSeries.prototype.updateNodes = function () {\n    var _this = this;\n    if (!this.chart) {\n      return;\n    }\n    var _a = this,\n      fills = _a.fills,\n      strokes = _a.strokes,\n      fillOpacity = _a.fillOpacity,\n      strokeOpacity = _a.strokeOpacity,\n      strokeWidth = _a.strokeWidth,\n      outerRadiusOffset = _a.outerRadiusOffset,\n      innerRadiusOffset = _a.innerRadiusOffset,\n      radiusScale = _a.radiusScale,\n      callout = _a.callout,\n      shadow = _a.shadow,\n      _b = _a.highlightStyle,\n      fill = _b.fill,\n      stroke = _b.stroke,\n      centerOffset = _b.centerOffset,\n      angleKey = _a.angleKey,\n      radiusKey = _a.radiusKey,\n      formatter = _a.formatter;\n    var highlightedDatum = this.chart.highlightedDatum;\n    var outerRadii = [];\n    var centerOffsets = [];\n    this.groupSelection.selectByTag(PieNodeTag.Sector).each(function (sector, datum, index) {\n      var radius = radiusScale.convert(datum.radius);\n      var outerRadius = Math.max(0, radius + outerRadiusOffset);\n      var highlighted = datum === highlightedDatum;\n      var sectorFill = highlighted && fill !== undefined ? fill : fills[index % fills.length];\n      var sectorStroke = highlighted && stroke !== undefined ? stroke : strokes[index % strokes.length];\n      var format = undefined;\n      if (formatter) {\n        format = formatter({\n          datum: datum.seriesDatum,\n          fill: sectorFill,\n          stroke: sectorStroke,\n          strokeWidth: strokeWidth,\n          highlighted: highlighted,\n          angleKey: angleKey,\n          radiusKey: radiusKey\n        });\n      }\n      sector.outerRadius = outerRadius;\n      sector.innerRadius = Math.max(0, innerRadiusOffset ? radius + innerRadiusOffset : 0);\n      sector.startAngle = datum.startAngle;\n      sector.endAngle = datum.endAngle;\n      sector.fill = format && format.fill || sectorFill;\n      sector.stroke = format && format.stroke || sectorStroke;\n      sector.strokeWidth = format && format.strokeWidth !== undefined ? format.strokeWidth : strokeWidth;\n      sector.fillOpacity = fillOpacity;\n      sector.strokeOpacity = strokeOpacity;\n      sector.lineDash = _this.lineDash;\n      sector.lineDashOffset = _this.lineDashOffset;\n      sector.centerOffset = highlighted && centerOffset !== undefined ? centerOffset : 0;\n      sector.fillShadow = shadow;\n      sector.lineJoin = 'round';\n      outerRadii.push(outerRadius);\n      centerOffsets.push(sector.centerOffset);\n    });\n    var calloutColors = callout.colors,\n      calloutLength = callout.length,\n      calloutStrokeWidth = callout.strokeWidth;\n    this.groupSelection.selectByTag(PieNodeTag.Callout).each(function (line, datum, index) {\n      if (datum.label) {\n        var outerRadius = centerOffsets[index] + outerRadii[index];\n        line.strokeWidth = calloutStrokeWidth;\n        line.stroke = calloutColors[index % calloutColors.length];\n        line.x1 = datum.midCos * outerRadius;\n        line.y1 = datum.midSin * outerRadius;\n        line.x2 = datum.midCos * (outerRadius + calloutLength);\n        line.y2 = datum.midSin * (outerRadius + calloutLength);\n      } else {\n        line.stroke = undefined;\n      }\n    });\n    {\n      var _c = this.label,\n        offset_1 = _c.offset,\n        fontStyle_1 = _c.fontStyle,\n        fontWeight_1 = _c.fontWeight,\n        fontSize_1 = _c.fontSize,\n        fontFamily_1 = _c.fontFamily,\n        color_1 = _c.color;\n      this.groupSelection.selectByTag(PieNodeTag.Label).each(function (text, datum, index) {\n        var label = datum.label;\n        if (label) {\n          var outerRadius = outerRadii[index];\n          var labelRadius = centerOffsets[index] + outerRadius + calloutLength + offset_1;\n          text.fontStyle = fontStyle_1;\n          text.fontWeight = fontWeight_1;\n          text.fontSize = fontSize_1;\n          text.fontFamily = fontFamily_1;\n          text.text = label.text;\n          text.x = datum.midCos * labelRadius;\n          text.y = datum.midSin * labelRadius;\n          text.fill = color_1;\n          text.textAlign = label.textAlign;\n          text.textBaseline = label.textBaseline;\n        } else {\n          text.fill = undefined;\n        }\n      });\n    }\n  };\n  PieSeries.prototype.fireNodeClickEvent = function (datum) {\n    this.fireEvent({\n      type: 'nodeClick',\n      series: this,\n      datum: datum.seriesDatum,\n      angleKey: this.angleKey,\n      radiusKey: this.radiusKey\n    });\n  };\n  PieSeries.prototype.getTooltipHtml = function (nodeDatum) {\n    var angleKey = this.angleKey;\n    if (!angleKey) {\n      return '';\n    }\n    var _a = this,\n      fills = _a.fills,\n      tooltipRenderer = _a.tooltipRenderer,\n      angleName = _a.angleName,\n      radiusKey = _a.radiusKey,\n      radiusName = _a.radiusName,\n      labelKey = _a.labelKey,\n      labelName = _a.labelName;\n    var color = fills[nodeDatum.index % fills.length];\n    var datum = nodeDatum.seriesDatum;\n    var label = labelKey ? datum[labelKey] + \": \" : '';\n    var angleValue = datum[angleKey];\n    var formattedAngleValue = typeof angleValue === 'number' ? toFixed(angleValue) : angleValue.toString();\n    var title = this.title ? this.title.text : undefined;\n    var content = label + formattedAngleValue;\n    var defaults = {\n      title: title,\n      titleBackgroundColor: color,\n      content: content\n    };\n    if (tooltipRenderer) {\n      return toTooltipHtml(tooltipRenderer({\n        datum: datum,\n        angleKey: angleKey,\n        angleValue: angleValue,\n        angleName: angleName,\n        radiusKey: radiusKey,\n        radiusValue: radiusKey ? datum[radiusKey] : undefined,\n        radiusName: radiusName,\n        labelKey: labelKey,\n        labelName: labelName,\n        title: title,\n        color: color\n      }), defaults);\n    }\n    return toTooltipHtml(defaults);\n  };\n  PieSeries.prototype.listSeriesItems = function (legendData) {\n    var _this = this;\n    var _a = this,\n      labelKey = _a.labelKey,\n      data = _a.data;\n    if (data && data.length && labelKey) {\n      var _b = this,\n        fills_1 = _b.fills,\n        strokes_1 = _b.strokes,\n        id_1 = _b.id;\n      data.forEach(function (datum, index) {\n        legendData.push({\n          id: id_1,\n          itemId: index,\n          enabled: _this.seriesItemEnabled[index],\n          label: {\n            text: String(datum[labelKey])\n          },\n          marker: {\n            fill: fills_1[index % fills_1.length],\n            stroke: strokes_1[index % strokes_1.length],\n            fillOpacity: _this.fillOpacity,\n            strokeOpacity: _this.strokeOpacity\n          }\n        });\n      });\n    }\n  };\n  PieSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n    this.seriesItemEnabled[itemId] = enabled;\n    this.scheduleData();\n  };\n  PieSeries.className = 'PieSeries';\n  PieSeries.type = 'pie';\n  __decorate$R([reactive('dataChange')], PieSeries.prototype, \"angleKey\", void 0);\n  __decorate$R([reactive('update')], PieSeries.prototype, \"angleName\", void 0);\n  __decorate$R([reactive('dataChange')], PieSeries.prototype, \"radiusKey\", void 0);\n  __decorate$R([reactive('update')], PieSeries.prototype, \"radiusName\", void 0);\n  __decorate$R([reactive('dataChange')], PieSeries.prototype, \"labelKey\", void 0);\n  __decorate$R([reactive('update')], PieSeries.prototype, \"labelName\", void 0);\n  __decorate$R([reactive('layoutChange')], PieSeries.prototype, \"fillOpacity\", void 0);\n  __decorate$R([reactive('layoutChange')], PieSeries.prototype, \"strokeOpacity\", void 0);\n  __decorate$R([reactive('update')], PieSeries.prototype, \"lineDash\", void 0);\n  __decorate$R([reactive('update')], PieSeries.prototype, \"lineDashOffset\", void 0);\n  __decorate$R([reactive('update')], PieSeries.prototype, \"formatter\", void 0);\n  __decorate$R([reactive('dataChange')], PieSeries.prototype, \"rotation\", void 0);\n  __decorate$R([reactive('layoutChange')], PieSeries.prototype, \"outerRadiusOffset\", void 0);\n  __decorate$R([reactive('dataChange')], PieSeries.prototype, \"innerRadiusOffset\", void 0);\n  __decorate$R([reactive('layoutChange')], PieSeries.prototype, \"strokeWidth\", void 0);\n  __decorate$R([reactive('layoutChange')], PieSeries.prototype, \"shadow\", void 0);\n  return PieSeries;\n}(PolarSeries);\nvar __extends$1p = undefined && undefined.__extends || function () {\n  var _extendStatics90 = function extendStatics(d, b) {\n    _extendStatics90 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics90(d, b);\n  };\n  return function (d, b) {\n    _extendStatics90(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$S = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar DropShadow = /** @class */function (_super) {\n  __extends$1p(DropShadow, _super);\n  function DropShadow() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.enabled = true;\n    _this.color = 'rgba(0, 0, 0, 0.5)';\n    _this.xOffset = 0;\n    _this.yOffset = 0;\n    _this.blur = 5;\n    return _this;\n  }\n  __decorate$S([reactive('change')], DropShadow.prototype, \"enabled\", void 0);\n  __decorate$S([reactive('change')], DropShadow.prototype, \"color\", void 0);\n  __decorate$S([reactive('change')], DropShadow.prototype, \"xOffset\", void 0);\n  __decorate$S([reactive('change')], DropShadow.prototype, \"yOffset\", void 0);\n  __decorate$S([reactive('change')], DropShadow.prototype, \"blur\", void 0);\n  return DropShadow;\n}(Observable);\nfunction floor$9(date) {\n  date.setUTCSeconds(0, 0);\n}\nfunction offset$9(date, minutes) {\n  date.setTime(date.getTime() + minutes * durationMinute);\n}\nfunction count$9(start, end) {\n  return (end.getTime() - start.getTime()) / durationMinute;\n}\nfunction field$7(date) {\n  return date.getUTCMinutes();\n}\nvar utcMinute = new CountableTimeInterval(floor$9, offset$9, count$9, field$7);\nfunction floor$a(date) {\n  date.setUTCMinutes(0, 0, 0);\n}\nfunction offset$a(date, hours) {\n  date.setTime(date.getTime() + hours * durationHour);\n}\nfunction count$a(start, end) {\n  return (end.getTime() - start.getTime()) / durationHour;\n}\nfunction field$8(date) {\n  return date.getUTCHours();\n}\nvar utcHour = new CountableTimeInterval(floor$a, offset$a, count$a, field$8);\nfunction floor$b(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}\nfunction offset$b(date, months) {\n  date.setUTCMonth(date.getUTCMonth() + months);\n}\nfunction count$b(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}\nfunction field$9(date) {\n  return date.getUTCMonth();\n}\nvar utcMonth = new CountableTimeInterval(floor$b, offset$b, count$b, field$9);\nvar __assign$3 = undefined && undefined.__assign || function () {\n  __assign$3 = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$3.apply(this, arguments);\n};\nvar palette = {\n  fills: ['#f3622d', '#fba71b', '#57b757', '#41a9c9', '#4258c9', '#9a42c8', '#c84164', '#888888'],\n  strokes: ['#aa4520', '#b07513', '#3d803d', '#2d768d', '#2e3e8d', '#6c2e8c', '#8c2d46', '#5f5f5f']\n};\nvar ChartTheme = /** @class */function () {\n  function ChartTheme(options) {\n    var defaults = this.createChartConfigPerSeries(this.getDefaults());\n    if (isObject(options)) {\n      var mergeOptions_1 = {\n        arrayMerge: arrayMerge\n      };\n      options = deepMerge({}, options, mergeOptions_1);\n      var overrides_1 = options.overrides;\n      if (overrides_1) {\n        if (isObject(overrides_1.common)) {\n          ChartTheme.seriesTypes.forEach(function (seriesType) {\n            defaults[seriesType] = deepMerge(defaults[seriesType], overrides_1.common, mergeOptions_1);\n          });\n        }\n        if (overrides_1.cartesian) {\n          defaults.cartesian = deepMerge(defaults.cartesian, overrides_1.cartesian, mergeOptions_1);\n          ChartTheme.cartesianSeriesTypes.forEach(function (seriesType) {\n            defaults[seriesType] = deepMerge(defaults[seriesType], overrides_1.cartesian, mergeOptions_1);\n          });\n        }\n        if (overrides_1.polar) {\n          defaults.polar = deepMerge(defaults.polar, overrides_1.polar, mergeOptions_1);\n          ChartTheme.polarSeriesTypes.forEach(function (seriesType) {\n            defaults[seriesType] = deepMerge(defaults[seriesType], overrides_1.polar, mergeOptions_1);\n          });\n        }\n        ChartTheme.seriesTypes.forEach(function (seriesType) {\n          var _a;\n          var chartConfig = overrides_1[seriesType];\n          if (chartConfig) {\n            if (chartConfig.series) {\n              chartConfig.series = (_a = {}, _a[seriesType] = chartConfig.series, _a);\n            }\n            defaults[seriesType] = deepMerge(defaults[seriesType], chartConfig, mergeOptions_1);\n          }\n        });\n      }\n    }\n    this.palette = options && options.palette ? options.palette : this.getPalette();\n    this.config = Object.freeze(defaults);\n  }\n  ChartTheme.prototype.getPalette = function () {\n    return palette;\n  };\n  ChartTheme.getAxisDefaults = function () {\n    return {\n      title: {\n        enabled: false,\n        padding: {\n          top: 10,\n          right: 10,\n          bottom: 10,\n          left: 10\n        },\n        text: 'Axis Title',\n        fontStyle: undefined,\n        fontWeight: 'bold',\n        fontSize: 12,\n        fontFamily: this.fontFamily,\n        color: 'rgb(70, 70, 70)'\n      },\n      label: {\n        fontStyle: undefined,\n        fontWeight: undefined,\n        fontSize: 12,\n        fontFamily: this.fontFamily,\n        padding: 5,\n        rotation: 0,\n        color: 'rgb(87, 87, 87)',\n        formatter: undefined\n      },\n      line: {\n        width: 1,\n        color: 'rgb(195, 195, 195)'\n      },\n      tick: {\n        width: 1,\n        size: 6,\n        color: 'rgb(195, 195, 195)',\n        count: 10\n      },\n      gridStyle: [{\n        stroke: 'rgb(219, 219, 219)',\n        lineDash: [4, 2]\n      }]\n    };\n  };\n  ChartTheme.getSeriesDefaults = function () {\n    return {\n      tooltipEnabled: true,\n      visible: true,\n      showInLegend: true\n    };\n  };\n  ChartTheme.getBarSeriesDefaults = function () {\n    return __assign$3(__assign$3({}, this.getSeriesDefaults()), {\n      flipXY: false,\n      fillOpacity: 1,\n      strokeOpacity: 1,\n      xKey: '',\n      xName: '',\n      yKeys: [],\n      yNames: [],\n      grouped: false,\n      normalizedTo: undefined,\n      strokeWidth: 1,\n      lineDash: undefined,\n      lineDashOffset: 0,\n      tooltipRenderer: undefined,\n      highlightStyle: {\n        fill: 'yellow'\n      },\n      label: {\n        enabled: false,\n        fontStyle: undefined,\n        fontWeight: undefined,\n        fontSize: 12,\n        fontFamily: this.fontFamily,\n        color: 'rgb(70, 70, 70)',\n        formatter: undefined\n      },\n      shadow: {\n        enabled: false,\n        color: 'rgba(0, 0, 0, 0.5)',\n        xOffset: 3,\n        yOffset: 3,\n        blur: 5\n      }\n    });\n  };\n  ChartTheme.getCartesianSeriesMarkerDefaults = function () {\n    return {\n      enabled: true,\n      shape: 'circle',\n      size: 6,\n      maxSize: 30,\n      strokeWidth: 1,\n      formatter: undefined\n    };\n  };\n  ChartTheme.getChartDefaults = function () {\n    return {\n      width: 600,\n      height: 300,\n      autoSize: true,\n      background: {\n        visible: true,\n        fill: 'white'\n      },\n      padding: {\n        top: 20,\n        right: 20,\n        bottom: 20,\n        left: 20\n      },\n      title: {\n        enabled: false,\n        padding: {\n          top: 10,\n          right: 10,\n          bottom: 10,\n          left: 10\n        },\n        text: 'Title',\n        fontStyle: undefined,\n        fontWeight: 'bold',\n        fontSize: 16,\n        fontFamily: this.fontFamily,\n        color: 'rgb(70, 70, 70)'\n      },\n      subtitle: {\n        enabled: false,\n        padding: {\n          top: 10,\n          right: 10,\n          bottom: 10,\n          left: 10\n        },\n        text: 'Subtitle',\n        fontStyle: undefined,\n        fontWeight: undefined,\n        fontSize: 12,\n        fontFamily: this.fontFamily,\n        color: 'rgb(140, 140, 140)'\n      },\n      legend: {\n        enabled: true,\n        position: 'right',\n        spacing: 20,\n        item: {\n          paddingX: 16,\n          paddingY: 8,\n          marker: {\n            shape: undefined,\n            size: 15,\n            strokeWidth: 1,\n            padding: 8\n          },\n          label: {\n            color: 'black',\n            fontStyle: undefined,\n            fontWeight: undefined,\n            fontSize: 12,\n            fontFamily: this.fontFamily\n          }\n        }\n      }\n    };\n  };\n  ChartTheme.prototype.createChartConfigPerSeries = function (config) {\n    var typeToAliases = {\n      cartesian: ChartTheme.cartesianSeriesTypes,\n      polar: ChartTheme.polarSeriesTypes\n    };\n    var _loop_1 = function _loop_1(type) {\n      typeToAliases[type].forEach(function (alias) {\n        if (!config[alias]) {\n          config[alias] = deepMerge({}, config[type], {\n            arrayMerge: arrayMerge\n          });\n        }\n      });\n    };\n    for (var type in typeToAliases) {\n      _loop_1(type);\n    }\n    return config;\n  };\n  ChartTheme.prototype.getConfig = function (path) {\n    return getValue(this.config, path);\n  };\n  /**\n   * Meant to be overridden in subclasses. For example:\n   * ```\n   *     getDefaults() {\n   *         const subclassDefaults = { ... };\n   *         return this.mergeWithParentDefaults(subclassDefaults);\n   *     }\n   * ```\n   */\n  ChartTheme.prototype.getDefaults = function () {\n    return deepMerge({}, ChartTheme.defaults, {\n      arrayMerge: arrayMerge\n    });\n  };\n  ChartTheme.prototype.mergeWithParentDefaults = function (defaults) {\n    var mergeOptions = {\n      arrayMerge: arrayMerge\n    };\n    var proto = Object.getPrototypeOf(Object.getPrototypeOf(this));\n    if (proto === Object.prototype) {\n      var config = deepMerge({}, ChartTheme.defaults, mergeOptions);\n      config = deepMerge(config, defaults, mergeOptions);\n      return config;\n    }\n    var parentDefaults = proto.getDefaults();\n    return deepMerge(parentDefaults, defaults, mergeOptions);\n  };\n  ChartTheme.prototype.setSeriesColors = function (series, seriesOptions, firstColorIndex) {\n    var palette = this.palette;\n    var colorCount = this.getSeriesColorCount(seriesOptions);\n    if (colorCount === Infinity) {\n      series.setColors(palette.fills, palette.strokes);\n    } else {\n      var fills = copy(palette.fills, firstColorIndex, colorCount);\n      var strokes = copy(palette.strokes, firstColorIndex, colorCount);\n      series.setColors(fills, strokes);\n      firstColorIndex += colorCount;\n    }\n    return firstColorIndex;\n  };\n  /**\n   * This would typically correspond to the number of dependent variables the series plots.\n   * If the color count is not fixed, for example it's data-dependent with one color per data point,\n   * return Infinity to fetch all unique colors and manage them in the series.\n   */\n  ChartTheme.prototype.getSeriesColorCount = function (seriesOptions) {\n    var type = seriesOptions.type;\n    switch (type) {\n      case 'bar':\n      case 'column':\n      case 'area':\n        return seriesOptions.yKeys ? seriesOptions.yKeys.length : 0;\n      case 'pie':\n        return Infinity;\n      default:\n        return 1;\n    }\n  };\n  ChartTheme.fontFamily = 'Verdana, sans-serif';\n  ChartTheme.cartesianDefaults = __assign$3(__assign$3({}, ChartTheme.getChartDefaults()), {\n    axes: {\n      number: __assign$3({}, ChartTheme.getAxisDefaults()),\n      category: __assign$3({}, ChartTheme.getAxisDefaults()),\n      groupedCategory: __assign$3({}, ChartTheme.getAxisDefaults()),\n      time: __assign$3({}, ChartTheme.getAxisDefaults())\n    },\n    series: {\n      column: __assign$3(__assign$3({}, ChartTheme.getBarSeriesDefaults()), {\n        flipXY: false\n      }),\n      bar: __assign$3(__assign$3({}, ChartTheme.getBarSeriesDefaults()), {\n        flipXY: true\n      }),\n      line: __assign$3(__assign$3({}, ChartTheme.getSeriesDefaults()), {\n        title: undefined,\n        xKey: '',\n        xName: '',\n        yKey: '',\n        yName: '',\n        strokeWidth: 2,\n        strokeOpacity: 1,\n        lineDash: undefined,\n        lineDashOffset: 0,\n        tooltipRenderer: undefined,\n        highlightStyle: {\n          fill: 'yellow'\n        },\n        marker: __assign$3({}, ChartTheme.getCartesianSeriesMarkerDefaults())\n      }),\n      scatter: __assign$3(__assign$3({}, ChartTheme.getSeriesDefaults()), {\n        title: undefined,\n        xKey: '',\n        yKey: '',\n        sizeKey: undefined,\n        labelKey: undefined,\n        xName: '',\n        yName: '',\n        sizeName: 'Size',\n        labelName: 'Label',\n        strokeWidth: 2,\n        fillOpacity: 1,\n        strokeOpacity: 1,\n        tooltipRenderer: undefined,\n        highlightStyle: {\n          fill: 'yellow'\n        },\n        marker: __assign$3({}, ChartTheme.getCartesianSeriesMarkerDefaults())\n      }),\n      area: __assign$3(__assign$3({}, ChartTheme.getSeriesDefaults()), {\n        title: undefined,\n        xKey: '',\n        xName: '',\n        yKeys: [],\n        yNames: [],\n        normalizedTo: undefined,\n        fillOpacity: 0.8,\n        strokeOpacity: 1,\n        strokeWidth: 2,\n        lineDash: undefined,\n        lineDashOffset: 0,\n        shadow: {\n          enabled: false,\n          color: 'rgba(0, 0, 0, 0.5)',\n          xOffset: 3,\n          yOffset: 3,\n          blur: 5\n        },\n        tooltipRenderer: undefined,\n        highlightStyle: {\n          fill: 'yellow'\n        },\n        marker: __assign$3(__assign$3({}, ChartTheme.getCartesianSeriesMarkerDefaults()), {\n          enabled: false\n        })\n      }),\n      histogram: __assign$3(__assign$3({}, ChartTheme.getSeriesDefaults()), {\n        title: undefined,\n        xKey: '',\n        yKey: '',\n        xName: '',\n        yName: '',\n        strokeWidth: 1,\n        fillOpacity: 1,\n        strokeOpacity: 1,\n        lineDash: undefined,\n        lineDashOffset: 0,\n        areaPlot: false,\n        aggregation: 'sum',\n        tooltipRenderer: undefined,\n        highlightStyle: {\n          fill: 'yellow'\n        },\n        label: {\n          enabled: false,\n          fontStyle: undefined,\n          fontWeight: undefined,\n          fontSize: 12,\n          fontFamily: ChartTheme.fontFamily,\n          color: 'rgb(70, 70, 70)',\n          formatter: undefined\n        }\n      })\n    },\n    navigator: {\n      enabled: false,\n      height: 30,\n      min: 0,\n      max: 1,\n      mask: {\n        fill: '#999999',\n        stroke: '#999999',\n        strokeWidth: 1,\n        fillOpacity: 0.2\n      },\n      minHandle: {\n        fill: '#f2f2f2',\n        stroke: '#999999',\n        strokeWidth: 1,\n        width: 8,\n        height: 16,\n        gripLineGap: 2,\n        gripLineLength: 8\n      },\n      maxHandle: {\n        fill: '#f2f2f2',\n        stroke: '#999999',\n        strokeWidth: 1,\n        width: 8,\n        height: 16,\n        gripLineGap: 2,\n        gripLineLength: 8\n      }\n    }\n  });\n  ChartTheme.defaults = {\n    cartesian: ChartTheme.cartesianDefaults,\n    groupedCategory: ChartTheme.cartesianDefaults,\n    polar: __assign$3(__assign$3({}, ChartTheme.getChartDefaults()), {\n      series: {\n        pie: __assign$3(__assign$3({}, ChartTheme.getSeriesDefaults()), {\n          title: {\n            enabled: true,\n            padding: new Padding(0),\n            text: '',\n            fontStyle: undefined,\n            fontWeight: undefined,\n            fontSize: 12,\n            fontFamily: ChartTheme.fontFamily,\n            color: 'rgb(70, 70, 70)'\n          },\n          angleKey: '',\n          angleName: '',\n          radiusKey: undefined,\n          radiusName: undefined,\n          labelKey: undefined,\n          labelName: undefined,\n          label: {\n            enabled: true,\n            fontStyle: undefined,\n            fontWeight: undefined,\n            fontSize: 12,\n            fontFamily: ChartTheme.fontFamily,\n            color: 'rgb(70, 70, 70)',\n            offset: 3,\n            minAngle: 20\n          },\n          callout: {\n            length: 10,\n            strokeWidth: 2\n          },\n          fillOpacity: 1,\n          strokeOpacity: 1,\n          strokeWidth: 1,\n          lineDash: undefined,\n          lineDashOffset: 0,\n          rotation: 0,\n          outerRadiusOffset: 0,\n          innerRadiusOffset: 0,\n          highlightStyle: {\n            fill: 'yellow'\n          },\n          shadow: {\n            enabled: false,\n            color: 'rgba(0, 0, 0, 0.5)',\n            xOffset: 3,\n            yOffset: 3,\n            blur: 5\n          }\n        })\n      }\n    })\n  };\n  ChartTheme.cartesianSeriesTypes = ['line', 'area', 'bar', 'column', 'scatter', 'histogram'];\n  ChartTheme.polarSeriesTypes = ['pie'];\n  ChartTheme.seriesTypes = ChartTheme.cartesianSeriesTypes.concat(ChartTheme.polarSeriesTypes);\n  return ChartTheme;\n}();\nfunction arrayMerge(target, source, options) {\n  return source;\n}\nvar __extends$1q = undefined && undefined.__extends || function () {\n  var _extendStatics91 = function extendStatics(d, b) {\n    _extendStatics91 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics91(d, b);\n  };\n  return function (d, b) {\n    _extendStatics91(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign$4 = undefined && undefined.__assign || function () {\n  __assign$4 = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$4.apply(this, arguments);\n};\nvar DarkTheme = /** @class */function (_super) {\n  __extends$1q(DarkTheme, _super);\n  function DarkTheme(options) {\n    return _super.call(this, options) || this;\n  }\n  DarkTheme.prototype.getDefaults = function () {\n    var fontColor = 'rgb(200, 200, 200)';\n    var mutedFontColor = 'rgb(150, 150, 150)';\n    var axisDefaults = {\n      title: {\n        color: fontColor\n      },\n      label: {\n        color: fontColor\n      },\n      gridStyle: [{\n        stroke: 'rgb(88, 88, 88)',\n        lineDash: [4, 2]\n      }]\n    };\n    var seriesLabelDefaults = {\n      label: {\n        color: fontColor\n      }\n    };\n    var chartDefaults = {\n      background: {\n        fill: 'rgb(52, 52, 52)'\n      },\n      title: {\n        color: fontColor\n      },\n      subtitle: {\n        color: mutedFontColor\n      },\n      axes: {\n        number: __assign$4({}, axisDefaults),\n        category: __assign$4({}, axisDefaults),\n        time: __assign$4({}, axisDefaults)\n      },\n      legend: {\n        item: {\n          label: {\n            color: fontColor\n          }\n        }\n      }\n    };\n    return this.mergeWithParentDefaults({\n      cartesian: __assign$4(__assign$4({}, chartDefaults), {\n        series: {\n          bar: __assign$4({}, seriesLabelDefaults),\n          column: __assign$4({}, seriesLabelDefaults),\n          histogram: __assign$4({}, seriesLabelDefaults)\n        }\n      }),\n      polar: __assign$4(__assign$4({}, chartDefaults), {\n        series: {\n          pie: __assign$4(__assign$4({}, seriesLabelDefaults), {\n            title: {\n              color: fontColor\n            }\n          })\n        }\n      })\n    });\n  };\n  return DarkTheme;\n}(ChartTheme);\nvar __extends$1r = undefined && undefined.__extends || function () {\n  var _extendStatics92 = function extendStatics(d, b) {\n    _extendStatics92 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics92(d, b);\n  };\n  return function (d, b) {\n    _extendStatics92(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar palette$1 = {\n  fills: ['#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4caf50', '#8bc34a', '#cddc39', '#ffeb3b', '#ffc107', '#ff9800', '#ff5722'],\n  strokes: ['#ab2f26', '#a31545', '#6d1b7b', '#482980', '#2c397f', '#1769aa', '#0276ab', '#008494', '#00695f', '#357a38', '#618834', '#909a28', '#b3a429', '#b38705', '#b36a00', '#b33d18']\n};\nvar MaterialLight = /** @class */function (_super) {\n  __extends$1r(MaterialLight, _super);\n  function MaterialLight() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  MaterialLight.prototype.getPalette = function () {\n    return palette$1;\n  };\n  return MaterialLight;\n}(ChartTheme);\nvar __extends$1s = undefined && undefined.__extends || function () {\n  var _extendStatics93 = function extendStatics(d, b) {\n    _extendStatics93 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics93(d, b);\n  };\n  return function (d, b) {\n    _extendStatics93(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar palette$2 = {\n  fills: ['#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4caf50', '#8bc34a', '#cddc39', '#ffeb3b', '#ffc107', '#ff9800', '#ff5722'],\n  strokes: ['#ab2f26', '#a31545', '#6d1b7b', '#482980', '#2c397f', '#1769aa', '#0276ab', '#008494', '#00695f', '#357a38', '#618834', '#909a28', '#b3a429', '#b38705', '#b36a00', '#b33d18']\n};\nvar MaterialDark = /** @class */function (_super) {\n  __extends$1s(MaterialDark, _super);\n  function MaterialDark() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  MaterialDark.prototype.getPalette = function () {\n    return palette$2;\n  };\n  return MaterialDark;\n}(DarkTheme);\nvar __extends$1t = undefined && undefined.__extends || function () {\n  var _extendStatics94 = function extendStatics(d, b) {\n    _extendStatics94 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics94(d, b);\n  };\n  return function (d, b) {\n    _extendStatics94(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar palette$3 = {\n  fills: ['#c16068', '#a2bf8a', '#ebcc87', '#80a0c3', '#b58dae', '#85c0d1'],\n  strokes: ['#874349', '#718661', '#a48f5f', '#5a7088', '#7f637a', '#5d8692']\n};\nvar PastelLight = /** @class */function (_super) {\n  __extends$1t(PastelLight, _super);\n  function PastelLight() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  PastelLight.prototype.getPalette = function () {\n    return palette$3;\n  };\n  return PastelLight;\n}(ChartTheme);\nvar __extends$1u = undefined && undefined.__extends || function () {\n  var _extendStatics95 = function extendStatics(d, b) {\n    _extendStatics95 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics95(d, b);\n  };\n  return function (d, b) {\n    _extendStatics95(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar palette$4 = {\n  fills: ['#c16068', '#a2bf8a', '#ebcc87', '#80a0c3', '#b58dae', '#85c0d1'],\n  strokes: ['#874349', '#718661', '#a48f5f', '#5a7088', '#7f637a', '#5d8692']\n};\nvar PastelDark = /** @class */function (_super) {\n  __extends$1u(PastelDark, _super);\n  function PastelDark() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  PastelDark.prototype.getPalette = function () {\n    return palette$4;\n  };\n  return PastelDark;\n}(DarkTheme);\nvar __extends$1v = undefined && undefined.__extends || function () {\n  var _extendStatics96 = function extendStatics(d, b) {\n    _extendStatics96 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics96(d, b);\n  };\n  return function (d, b) {\n    _extendStatics96(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar palette$5 = {\n  fills: ['#febe76', '#ff7979', '#badc58', '#f9ca23', '#f0932b', '#eb4c4b', '#6ab04c', '#7ed6df', '#e056fd', '#686de0'],\n  strokes: ['#b28553', '#b35555', '#829a3e', '#ae8d19', '#a8671e', '#a43535', '#4a7b35', '#58969c', '#9d3cb1', '#494c9d']\n};\nvar SolarLight = /** @class */function (_super) {\n  __extends$1v(SolarLight, _super);\n  function SolarLight() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  SolarLight.prototype.getPalette = function () {\n    return palette$5;\n  };\n  return SolarLight;\n}(ChartTheme);\nvar __extends$1w = undefined && undefined.__extends || function () {\n  var _extendStatics97 = function extendStatics(d, b) {\n    _extendStatics97 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics97(d, b);\n  };\n  return function (d, b) {\n    _extendStatics97(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar palette$6 = {\n  fills: ['#febe76', '#ff7979', '#badc58', '#f9ca23', '#f0932b', '#eb4c4b', '#6ab04c', '#7ed6df', '#e056fd', '#686de0'],\n  strokes: ['#b28553', '#b35555', '#829a3e', '#ae8d19', '#a8671e', '#a43535', '#4a7b35', '#58969c', '#9d3cb1', '#494c9d']\n};\nvar SolarDark = /** @class */function (_super) {\n  __extends$1w(SolarDark, _super);\n  function SolarDark() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  SolarDark.prototype.getPalette = function () {\n    return palette$6;\n  };\n  return SolarDark;\n}(DarkTheme);\nvar __extends$1x = undefined && undefined.__extends || function () {\n  var _extendStatics98 = function extendStatics(d, b) {\n    _extendStatics98 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics98(d, b);\n  };\n  return function (d, b) {\n    _extendStatics98(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar palette$7 = {\n  fills: ['#5BC0EB', '#FDE74C', '#9BC53D', '#E55934', '#FA7921', '#fa3081'],\n  strokes: ['#4086a4', '#b1a235', '#6c8a2b', '#a03e24', '#af5517', '#af225a']\n};\nvar VividLight = /** @class */function (_super) {\n  __extends$1x(VividLight, _super);\n  function VividLight() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  VividLight.prototype.getPalette = function () {\n    return palette$7;\n  };\n  return VividLight;\n}(ChartTheme);\nvar __extends$1y = undefined && undefined.__extends || function () {\n  var _extendStatics99 = function extendStatics(d, b) {\n    _extendStatics99 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics99(d, b);\n  };\n  return function (d, b) {\n    _extendStatics99(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar palette$8 = {\n  fills: ['#5BC0EB', '#FDE74C', '#9BC53D', '#E55934', '#FA7921', '#fa3081'],\n  strokes: ['#4086a4', '#b1a235', '#6c8a2b', '#a03e24', '#af5517', '#af225a']\n};\nvar VividDark = /** @class */function (_super) {\n  __extends$1y(VividDark, _super);\n  function VividDark() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  VividDark.prototype.getPalette = function () {\n    return palette$8;\n  };\n  return VividDark;\n}(DarkTheme);\nvar __assign$5 = undefined && undefined.__assign || function () {\n  __assign$5 = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$5.apply(this, arguments);\n};\nvar _a, _b, _c, _d;\n/*\n    This file defines the specs for creating different kinds of charts, but\n    contains no code that uses the specs to actually create charts\n*/\nvar chartPadding = 20;\nvar commonChartMappings = {\n  background: {\n    meta: {\n      defaults: {\n        visible: true,\n        fill: 'white'\n      }\n    }\n  },\n  padding: {\n    meta: {\n      constructor: Padding,\n      defaults: {\n        top: chartPadding,\n        right: chartPadding,\n        bottom: chartPadding,\n        left: chartPadding\n      }\n    }\n  },\n  title: {\n    meta: {\n      constructor: Caption,\n      defaults: {\n        enabled: true,\n        padding: {\n          meta: {\n            constructor: Padding,\n            defaults: {\n              top: 10,\n              right: 10,\n              bottom: 10,\n              left: 10\n            }\n          }\n        },\n        text: 'Title',\n        fontStyle: undefined,\n        fontWeight: 'bold',\n        fontSize: 14,\n        fontFamily: 'Verdana, sans-serif',\n        color: 'rgb(70, 70, 70)'\n      }\n    }\n  },\n  subtitle: {\n    meta: {\n      constructor: Caption,\n      defaults: {\n        enabled: true,\n        padding: {\n          meta: {\n            constructor: Padding,\n            defaults: {\n              top: 10,\n              right: 10,\n              bottom: 10,\n              left: 10\n            }\n          }\n        },\n        text: 'Subtitle',\n        fontStyle: undefined,\n        fontWeight: undefined,\n        fontSize: 12,\n        fontFamily: 'Verdana, sans-serif',\n        color: 'rgb(140, 140, 140)'\n      }\n    }\n  },\n  legend: {\n    meta: {\n      constructor: Legend,\n      defaults: {\n        enabled: true,\n        position: LegendPosition.Right,\n        spacing: 20\n      }\n    },\n    item: {\n      meta: {\n        constructor: LegendItem,\n        defaults: {\n          paddingX: 16,\n          paddingY: 8\n        }\n      },\n      marker: {\n        meta: {\n          constructor: LegendMarker,\n          defaults: {\n            shape: undefined,\n            size: 15,\n            strokeWidth: 1,\n            padding: 8\n          }\n        }\n      },\n      label: {\n        meta: {\n          constructor: LegendLabel,\n          defaults: {\n            color: 'black',\n            fontStyle: undefined,\n            fontWeight: undefined,\n            fontSize: 12,\n            fontFamily: 'Verdana, sans-serif'\n          }\n        }\n      }\n    }\n  }\n};\nvar chartDefaults = {\n  container: undefined,\n  autoSize: true,\n  width: 600,\n  height: 300,\n  data: [],\n  title: undefined,\n  subtitle: undefined,\n  padding: {},\n  background: {},\n  legend: {\n    item: {\n      marker: {},\n      label: {}\n    }\n  },\n  navigator: {\n    mask: {},\n    minHandle: {},\n    maxHandle: {}\n  },\n  listeners: undefined\n};\nvar chartMeta = {\n  // Charts components' constructors normally don't take any parameters (which makes things consistent -- everything\n  // is configured the same way, via the properties, and makes the factory pattern work well) but the charts\n  // themselves are the exceptions.\n  // If a chart config has the (optional) `document` property, it will be passed to the constructor.\n  // There is no actual `document` property on the chart, it can only be supplied during instantiation.\n  constructorParams: ['document'],\n  setAsIs: ['container', 'data', 'tooltipOffset']\n};\nvar axisDefaults = {\n  defaults: {\n    visibleRange: [0, 1],\n    label: {},\n    tick: {},\n    title: {},\n    line: {},\n    gridStyle: [{\n      stroke: 'rgb(219, 219, 219)',\n      lineDash: [4, 2]\n    }]\n  }\n};\nvar seriesDefaults = {\n  visible: true,\n  showInLegend: true,\n  listeners: undefined\n};\nvar columnSeriesDefaults = {\n  fillOpacity: 1,\n  strokeOpacity: 1,\n  xKey: '',\n  xName: '',\n  yKeys: [],\n  yNames: [],\n  grouped: false,\n  normalizedTo: undefined,\n  strokeWidth: 1,\n  lineDash: undefined,\n  lineDashOffset: 0,\n  shadow: undefined,\n  highlightStyle: {\n    fill: 'yellow'\n  }\n};\nvar shadowMapping = {\n  shadow: {\n    meta: {\n      constructor: DropShadow,\n      defaults: {\n        enabled: true,\n        color: 'rgba(0, 0, 0, 0.5)',\n        xOffset: 0,\n        yOffset: 0,\n        blur: 5\n      }\n    }\n  }\n};\nvar labelDefaults = {\n  enabled: true,\n  fontStyle: undefined,\n  fontWeight: undefined,\n  fontSize: 12,\n  fontFamily: 'Verdana, sans-serif',\n  color: 'rgb(70, 70, 70)'\n};\nvar barLabelMapping = {\n  label: {\n    meta: {\n      defaults: __assign$5(__assign$5({}, labelDefaults), {\n        formatter: undefined\n      })\n    }\n  }\n};\nvar axisMappings = {\n  line: {\n    meta: {\n      defaults: {\n        width: 1,\n        color: 'rgb(195, 195, 195)'\n      }\n    }\n  },\n  title: {\n    meta: {\n      constructor: Caption,\n      defaults: {\n        enabled: true,\n        padding: {\n          meta: {\n            constructor: Padding,\n            defaults: {\n              top: 10,\n              right: 10,\n              bottom: 10,\n              left: 10\n            }\n          }\n        },\n        text: 'Axis Title',\n        fontStyle: undefined,\n        fontWeight: 'bold',\n        fontSize: 12,\n        fontFamily: 'Verdana, sans-serif',\n        color: 'rgb(70, 70, 70)'\n      }\n    }\n  },\n  label: {\n    meta: {\n      constructor: AxisLabel,\n      defaults: {\n        fontStyle: undefined,\n        fontWeight: undefined,\n        fontSize: 12,\n        fontFamily: 'Verdana, sans-serif',\n        padding: 5,\n        rotation: 0,\n        color: 'rgb(87, 87, 87)',\n        formatter: undefined\n      }\n    }\n  },\n  tick: {\n    meta: {\n      constructor: AxisTick,\n      defaults: {\n        width: 1,\n        size: 6,\n        color: 'rgb(195, 195, 195)',\n        count: 10\n      }\n    }\n  }\n};\nvar mappings = (_a = {}, _a[CartesianChart.type] = __assign$5(__assign$5({\n  meta: __assign$5(__assign$5({\n    constructor: CartesianChart\n  }, chartMeta), {\n    defaults: __assign$5(__assign$5({}, chartDefaults), {\n      axes: [{\n        type: NumberAxis.type,\n        position: 'left'\n      }, {\n        type: CategoryAxis.type,\n        position: 'bottom'\n      }]\n    })\n  })\n}, commonChartMappings), {\n  axes: (_b = {}, _b[NumberAxis.type] = __assign$5({\n    meta: __assign$5({\n      constructor: NumberAxis,\n      setAsIs: ['gridStyle', 'visibleRange']\n    }, axisDefaults)\n  }, axisMappings), _b[CategoryAxis.type] = __assign$5({\n    meta: __assign$5({\n      constructor: CategoryAxis,\n      setAsIs: ['gridStyle', 'visibleRange']\n    }, axisDefaults)\n  }, axisMappings), _b[GroupedCategoryAxis.type] = __assign$5({\n    meta: __assign$5({\n      constructor: GroupedCategoryAxis,\n      setAsIs: ['gridStyle', 'visibleRange']\n    }, axisDefaults)\n  }, axisMappings), _b[TimeAxis.type] = __assign$5({\n    meta: __assign$5({\n      constructor: TimeAxis,\n      setAsIs: ['gridStyle', 'visibleRange']\n    }, axisDefaults)\n  }, axisMappings), _b),\n  series: (_c = {\n    column: __assign$5(__assign$5({\n      meta: {\n        constructor: BarSeries,\n        defaults: __assign$5(__assign$5({\n          flipXY: false\n        }, seriesDefaults), columnSeriesDefaults)\n      },\n      highlightStyle: {}\n    }, barLabelMapping), shadowMapping)\n  }, _c[BarSeries.type] = __assign$5(__assign$5({\n    meta: {\n      constructor: BarSeries,\n      defaults: __assign$5(__assign$5({\n        flipXY: true\n      }, seriesDefaults), columnSeriesDefaults)\n    },\n    highlightStyle: {}\n  }, barLabelMapping), shadowMapping), _c[LineSeries.type] = {\n    meta: {\n      constructor: LineSeries,\n      defaults: __assign$5(__assign$5({}, seriesDefaults), {\n        title: undefined,\n        xKey: '',\n        xName: '',\n        yKey: '',\n        yName: '',\n        strokeWidth: 2,\n        strokeOpacity: 1,\n        lineDash: undefined,\n        lineDashOffset: 0,\n        tooltipRenderer: undefined,\n        highlightStyle: {\n          fill: 'yellow'\n        }\n      })\n    },\n    highlightStyle: {},\n    marker: {\n      meta: {\n        constructor: CartesianSeriesMarker,\n        defaults: {\n          enabled: true,\n          shape: 'circle',\n          size: 6,\n          maxSize: 30,\n          strokeWidth: 1,\n          formatter: undefined\n        }\n      }\n    }\n  }, _c[ScatterSeries.type] = {\n    meta: {\n      constructor: ScatterSeries,\n      defaults: __assign$5(__assign$5({}, seriesDefaults), {\n        title: undefined,\n        xKey: '',\n        yKey: '',\n        sizeKey: undefined,\n        labelKey: undefined,\n        xName: '',\n        yName: '',\n        sizeName: 'Size',\n        labelName: 'Label',\n        strokeWidth: 2,\n        fillOpacity: 1,\n        strokeOpacity: 1,\n        tooltipRenderer: undefined,\n        highlightStyle: {\n          fill: 'yellow'\n        }\n      })\n    },\n    highlightStyle: {},\n    marker: {\n      meta: {\n        constructor: CartesianSeriesMarker,\n        defaults: {\n          enabled: true,\n          shape: 'circle',\n          size: 6,\n          maxSize: 30,\n          strokeWidth: 1,\n          formatter: undefined\n        }\n      }\n    }\n  }, _c[AreaSeries.type] = __assign$5({\n    meta: {\n      constructor: AreaSeries,\n      defaults: __assign$5(__assign$5({}, seriesDefaults), {\n        xKey: '',\n        xName: '',\n        yKeys: [],\n        yNames: [],\n        normalizedTo: undefined,\n        fillOpacity: 1,\n        strokeOpacity: 1,\n        strokeWidth: 2,\n        lineDash: undefined,\n        lineDashOffset: 0,\n        shadow: undefined,\n        tooltipRenderer: undefined,\n        highlightStyle: {\n          fill: 'yellow'\n        }\n      })\n    },\n    highlightStyle: {},\n    marker: {\n      meta: {\n        constructor: CartesianSeriesMarker,\n        defaults: {\n          enabled: true,\n          shape: 'circle',\n          size: 6,\n          maxSize: 30,\n          strokeWidth: 1,\n          formatter: undefined\n        }\n      }\n    }\n  }, shadowMapping), _c[HistogramSeries.type] = __assign$5({\n    meta: {\n      constructor: HistogramSeries,\n      defaults: __assign$5(__assign$5({}, seriesDefaults), {\n        title: undefined,\n        xKey: '',\n        yKey: '',\n        xName: '',\n        yName: '',\n        strokeWidth: 1,\n        fillOpacity: 1,\n        strokeOpacity: 1,\n        lineDash: undefined,\n        lineDashOffset: 0,\n        areaPlot: false,\n        aggregation: 'sum',\n        tooltipRenderer: undefined,\n        highlightStyle: {\n          fill: 'yellow'\n        }\n      })\n    },\n    highlightStyle: {},\n    label: {\n      meta: {\n        defaults: __assign$5(__assign$5({}, labelDefaults), {\n          formatter: undefined\n        })\n      }\n    }\n  }, shadowMapping), _c),\n  navigator: {\n    meta: {\n      constructor: Navigator,\n      defaults: {\n        enabled: false,\n        height: 30,\n        min: 0,\n        max: 1\n      }\n    },\n    mask: {\n      meta: {\n        constructor: NavigatorMask,\n        defaults: {\n          fill: '#999999',\n          stroke: '#999999',\n          strokeWidth: 1,\n          fillOpacity: 0.2\n        }\n      }\n    },\n    minHandle: {\n      meta: {\n        constructor: NavigatorHandle,\n        defaults: {\n          fill: '#f2f2f2',\n          stroke: '#999999',\n          strokeWidth: 1,\n          width: 8,\n          height: 16,\n          gripLineGap: 2,\n          gripLineLength: 8\n        }\n      }\n    },\n    maxHandle: {\n      meta: {\n        constructor: NavigatorHandle,\n        defaults: {\n          fill: '#f2f2f2',\n          stroke: '#999999',\n          strokeWidth: 1,\n          width: 8,\n          height: 16,\n          gripLineGap: 2,\n          gripLineLength: 8\n        }\n      }\n    }\n  }\n}), _a[PolarChart.type] = __assign$5(__assign$5({\n  meta: __assign$5(__assign$5({\n    constructor: PolarChart\n  }, chartMeta), {\n    defaults: __assign$5(__assign$5({}, chartDefaults), {\n      padding: {\n        meta: {\n          constructor: Padding,\n          defaults: {\n            top: 40,\n            right: 40,\n            bottom: 40,\n            left: 40\n          }\n        }\n      }\n    })\n  })\n}, commonChartMappings), {\n  series: (_d = {}, _d[PieSeries.type] = __assign$5({\n    meta: {\n      constructor: PieSeries,\n      defaults: __assign$5(__assign$5({}, seriesDefaults), {\n        title: undefined,\n        angleKey: '',\n        angleName: '',\n        radiusKey: undefined,\n        radiusName: undefined,\n        labelKey: undefined,\n        labelName: undefined,\n        callout: {},\n        fillOpacity: 1,\n        strokeOpacity: 1,\n        rotation: 0,\n        outerRadiusOffset: 0,\n        innerRadiusOffset: 0,\n        strokeWidth: 1,\n        lineDash: undefined,\n        lineDashOffset: 0,\n        shadow: undefined\n      })\n    },\n    highlightStyle: {},\n    title: {\n      meta: {\n        constructor: Caption,\n        defaults: {\n          enabled: true,\n          padding: {\n            meta: {\n              constructor: Padding,\n              defaults: {\n                top: 10,\n                right: 10,\n                bottom: 10,\n                left: 10\n              }\n            }\n          },\n          text: 'Series Title',\n          fontStyle: undefined,\n          fontWeight: 'bold',\n          fontSize: 14,\n          fontFamily: 'Verdana, sans-serif',\n          color: 'black'\n        }\n      }\n    },\n    label: {\n      meta: {\n        defaults: __assign$5(__assign$5({}, labelDefaults), {\n          offset: 3,\n          minAngle: 20\n        })\n      }\n    },\n    callout: {\n      meta: {\n        defaults: {\n          length: 10,\n          strokeWidth: 1\n        }\n      }\n    }\n  }, shadowMapping), _d)\n}), _a);\n// Amend the `mappings` object with aliases for different chart types.\n{\n  var typeToAliases = {\n    cartesian: ['line', 'area', 'bar', 'column'],\n    polar: ['pie']\n  };\n  var _loop_1 = function _loop_1(type) {\n    typeToAliases[type].forEach(function (alias) {\n      mappings[alias] = mappings[type];\n    });\n  };\n  for (var type in typeToAliases) {\n    _loop_1(type);\n  }\n}\n// Special handling for scatter and histogram charts, for which both axes should default to type `number`.\nmappings['scatter'] = mappings['histogram'] = __assign$5(__assign$5({}, mappings.cartesian), {\n  meta: __assign$5(__assign$5({}, mappings.cartesian.meta), {\n    defaults: __assign$5(__assign$5({}, chartDefaults), {\n      axes: [{\n        type: 'number',\n        position: 'bottom'\n      }, {\n        type: 'number',\n        position: 'left'\n      }]\n    })\n  })\n});\nvar groupedCategoryChartMapping = Object.create(mappings[CartesianChart.type]);\nvar groupedCategoryChartMeta = Object.create(groupedCategoryChartMapping.meta);\ngroupedCategoryChartMeta.constructor = GroupedCategoryChart;\ngroupedCategoryChartMapping.meta = groupedCategoryChartMeta;\nmappings[GroupedCategoryChart.type] = groupedCategoryChartMapping;\nvar __assign$6 = undefined && undefined.__assign || function () {\n  __assign$6 = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$6.apply(this, arguments);\n};\nvar __spreadArrays$6 = undefined && undefined.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nvar lightTheme = new ChartTheme();\nvar darkTheme = new DarkTheme();\nvar lightThemes = {\n  'undefined': lightTheme,\n  'null': lightTheme,\n  'ag-default': lightTheme,\n  'ag-material': new MaterialLight(),\n  'ag-pastel': new PastelLight(),\n  'ag-solar': new SolarLight(),\n  'ag-vivid': new VividLight()\n};\nvar darkThemes = {\n  'undefined': darkTheme,\n  'null': darkTheme,\n  'ag-default-dark': darkTheme,\n  'ag-material-dark': new MaterialDark(),\n  'ag-pastel-dark': new PastelDark(),\n  'ag-solar-dark': new SolarDark(),\n  'ag-vivid-dark': new VividDark()\n};\nvar themes = __assign$6(__assign$6({}, darkThemes), lightThemes);\nfunction getChartTheme(value) {\n  if (value instanceof ChartTheme) {\n    return value;\n  }\n  var stockTheme = themes[value];\n  if (stockTheme) {\n    return stockTheme;\n  }\n  value = value;\n  if (value.baseTheme || value.overrides || value.palette) {\n    var baseTheme = getChartTheme(value.baseTheme);\n    return new baseTheme.constructor(value);\n  }\n  return lightTheme;\n}\nvar firstColorIndex = 0;\nvar AgChart = /** @class */function () {\n  function AgChart() {}\n  AgChart.create = function (options, container, data) {\n    options = Object.create(options); // avoid mutating user provided options\n    if (container) {\n      options.container = container;\n    }\n    if (data) {\n      options.data = data;\n    }\n    // special handling when both `autoSize` and `width` / `height` are present in the options\n    var autoSize = options && options.autoSize !== false;\n    var theme = getChartTheme(options.theme);\n    firstColorIndex = 0;\n    var chart = create(options, undefined, undefined, theme);\n    if (chart) {\n      if (autoSize) {\n        // `autoSize` takes precedence over `width` / `height`\n        chart.autoSize = true;\n      }\n    }\n    return chart;\n  };\n  AgChart.update = function (chart, options, container, data) {\n    if (!(chart && options)) {\n      return;\n    }\n    options = Object.create(options);\n    if (container) {\n      options.container = container;\n    }\n    if (data) {\n      options.data = data;\n    }\n    var autoSize = options && options.autoSize !== false;\n    var theme = getChartTheme(options.theme);\n    firstColorIndex = 0;\n    update(chart, options, undefined, theme);\n    if (autoSize) {\n      chart.autoSize = true;\n    }\n  };\n  AgChart.createComponent = create;\n  return AgChart;\n}();\nvar pathToSeriesTypeMap = {\n  'cartesian.series': 'line',\n  'line.series': 'line',\n  'area.series': 'area',\n  'bar.series': 'bar',\n  'column.series': 'column',\n  'histogram.series': 'histogram',\n  'scatter.series': 'scatter',\n  'polar.series': 'pie',\n  'pie.series': 'pie'\n};\nvar actualSeriesTypeMap = function () {\n  var map = {};\n  var actualSeries = ['area', 'bar', 'histogram', 'line', 'pie', 'scatter'];\n  actualSeries.forEach(function (series) {\n    return map[series] = series;\n  });\n  // Aliases:\n  map['column'] = 'bar';\n  return map;\n}();\nfunction create(options, path, component, theme) {\n  var _a;\n  // Deprecate `chart.legend.item.marker.type` in integrated chart options.\n  options = Object.create(options);\n  if (component instanceof LegendMarker) {\n    if (options.type) {\n      options.shape = options.type;\n    }\n  } else {\n    options = provideDefaultType(options, path);\n    if (path) {\n      if (options.type) {\n        path = path + '.' + options.type;\n      }\n    } else {\n      path = options.type;\n    }\n  }\n  if (!path) {\n    return;\n  }\n  var mapping = getValue(mappings, path);\n  if (mapping) {\n    options = provideDefaultOptions(path, options, mapping, theme);\n    var meta = mapping.meta || {};\n    var constructorParams = meta.constructorParams || [];\n    var skipKeys = ['type', 'listeners'].concat(constructorParams);\n    // TODO: Constructor params processing could be improved, but it's good enough for current params.\n    var constructorParamValues = constructorParams.map(function (param) {\n      return options[param];\n    }).filter(function (value) {\n      return value !== undefined;\n    });\n    if (!component) {\n      component = new ((_a = meta.constructor).bind.apply(_a, __spreadArrays$6([void 0], constructorParamValues)))();\n      if (theme && component instanceof Series) {\n        firstColorIndex = theme.setSeriesColors(component, options, firstColorIndex);\n      }\n    }\n    var _loop_1 = function _loop_1(key) {\n      // Process every non-special key in the config object.\n      if (skipKeys.indexOf(key) < 0) {\n        var value = options[key];\n        if (value && key in mapping && !(meta.setAsIs && meta.setAsIs.indexOf(key) >= 0)) {\n          if (Array.isArray(value)) {\n            var subComponents = value.map(function (config) {\n              return create(config, path + '.' + key, undefined, theme);\n            }).filter(function (instance) {\n              return !!instance;\n            });\n            component[key] = subComponents;\n          } else {\n            if (mapping[key] && component[key]) {\n              // The instance property already exists on the component (e.g. chart.legend).\n              // Simply configure the existing instance, without creating a new one.\n              create(value, path + '.' + key, component[key], theme);\n            } else {\n              var subComponent = create(value, value.type ? path : path + '.' + key, undefined, theme);\n              if (subComponent) {\n                component[key] = subComponent;\n              }\n            }\n          }\n        } else {\n          // if (key in meta.constructor.defaults) { // prevent users from creating custom properties\n          component[key] = value;\n        }\n      }\n    };\n    for (var key in options) {\n      _loop_1(key);\n    }\n    var listeners = options.listeners;\n    if (component && component.addEventListener && listeners) {\n      for (var key in listeners) {\n        if (listeners.hasOwnProperty(key)) {\n          var listener = listeners[key];\n          if (typeof listener === 'function') {\n            component.addEventListener(key, listener);\n          }\n        }\n      }\n    }\n    return component;\n  }\n}\nfunction update(component, options, path, theme) {\n  if (!(options && isObject(options))) {\n    return;\n  }\n  // Deprecate `chart.legend.item.marker.type` in integrated chart options.\n  if (component instanceof LegendMarker) {\n    if (options.type) {\n      options.shape = options.type;\n    }\n  } else {\n    options = provideDefaultType(options, path);\n    if (path) {\n      if (options.type) {\n        path = path + '.' + options.type;\n      }\n    } else {\n      path = options.type;\n    }\n  }\n  if (!path) {\n    return;\n  }\n  var chart = path in mappings ? component : undefined;\n  var mapping = getValue(mappings, path);\n  if (mapping) {\n    options = provideDefaultOptions(path, options, mapping, theme);\n    var meta = mapping.meta || {};\n    var constructorParams = meta && meta.constructorParams || [];\n    var skipKeys = ['type'].concat(constructorParams);\n    for (var key in options) {\n      if (skipKeys.indexOf(key) < 0) {\n        var value = options[key];\n        var keyPath = path + '.' + key;\n        if (meta.setAsIs && meta.setAsIs.indexOf(key) >= 0) {\n          component[key] = value;\n        } else {\n          var oldValue = component[key];\n          if (Array.isArray(oldValue) && Array.isArray(value)) {\n            if (chart) {\n              if (key === 'series') {\n                updateSeries(component, value, keyPath, theme);\n              } else if (key === 'axes') {\n                updateAxes(component, value, keyPath, theme);\n              }\n            } else {\n              component[key] = value;\n            }\n          } else if (isObject(oldValue)) {\n            if (value) {\n              update(oldValue, value, value.type ? path : keyPath, theme);\n            } else if (key in options) {\n              component[key] = value;\n            }\n          } else {\n            var subComponent = isObject(value) && create(value, value.type ? path : keyPath, undefined, theme);\n            if (subComponent) {\n              component[key] = subComponent;\n            } else {\n              if (chart && options.autoSize && (key === 'width' || key === 'height')) {\n                continue;\n              }\n              component[key] = value;\n            }\n          }\n        }\n      }\n    }\n  }\n  if (chart) {\n    chart.layoutPending = true;\n  }\n}\nfunction updateSeries(chart, configs, keyPath, theme) {\n  var allSeries = chart.series.slice();\n  var prevSeries;\n  var i = 0;\n  for (; i < configs.length; i++) {\n    var config = configs[i];\n    var series = allSeries[i];\n    if (series) {\n      config = provideDefaultType(config, keyPath);\n      var type = actualSeriesTypeMap[config.type];\n      if (series.type === type) {\n        if (theme) {\n          firstColorIndex = theme.setSeriesColors(series, config, firstColorIndex);\n        }\n        update(series, config, keyPath, theme);\n      } else {\n        var newSeries = create(config, keyPath, undefined, theme);\n        chart.removeSeries(series);\n        chart.addSeriesAfter(newSeries, prevSeries);\n        series = newSeries;\n      }\n    } else {\n      // more new configs than existing series\n      var newSeries = create(config, keyPath, undefined, theme);\n      chart.addSeries(newSeries);\n    }\n    prevSeries = series;\n  }\n  // more existing series than new configs\n  for (; i < allSeries.length; i++) {\n    var series = allSeries[i];\n    if (series) {\n      chart.removeSeries(series);\n    }\n  }\n}\nfunction updateAxes(chart, configs, keyPath, theme) {\n  var axes = chart.axes;\n  var axesToAdd = [];\n  var axesToUpdate = [];\n  var _loop_2 = function _loop_2(config) {\n    var axisToUpdate = find(axes, function (axis) {\n      return axis.type === config.type && axis.position === config.position;\n    });\n    if (axisToUpdate) {\n      axesToUpdate.push(axisToUpdate);\n      update(axisToUpdate, config, keyPath, theme);\n    } else {\n      var axisToAdd = create(config, keyPath, undefined, theme);\n      if (axisToAdd) {\n        axesToAdd.push(axisToAdd);\n      }\n    }\n  };\n  for (var _i = 0, configs_1 = configs; _i < configs_1.length; _i++) {\n    var config = configs_1[_i];\n    _loop_2(config);\n  }\n  chart.axes = axesToUpdate.concat(axesToAdd);\n}\nfunction provideDefaultChartType(options) {\n  if (options.type) {\n    return options;\n  }\n  // If chart type is not specified, try to infer it from the type of first series.\n  var series = options.series && options.series[0];\n  if (series && series.type) {\n    outerLoop: for (var chartType in mappings) {\n      for (var seriesType in mappings[chartType].series) {\n        if (series.type === seriesType) {\n          options = Object.create(options);\n          options.type = chartType;\n          break outerLoop;\n        }\n      }\n    }\n  }\n  if (!options.type) {\n    options = Object.create(options);\n    options.type = 'cartesian';\n  }\n  return options;\n}\nfunction provideDefaultType(options, path) {\n  if (!path) {\n    // if `path` is undefined, `options` is a top-level (chart) config\n    path = '';\n    options = provideDefaultChartType(options);\n  }\n  if (!options.type) {\n    var seriesType = pathToSeriesTypeMap[path];\n    if (seriesType) {\n      options = Object.create(options);\n      options.type = seriesType;\n    }\n  }\n  return options;\n}\nfunction skipThemeKey(key) {\n  return ['axes', 'series'].indexOf(key) >= 0;\n}\nvar enabledKey = 'enabled';\n/**\n * If certain options were not provided by the user, use the defaults from the theme and the mapping.\n * All three objects are provided for the current path in the config tree, not necessarily top-level.\n */\nfunction provideDefaultOptions(path, options, mapping, theme) {\n  var isChartConfig = path.indexOf('.') < 0;\n  var themeDefaults = theme && theme.getConfig(path);\n  var defaults = mapping && mapping.meta && mapping.meta.defaults;\n  var isExplicitlyDisabled = options.enabled === false; // by the user\n  if (defaults || themeDefaults) {\n    options = Object.create(options);\n  }\n  // Fill in the gaps for properties not configured by the user using theme provided values.\n  for (var key in themeDefaults) {\n    // The default values for these special chart configs always come from the mappings, not theme.\n    if (isChartConfig && skipThemeKey(key)) {\n      continue;\n    }\n    if (!(key in options)) {\n      options[key] = themeDefaults[key];\n    }\n  }\n  // Fill in the gaps for properties not configured by the user, nor theme using chart mappings.\n  for (var key in defaults) {\n    if ((!themeDefaults || !(key in themeDefaults) || skipThemeKey(key)) && !(key in options)) {\n      options[key] = defaults[key];\n    }\n  }\n  // Special handling for the 'enabled' property. For example:\n  // title: { text: 'Quarterly Revenue' } // means title is enabled\n  // legend: {} // means legend is enabled\n  var hasEnabledKey = themeDefaults && enabledKey in themeDefaults || defaults && enabledKey in defaults;\n  if (hasEnabledKey && !isExplicitlyDisabled) {\n    options[enabledKey] = true;\n  }\n  return options;\n}\nvar __extends$1z = undefined && undefined.__extends || function () {\n  var _extendStatics100 = function extendStatics(d, b) {\n    _extendStatics100 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics100(d, b);\n  };\n  return function (d, b) {\n    _extendStatics100(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$T = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ChartController = /** @class */function (_super) {\n  __extends$1z(ChartController, _super);\n  function ChartController(model) {\n    var _this = _super.call(this) || this;\n    _this.model = model;\n    return _this;\n  }\n  ChartController.prototype.init = function () {\n    var _this = this;\n    this.setChartRange();\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_RANGE_SELECTION_CHANGED, function (event) {\n      if (event.id && event.id === _this.model.getChartId()) {\n        _this.updateForRangeChange();\n      }\n    });\n    if (this.model.isDetached()) {\n      if (this.rangeController) {\n        this.rangeController.setCellRanges([]);\n      }\n    }\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_MOVED, this.updateForGridChange.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PINNED, this.updateForGridChange.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_VISIBLE, this.updateForGridChange.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.updateForGridChange.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_MODEL_UPDATED, this.updateForGridChange.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_CELL_VALUE_CHANGED, this.updateForDataChange.bind(this));\n  };\n  ChartController.prototype.updateForGridChange = function () {\n    if (this.model.isDetached()) {\n      return;\n    }\n    this.model.updateCellRanges();\n    this.setChartRange();\n  };\n  ChartController.prototype.updateForDataChange = function () {\n    if (this.model.isDetached()) {\n      return;\n    }\n    this.model.updateData();\n    this.raiseChartUpdatedEvent();\n  };\n  ChartController.prototype.updateForRangeChange = function () {\n    this.updateForGridChange();\n    this.raiseChartRangeSelectionChangedEvent();\n  };\n  ChartController.prototype.updateForPanelChange = function (updatedCol) {\n    this.model.updateCellRanges(updatedCol);\n    this.setChartRange();\n    this.raiseChartRangeSelectionChangedEvent();\n  };\n  ChartController.prototype.getChartModel = function () {\n    var _this = this;\n    return {\n      chartId: this.model.getChartId(),\n      chartType: this.model.getChartType(),\n      chartThemeName: this.getThemeName(),\n      chartOptions: this.chartProxy.getChartOptions(),\n      cellRange: this.model.getCellRangeParams(),\n      chart: this.chartProxy.getChart(),\n      getChartImageDataURL: function getChartImageDataURL(params) {\n        return _this.chartProxy.getChartImageDataURL(params.type);\n      }\n    };\n  };\n  ChartController.prototype.getChartType = function () {\n    return this.model.getChartType();\n  };\n  ChartController.prototype.isPivotChart = function () {\n    return this.model.isPivotChart();\n  };\n  ChartController.prototype.isGrouping = function () {\n    return this.model.isGrouping();\n  };\n  ChartController.prototype.getThemeName = function () {\n    return this.model.getChartThemeName();\n  };\n  ChartController.prototype.getThemes = function () {\n    return this.gridOptionsWrapper.getChartThemes();\n  };\n  ChartController.prototype.getPalettes = function () {\n    var _this = this;\n    var customPalette = this.chartProxy.getCustomPalette();\n    if (customPalette) {\n      return [customPalette];\n    }\n    var themeNames = this.gridOptionsWrapper.getChartThemes();\n    return themeNames.map(function (themeName) {\n      var theme = _this.chartProxy.isStockTheme(themeName) ? themeName : _this.chartProxy.lookupCustomChartTheme(themeName);\n      return getChartTheme(theme).palette;\n    });\n  };\n  ChartController.prototype.setChartType = function (chartType) {\n    this.model.setChartType(chartType);\n    this.raiseChartUpdatedEvent();\n    this.raiseChartOptionsChangedEvent();\n  };\n  ChartController.prototype.setChartThemeName = function (chartThemeName) {\n    this.model.setChartThemeName(chartThemeName);\n    this.raiseChartUpdatedEvent();\n    this.raiseChartOptionsChangedEvent();\n  };\n  ChartController.prototype.getColStateForMenu = function () {\n    return {\n      dimensionCols: this.model.getDimensionColState(),\n      valueCols: this.model.getValueColState()\n    };\n  };\n  ChartController.prototype.isDefaultCategorySelected = function () {\n    return this.model.getSelectedDimension().colId === ChartDataModel.DEFAULT_CATEGORY;\n  };\n  ChartController.prototype.setChartRange = function (silent) {\n    if (silent === void 0) {\n      silent = false;\n    }\n    if (this.rangeController && !this.model.isSuppressChartRanges() && !this.model.isDetached()) {\n      this.rangeController.setCellRanges(this.model.getCellRanges());\n    }\n    if (!silent) {\n      this.raiseChartUpdatedEvent();\n    }\n  };\n  ChartController.prototype.detachChartRange = function () {\n    // when chart is detached it won't listen to changes from the grid\n    this.model.toggleDetached();\n    if (this.model.isDetached()) {\n      // remove range from grid\n      if (this.rangeController) {\n        this.rangeController.setCellRanges([]);\n      }\n    } else {\n      // update chart data may have changed\n      this.updateForGridChange();\n    }\n  };\n  ChartController.prototype.setChartProxy = function (chartProxy) {\n    this.chartProxy = chartProxy;\n  };\n  ChartController.prototype.getChartProxy = function () {\n    return this.chartProxy;\n  };\n  ChartController.prototype.isActiveXYChart = function () {\n    return agGridCommunity._.includes([agGridCommunity.ChartType.Scatter, agGridCommunity.ChartType.Bubble], this.getChartType());\n  };\n  ChartController.prototype.isChartLinked = function () {\n    return !this.model.isDetached();\n  };\n  ChartController.prototype.raiseChartUpdatedEvent = function () {\n    var event = Object.freeze({\n      type: ChartController.EVENT_CHART_UPDATED\n    });\n    this.dispatchEvent(event);\n  };\n  ChartController.prototype.raiseChartOptionsChangedEvent = function () {\n    this.chartProxy.raiseChartOptionsChangedEvent();\n  };\n  ChartController.prototype.raiseChartRangeSelectionChangedEvent = function () {\n    var event = Object.freeze({\n      type: agGridCommunity.Events.EVENT_CHART_RANGE_SELECTION_CHANGED,\n      id: this.model.getChartId(),\n      chartId: this.model.getChartId(),\n      cellRange: this.model.getCellRangeParams(),\n      api: this.gridApi,\n      columnApi: this.columnApi\n    });\n    this.eventService.dispatchEvent(event);\n  };\n  ChartController.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    if (this.rangeController) {\n      this.rangeController.setCellRanges([]);\n    }\n  };\n  ChartController.EVENT_CHART_UPDATED = 'chartUpdated';\n  __decorate$T([agGridCommunity.Autowired('rangeController')], ChartController.prototype, \"rangeController\", void 0);\n  __decorate$T([agGridCommunity.Autowired('gridOptionsWrapper')], ChartController.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$T([agGridCommunity.Autowired('gridApi')], ChartController.prototype, \"gridApi\", void 0);\n  __decorate$T([agGridCommunity.Autowired('columnApi')], ChartController.prototype, \"columnApi\", void 0);\n  __decorate$T([agGridCommunity.PostConstruct], ChartController.prototype, \"init\", null);\n  return ChartController;\n}(agGridCommunity.BeanStub);\nvar __extends$1A = undefined && undefined.__extends || function () {\n  var _extendStatics101 = function extendStatics(d, b) {\n    _extendStatics101 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics101(d, b);\n  };\n  return function (d, b) {\n    _extendStatics101(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$U = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays$7 = undefined && undefined.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nvar ChartDataPanel = /** @class */function (_super) {\n  __extends$1A(ChartDataPanel, _super);\n  function ChartDataPanel(chartController) {\n    var _this = _super.call(this, ChartDataPanel.TEMPLATE) || this;\n    _this.columnComps = new Map();\n    _this.chartController = chartController;\n    return _this;\n  }\n  ChartDataPanel.prototype.init = function () {\n    this.updatePanels();\n    this.addManagedListener(this.chartController, ChartController.EVENT_CHART_UPDATED, this.updatePanels.bind(this));\n  };\n  ChartDataPanel.prototype.destroy = function () {\n    this.clearComponents();\n    _super.prototype.destroy.call(this);\n  };\n  ChartDataPanel.prototype.updatePanels = function () {\n    var _this = this;\n    var currentChartType = this.chartType;\n    var _a = this.chartController.getColStateForMenu(),\n      dimensionCols = _a.dimensionCols,\n      valueCols = _a.valueCols;\n    var colIds = dimensionCols.map(function (c) {\n      return c.colId;\n    }).concat(valueCols.map(function (c) {\n      return c.colId;\n    }));\n    this.chartType = this.chartController.getChartType();\n    if (agGridCommunity._.areEqual(agGridCommunity._.keys(this.columnComps), colIds) && this.chartType === currentChartType) {\n      // if possible, we just update existing components\n      __spreadArrays$7(dimensionCols, valueCols).forEach(function (col) {\n        _this.columnComps.get(col.colId).setValue(col.selected, true);\n      });\n      if (this.chartController.isActiveXYChart()) {\n        var getSeriesLabel_1 = this.generateGetSeriesLabel();\n        valueCols.forEach(function (col) {\n          _this.columnComps.get(col.colId).setLabel(getSeriesLabel_1(col));\n        });\n      }\n    } else {\n      // otherwise we re-create everything\n      this.clearComponents();\n      this.createCategoriesGroupComponent(dimensionCols);\n      this.createSeriesGroupComponent(valueCols);\n    }\n  };\n  ChartDataPanel.prototype.addComponent = function (parent, component) {\n    var eDiv = document.createElement('div');\n    eDiv.className = 'ag-chart-data-section';\n    eDiv.appendChild(component.getGui());\n    parent.appendChild(eDiv);\n  };\n  ChartDataPanel.prototype.addChangeListener = function (component, columnState) {\n    var _this = this;\n    this.addManagedListener(component, agGridCommunity.AgAbstractField.EVENT_CHANGED, function () {\n      columnState.selected = component.getValue();\n      _this.chartController.updateForPanelChange(columnState);\n    });\n  };\n  ChartDataPanel.prototype.createCategoriesGroupComponent = function (columns) {\n    var _this = this;\n    this.categoriesGroupComp = this.createBean(new agGridCommunity.AgGroupComponent({\n      title: this.getCategoryGroupTitle(),\n      enabled: true,\n      suppressEnabledCheckbox: true,\n      suppressOpenCloseIcons: false,\n      cssIdentifier: 'charts-data'\n    }));\n    var inputName = \"chartDimension\" + this.getCompId();\n    columns.forEach(function (col) {\n      var comp = _this.categoriesGroupComp.createManagedBean(new agGridCommunity.AgRadioButton());\n      comp.setLabel(agGridCommunity._.escapeString(col.displayName));\n      comp.setValue(col.selected);\n      comp.setInputName(inputName);\n      _this.addChangeListener(comp, col);\n      _this.categoriesGroupComp.addItem(comp);\n      _this.columnComps.set(col.colId, comp);\n    });\n    this.addComponent(this.getGui(), this.categoriesGroupComp);\n  };\n  ChartDataPanel.prototype.createSeriesGroupComponent = function (columns) {\n    var _this = this;\n    this.seriesGroupComp = this.createManagedBean(new agGridCommunity.AgGroupComponent({\n      title: this.getSeriesGroupTitle(),\n      enabled: true,\n      suppressEnabledCheckbox: true,\n      suppressOpenCloseIcons: false,\n      cssIdentifier: 'charts-data'\n    }));\n    if (this.chartController.isActiveXYChart()) {\n      var pairedModeToggle = this.seriesGroupComp.createManagedBean(new agGridCommunity.AgToggleButton());\n      var chartProxy_1 = this.chartController.getChartProxy();\n      pairedModeToggle.setLabel(this.chartTranslator.translate('paired')).setLabelAlignment('left').setLabelWidth('flex').setInputWidth(45).setValue(chartProxy_1.getSeriesOption('paired') || false).onValueChange(function (newValue) {\n        chartProxy_1.setSeriesOption('paired', newValue);\n        _this.chartController.updateForGridChange();\n      });\n      this.seriesGroupComp.addItem(pairedModeToggle);\n    }\n    var getSeriesLabel = this.generateGetSeriesLabel();\n    columns.forEach(function (col) {\n      var comp = _this.seriesGroupComp.createManagedBean(new agGridCommunity.AgCheckbox());\n      comp.addCssClass('ag-data-select-checkbox');\n      var label = getSeriesLabel(col);\n      comp.setLabel(label);\n      comp.setValue(col.selected);\n      _this.addChangeListener(comp, col);\n      _this.seriesGroupComp.addItem(comp);\n      _this.columnComps.set(col.colId, comp);\n      _this.addDragHandle(comp, col);\n    });\n    this.addComponent(this.getGui(), this.seriesGroupComp);\n    var dropTarget = {\n      getContainer: this.getGui.bind(this),\n      onDragging: this.onDragging.bind(this),\n      isInterestedIn: this.isInterestedIn.bind(this)\n    };\n    this.dragAndDropService.addDropTarget(dropTarget);\n  };\n  ChartDataPanel.prototype.addDragHandle = function (comp, col) {\n    var _this = this;\n    var eDragHandle = agGridCommunity._.createIconNoSpan('columnDrag', this.gridOptionsWrapper);\n    agGridCommunity._.addCssClass(eDragHandle, 'ag-drag-handle');\n    agGridCommunity._.addCssClass(eDragHandle, 'ag-chart-data-column-drag-handle');\n    comp.getGui().insertAdjacentElement('beforeend', eDragHandle);\n    var dragSource = {\n      type: agGridCommunity.DragSourceType.ChartPanel,\n      eElement: eDragHandle,\n      dragItemName: col.displayName,\n      defaultIconName: agGridCommunity.DragAndDropService.ICON_MOVE,\n      getDragItem: function getDragItem() {\n        return {\n          columns: [col.column]\n        };\n      },\n      onDragStopped: function onDragStopped() {\n        _this.insertIndex = undefined;\n      }\n    };\n    this.dragAndDropService.addDragSource(dragSource, true);\n    this.addDestroyFunc(function () {\n      return _this.dragAndDropService.removeDragSource(dragSource);\n    });\n  };\n  ChartDataPanel.prototype.generateGetSeriesLabel = function () {\n    if (!this.chartController.isActiveXYChart()) {\n      return function (col) {\n        return agGridCommunity._.escapeString(col.displayName);\n      };\n    }\n    var isBubble = this.chartType === agGridCommunity.ChartType.Bubble;\n    var isInPairedMode = this.isInPairedMode();\n    var selectedValuesCount = 0;\n    var indexToAxisLabel = new Map();\n    indexToAxisLabel.set(0, 'X');\n    indexToAxisLabel.set(1, 'Y');\n    indexToAxisLabel.set(2, 'size');\n    return function (col) {\n      var escapedLabel = agGridCommunity._.escapeString(col.displayName);\n      if (!col.selected) {\n        return escapedLabel;\n      }\n      var axisLabel;\n      if (isInPairedMode) {\n        axisLabel = indexToAxisLabel.get(selectedValuesCount % (isBubble ? 3 : 2));\n      } else {\n        if (selectedValuesCount === 0) {\n          axisLabel = 'X';\n        } else {\n          axisLabel = isBubble && selectedValuesCount % 2 === 0 ? 'size' : 'Y';\n        }\n      }\n      selectedValuesCount++;\n      return escapedLabel + \" (\" + axisLabel + \")\";\n    };\n  };\n  ChartDataPanel.prototype.getCategoryGroupTitle = function () {\n    return this.chartTranslator.translate(this.chartController.isActiveXYChart() ? 'labels' : 'categories');\n  };\n  ChartDataPanel.prototype.getSeriesGroupTitle = function () {\n    return this.chartTranslator.translate(this.chartController.isActiveXYChart() ? 'xyValues' : 'series');\n  };\n  ChartDataPanel.prototype.isInPairedMode = function () {\n    return this.chartController.isActiveXYChart() && this.chartController.getChartProxy().getSeriesOption('paired');\n  };\n  ChartDataPanel.prototype.clearComponents = function () {\n    agGridCommunity._.clearElement(this.getGui());\n    this.categoriesGroupComp = this.destroyBean(this.categoriesGroupComp);\n    this.seriesGroupComp = this.destroyBean(this.seriesGroupComp);\n    this.columnComps.clear();\n  };\n  ChartDataPanel.prototype.onDragging = function (draggingEvent) {\n    var _this = this;\n    if (this.checkInsertIndex(draggingEvent)) {\n      var column_1 = draggingEvent.dragItem.columns[0];\n      var _a = this.chartController.getColStateForMenu(),\n        dimensionCols = _a.dimensionCols,\n        valueCols = _a.valueCols;\n      __spreadArrays$7(dimensionCols, valueCols).filter(function (state) {\n        return state.column === column_1;\n      }).forEach(function (state) {\n        state.order = _this.insertIndex;\n        _this.chartController.updateForPanelChange(state);\n      });\n    }\n  };\n  ChartDataPanel.prototype.checkInsertIndex = function (draggingEvent) {\n    if (agGridCommunity._.missing(draggingEvent.vDirection)) {\n      return false;\n    }\n    var newIndex = 0;\n    var mouseEvent = draggingEvent.event;\n    this.columnComps.forEach(function (comp) {\n      var rect = comp.getGui().getBoundingClientRect();\n      var verticalFit = mouseEvent.clientY >= (draggingEvent.vDirection === agGridCommunity.VerticalDirection.Down ? rect.top : rect.bottom);\n      if (verticalFit) {\n        newIndex++;\n      }\n    });\n    var changed = this.insertIndex !== undefined && newIndex !== this.insertIndex;\n    this.insertIndex = newIndex;\n    return changed;\n  };\n  ChartDataPanel.prototype.isInterestedIn = function (type) {\n    return type === agGridCommunity.DragSourceType.ChartPanel;\n  };\n  ChartDataPanel.TEMPLATE = \"<div class=\\\"ag-chart-data-wrapper\\\"></div>\";\n  __decorate$U([agGridCommunity.Autowired('dragAndDropService')], ChartDataPanel.prototype, \"dragAndDropService\", void 0);\n  __decorate$U([agGridCommunity.Autowired('gridOptionsWrapper')], ChartDataPanel.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$U([agGridCommunity.Autowired('chartTranslator')], ChartDataPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$U([agGridCommunity.PostConstruct], ChartDataPanel.prototype, \"init\", null);\n  return ChartDataPanel;\n}(agGridCommunity.Component);\nvar __extends$1B = undefined && undefined.__extends || function () {\n  var _extendStatics102 = function extendStatics(d, b) {\n    _extendStatics102 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics102(d, b);\n  };\n  return function (d, b) {\n    _extendStatics102(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$V = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar FontPanel = /** @class */function (_super) {\n  __extends$1B(FontPanel, _super);\n  function FontPanel(params) {\n    var _this = _super.call(this) || this;\n    _this.activeComps = [];\n    _this.params = params;\n    return _this;\n  }\n  FontPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-sub-level',\n      direction: 'vertical',\n      suppressOpenCloseIcons: true\n    };\n    this.setTemplate(FontPanel.TEMPLATE, {\n      fontGroup: groupParams\n    });\n    this.initGroup();\n    this.initFontFamilySelect();\n    this.initFontWeightStyleSelect();\n    this.initFontSizeSelect();\n    this.initFontColorPicker();\n  };\n  FontPanel.prototype.addCompToPanel = function (comp) {\n    this.fontGroup.addItem(comp);\n    this.activeComps.push(comp);\n  };\n  FontPanel.prototype.setEnabled = function (enabled) {\n    this.fontGroup.setEnabled(enabled);\n  };\n  FontPanel.prototype.initGroup = function () {\n    var _this = this;\n    this.fontGroup.setTitle(this.params.name || this.chartTranslator.translate('font')).setEnabled(this.params.enabled).hideEnabledCheckbox(!!this.params.suppressEnabledCheckbox).hideOpenCloseIcons(true).onEnableChange(function (enabled) {\n      if (_this.params.setEnabled) {\n        _this.params.setEnabled(enabled);\n      }\n    });\n  };\n  FontPanel.prototype.initFontFamilySelect = function () {\n    var _this = this;\n    var families = ['Arial, sans-serif', 'Aria Black, sans-serif', 'Book Antiqua,  serif', 'Charcoal, sans-serif', 'Comic Sans MS, cursive', 'Courier, monospace', 'Courier New, monospace', 'Gadget, sans-serif', 'Geneva, sans-serif', 'Helvetica, sans-serif', 'Impact, sans-serif', 'Lucida Console, monospace', 'Lucida Grande, sans-serif', 'Lucida Sans Unicode,  sans-serif', 'Monaco, monospace', 'Palatino Linotype, serif', 'Palatino, serif', 'Times New Roman, serif', 'Times, serif', 'Verdana, sans-serif'];\n    var family = this.params.initialFont.family;\n    var initialValue = families[0];\n    if (family) {\n      // check for known values using lowercase\n      var lowerCaseValues = families.map(function (f) {\n        return f.toLowerCase();\n      });\n      var valueIndex = lowerCaseValues.indexOf(family.toLowerCase());\n      if (valueIndex >= 0) {\n        initialValue = families[valueIndex];\n      } else {\n        // add user provided value to list\n        var capitalisedFontValue = agGridCommunity._.capitalise(family);\n        families.push(capitalisedFontValue);\n        initialValue = capitalisedFontValue;\n      }\n    }\n    var options = families.sort().map(function (value) {\n      return {\n        value: value,\n        text: value\n      };\n    });\n    this.familySelect.addOptions(options).setInputWidth('flex').setValue(\"\" + initialValue).onValueChange(function (newValue) {\n      return _this.params.setFont({\n        family: newValue\n      });\n    });\n  };\n  FontPanel.prototype.initFontSizeSelect = function () {\n    var _this = this;\n    var sizes = [8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36];\n    var size = this.params.initialFont.size;\n    if (!agGridCommunity._.includes(sizes, size)) {\n      sizes.push(size);\n    }\n    var options = sizes.sort(function (a, b) {\n      return a - b;\n    }).map(function (value) {\n      return {\n        value: \"\" + value,\n        text: \"\" + value\n      };\n    });\n    this.sizeSelect.addOptions(options).setInputWidth('flex').setValue(\"\" + size).onValueChange(function (newValue) {\n      return _this.params.setFont({\n        size: parseInt(newValue, 10)\n      });\n    });\n    this.sizeSelect.setLabel(this.chartTranslator.translate('size'));\n  };\n  FontPanel.prototype.initFontWeightStyleSelect = function () {\n    var _this = this;\n    var _a = this.params.initialFont,\n      _b = _a.weight,\n      weight = _b === void 0 ? 'normal' : _b,\n      _c = _a.style,\n      style = _c === void 0 ? 'normal' : _c;\n    var weightStyles = [{\n      name: 'normal',\n      weight: 'normal',\n      style: 'normal'\n    }, {\n      name: 'bold',\n      weight: 'bold',\n      style: 'normal'\n    }, {\n      name: 'italic',\n      weight: 'normal',\n      style: 'italic'\n    }, {\n      name: 'boldItalic',\n      weight: 'bold',\n      style: 'italic'\n    }];\n    var selectedOption = agGridCommunity._.find(weightStyles, function (x) {\n      return x.weight === weight && x.style === style;\n    });\n    if (!selectedOption) {\n      selectedOption = {\n        name: 'predefined',\n        weight: weight,\n        style: style\n      };\n      weightStyles.unshift(selectedOption);\n    }\n    var options = weightStyles.map(function (ws) {\n      return {\n        value: ws.name,\n        text: _this.chartTranslator.translate(ws.name)\n      };\n    });\n    this.weightStyleSelect.addOptions(options).setInputWidth('flex').setValue(selectedOption.name).onValueChange(function (newValue) {\n      var selectedWeightStyle = agGridCommunity._.find(weightStyles, function (x) {\n        return x.name === newValue;\n      });\n      _this.params.setFont({\n        weight: selectedWeightStyle.weight,\n        style: selectedWeightStyle.style\n      });\n    });\n  };\n  FontPanel.prototype.initFontColorPicker = function () {\n    var _this = this;\n    this.colorPicker.setLabel(this.chartTranslator.translate('color')).setInputWidth(45).setValue(\"\" + this.params.initialFont.color).onValueChange(function (newColor) {\n      return _this.params.setFont({\n        color: newColor\n      });\n    });\n  };\n  FontPanel.prototype.destroyActiveComps = function () {\n    var _this = this;\n    this.activeComps.forEach(function (comp) {\n      agGridCommunity._.removeFromParent(comp.getGui());\n      _this.destroyBean(comp);\n    });\n  };\n  FontPanel.prototype.destroy = function () {\n    this.destroyActiveComps();\n    _super.prototype.destroy.call(this);\n  };\n  FontPanel.TEMPLATE = \"<div class=\\\"ag-font-panel\\\">\\n            <ag-group-component ref=\\\"fontGroup\\\">\\n                <ag-select ref=\\\"familySelect\\\"></ag-select>\\n                <ag-select ref=\\\"weightStyleSelect\\\"></ag-select>\\n                <div class=\\\"ag-charts-font-size-color\\\">\\n                    <ag-select ref=\\\"sizeSelect\\\"></ag-select>\\n                    <ag-color-picker ref=\\\"colorPicker\\\"></ag-color-picker>\\n                </div>\\n            </ag-group-component>\\n        </div>\";\n  __decorate$V([agGridCommunity.RefSelector('fontGroup')], FontPanel.prototype, \"fontGroup\", void 0);\n  __decorate$V([agGridCommunity.RefSelector('familySelect')], FontPanel.prototype, \"familySelect\", void 0);\n  __decorate$V([agGridCommunity.RefSelector('weightStyleSelect')], FontPanel.prototype, \"weightStyleSelect\", void 0);\n  __decorate$V([agGridCommunity.RefSelector('sizeSelect')], FontPanel.prototype, \"sizeSelect\", void 0);\n  __decorate$V([agGridCommunity.RefSelector('colorPicker')], FontPanel.prototype, \"colorPicker\", void 0);\n  __decorate$V([agGridCommunity.Autowired('chartTranslator')], FontPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$V([agGridCommunity.PostConstruct], FontPanel.prototype, \"init\", null);\n  return FontPanel;\n}(agGridCommunity.Component);\nvar __extends$1C = undefined && undefined.__extends || function () {\n  var _extendStatics103 = function extendStatics(d, b) {\n    _extendStatics103 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics103(d, b);\n  };\n  return function (d, b) {\n    _extendStatics103(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$W = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar LegendPanel = /** @class */function (_super) {\n  __extends$1C(LegendPanel, _super);\n  function LegendPanel(chartController) {\n    var _this = _super.call(this) || this;\n    _this.activePanels = [];\n    _this.chartController = chartController;\n    return _this;\n  }\n  LegendPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-top-level',\n      direction: 'vertical'\n    };\n    this.setTemplate(LegendPanel.TEMPLATE, {\n      legendGroup: groupParams\n    });\n    this.initLegendGroup();\n    this.initLegendPosition();\n    this.initLegendPadding();\n    this.initLegendItems();\n    this.initLabelPanel();\n  };\n  LegendPanel.prototype.initLegendGroup = function () {\n    var _this = this;\n    this.legendGroup.setTitle(this.chartTranslator.translate(\"legend\")).hideEnabledCheckbox(false).setEnabled(this.chartController.getChartProxy().getChartOption(\"legend.enabled\") || false).toggleGroupExpand(false).onEnableChange(function (enabled) {\n      _this.chartController.getChartProxy().setChartOption(\"legend.enabled\", enabled);\n      _this.legendGroup.toggleGroupExpand(true);\n    });\n  };\n  LegendPanel.prototype.initLegendPosition = function () {\n    var _this = this;\n    var positions = [agGridCommunity.LegendPosition.Top, agGridCommunity.LegendPosition.Right, agGridCommunity.LegendPosition.Bottom, agGridCommunity.LegendPosition.Left];\n    this.legendPositionSelect.setLabel(this.chartTranslator.translate(\"position\")).setLabelWidth(\"flex\").setInputWidth(80).addOptions(positions.map(function (position) {\n      return {\n        value: position,\n        text: _this.chartTranslator.translate(position)\n      };\n    })).setValue(this.chartController.getChartProxy().getChartOption(\"legend.position\")).onValueChange(function (newValue) {\n      return _this.chartController.getChartProxy().setChartOption(\"legend.position\", newValue);\n    });\n  };\n  LegendPanel.prototype.initLegendPadding = function () {\n    var _this = this;\n    this.legendPaddingSlider.setLabel(this.chartTranslator.translate(\"spacing\")).setValue(this.chartController.getChartProxy().getChartOption(\"legend.spacing\")).setTextFieldWidth(45).setMaxValue(200).onValueChange(function (newValue) {\n      return _this.chartController.getChartProxy().setChartOption(\"legend.spacing\", newValue);\n    });\n  };\n  LegendPanel.prototype.initLegendItems = function () {\n    var _this = this;\n    var initSlider = function initSlider(expression, labelKey, input, maxValue) {\n      input.setLabel(_this.chartTranslator.translate(labelKey)).setValue(_this.chartController.getChartProxy().getChartOption(\"legend.\" + expression)).setMaxValue(maxValue).setTextFieldWidth(45).onValueChange(function (newValue) {\n        return _this.chartController.getChartProxy().setChartOption(\"legend.\" + expression, newValue);\n      });\n    };\n    initSlider(\"item.marker.size\", \"markerSize\", this.markerSizeSlider, 40);\n    initSlider(\"item.marker.strokeWidth\", \"markerStroke\", this.markerStrokeSlider, 10);\n    initSlider(\"item.marker.padding\", \"itemSpacing\", this.markerPaddingSlider, 20);\n    initSlider(\"item.paddingX\", \"layoutHorizontalSpacing\", this.itemPaddingXSlider, 50);\n    initSlider(\"item.paddingY\", \"layoutVerticalSpacing\", this.itemPaddingYSlider, 50);\n  };\n  LegendPanel.prototype.initLabelPanel = function () {\n    var _this = this;\n    var chartProxy = this.chartController.getChartProxy();\n    var initialFont = {\n      family: chartProxy.getChartOption(\"legend.item.label.fontFamily\"),\n      style: chartProxy.getChartOption(\"legend.item.label.fontStyle\"),\n      weight: chartProxy.getChartOption(\"legend.item.label.fontWeight\"),\n      size: chartProxy.getChartOption(\"legend.item.label.fontSize\"),\n      color: chartProxy.getChartOption(\"legend.item.label.color\")\n    };\n    var setFont = function setFont(font) {\n      var chartProxy = _this.chartController.getChartProxy();\n      if (font.family) {\n        chartProxy.setChartOption(\"legend.item.label.fontFamily\", font.family);\n      }\n      if (font.weight) {\n        chartProxy.setChartOption(\"legend.item.label.fontWeight\", font.weight);\n      }\n      if (font.style) {\n        chartProxy.setChartOption(\"legend.item.label.fontStyle\", font.style);\n      }\n      if (font.size) {\n        chartProxy.setChartOption(\"legend.item.label.fontSize\", font.size);\n      }\n      if (font.color) {\n        chartProxy.setChartOption(\"legend.item.label.color\", font.color);\n      }\n    };\n    var params = {\n      enabled: true,\n      suppressEnabledCheckbox: true,\n      initialFont: initialFont,\n      setFont: setFont\n    };\n    var fontPanelComp = this.createBean(new FontPanel(params));\n    this.legendGroup.addItem(fontPanelComp);\n    this.activePanels.push(fontPanelComp);\n  };\n  LegendPanel.prototype.destroyActivePanels = function () {\n    var _this = this;\n    this.activePanels.forEach(function (panel) {\n      agGridCommunity._.removeFromParent(panel.getGui());\n      _this.destroyBean(panel);\n    });\n  };\n  LegendPanel.prototype.destroy = function () {\n    this.destroyActivePanels();\n    _super.prototype.destroy.call(this);\n  };\n  LegendPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"legendGroup\\\">\\n                <ag-select ref=\\\"legendPositionSelect\\\"></ag-select>\\n                <ag-slider ref=\\\"legendPaddingSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"markerSizeSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"markerStrokeSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"markerPaddingSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"itemPaddingXSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"itemPaddingYSlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n  __decorate$W([agGridCommunity.RefSelector('legendGroup')], LegendPanel.prototype, \"legendGroup\", void 0);\n  __decorate$W([agGridCommunity.RefSelector('legendPositionSelect')], LegendPanel.prototype, \"legendPositionSelect\", void 0);\n  __decorate$W([agGridCommunity.RefSelector('legendPaddingSlider')], LegendPanel.prototype, \"legendPaddingSlider\", void 0);\n  __decorate$W([agGridCommunity.RefSelector('markerSizeSlider')], LegendPanel.prototype, \"markerSizeSlider\", void 0);\n  __decorate$W([agGridCommunity.RefSelector('markerStrokeSlider')], LegendPanel.prototype, \"markerStrokeSlider\", void 0);\n  __decorate$W([agGridCommunity.RefSelector('markerPaddingSlider')], LegendPanel.prototype, \"markerPaddingSlider\", void 0);\n  __decorate$W([agGridCommunity.RefSelector('itemPaddingXSlider')], LegendPanel.prototype, \"itemPaddingXSlider\", void 0);\n  __decorate$W([agGridCommunity.RefSelector('itemPaddingYSlider')], LegendPanel.prototype, \"itemPaddingYSlider\", void 0);\n  __decorate$W([agGridCommunity.Autowired('chartTranslator')], LegendPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$W([agGridCommunity.PostConstruct], LegendPanel.prototype, \"init\", null);\n  return LegendPanel;\n}(agGridCommunity.Component);\nvar __extends$1D = undefined && undefined.__extends || function () {\n  var _extendStatics104 = function extendStatics(d, b) {\n    _extendStatics104 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics104(d, b);\n  };\n  return function (d, b) {\n    _extendStatics104(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$X = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ShadowPanel = /** @class */function (_super) {\n  __extends$1D(ShadowPanel, _super);\n  function ShadowPanel(chartController) {\n    var _this = _super.call(this) || this;\n    _this.chartController = chartController;\n    return _this;\n  }\n  ShadowPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-sub-level',\n      direction: 'vertical',\n      suppressOpenCloseIcons: true\n    };\n    this.setTemplate(ShadowPanel.TEMPLATE, {\n      shadowGroup: groupParams\n    });\n    this.shadowBlurSlider.setTextFieldWidth(45);\n    this.shadowXOffsetSlider.setTextFieldWidth(45);\n    this.shadowYOffsetSlider.setTextFieldWidth(45);\n    this.initSeriesShadow();\n  };\n  ShadowPanel.prototype.initSeriesShadow = function () {\n    var _this = this;\n    this.shadowGroup.setTitle(this.chartTranslator.translate(\"shadow\")).setEnabled(this.chartController.getChartProxy().getShadowEnabled()).hideOpenCloseIcons(true).hideEnabledCheckbox(false).onEnableChange(function (newValue) {\n      return _this.chartController.getChartProxy().setShadowProperty(\"enabled\", newValue);\n    });\n    this.shadowColorPicker.setLabel(this.chartTranslator.translate(\"color\")).setLabelWidth(\"flex\").setInputWidth(45).setValue(\"rgba(0,0,0,0.5)\").onValueChange(function (newValue) {\n      return _this.chartController.getChartProxy().setShadowProperty(\"color\", newValue);\n    });\n    var initInput = function initInput(input, property, minValue, maxValue) {\n      input.setLabel(_this.chartTranslator.translate(property)).setValue(_this.chartController.getChartProxy().getShadowProperty(property)).setMinValue(minValue).setMaxValue(maxValue).onValueChange(function (newValue) {\n        return _this.chartController.getChartProxy().setShadowProperty(property, newValue);\n      });\n    };\n    initInput(this.shadowBlurSlider, \"blur\", 0, 20);\n    initInput(this.shadowXOffsetSlider, \"xOffset\", -10, 10);\n    initInput(this.shadowYOffsetSlider, \"yOffset\", -10, 10);\n  };\n  ShadowPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"shadowGroup\\\">\\n                <ag-color-picker ref=\\\"shadowColorPicker\\\"></ag-color-picker>\\n                <ag-slider ref=\\\"shadowBlurSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"shadowXOffsetSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"shadowYOffsetSlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n  __decorate$X([agGridCommunity.RefSelector('shadowGroup')], ShadowPanel.prototype, \"shadowGroup\", void 0);\n  __decorate$X([agGridCommunity.RefSelector('shadowColorPicker')], ShadowPanel.prototype, \"shadowColorPicker\", void 0);\n  __decorate$X([agGridCommunity.RefSelector('shadowBlurSlider')], ShadowPanel.prototype, \"shadowBlurSlider\", void 0);\n  __decorate$X([agGridCommunity.RefSelector('shadowXOffsetSlider')], ShadowPanel.prototype, \"shadowXOffsetSlider\", void 0);\n  __decorate$X([agGridCommunity.RefSelector('shadowYOffsetSlider')], ShadowPanel.prototype, \"shadowYOffsetSlider\", void 0);\n  __decorate$X([agGridCommunity.Autowired('chartTranslator')], ShadowPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$X([agGridCommunity.PostConstruct], ShadowPanel.prototype, \"init\", null);\n  return ShadowPanel;\n}(agGridCommunity.Component);\nfunction initLineOpacitySlider(seriesLineOpacitySlider, chartTranslator, chartProxy) {\n  seriesLineOpacitySlider.setLabel(chartTranslator.translate(\"strokeOpacity\")).setStep(0.05).setMaxValue(1).setTextFieldWidth(45).setValue(chartProxy.getSeriesOption(\"stroke.opacity\") || \"1\").onValueChange(function (newValue) {\n    return chartProxy.setSeriesOption(\"stroke.opacity\", newValue);\n  });\n}\nfunction initFillOpacitySlider(seriesFillOpacitySlider, chartTranslator, chartProxy) {\n  seriesFillOpacitySlider.setLabel(chartTranslator.translate(\"fillOpacity\")).setStep(0.05).setMaxValue(1).setTextFieldWidth(45).setValue(chartProxy.getSeriesOption(\"fill.opacity\") || \"1\").onValueChange(function (newValue) {\n    return chartProxy.setSeriesOption(\"fill.opacity\", newValue);\n  });\n}\nfunction initFontPanelParams(chartTranslator, chartProxy) {\n  var initialFont = {\n    family: chartProxy.getSeriesOption(\"label.fontFamily\"),\n    style: chartProxy.getSeriesOption(\"label.fontStyle\"),\n    weight: chartProxy.getSeriesOption(\"label.fontWeight\"),\n    size: chartProxy.getSeriesOption(\"label.fontSize\"),\n    color: chartProxy.getSeriesOption(\"label.color\")\n  };\n  var setFont = function setFont(font) {\n    if (font.family) {\n      chartProxy.setSeriesOption(\"label.fontFamily\", font.family);\n    }\n    if (font.weight) {\n      chartProxy.setSeriesOption(\"label.fontWeight\", font.weight);\n    }\n    if (font.style) {\n      chartProxy.setSeriesOption(\"label.fontStyle\", font.style);\n    }\n    if (font.size) {\n      chartProxy.setSeriesOption(\"label.fontSize\", font.size);\n    }\n    if (font.color) {\n      chartProxy.setSeriesOption(\"label.color\", font.color);\n    }\n  };\n  var params = {\n    name: chartTranslator.translate('labels'),\n    enabled: chartProxy.getSeriesOption(\"label.enabled\") || false,\n    setEnabled: function setEnabled(enabled) {\n      return chartProxy.setSeriesOption(\"label.enabled\", enabled);\n    },\n    suppressEnabledCheckbox: false,\n    initialFont: initialFont,\n    setFont: setFont\n  };\n  return params;\n}\nvar __extends$1E = undefined && undefined.__extends || function () {\n  var _extendStatics105 = function extendStatics(d, b) {\n    _extendStatics105 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics105(d, b);\n  };\n  return function (d, b) {\n    _extendStatics105(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$Y = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar BarSeriesPanel = /** @class */function (_super) {\n  __extends$1E(BarSeriesPanel, _super);\n  function BarSeriesPanel(chartController) {\n    var _this = _super.call(this) || this;\n    _this.activePanels = [];\n    _this.chartController = chartController;\n    return _this;\n  }\n  BarSeriesPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-top-level',\n      direction: 'vertical'\n    };\n    this.setTemplate(BarSeriesPanel.TEMPLATE, {\n      seriesGroup: groupParams\n    });\n    this.seriesGroup.setTitle(this.chartTranslator.translate(\"series\")).toggleGroupExpand(false).hideEnabledCheckbox(true);\n    this.initSeriesTooltips();\n    this.initSeriesStrokeWidth();\n    this.initOpacity();\n    this.initLabelPanel();\n    this.initShadowPanel();\n  };\n  BarSeriesPanel.prototype.initSeriesTooltips = function () {\n    var _this = this;\n    this.seriesTooltipsToggle.setLabel(this.chartTranslator.translate(\"tooltips\")).setLabelAlignment(\"left\").setLabelWidth(\"flex\").setInputWidth(45).setValue(this.getChartProxy().getSeriesOption(\"tooltip.enabled\") || false).onValueChange(function (newValue) {\n      return _this.getChartProxy().setSeriesOption(\"tooltip.enabled\", newValue);\n    });\n  };\n  BarSeriesPanel.prototype.initSeriesStrokeWidth = function () {\n    var _this = this;\n    this.seriesStrokeWidthSlider.setLabel(this.chartTranslator.translate(\"strokeWidth\")).setMaxValue(10).setTextFieldWidth(45).setValue(this.getChartProxy().getSeriesOption(\"stroke.width\")).onValueChange(function (newValue) {\n      return _this.getChartProxy().setSeriesOption(\"stroke.width\", newValue);\n    });\n  };\n  BarSeriesPanel.prototype.initOpacity = function () {\n    initLineOpacitySlider(this.seriesLineOpacitySlider, this.chartTranslator, this.getChartProxy());\n    initFillOpacitySlider(this.seriesFillOpacitySlider, this.chartTranslator, this.getChartProxy());\n  };\n  BarSeriesPanel.prototype.initLabelPanel = function () {\n    var params = initFontPanelParams(this.chartTranslator, this.getChartProxy());\n    var labelPanelComp = this.createBean(new FontPanel(params));\n    this.activePanels.push(labelPanelComp);\n    this.seriesGroup.addItem(labelPanelComp);\n  };\n  BarSeriesPanel.prototype.initShadowPanel = function () {\n    var shadowPanelComp = this.createBean(new ShadowPanel(this.chartController));\n    this.seriesGroup.addItem(shadowPanelComp);\n    this.activePanels.push(shadowPanelComp);\n  };\n  BarSeriesPanel.prototype.destroyActivePanels = function () {\n    var _this = this;\n    this.activePanels.forEach(function (panel) {\n      agGridCommunity._.removeFromParent(panel.getGui());\n      _this.destroyBean(panel);\n    });\n  };\n  BarSeriesPanel.prototype.getChartProxy = function () {\n    return this.chartController.getChartProxy();\n  };\n  BarSeriesPanel.prototype.destroy = function () {\n    this.destroyActivePanels();\n    _super.prototype.destroy.call(this);\n  };\n  BarSeriesPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"seriesGroup\\\">\\n                <ag-toggle-button ref=\\\"seriesTooltipsToggle\\\"></ag-toggle-button>\\n                <ag-slider ref=\\\"seriesStrokeWidthSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesLineOpacitySlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesFillOpacitySlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n  __decorate$Y([agGridCommunity.RefSelector('seriesGroup')], BarSeriesPanel.prototype, \"seriesGroup\", void 0);\n  __decorate$Y([agGridCommunity.RefSelector('seriesTooltipsToggle')], BarSeriesPanel.prototype, \"seriesTooltipsToggle\", void 0);\n  __decorate$Y([agGridCommunity.RefSelector('seriesStrokeWidthSlider')], BarSeriesPanel.prototype, \"seriesStrokeWidthSlider\", void 0);\n  __decorate$Y([agGridCommunity.RefSelector('seriesLineOpacitySlider')], BarSeriesPanel.prototype, \"seriesLineOpacitySlider\", void 0);\n  __decorate$Y([agGridCommunity.RefSelector('seriesFillOpacitySlider')], BarSeriesPanel.prototype, \"seriesFillOpacitySlider\", void 0);\n  __decorate$Y([agGridCommunity.Autowired('chartTranslator')], BarSeriesPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$Y([agGridCommunity.PostConstruct], BarSeriesPanel.prototype, \"init\", null);\n  return BarSeriesPanel;\n}(agGridCommunity.Component);\nvar __extends$1F = undefined && undefined.__extends || function () {\n  var _extendStatics106 = function extendStatics(d, b) {\n    _extendStatics106 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics106(d, b);\n  };\n  return function (d, b) {\n    _extendStatics106(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$Z = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar AxisTicksPanel = /** @class */function (_super) {\n  __extends$1F(AxisTicksPanel, _super);\n  function AxisTicksPanel(chartController) {\n    var _this = _super.call(this) || this;\n    _this.chartController = chartController;\n    return _this;\n  }\n  AxisTicksPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-sub-level',\n      direction: 'vertical',\n      suppressOpenCloseIcons: true\n    };\n    this.setTemplate(AxisTicksPanel.TEMPLATE, {\n      axisTicksGroup: groupParams\n    });\n    this.initAxisTicks();\n  };\n  AxisTicksPanel.prototype.initAxisTicks = function () {\n    var _this = this;\n    this.axisTicksGroup.setTitle(this.chartTranslator.translate(\"ticks\")).hideOpenCloseIcons(true).hideEnabledCheckbox(true);\n    this.axisTicksColorPicker.setLabel(this.chartTranslator.translate(\"color\")).setLabelWidth(\"flex\").setInputWidth(45).setValue(this.getChartProxy().getAxisProperty(\"tick.color\")).onValueChange(function (newColor) {\n      return _this.getChartProxy().setAxisProperty(\"tick.color\", newColor);\n    });\n    var initInput = function initInput(expression, input, label, maxValue) {\n      input.setLabel(label).setValue(_this.getChartProxy().getAxisProperty(expression)).setMaxValue(maxValue).setTextFieldWidth(45).onValueChange(function (newValue) {\n        return _this.getChartProxy().setAxisProperty(expression, newValue);\n      });\n    };\n    initInput(\"tick.width\", this.axisTicksWidthSlider, this.chartTranslator.translate(\"width\"), 10);\n    initInput(\"tick.size\", this.axisTicksSizeSlider, this.chartTranslator.translate(\"length\"), 30);\n  };\n  AxisTicksPanel.prototype.getChartProxy = function () {\n    return this.chartController.getChartProxy();\n  };\n  AxisTicksPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"axisTicksGroup\\\">\\n                <ag-color-picker ref=\\\"axisTicksColorPicker\\\"></ag-color-picker>\\n                <ag-slider ref=\\\"axisTicksWidthSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"axisTicksSizeSlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n  __decorate$Z([agGridCommunity.RefSelector('axisTicksGroup')], AxisTicksPanel.prototype, \"axisTicksGroup\", void 0);\n  __decorate$Z([agGridCommunity.RefSelector('axisTicksColorPicker')], AxisTicksPanel.prototype, \"axisTicksColorPicker\", void 0);\n  __decorate$Z([agGridCommunity.RefSelector('axisTicksWidthSlider')], AxisTicksPanel.prototype, \"axisTicksWidthSlider\", void 0);\n  __decorate$Z([agGridCommunity.RefSelector('axisTicksSizeSlider')], AxisTicksPanel.prototype, \"axisTicksSizeSlider\", void 0);\n  __decorate$Z([agGridCommunity.Autowired('chartTranslator')], AxisTicksPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$Z([agGridCommunity.PostConstruct], AxisTicksPanel.prototype, \"init\", null);\n  return AxisTicksPanel;\n}(agGridCommunity.Component);\nvar __extends$1G = undefined && undefined.__extends || function () {\n  var _extendStatics107 = function extendStatics(d, b) {\n    _extendStatics107 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics107(d, b);\n  };\n  return function (d, b) {\n    _extendStatics107(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$_ = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar AxisPanel = /** @class */function (_super) {\n  __extends$1G(AxisPanel, _super);\n  function AxisPanel(chartController) {\n    var _this = _super.call(this) || this;\n    _this.activePanels = [];\n    _this.chartController = chartController;\n    return _this;\n  }\n  AxisPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-top-level',\n      direction: 'vertical'\n    };\n    this.setTemplate(AxisPanel.TEMPLATE, {\n      axisGroup: groupParams\n    });\n    this.initAxis();\n    this.initAxisTicks();\n    this.initAxisLabels();\n  };\n  AxisPanel.prototype.initAxis = function () {\n    var _this = this;\n    var chartTranslator = this.chartTranslator;\n    this.axisGroup.setTitle(chartTranslator.translate(\"axis\")).toggleGroupExpand(false).hideEnabledCheckbox(true);\n    this.axisColorInput.setLabel(chartTranslator.translate(\"color\")).setLabelWidth(\"flex\").setInputWidth(45).setValue(this.getChartProxy().getAxisProperty(\"line.color\")).onValueChange(function (newColor) {\n      return _this.getChartProxy().setAxisProperty(\"line.color\", newColor);\n    });\n    this.axisLineWidthSlider.setLabel(chartTranslator.translate(\"thickness\")).setMaxValue(10).setTextFieldWidth(45).setValue(this.getChartProxy().getAxisProperty(\"line.width\")).onValueChange(function (newValue) {\n      return _this.getChartProxy().setAxisProperty(\"line.width\", newValue);\n    });\n    if (agGridCommunity._.includes(['line', 'scatter', 'bubble'], this.chartController.getChartType()) && !this.chartController.isGrouping()) {\n      var options_1 = [{\n        value: '',\n        text: chartTranslator.translate('automatic')\n      }];\n      ['category', 'time', 'number'].forEach(function (type) {\n        options_1.push({\n          value: type,\n          text: chartTranslator.translate(type)\n        });\n      });\n      this.xAxisTypeSelect.setLabel(chartTranslator.translate('xType')).setLabelWidth('flex').addOptions(options_1).setValue(this.getChartProxy().getChartOption('xAxis.type') || '').onValueChange(function (newValue) {\n        var chartProxy = _this.getChartProxy();\n        chartProxy.setChartOption('xAxis.type', newValue.length && newValue);\n        _this.chartController.updateForDataChange();\n      });\n    } else {\n      this.xAxisTypeSelect.setDisplayed(false);\n    }\n  };\n  AxisPanel.prototype.initAxisTicks = function () {\n    var axisTicksComp = this.createBean(new AxisTicksPanel(this.chartController));\n    this.axisGroup.addItem(axisTicksComp);\n    this.activePanels.push(axisTicksComp);\n  };\n  AxisPanel.prototype.initAxisLabels = function () {\n    var _this = this;\n    var chartProxy = this.getChartProxy();\n    var initialFont = {\n      family: chartProxy.getAxisProperty(\"label.fontFamily\"),\n      style: chartProxy.getAxisProperty(\"label.fontStyle\"),\n      weight: chartProxy.getAxisProperty(\"label.fontWeight\"),\n      size: chartProxy.getAxisProperty(\"label.fontSize\"),\n      color: chartProxy.getAxisProperty(\"label.color\")\n    };\n    var setFont = function setFont(font) {\n      var chartProxy = _this.getChartProxy();\n      if (font.family) {\n        chartProxy.setAxisProperty(\"label.fontFamily\", font.family);\n      }\n      if (font.weight) {\n        chartProxy.setAxisProperty(\"label.fontWeight\", font.weight);\n      }\n      if (font.style) {\n        chartProxy.setAxisProperty(\"label.fontStyle\", font.style);\n      }\n      if (font.size) {\n        chartProxy.setAxisProperty(\"label.fontSize\", font.size);\n      }\n      if (font.color) {\n        chartProxy.setAxisProperty(\"label.color\", font.color);\n      }\n      chartProxy.getChart().performLayout();\n    };\n    var params = {\n      enabled: true,\n      suppressEnabledCheckbox: true,\n      initialFont: initialFont,\n      setFont: setFont\n    };\n    var labelPanelComp = this.createBean(new FontPanel(params));\n    this.axisGroup.addItem(labelPanelComp);\n    this.activePanels.push(labelPanelComp);\n    this.addAdditionalLabelComps(labelPanelComp);\n  };\n  AxisPanel.prototype.addAdditionalLabelComps = function (labelPanelComp) {\n    var _this = this;\n    var createAngleComp = function createAngleComp(label, initialValue, updateFunc) {\n      var rotationInput = _this.createBean(new agGridCommunity.AgAngleSelect().setLabel(label).setLabelWidth(\"flex\").setValue(initialValue || 0).onValueChange(updateFunc));\n      labelPanelComp.addCompToPanel(rotationInput);\n    };\n    var degreesSymbol = String.fromCharCode(176);\n    var createLabelUpdateFunc = function createLabelUpdateFunc(axisPosition) {\n      return function (newValue) {\n        var chartProxy = _this.getChartProxy();\n        var chart = chartProxy.getChart();\n        var axis = find(chart.axes, function (axis) {\n          return axis.position === axisPosition;\n        });\n        if (axis) {\n          axis.label.rotation = newValue;\n          if (axis.position === ChartAxisPosition.Bottom) ;else if (axis.position === ChartAxisPosition.Left) ;\n          chart.performLayout();\n        }\n      };\n    };\n    var xRotationLabel = this.chartTranslator.translate(\"xRotation\") + \" \" + degreesSymbol;\n    var yRotationLabel = this.chartTranslator.translate(\"yRotation\") + \" \" + degreesSymbol;\n    createAngleComp(xRotationLabel, this.getChartProxy().getChartOption(\"xAxis.label.rotation\"), createLabelUpdateFunc(ChartAxisPosition.Bottom));\n    createAngleComp(yRotationLabel, this.getChartProxy().getChartOption(\"yAxis.label.rotation\"), createLabelUpdateFunc(ChartAxisPosition.Left));\n    var labelPaddingSlider = this.createBean(new agGridCommunity.AgSlider());\n    labelPaddingSlider.setLabel(this.chartTranslator.translate(\"padding\")).setValue(this.getChartProxy().getAxisProperty(\"label.padding\")).setMaxValue(30).setTextFieldWidth(45).onValueChange(function (newValue) {\n      return _this.getChartProxy().setAxisProperty(\"label.padding\", newValue);\n    });\n    labelPanelComp.addCompToPanel(labelPaddingSlider);\n  };\n  AxisPanel.prototype.destroyActivePanels = function () {\n    var _this = this;\n    this.activePanels.forEach(function (panel) {\n      agGridCommunity._.removeFromParent(panel.getGui());\n      _this.destroyBean(panel);\n    });\n  };\n  AxisPanel.prototype.getChartProxy = function () {\n    return this.chartController.getChartProxy();\n  };\n  AxisPanel.prototype.destroy = function () {\n    this.destroyActivePanels();\n    _super.prototype.destroy.call(this);\n  };\n  AxisPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"axisGroup\\\">\\n                <ag-color-picker ref=\\\"axisColorInput\\\"></ag-color-picker>\\n                <ag-slider ref=\\\"axisLineWidthSlider\\\"></ag-slider>\\n                <ag-select ref=\\\"xAxisTypeSelect\\\"></ag-select>\\n            </ag-group-component>\\n        </div>\";\n  __decorate$_([agGridCommunity.RefSelector('axisGroup')], AxisPanel.prototype, \"axisGroup\", void 0);\n  __decorate$_([agGridCommunity.RefSelector('axisColorInput')], AxisPanel.prototype, \"axisColorInput\", void 0);\n  __decorate$_([agGridCommunity.RefSelector('axisLineWidthSlider')], AxisPanel.prototype, \"axisLineWidthSlider\", void 0);\n  __decorate$_([agGridCommunity.RefSelector('xAxisTypeSelect')], AxisPanel.prototype, \"xAxisTypeSelect\", void 0);\n  __decorate$_([agGridCommunity.Autowired('chartTranslator')], AxisPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$_([agGridCommunity.PostConstruct], AxisPanel.prototype, \"init\", null);\n  return AxisPanel;\n}(agGridCommunity.Component);\nvar __extends$1H = undefined && undefined.__extends || function () {\n  var _extendStatics108 = function extendStatics(d, b) {\n    _extendStatics108 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics108(d, b);\n  };\n  return function (d, b) {\n    _extendStatics108(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$$ = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar NavigatorPanel = /** @class */function (_super) {\n  __extends$1H(NavigatorPanel, _super);\n  function NavigatorPanel(chartController) {\n    var _this = _super.call(this) || this;\n    _this.activePanels = [];\n    _this.chartController = chartController;\n    return _this;\n  }\n  NavigatorPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-top-level',\n      direction: 'vertical'\n    };\n    this.setTemplate(NavigatorPanel.TEMPLATE, {\n      navigatorGroup: groupParams\n    });\n    this.initNavigator();\n  };\n  NavigatorPanel.prototype.initNavigator = function () {\n    var _this = this;\n    var chartTranslator = this.chartTranslator;\n    this.navigatorGroup.setTitle(chartTranslator.translate(\"navigator\")).toggleGroupExpand(false).hideEnabledCheckbox(false).setEnabled(this.getChartProxy().getChartOption(\"navigator.enabled\") || false).onEnableChange(function (enabled) {\n      _this.getChartProxy().setChartOption(\"navigator.enabled\", enabled);\n      _this.navigatorGroup.toggleGroupExpand(true);\n    });\n    this.navigatorHeightSlider.setLabel(chartTranslator.translate(\"height\")).setMinValue(10).setMaxValue(60).setTextFieldWidth(45).setValue(String(this.getChartProxy().getChartOption(\"navigator.height\") || \"30\")).onValueChange(function (height) {\n      return _this.getChartProxy().setChartOption(\"navigator.height\", height);\n    });\n  };\n  NavigatorPanel.prototype.destroyActivePanels = function () {\n    var _this = this;\n    this.activePanels.forEach(function (panel) {\n      agGridCommunity._.removeFromParent(panel.getGui());\n      _this.destroyBean(panel);\n    });\n  };\n  NavigatorPanel.prototype.getChartProxy = function () {\n    return this.chartController.getChartProxy();\n  };\n  NavigatorPanel.prototype.destroy = function () {\n    this.destroyActivePanels();\n    _super.prototype.destroy.call(this);\n  };\n  NavigatorPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"navigatorGroup\\\">\\n                <ag-slider ref=\\\"navigatorHeightSlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n  __decorate$$([agGridCommunity.RefSelector('navigatorGroup')], NavigatorPanel.prototype, \"navigatorGroup\", void 0);\n  __decorate$$([agGridCommunity.RefSelector('navigatorHeightSlider')], NavigatorPanel.prototype, \"navigatorHeightSlider\", void 0);\n  __decorate$$([agGridCommunity.Autowired('chartTranslator')], NavigatorPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$$([agGridCommunity.PostConstruct], NavigatorPanel.prototype, \"init\", null);\n  return NavigatorPanel;\n}(agGridCommunity.Component);\n\n// deepMerge\nfunction emptyTarget$1(value) {\n  return Array.isArray(value) ? [] : {};\n}\nfunction cloneUnlessOtherwiseSpecified$1(value, options) {\n  return options.clone !== false && options.isMergeableObject(value) ? deepMerge$1(emptyTarget$1(value), value, options) : value;\n}\nfunction defaultArrayMerge$1(target, source, options) {\n  return target.concat(source).map(function (element) {\n    return cloneUnlessOtherwiseSpecified$1(element, options);\n  });\n}\nfunction getMergeFunction$1(key, options) {\n  if (!options.customMerge) {\n    return deepMerge$1;\n  }\n  var customMerge = options.customMerge(key);\n  return typeof customMerge === 'function' ? customMerge : deepMerge$1;\n}\nfunction getEnumerableOwnPropertySymbols$1(target) {\n  return Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(target).filter(function (symbol) {\n    return target.propertyIsEnumerable(symbol);\n  }) : [];\n}\nfunction getKeys$1(target) {\n  return Object.keys(target).concat(getEnumerableOwnPropertySymbols$1(target));\n}\nfunction propertyIsOnObject$1(object, property) {\n  try {\n    return property in object;\n  } catch (_) {\n    return false;\n  }\n}\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe$1(target, key) {\n  return propertyIsOnObject$1(target, key) // Properties are safe to merge if they don't exist in the target yet,\n  && !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n  && Object.propertyIsEnumerable.call(target, key)); // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject$1(target, source, options) {\n  var destination = {};\n  if (options.isMergeableObject(target)) {\n    getKeys$1(target).forEach(function (key) {\n      destination[key] = cloneUnlessOtherwiseSpecified$1(target[key], options);\n    });\n  }\n  getKeys$1(source).forEach(function (key) {\n    if (propertyIsUnsafe$1(target, key)) {\n      return;\n    }\n    if (propertyIsOnObject$1(target, key) && options.isMergeableObject(source[key])) {\n      destination[key] = getMergeFunction$1(key, options)(target[key], source[key], options);\n    } else {\n      destination[key] = cloneUnlessOtherwiseSpecified$1(source[key], options);\n    }\n  });\n  return destination;\n}\nfunction defaultIsMergeableObject$1(value) {\n  return isNonNullObject$1(value) && !isSpecial$1(value);\n}\nfunction isNonNullObject$1(value) {\n  return !!value && typeof value === 'object';\n}\nfunction isSpecial$1(value) {\n  var stringValue = Object.prototype.toString.call(value);\n  return stringValue === '[object RegExp]' || stringValue === '[object Date]';\n}\nfunction deepMerge$1(target, source, options) {\n  options = options || {};\n  options.arrayMerge = options.arrayMerge || defaultArrayMerge$1;\n  options.isMergeableObject = options.isMergeableObject || defaultIsMergeableObject$1;\n  // cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n  // implementations can use it. The caller may not replace it.\n  options.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified$1;\n  var sourceIsArray = Array.isArray(source);\n  var targetIsArray = Array.isArray(target);\n  var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n  if (!sourceAndTargetTypesMatch) {\n    return cloneUnlessOtherwiseSpecified$1(source, options);\n  } else if (sourceIsArray) {\n    return options.arrayMerge(target, source, options);\n  } else {\n    return mergeObject$1(target, source, options);\n  }\n}\nvar __assign$7 = undefined && undefined.__assign || function () {\n  __assign$7 = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$7.apply(this, arguments);\n};\nvar ChartProxy = /** @class */function () {\n  function ChartProxy(chartProxyParams) {\n    var _this = this;\n    this.chartProxyParams = chartProxyParams;\n    this.isDarkTheme = function () {\n      return _this.chartProxyParams.isDarkTheme();\n    };\n    this.getFontColor = function () {\n      return _this.isDarkTheme() ? 'rgb(221, 221, 221)' : 'rgb(87, 87, 87)';\n    };\n    this.getAxisGridColor = function () {\n      return _this.isDarkTheme() ? 'rgb(100, 100, 100)' : 'rgb(219, 219, 219)';\n    };\n    this.getBackgroundColor = function () {\n      return _this.isDarkTheme() ? '#2d3436' : 'white';\n    };\n    this.getChartPaddingOption = function (property) {\n      return _this.chartOptions.padding ? \"\" + _this.chartOptions.padding[property] : '';\n    };\n    this.getShadowEnabled = function () {\n      return !!_this.getShadowProperty('enabled');\n    };\n    this.chartId = chartProxyParams.chartId;\n    this.chartType = chartProxyParams.chartType;\n    this.eventService = chartProxyParams.eventService;\n    this.gridApi = chartProxyParams.gridApi;\n    this.columnApi = chartProxyParams.columnApi;\n  }\n  ChartProxy.prototype.recreateChart = function (options) {\n    if (this.chart) {\n      this.destroyChart();\n    }\n    this.chart = this.createChart(options);\n  };\n  ChartProxy.prototype.getChart = function () {\n    return this.chart;\n  };\n  ChartProxy.prototype.downloadChart = function () {\n    var chart = this.chart;\n    var fileName = chart.title ? chart.title.text : 'chart';\n    chart.scene.download(fileName);\n  };\n  ChartProxy.prototype.getChartImageDataURL = function (type) {\n    return this.chart.scene.getDataURL(type);\n  };\n  ChartProxy.prototype.initChartOptions = function () {\n    this.initChartTheme();\n    this.chartOptions = this.getDefaultOptionsFromTheme(this.chartTheme);\n    // allow users to override options before they are applied\n    var processChartOptions = this.chartProxyParams.processChartOptions;\n    if (processChartOptions) {\n      var originalOptions = deepMerge$1({}, this.chartOptions);\n      var params = {\n        type: this.chartType,\n        options: this.chartOptions\n      };\n      var overriddenOptions = processChartOptions(params);\n      // ensure we have everything we need, in case the processing removed necessary options\n      var safeOptions = this.getDefaultOptions();\n      agGridCommunity._.mergeDeep(safeOptions, overriddenOptions, false);\n      this.overridePalette(originalOptions, safeOptions);\n      this.chartOptions = safeOptions;\n    }\n  };\n  ChartProxy.prototype.paletteOverridden = function (originalOptions, overriddenOptions) {\n    return !agGridCommunity._.areEqual(originalOptions.seriesDefaults.fill.colors, overriddenOptions.seriesDefaults.fill.colors) || !agGridCommunity._.areEqual(originalOptions.seriesDefaults.stroke.colors, overriddenOptions.seriesDefaults.stroke.colors);\n  };\n  ChartProxy.prototype.initChartTheme = function () {\n    var _this = this;\n    var themeName = this.getSelectedTheme();\n    var stockTheme = this.isStockTheme(themeName);\n    var gridOptionsThemeOverrides = this.chartProxyParams.getGridOptionsChartThemeOverrides();\n    var apiThemeOverrides = this.chartProxyParams.apiChartThemeOverrides;\n    if (gridOptionsThemeOverrides || apiThemeOverrides) {\n      var themeOverrides_1 = {\n        overrides: this.mergeThemeOverrides(gridOptionsThemeOverrides, apiThemeOverrides)\n      };\n      var getCustomTheme = function getCustomTheme() {\n        return deepMerge$1(_this.lookupCustomChartTheme(themeName), themeOverrides_1);\n      };\n      var theme = stockTheme ? __assign$7({\n        baseTheme: themeName\n      }, themeOverrides_1) : getCustomTheme();\n      this.chartTheme = getChartTheme(theme);\n    } else {\n      this.chartTheme = getChartTheme(stockTheme ? themeName : this.lookupCustomChartTheme(themeName));\n    }\n  };\n  ChartProxy.prototype.lookupCustomChartTheme = function (name) {\n    var customChartThemes = this.chartProxyParams.customChartThemes;\n    var customChartTheme = customChartThemes && customChartThemes[name];\n    if (!customChartTheme) {\n      console.warn(\"ag-Grid: no stock theme exists with the name '\" + name + \"' and no \" + \"custom chart theme with that name was supplied to 'customChartThemes'\");\n    }\n    return customChartTheme;\n  };\n  ChartProxy.prototype.isStockTheme = function (themeName) {\n    return agGridCommunity._.includes(Object.keys(themes), themeName);\n  };\n  ChartProxy.prototype.mergeThemeOverrides = function (gridOptionsThemeOverrides, apiThemeOverrides) {\n    if (!gridOptionsThemeOverrides) return apiThemeOverrides;\n    if (!apiThemeOverrides) return gridOptionsThemeOverrides;\n    return deepMerge$1(gridOptionsThemeOverrides, apiThemeOverrides);\n  };\n  ChartProxy.prototype.integratedToStandaloneChartType = function (integratedChartType) {\n    switch (integratedChartType) {\n      case agGridCommunity.ChartType.GroupedBar:\n      case agGridCommunity.ChartType.StackedBar:\n      case agGridCommunity.ChartType.NormalizedBar:\n        return 'bar';\n      case agGridCommunity.ChartType.GroupedColumn:\n      case agGridCommunity.ChartType.StackedColumn:\n      case agGridCommunity.ChartType.NormalizedColumn:\n        return 'column';\n      case agGridCommunity.ChartType.Line:\n        return 'line';\n      case agGridCommunity.ChartType.Area:\n      case agGridCommunity.ChartType.StackedArea:\n      case agGridCommunity.ChartType.NormalizedArea:\n        return 'area';\n      case agGridCommunity.ChartType.Scatter:\n      case agGridCommunity.ChartType.Bubble:\n        return 'scatter';\n      case agGridCommunity.ChartType.Histogram:\n        return 'histogram';\n      case agGridCommunity.ChartType.Pie:\n      case agGridCommunity.ChartType.Doughnut:\n        return 'pie';\n      default:\n        return 'cartesian';\n    }\n  };\n  ChartProxy.prototype.overridePalette = function (originalOptions, chartOptions) {\n    if (!this.chartProxyParams.allowPaletteOverride) {\n      return;\n    }\n    if (!this.paletteOverridden(originalOptions, chartOptions)) {\n      return;\n    }\n    var seriesDefaults = chartOptions.seriesDefaults;\n    var fillsOverridden = seriesDefaults.fill.colors;\n    var strokesOverridden = seriesDefaults.stroke.colors;\n    if (fillsOverridden || strokesOverridden) {\n      // due to series default refactoring it's possible for fills and strokes to have undefined values\n      var invalidFills = agGridCommunity._.includes(fillsOverridden, undefined);\n      var invalidStrokes = agGridCommunity._.includes(strokesOverridden, undefined);\n      if (invalidFills || invalidStrokes) return;\n      // both fills and strokes will need to be overridden\n      this.customPalette = {\n        fills: fillsOverridden,\n        strokes: strokesOverridden\n      };\n    }\n  };\n  ChartProxy.prototype.getStandaloneChartType = function () {\n    return this.integratedToStandaloneChartType(this.chartType);\n  };\n  // Merges theme defaults into default options. To be overridden in subclasses.\n  ChartProxy.prototype.getDefaultOptionsFromTheme = function (theme) {\n    var options = {};\n    var standaloneChartType = this.getStandaloneChartType();\n    options.title = theme.getConfig(standaloneChartType + '.title');\n    options.subtitle = theme.getConfig(standaloneChartType + '.subtitle');\n    options.background = theme.getConfig(standaloneChartType + '.background');\n    options.legend = theme.getConfig(standaloneChartType + '.legend');\n    options.navigator = theme.getConfig(standaloneChartType + '.navigator');\n    options.tooltipClass = theme.getConfig(standaloneChartType + '.tooltipClass');\n    options.tooltipTracking = theme.getConfig(standaloneChartType + '.tooltipTracking');\n    options.listeners = theme.getConfig(standaloneChartType + '.listeners');\n    options.padding = theme.getConfig(standaloneChartType + '.padding');\n    return options;\n  };\n  ChartProxy.prototype.getSelectedTheme = function () {\n    var chartThemeName = this.chartProxyParams.getChartThemeName();\n    var availableThemes = this.chartProxyParams.getChartThemes();\n    if (!agGridCommunity._.includes(availableThemes, chartThemeName)) {\n      chartThemeName = availableThemes[0];\n    }\n    return chartThemeName;\n  };\n  ChartProxy.prototype.getChartOptions = function () {\n    return this.chartOptions;\n  };\n  ChartProxy.prototype.getCustomPalette = function () {\n    return this.customPalette;\n  };\n  ChartProxy.prototype.getChartOption = function (expression) {\n    return agGridCommunity._.get(this.chartOptions, expression, undefined);\n  };\n  ChartProxy.prototype.setChartOption = function (expression, value) {\n    if (agGridCommunity._.get(this.chartOptions, expression, undefined) === value) {\n      // option is already set to the specified value\n      return;\n    }\n    agGridCommunity._.set(this.chartOptions, expression, value);\n    var mappings = {\n      'legend.item.marker.strokeWidth': 'legend.strokeWidth',\n      'legend.item.marker.size': 'legend.markerSize',\n      'legend.item.marker.padding': 'legend.itemSpacing',\n      'legend.item.label.fontFamily': 'legend.fontFamily',\n      'legend.item.label.fontStyle': 'legend.fontStyle',\n      'legend.item.label.fontWeight': 'legend.fontWeight',\n      'legend.item.label.fontSize': 'legend.fontSize',\n      'legend.item.label.color': 'legend.color',\n      'legend.item.paddingX': 'legend.layoutHorizontalSpacing',\n      'legend.item.paddingY': 'legend.layoutVerticalSpacing'\n    };\n    agGridCommunity._.set(this.chart, mappings[expression] || expression, value);\n    this.raiseChartOptionsChangedEvent();\n  };\n  ChartProxy.prototype.getSeriesOption = function (expression) {\n    return agGridCommunity._.get(this.chartOptions.seriesDefaults, expression, undefined);\n  };\n  ChartProxy.prototype.setSeriesOption = function (expression, value) {\n    if (agGridCommunity._.get(this.chartOptions.seriesDefaults, expression, undefined) === value) {\n      // option is already set to the specified value\n      return;\n    }\n    agGridCommunity._.set(this.chartOptions.seriesDefaults, expression, value);\n    var mappings = {\n      'stroke.width': 'strokeWidth',\n      'stroke.opacity': 'strokeOpacity',\n      'fill.opacity': 'fillOpacity',\n      'tooltip.enabled': 'tooltipEnabled',\n      'callout.colors': 'calloutColors'\n    };\n    var series = this.chart.series;\n    series.forEach(function (s) {\n      return agGridCommunity._.set(s, mappings[expression] || expression, value);\n    });\n    this.raiseChartOptionsChangedEvent();\n  };\n  ChartProxy.prototype.setTitleOption = function (property, value) {\n    if (agGridCommunity._.get(this.chartOptions.title, property, undefined) === value) {\n      // option is already set to the specified value\n      return;\n    }\n    this.chartOptions.title[property] = value;\n    if (!this.chart.title) {\n      this.chart.title = {};\n    }\n    this.chart.title[property] = value;\n    if (property === 'text') {\n      this.setTitleOption('enabled', agGridCommunity._.exists(value));\n    }\n    this.raiseChartOptionsChangedEvent();\n  };\n  ChartProxy.prototype.getTitleOption = function (property) {\n    return this.chartOptions.title[property];\n  };\n  ChartProxy.prototype.setChartPaddingOption = function (property, value) {\n    var padding = this.chartOptions.padding;\n    if (agGridCommunity._.get(padding, property, undefined) === value) {\n      // option is already set to the specified value\n      return;\n    }\n    if (!padding) {\n      padding = this.chartOptions.padding = {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      };\n      this.chart.padding = new Padding(0);\n    }\n    padding[property] = value;\n    this.chart.padding[property] = value;\n    this.chart.performLayout();\n    this.raiseChartOptionsChangedEvent();\n  };\n  ChartProxy.prototype.getShadowProperty = function (property) {\n    var seriesDefaults = this.chartOptions.seriesDefaults;\n    return seriesDefaults.shadow ? seriesDefaults.shadow[property] : '';\n  };\n  ChartProxy.prototype.setShadowProperty = function (property, value) {\n    var seriesDefaults = this.chartOptions.seriesDefaults;\n    if (agGridCommunity._.get(seriesDefaults.shadow, property, undefined) === value) {\n      // option is already set to the specified value\n      return;\n    }\n    if (!seriesDefaults.shadow) {\n      seriesDefaults.shadow = {\n        enabled: false,\n        blur: 0,\n        xOffset: 0,\n        yOffset: 0,\n        color: 'rgba(0,0,0,0.5)'\n      };\n    }\n    seriesDefaults.shadow[property] = value;\n    var series = this.getChart().series;\n    series.forEach(function (s) {\n      if (!s.shadow) {\n        var shadow = new DropShadow();\n        shadow.enabled = false;\n        shadow.blur = 0;\n        shadow.xOffset = 0;\n        shadow.yOffset = 0;\n        shadow.color = 'rgba(0,0,0,0.5)';\n        s.shadow = shadow;\n      }\n      s.shadow[property] = value;\n    });\n    this.raiseChartOptionsChangedEvent();\n  };\n  ChartProxy.prototype.raiseChartOptionsChangedEvent = function () {\n    var event = Object.freeze({\n      type: agGridCommunity.Events.EVENT_CHART_OPTIONS_CHANGED,\n      chartId: this.chartId,\n      chartType: this.chartType,\n      chartThemeName: this.chartProxyParams.getChartThemeName(),\n      chartOptions: this.chartOptions,\n      api: this.gridApi,\n      columnApi: this.columnApi\n    });\n    this.eventService.dispatchEvent(event);\n  };\n  ChartProxy.prototype.getDefaultFontOptions = function () {\n    return {\n      fontStyle: 'normal',\n      fontWeight: 'normal',\n      fontSize: 12,\n      fontFamily: 'Verdana, sans-serif',\n      color: this.getFontColor()\n    };\n  };\n  ChartProxy.prototype.getDefaultDropShadowOptions = function () {\n    return {\n      enabled: false,\n      blur: 5,\n      xOffset: 3,\n      yOffset: 3,\n      color: 'rgba(0, 0, 0, 0.5)'\n    };\n  };\n  ChartProxy.prototype.getPredefinedPalette = function () {\n    return this.chartTheme.palette;\n  };\n  ChartProxy.prototype.getPalette = function () {\n    return this.customPalette || this.chartTheme.palette;\n  };\n  //TODO remove all 'integrated' default chart options\n  ChartProxy.prototype.getDefaultChartOptions = function () {\n    return {\n      background: {},\n      padding: {},\n      title: {},\n      subtitle: {},\n      legend: {},\n      navigator: {},\n      seriesDefaults: {},\n      listeners: {}\n    };\n  };\n  ChartProxy.prototype.transformData = function (data, categoryKey) {\n    if (this.chart.axes.filter(function (a) {\n      return a instanceof CategoryAxis;\n    }).length < 1) {\n      return data;\n    }\n    // replace the values for the selected category with a complex object to allow for duplicated categories\n    return data.map(function (d, index) {\n      var value = d[categoryKey];\n      var valueString = value && value.toString ? value.toString() : '';\n      var datum = __assign$7({}, d);\n      datum[categoryKey] = {\n        id: index,\n        value: value,\n        toString: function toString() {\n          return valueString;\n        }\n      };\n      return datum;\n    });\n  };\n  ChartProxy.prototype.destroy = function () {\n    this.destroyChart();\n  };\n  ChartProxy.prototype.destroyChart = function () {\n    if (this.chart) {\n      this.chart.destroy();\n      this.chart = undefined;\n    }\n  };\n  return ChartProxy;\n}();\nfunction isDate(value) {\n  return value instanceof Date;\n}\nvar __extends$1I = undefined && undefined.__extends || function () {\n  var _extendStatics109 = function extendStatics(d, b) {\n    _extendStatics109 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics109(d, b);\n  };\n  return function (d, b) {\n    _extendStatics109(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign$8 = undefined && undefined.__assign || function () {\n  __assign$8 = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$8.apply(this, arguments);\n};\nvar CartesianChartProxy = /** @class */function (_super) {\n  __extends$1I(CartesianChartProxy, _super);\n  function CartesianChartProxy(params) {\n    var _this = _super.call(this, params) || this;\n    _this.axisTypeToClassMap = {\n      number: NumberAxis,\n      category: CategoryAxis,\n      groupedCategory: GroupedCategoryAxis,\n      time: TimeAxis\n    };\n    return _this;\n  }\n  CartesianChartProxy.prototype.getDefaultOptionsFromTheme = function (theme) {\n    var _a;\n    var options = _super.prototype.getDefaultOptionsFromTheme.call(this, theme);\n    var standaloneChartType = this.getStandaloneChartType();\n    var flipXY = standaloneChartType === 'bar';\n    var xAxisType = 'category';\n    var yAxisType = 'number';\n    if (flipXY) {\n      _a = [yAxisType, xAxisType], xAxisType = _a[0], yAxisType = _a[1];\n    }\n    options.xAxis = theme.getConfig(standaloneChartType + '.axes.' + xAxisType);\n    options.yAxis = theme.getConfig(standaloneChartType + '.axes.' + yAxisType);\n    return options;\n  };\n  CartesianChartProxy.prototype.getAxisProperty = function (expression) {\n    return agGridCommunity._.get(this.chartOptions.xAxis, expression, undefined);\n  };\n  CartesianChartProxy.prototype.setAxisProperty = function (expression, value) {\n    agGridCommunity._.set(this.chartOptions.xAxis, expression, value);\n    agGridCommunity._.set(this.chartOptions.yAxis, expression, value);\n    var chart = this.chart;\n    this.chart.axes.forEach(function (axis) {\n      return agGridCommunity._.set(axis, expression, value);\n    });\n    chart.performLayout();\n    this.raiseChartOptionsChangedEvent();\n  };\n  CartesianChartProxy.prototype.updateLabelRotation = function (categoryId, isHorizontalChart, axisType) {\n    if (isHorizontalChart === void 0) {\n      isHorizontalChart = false;\n    }\n    if (axisType === void 0) {\n      axisType = 'category';\n    }\n    var labelRotation = 0;\n    var axisKey = isHorizontalChart ? 'yAxis' : 'xAxis';\n    var themeOverrides = this.chartProxyParams.getGridOptionsChartThemeOverrides();\n    var chartType = this.getStandaloneChartType();\n    var userThemeOverrideRotation = undefined;\n    var commonRotation = agGridCommunity._.get(themeOverrides, \"common.axes.\" + axisType + \".label.rotation\", undefined);\n    var cartesianRotation = agGridCommunity._.get(themeOverrides, \"cartesian.axes.\" + axisType + \".label.rotation\", undefined);\n    var chartTypeRotation = agGridCommunity._.get(themeOverrides, chartType + \".axes.\" + axisType + \".label.rotation\", undefined);\n    if (typeof chartTypeRotation === 'number' && isFinite(chartTypeRotation)) {\n      userThemeOverrideRotation = chartTypeRotation;\n    } else if (typeof cartesianRotation === 'number' && isFinite(cartesianRotation)) {\n      userThemeOverrideRotation = cartesianRotation;\n    } else if (typeof commonRotation === 'number' && isFinite(commonRotation)) {\n      userThemeOverrideRotation = commonRotation;\n    }\n    if (categoryId !== ChartDataModel.DEFAULT_CATEGORY && !this.chartProxyParams.grouping) {\n      var label = this.chartOptions[axisKey].label;\n      if (label) {\n        if (userThemeOverrideRotation !== undefined) {\n          labelRotation = userThemeOverrideRotation;\n        } else {\n          labelRotation = label.rotation || 335;\n        }\n      }\n    }\n    var axisPosition = isHorizontalChart ? ChartAxisPosition.Left : ChartAxisPosition.Bottom;\n    var axis = find(this.chart.axes, function (axis) {\n      return axis.position === axisPosition;\n    });\n    if (axis) {\n      axis.label.rotation = labelRotation;\n    }\n  };\n  CartesianChartProxy.prototype.getDefaultAxisOptions = function () {\n    var fontOptions = this.getDefaultFontOptions();\n    var stroke = this.getAxisGridColor();\n    var axisColor = \"rgba(195, 195, 195, 1)\";\n    return {\n      title: __assign$8(__assign$8({}, fontOptions), {\n        enabled: false,\n        fontSize: 14\n      }),\n      line: {\n        color: axisColor,\n        width: 1\n      },\n      tick: {\n        color: axisColor,\n        size: 6,\n        width: 1\n      },\n      label: __assign$8(__assign$8({}, fontOptions), {\n        padding: 5,\n        rotation: 0\n      }),\n      gridStyle: [{\n        stroke: stroke,\n        lineDash: [4, 2]\n      }]\n    };\n  };\n  CartesianChartProxy.prototype.getDefaultCartesianChartOptions = function () {\n    var options = this.getDefaultChartOptions();\n    options.xAxis = this.getDefaultAxisOptions();\n    options.yAxis = this.getDefaultAxisOptions();\n    return options;\n  };\n  CartesianChartProxy.prototype.getAxisClass = function (axisType) {\n    return this.axisTypeToClassMap[axisType];\n  };\n  CartesianChartProxy.prototype.updateAxes = function (baseAxisType, isHorizontalChart) {\n    if (baseAxisType === void 0) {\n      baseAxisType = 'category';\n    }\n    if (isHorizontalChart === void 0) {\n      isHorizontalChart = false;\n    }\n    var baseAxis = isHorizontalChart ? this.getYAxis() : this.getXAxis();\n    if (!baseAxis) {\n      return;\n    }\n    if (this.chartProxyParams.grouping) {\n      if (!(baseAxis instanceof GroupedCategoryAxis)) {\n        this.recreateChart();\n      }\n      return;\n    }\n    var axisClass = this.axisTypeToClassMap[baseAxisType];\n    if (baseAxis instanceof axisClass) {\n      return;\n    }\n    var options = this.chartOptions;\n    if (isHorizontalChart && !options.yAxis.type) {\n      options = __assign$8(__assign$8({}, options), {\n        yAxis: __assign$8({\n          type: baseAxisType\n        }, options.yAxis)\n      });\n    } else if (!isHorizontalChart && !options.xAxis.type) {\n      options = __assign$8(__assign$8({}, options), {\n        xAxis: __assign$8({\n          type: baseAxisType\n        }, options.xAxis)\n      });\n    }\n    this.recreateChart(options);\n  };\n  CartesianChartProxy.prototype.isTimeAxis = function (params) {\n    if (params.category && params.category.chartDataType) {\n      return params.category.chartDataType === 'time';\n    }\n    var testDatum = params.data[0];\n    var testValue = testDatum && testDatum[params.category.id];\n    return isDate(testValue);\n  };\n  CartesianChartProxy.prototype.getXAxisDefaults = function (xAxisType, options) {\n    if (xAxisType === 'time') {\n      return this.chartTheme.getConfig(this.getStandaloneChartType() + '.axes.' + 'time');\n    }\n    return options.xAxis;\n  };\n  CartesianChartProxy.prototype.getXAxis = function () {\n    return find(this.chart.axes, function (a) {\n      return a.position === ChartAxisPosition.Bottom;\n    });\n  };\n  CartesianChartProxy.prototype.getYAxis = function () {\n    return find(this.chart.axes, function (a) {\n      return a.position === ChartAxisPosition.Left;\n    });\n  };\n  return CartesianChartProxy;\n}(ChartProxy);\nvar __extends$1J = undefined && undefined.__extends || function () {\n  var _extendStatics110 = function extendStatics(d, b) {\n    _extendStatics110 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics110(d, b);\n  };\n  return function (d, b) {\n    _extendStatics110(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign$9 = undefined && undefined.__assign || function () {\n  __assign$9 = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$9.apply(this, arguments);\n};\nvar ScatterChartProxy = /** @class */function (_super) {\n  __extends$1J(ScatterChartProxy, _super);\n  function ScatterChartProxy(params) {\n    var _this = _super.call(this, params) || this;\n    _this.getMarkersEnabled = function () {\n      return true;\n    }; // markers are always enabled on scatter charts\n    _this.initChartOptions();\n    _this.recreateChart();\n    return _this;\n  }\n  ScatterChartProxy.prototype.getDefaultOptionsFromTheme = function (theme) {\n    var options = _super.prototype.getDefaultOptionsFromTheme.call(this, theme);\n    var seriesDefaults = theme.getConfig('scatter.series.scatter');\n    options.seriesDefaults = {\n      tooltip: {\n        enabled: seriesDefaults.tooltipEnabled,\n        renderer: seriesDefaults.tooltipRenderer\n      },\n      fill: {\n        colors: theme.palette.fills,\n        opacity: seriesDefaults.fillOpacity\n      },\n      stroke: {\n        colors: theme.palette.strokes,\n        opacity: seriesDefaults.strokeOpacity,\n        width: seriesDefaults.strokeWidth\n      },\n      marker: {\n        enabled: seriesDefaults.marker.enabled,\n        shape: seriesDefaults.marker.shape,\n        size: seriesDefaults.marker.size,\n        strokeWidth: seriesDefaults.marker.strokeWidth\n      },\n      highlightStyle: seriesDefaults.highlightStyle,\n      paired: true\n    };\n    return options;\n  };\n  ScatterChartProxy.prototype.createChart = function (options) {\n    options = options || this.chartOptions;\n    var agChartOptions = options;\n    agChartOptions.autoSize = true;\n    agChartOptions.axes = [__assign$9({\n      type: 'number',\n      position: 'bottom'\n    }, options.xAxis), __assign$9({\n      type: 'number',\n      position: 'left'\n    }, options.yAxis)];\n    return AgChart.create(agChartOptions, this.chartProxyParams.parentElement);\n  };\n  ScatterChartProxy.prototype.update = function (params) {\n    if (params.fields.length < 2) {\n      this.chart.removeAllSeries();\n      return;\n    }\n    var fields = params.fields;\n    var seriesDefaults = this.chartOptions.seriesDefaults;\n    var seriesDefinitions = this.getSeriesDefinitions(fields, seriesDefaults.paired);\n    var chart = this.chart;\n    var existingSeriesById = chart.series.reduceRight(function (map, series, i) {\n      var matchingIndex = agGridCommunity._.findIndex(seriesDefinitions, function (s) {\n        return s.xField.colId === series.xKey && s.yField.colId === series.yKey && (!s.sizeField && !series.sizeKey || s.sizeField && s.sizeField.colId === series.sizeKey);\n      });\n      if (matchingIndex === i) {\n        map.set(series.yKey, series);\n      } else {\n        chart.removeSeries(series);\n      }\n      return map;\n    }, new Map());\n    var _a = this.getPalette(),\n      fills = _a.fills,\n      strokes = _a.strokes;\n    var labelFieldDefinition = params.category.id === ChartDataModel.DEFAULT_CATEGORY ? undefined : params.category;\n    var previousSeries = undefined;\n    seriesDefinitions.forEach(function (seriesDefinition, index) {\n      var existingSeries = existingSeriesById.get(seriesDefinition.yField.colId);\n      var marker = __assign$9({}, seriesDefaults.marker);\n      if (marker.type) {\n        // deprecated\n        marker.shape = marker.type;\n        delete marker.type;\n      }\n      var series = existingSeries || AgChart.createComponent(__assign$9(__assign$9({}, seriesDefaults), {\n        type: 'scatter',\n        fillOpacity: seriesDefaults.fill.opacity,\n        strokeOpacity: seriesDefaults.stroke.opacity,\n        strokeWidth: seriesDefaults.stroke.width,\n        marker: marker,\n        tooltipRenderer: seriesDefaults.tooltip && seriesDefaults.tooltip.enabled && seriesDefaults.tooltip.renderer\n      }), 'scatter.series');\n      if (!series) {\n        return;\n      }\n      var xFieldDefinition = seriesDefinition.xField,\n        yFieldDefinition = seriesDefinition.yField,\n        sizeFieldDefinition = seriesDefinition.sizeField;\n      series.title = yFieldDefinition.displayName + \" vs \" + xFieldDefinition.displayName;\n      series.xKey = xFieldDefinition.colId;\n      series.xName = xFieldDefinition.displayName;\n      series.yKey = yFieldDefinition.colId;\n      series.yName = yFieldDefinition.displayName;\n      series.data = params.data;\n      series.fill = fills[index % fills.length];\n      series.stroke = strokes[index % strokes.length];\n      if (sizeFieldDefinition) {\n        series.sizeKey = sizeFieldDefinition.colId;\n        series.sizeName = sizeFieldDefinition.displayName;\n      } else {\n        series.sizeKey = series.sizeName = undefined;\n      }\n      if (labelFieldDefinition) {\n        series.labelKey = labelFieldDefinition.id;\n        series.labelName = labelFieldDefinition.name;\n      } else {\n        series.labelKey = series.labelName = undefined;\n      }\n      if (!existingSeries) {\n        chart.addSeriesAfter(series, previousSeries);\n      }\n      previousSeries = series;\n    });\n  };\n  ScatterChartProxy.prototype.getTooltipsEnabled = function () {\n    return this.chartOptions.seriesDefaults.tooltip != null && !!this.chartOptions.seriesDefaults.tooltip.enabled;\n  };\n  ScatterChartProxy.prototype.getDefaultOptions = function () {\n    var isBubble = this.chartType === agGridCommunity.ChartType.Bubble;\n    var options = this.getDefaultCartesianChartOptions();\n    options.seriesDefaults = __assign$9(__assign$9({}, options.seriesDefaults), {\n      fill: __assign$9(__assign$9({}, options.seriesDefaults.fill), {\n        opacity: isBubble ? 0.7 : 1\n      }),\n      stroke: __assign$9(__assign$9({}, options.seriesDefaults.stroke), {\n        width: 3\n      }),\n      marker: {\n        shape: 'circle',\n        enabled: true,\n        size: 6,\n        maxSize: 30,\n        strokeWidth: 1\n      },\n      tooltip: {\n        enabled: true\n      },\n      paired: true\n    });\n    return options;\n  };\n  ScatterChartProxy.prototype.getSeriesDefinitions = function (fields, paired) {\n    if (fields.length < 2) {\n      return [];\n    }\n    var isBubbleChart = this.chartType === agGridCommunity.ChartType.Bubble;\n    if (paired) {\n      if (isBubbleChart) {\n        return fields.map(function (xField, i) {\n          return i % 3 === 0 ? {\n            xField: xField,\n            yField: fields[i + 1],\n            sizeField: fields[i + 2]\n          } : null;\n        }).filter(function (x) {\n          return x && x.yField && x.sizeField;\n        });\n      } else {\n        return fields.map(function (xField, i) {\n          return i % 2 === 0 ? {\n            xField: xField,\n            yField: fields[i + 1]\n          } : null;\n        }).filter(function (x) {\n          return x && x.yField;\n        });\n      }\n    } else {\n      var xField_1 = fields[0];\n      if (isBubbleChart) {\n        return fields.map(function (yField, i) {\n          return i % 2 === 1 ? {\n            xField: xField_1,\n            yField: yField,\n            sizeField: fields[i + 1]\n          } : null;\n        }).filter(function (x) {\n          return x && x.sizeField;\n        });\n      } else {\n        return fields.filter(function (_, i) {\n          return i > 0;\n        }).map(function (yField) {\n          return {\n            xField: xField_1,\n            yField: yField\n          };\n        });\n      }\n    }\n  };\n  return ScatterChartProxy;\n}(CartesianChartProxy);\nvar __extends$1K = undefined && undefined.__extends || function () {\n  var _extendStatics111 = function extendStatics(d, b) {\n    _extendStatics111 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics111(d, b);\n  };\n  return function (d, b) {\n    _extendStatics111(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$10 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MarkersPanel = /** @class */function (_super) {\n  __extends$1K(MarkersPanel, _super);\n  function MarkersPanel(chartController) {\n    var _this = _super.call(this) || this;\n    _this.chartController = chartController;\n    return _this;\n  }\n  MarkersPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-sub-level',\n      direction: 'vertical'\n    };\n    this.setTemplate(MarkersPanel.TEMPLATE, {\n      seriesMarkersGroup: groupParams\n    });\n    this.initMarkers();\n  };\n  MarkersPanel.prototype.initMarkers = function () {\n    var _this = this;\n    // scatter charts should always show markers\n    var shouldHideEnabledCheckbox = this.chartController.getChartProxy() instanceof ScatterChartProxy;\n    var seriesMarkerShapeOptions = [{\n      value: 'square',\n      text: 'Square'\n    }, {\n      value: 'circle',\n      text: 'Circle'\n    }, {\n      value: 'cross',\n      text: 'Cross'\n    }, {\n      value: 'diamond',\n      text: 'Diamond'\n    }, {\n      value: 'plus',\n      text: 'Plus'\n    }, {\n      value: 'triangle',\n      text: 'Triangle'\n    }, {\n      value: 'heart',\n      text: 'Heart'\n    }];\n    this.seriesMarkerShapeSelect.addOptions(seriesMarkerShapeOptions).setLabel(this.chartTranslator.translate('shape')).setValue(this.chartController.getChartProxy().getSeriesOption(\"marker.shape\")).onValueChange(function (value) {\n      return _this.chartController.getChartProxy().setSeriesOption(\"marker.shape\", value);\n    });\n    this.seriesMarkersGroup.setTitle(this.chartTranslator.translate(\"markers\")).hideEnabledCheckbox(shouldHideEnabledCheckbox).setEnabled(this.chartController.getChartProxy().getSeriesOption(\"marker.enabled\") || false).hideOpenCloseIcons(true).onEnableChange(function (newValue) {\n      return _this.chartController.getChartProxy().setSeriesOption(\"marker.enabled\", newValue);\n    });\n    var initInput = function initInput(expression, input, labelKey, maxValue) {\n      input.setLabel(_this.chartTranslator.translate(labelKey)).setValue(_this.chartController.getChartProxy().getSeriesOption(expression)).setMaxValue(maxValue).setTextFieldWidth(45).onValueChange(function (newValue) {\n        return _this.chartController.getChartProxy().setSeriesOption(expression, newValue);\n      });\n    };\n    if (this.chartController.getChartType() === agGridCommunity.ChartType.Bubble) {\n      initInput(\"marker.maxSize\", this.seriesMarkerMinSizeSlider, \"maxSize\", 60);\n      initInput(\"marker.size\", this.seriesMarkerSizeSlider, \"minSize\", 60);\n    } else {\n      this.seriesMarkerMinSizeSlider.setDisplayed(false);\n      initInput(\"marker.size\", this.seriesMarkerSizeSlider, \"size\", 60);\n    }\n    initInput(\"marker.strokeWidth\", this.seriesMarkerStrokeWidthSlider, \"strokeWidth\", 10);\n  };\n  MarkersPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"seriesMarkersGroup\\\">\\n                <ag-select ref=\\\"seriesMarkerShapeSelect\\\"></ag-select>\\n                <ag-slider ref=\\\"seriesMarkerMinSizeSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesMarkerSizeSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesMarkerStrokeWidthSlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n  __decorate$10([agGridCommunity.RefSelector('seriesMarkersGroup')], MarkersPanel.prototype, \"seriesMarkersGroup\", void 0);\n  __decorate$10([agGridCommunity.RefSelector('seriesMarkerShapeSelect')], MarkersPanel.prototype, \"seriesMarkerShapeSelect\", void 0);\n  __decorate$10([agGridCommunity.RefSelector('seriesMarkerSizeSlider')], MarkersPanel.prototype, \"seriesMarkerSizeSlider\", void 0);\n  __decorate$10([agGridCommunity.RefSelector('seriesMarkerMinSizeSlider')], MarkersPanel.prototype, \"seriesMarkerMinSizeSlider\", void 0);\n  __decorate$10([agGridCommunity.RefSelector('seriesMarkerStrokeWidthSlider')], MarkersPanel.prototype, \"seriesMarkerStrokeWidthSlider\", void 0);\n  __decorate$10([agGridCommunity.Autowired('chartTranslator')], MarkersPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$10([agGridCommunity.PostConstruct], MarkersPanel.prototype, \"init\", null);\n  return MarkersPanel;\n}(agGridCommunity.Component);\nvar __extends$1L = undefined && undefined.__extends || function () {\n  var _extendStatics112 = function extendStatics(d, b) {\n    _extendStatics112 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics112(d, b);\n  };\n  return function (d, b) {\n    _extendStatics112(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$11 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar LineSeriesPanel = /** @class */function (_super) {\n  __extends$1L(LineSeriesPanel, _super);\n  function LineSeriesPanel(chartController) {\n    var _this = _super.call(this) || this;\n    _this.activePanels = [];\n    _this.chartController = chartController;\n    return _this;\n  }\n  LineSeriesPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-top-level',\n      direction: 'vertical'\n    };\n    this.setTemplate(LineSeriesPanel.TEMPLATE, {\n      seriesGroup: groupParams\n    });\n    this.initSeriesGroup();\n    this.initSeriesTooltips();\n    this.initSeriesLineWidth();\n    this.initMarkersPanel();\n  };\n  LineSeriesPanel.prototype.initSeriesGroup = function () {\n    this.seriesGroup.setTitle(this.chartTranslator.translate(\"series\")).toggleGroupExpand(false).hideEnabledCheckbox(true);\n  };\n  LineSeriesPanel.prototype.initSeriesTooltips = function () {\n    var _this = this;\n    this.seriesTooltipsToggle.setLabel(this.chartTranslator.translate(\"tooltips\")).setLabelAlignment(\"left\").setLabelWidth(\"flex\").setInputWidth(45).setValue(this.getChartProxy().getSeriesOption(\"tooltip.enabled\") || false).onValueChange(function (newValue) {\n      return _this.getChartProxy().setSeriesOption(\"tooltip.enabled\", newValue);\n    });\n  };\n  LineSeriesPanel.prototype.initSeriesLineWidth = function () {\n    var _this = this;\n    this.seriesLineWidthSlider.setLabel(this.chartTranslator.translate('lineWidth')).setMaxValue(10).setTextFieldWidth(45).setValue(this.getChartProxy().getSeriesOption(\"stroke.width\")).onValueChange(function (newValue) {\n      return _this.getChartProxy().setSeriesOption(\"stroke.width\", newValue);\n    });\n  };\n  LineSeriesPanel.prototype.initMarkersPanel = function () {\n    var markersPanelComp = this.createBean(new MarkersPanel(this.chartController));\n    this.seriesGroup.addItem(markersPanelComp);\n    this.activePanels.push(markersPanelComp);\n  };\n  LineSeriesPanel.prototype.destroyActivePanels = function () {\n    var _this = this;\n    this.activePanels.forEach(function (panel) {\n      agGridCommunity._.removeFromParent(panel.getGui());\n      _this.destroyBean(panel);\n    });\n  };\n  LineSeriesPanel.prototype.getChartProxy = function () {\n    return this.chartController.getChartProxy();\n  };\n  LineSeriesPanel.prototype.destroy = function () {\n    this.destroyActivePanels();\n    _super.prototype.destroy.call(this);\n  };\n  LineSeriesPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"seriesGroup\\\">\\n                <ag-toggle-button ref=\\\"seriesTooltipsToggle\\\"></ag-toggle-button>\\n                <ag-slider ref=\\\"seriesLineWidthSlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n  __decorate$11([agGridCommunity.RefSelector('seriesGroup')], LineSeriesPanel.prototype, \"seriesGroup\", void 0);\n  __decorate$11([agGridCommunity.RefSelector('seriesTooltipsToggle')], LineSeriesPanel.prototype, \"seriesTooltipsToggle\", void 0);\n  __decorate$11([agGridCommunity.RefSelector('seriesLineWidthSlider')], LineSeriesPanel.prototype, \"seriesLineWidthSlider\", void 0);\n  __decorate$11([agGridCommunity.Autowired('chartTranslator')], LineSeriesPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$11([agGridCommunity.PostConstruct], LineSeriesPanel.prototype, \"init\", null);\n  return LineSeriesPanel;\n}(agGridCommunity.Component);\nvar __extends$1M = undefined && undefined.__extends || function () {\n  var _extendStatics113 = function extendStatics(d, b) {\n    _extendStatics113 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics113(d, b);\n  };\n  return function (d, b) {\n    _extendStatics113(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$12 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar CalloutPanel = /** @class */function (_super) {\n  __extends$1M(CalloutPanel, _super);\n  function CalloutPanel(chartController) {\n    var _this = _super.call(this) || this;\n    _this.chartController = chartController;\n    return _this;\n  }\n  CalloutPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-sub-level',\n      direction: 'vertical'\n    };\n    this.setTemplate(CalloutPanel.TEMPLATE, {\n      calloutGroup: groupParams\n    });\n    this.initCalloutOptions();\n  };\n  CalloutPanel.prototype.initCalloutOptions = function () {\n    var _this = this;\n    this.calloutGroup.setTitle(this.chartTranslator.translate(\"callout\")).setEnabled(true).hideOpenCloseIcons(true).hideEnabledCheckbox(true);\n    var initInput = function initInput(expression, input, labelKey, maxValue) {\n      input.setLabel(_this.chartTranslator.translate(labelKey)).setValue(_this.chartController.getChartProxy().getSeriesOption(expression)).setMaxValue(maxValue).setTextFieldWidth(45).onValueChange(function (newValue) {\n        return _this.chartController.getChartProxy().setSeriesOption(expression, newValue);\n      });\n    };\n    initInput(\"callout.length\", this.calloutLengthSlider, \"length\", 40);\n    initInput(\"callout.strokeWidth\", this.calloutStrokeWidthSlider, \"strokeWidth\", 10);\n    initInput(\"label.offset\", this.labelOffsetSlider, \"offset\", 30);\n  };\n  CalloutPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"calloutGroup\\\">\\n                <ag-slider ref=\\\"calloutLengthSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"calloutStrokeWidthSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"labelOffsetSlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n  __decorate$12([agGridCommunity.RefSelector('calloutGroup')], CalloutPanel.prototype, \"calloutGroup\", void 0);\n  __decorate$12([agGridCommunity.RefSelector('calloutLengthSlider')], CalloutPanel.prototype, \"calloutLengthSlider\", void 0);\n  __decorate$12([agGridCommunity.RefSelector('calloutStrokeWidthSlider')], CalloutPanel.prototype, \"calloutStrokeWidthSlider\", void 0);\n  __decorate$12([agGridCommunity.RefSelector('labelOffsetSlider')], CalloutPanel.prototype, \"labelOffsetSlider\", void 0);\n  __decorate$12([agGridCommunity.Autowired('chartTranslator')], CalloutPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$12([agGridCommunity.PostConstruct], CalloutPanel.prototype, \"init\", null);\n  return CalloutPanel;\n}(agGridCommunity.Component);\nvar __extends$1N = undefined && undefined.__extends || function () {\n  var _extendStatics114 = function extendStatics(d, b) {\n    _extendStatics114 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics114(d, b);\n  };\n  return function (d, b) {\n    _extendStatics114(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$13 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PieSeriesPanel = /** @class */function (_super) {\n  __extends$1N(PieSeriesPanel, _super);\n  function PieSeriesPanel(chartController) {\n    var _this = _super.call(this) || this;\n    _this.activePanels = [];\n    _this.chartController = chartController;\n    return _this;\n  }\n  PieSeriesPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-top-level',\n      direction: 'vertical'\n    };\n    this.setTemplate(PieSeriesPanel.TEMPLATE, {\n      seriesGroup: groupParams\n    });\n    this.initGroup();\n    this.initSeriesTooltips();\n    this.initSeriesStrokeWidth();\n    this.initOpacity();\n    this.initLabelPanel();\n    this.initShadowPanel();\n  };\n  PieSeriesPanel.prototype.initGroup = function () {\n    this.seriesGroup.setTitle(this.chartTranslator.translate(\"series\")).toggleGroupExpand(false).hideEnabledCheckbox(true);\n  };\n  PieSeriesPanel.prototype.initSeriesTooltips = function () {\n    var _this = this;\n    this.seriesTooltipsToggle.setLabel(this.chartTranslator.translate(\"tooltips\")).setLabelAlignment(\"left\").setLabelWidth(\"flex\").setInputWidth(45).setValue(this.getChartProxy().getSeriesOption(\"tooltip.enabled\") || false).onValueChange(function (newValue) {\n      return _this.getChartProxy().setSeriesOption(\"tooltip.enabled\", newValue);\n    });\n  };\n  PieSeriesPanel.prototype.initSeriesStrokeWidth = function () {\n    var _this = this;\n    this.seriesStrokeWidthSlider.setLabel(this.chartTranslator.translate(\"strokeWidth\")).setMaxValue(10).setTextFieldWidth(45).setValue(this.getChartProxy().getSeriesOption(\"stroke.width\")).onValueChange(function (newValue) {\n      return _this.getChartProxy().setSeriesOption(\"stroke.width\", newValue);\n    });\n  };\n  PieSeriesPanel.prototype.initOpacity = function () {\n    var _this = this;\n    this.seriesLineOpacitySlider.setLabel(this.chartTranslator.translate(\"strokeOpacity\")).setStep(0.05).setMaxValue(1).setTextFieldWidth(45).setValue(this.getChartProxy().getSeriesOption(\"stroke.opacity\") || \"1\").onValueChange(function (newValue) {\n      return _this.getChartProxy().setSeriesOption(\"stroke.opacity\", newValue);\n    });\n    this.seriesFillOpacitySlider.setLabel(this.chartTranslator.translate(\"fillOpacity\")).setStep(0.05).setMaxValue(1).setTextFieldWidth(45).setValue(this.getChartProxy().getSeriesOption(\"fillOpacity\") || \"1\").onValueChange(function (newValue) {\n      return _this.getChartProxy().setSeriesOption(\"fillOpacity\", newValue);\n    });\n  };\n  PieSeriesPanel.prototype.initLabelPanel = function () {\n    var _this = this;\n    var chartProxy = this.getChartProxy();\n    var initialFont = {\n      family: chartProxy.getSeriesOption(\"label.fontFamily\"),\n      style: chartProxy.getSeriesOption(\"label.fontStyle\"),\n      weight: chartProxy.getSeriesOption(\"label.fontWeight\"),\n      size: chartProxy.getSeriesOption(\"label.fontSize\"),\n      color: chartProxy.getSeriesOption(\"label.color\")\n    };\n    var setFont = function setFont(font) {\n      var chartProxy = _this.getChartProxy();\n      if (font.family) {\n        chartProxy.setSeriesOption(\"label.fontFamily\", font.family);\n      }\n      if (font.weight) {\n        chartProxy.setSeriesOption(\"label.fontWeight\", font.weight);\n      }\n      if (font.style) {\n        chartProxy.setSeriesOption(\"label.fontStyle\", font.style);\n      }\n      if (font.size) {\n        chartProxy.setSeriesOption(\"label.fontSize\", font.size);\n      }\n      if (font.color) {\n        chartProxy.setSeriesOption(\"label.color\", font.color);\n      }\n    };\n    var params = {\n      name: this.chartTranslator.translate('labels'),\n      enabled: chartProxy.getSeriesOption(\"label.enabled\") || false,\n      setEnabled: function setEnabled(enabled) {\n        return _this.getChartProxy().setSeriesOption(\"label.enabled\", enabled);\n      },\n      suppressEnabledCheckbox: false,\n      initialFont: initialFont,\n      setFont: setFont\n    };\n    var labelPanelComp = this.createBean(new FontPanel(params));\n    this.activePanels.push(labelPanelComp);\n    var calloutPanelComp = this.createBean(new CalloutPanel(this.chartController));\n    labelPanelComp.addCompToPanel(calloutPanelComp);\n    this.activePanels.push(calloutPanelComp);\n    this.seriesGroup.addItem(labelPanelComp);\n  };\n  PieSeriesPanel.prototype.initShadowPanel = function () {\n    var shadowPanelComp = this.createBean(new ShadowPanel(this.chartController));\n    this.seriesGroup.getGui().appendChild(shadowPanelComp.getGui());\n    this.seriesGroup.addItem(shadowPanelComp);\n  };\n  PieSeriesPanel.prototype.destroyActivePanels = function () {\n    var _this = this;\n    this.activePanels.forEach(function (panel) {\n      agGridCommunity._.removeFromParent(panel.getGui());\n      _this.destroyBean(panel);\n    });\n  };\n  PieSeriesPanel.prototype.getChartProxy = function () {\n    return this.chartController.getChartProxy();\n  };\n  PieSeriesPanel.prototype.destroy = function () {\n    this.destroyActivePanels();\n    _super.prototype.destroy.call(this);\n  };\n  PieSeriesPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"seriesGroup\\\">\\n                <ag-toggle-button ref=\\\"seriesTooltipsToggle\\\"></ag-toggle-button>\\n                <ag-slider ref=\\\"seriesStrokeWidthSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesLineOpacitySlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesFillOpacitySlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n  __decorate$13([agGridCommunity.RefSelector('seriesGroup')], PieSeriesPanel.prototype, \"seriesGroup\", void 0);\n  __decorate$13([agGridCommunity.RefSelector('seriesTooltipsToggle')], PieSeriesPanel.prototype, \"seriesTooltipsToggle\", void 0);\n  __decorate$13([agGridCommunity.RefSelector('seriesStrokeWidthSlider')], PieSeriesPanel.prototype, \"seriesStrokeWidthSlider\", void 0);\n  __decorate$13([agGridCommunity.RefSelector('seriesLineOpacitySlider')], PieSeriesPanel.prototype, \"seriesLineOpacitySlider\", void 0);\n  __decorate$13([agGridCommunity.RefSelector('seriesFillOpacitySlider')], PieSeriesPanel.prototype, \"seriesFillOpacitySlider\", void 0);\n  __decorate$13([agGridCommunity.Autowired('chartTranslator')], PieSeriesPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$13([agGridCommunity.PostConstruct], PieSeriesPanel.prototype, \"init\", null);\n  return PieSeriesPanel;\n}(agGridCommunity.Component);\nvar __extends$1O = undefined && undefined.__extends || function () {\n  var _extendStatics115 = function extendStatics(d, b) {\n    _extendStatics115 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics115(d, b);\n  };\n  return function (d, b) {\n    _extendStatics115(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$14 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar PaddingPanel = /** @class */function (_super) {\n  __extends$1O(PaddingPanel, _super);\n  function PaddingPanel(chartController) {\n    var _this = _super.call(this) || this;\n    _this.chartController = chartController;\n    return _this;\n  }\n  PaddingPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-sub-level',\n      direction: 'vertical',\n      suppressOpenCloseIcons: true\n    };\n    this.setTemplate(PaddingPanel.TEMPLATE, {\n      chartPaddingGroup: groupParams\n    });\n    this.initGroup();\n    this.initChartPaddingItems();\n  };\n  PaddingPanel.prototype.initGroup = function () {\n    this.chartPaddingGroup.setTitle(this.chartTranslator.translate(\"padding\")).hideOpenCloseIcons(true).hideEnabledCheckbox(true);\n  };\n  PaddingPanel.prototype.initChartPaddingItems = function () {\n    var _this = this;\n    var initInput = function initInput(property, input) {\n      input.setLabel(_this.chartTranslator.translate(property)).setValue(_this.chartController.getChartProxy().getChartPaddingOption(property)).setMaxValue(200).setTextFieldWidth(45).onValueChange(function (newValue) {\n        return _this.chartController.getChartProxy().setChartPaddingOption(property, newValue);\n      });\n    };\n    initInput('top', this.paddingTopSlider);\n    initInput('right', this.paddingRightSlider);\n    initInput('bottom', this.paddingBottomSlider);\n    initInput('left', this.paddingLeftSlider);\n  };\n  PaddingPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"chartPaddingGroup\\\">\\n                <ag-slider ref=\\\"paddingTopSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"paddingRightSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"paddingBottomSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"paddingLeftSlider\\\"></ag-slider>\\n            </ag-group-component>\\n        <div>\";\n  __decorate$14([agGridCommunity.RefSelector('chartPaddingGroup')], PaddingPanel.prototype, \"chartPaddingGroup\", void 0);\n  __decorate$14([agGridCommunity.RefSelector('paddingTopSlider')], PaddingPanel.prototype, \"paddingTopSlider\", void 0);\n  __decorate$14([agGridCommunity.RefSelector('paddingRightSlider')], PaddingPanel.prototype, \"paddingRightSlider\", void 0);\n  __decorate$14([agGridCommunity.RefSelector('paddingBottomSlider')], PaddingPanel.prototype, \"paddingBottomSlider\", void 0);\n  __decorate$14([agGridCommunity.RefSelector('paddingLeftSlider')], PaddingPanel.prototype, \"paddingLeftSlider\", void 0);\n  __decorate$14([agGridCommunity.Autowired('chartTranslator')], PaddingPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$14([agGridCommunity.PostConstruct], PaddingPanel.prototype, \"init\", null);\n  return PaddingPanel;\n}(agGridCommunity.Component);\nvar __extends$1P = undefined && undefined.__extends || function () {\n  var _extendStatics116 = function extendStatics(d, b) {\n    _extendStatics116 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics116(d, b);\n  };\n  return function (d, b) {\n    _extendStatics116(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$15 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar BackgroundPanel = /** @class */function (_super) {\n  __extends$1P(BackgroundPanel, _super);\n  function BackgroundPanel(chartController) {\n    var _this = _super.call(this) || this;\n    _this.chartController = chartController;\n    return _this;\n  }\n  BackgroundPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-sub-level',\n      direction: 'vertical',\n      suppressOpenCloseIcons: true\n    };\n    this.setTemplate(BackgroundPanel.TEMPLATE, {\n      chartBackgroundGroup: groupParams\n    });\n    this.initGroup();\n    this.initColorPicker();\n  };\n  BackgroundPanel.prototype.initGroup = function () {\n    var _this = this;\n    this.group.setTitle(this.chartTranslator.translate('background')).setEnabled(this.chartController.getChartProxy().getChartOption('background.visible')).hideOpenCloseIcons(true).hideEnabledCheckbox(false).onEnableChange(function (enabled) {\n      return _this.chartController.getChartProxy().setChartOption('background.visible', enabled);\n    });\n  };\n  BackgroundPanel.prototype.initColorPicker = function () {\n    var _this = this;\n    this.colorPicker.setLabel(this.chartTranslator.translate('color')).setLabelWidth('flex').setInputWidth(45).setValue(this.chartController.getChartProxy().getChartOption('background.fill')).onValueChange(function (newColor) {\n      return _this.chartController.getChartProxy().setChartOption('background.fill', newColor);\n    });\n  };\n  BackgroundPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"chartBackgroundGroup\\\">\\n                <ag-color-picker ref=\\\"colorPicker\\\"></ag-color-picker>\\n            </ag-group-component>\\n        <div>\";\n  __decorate$15([agGridCommunity.RefSelector('chartBackgroundGroup')], BackgroundPanel.prototype, \"group\", void 0);\n  __decorate$15([agGridCommunity.RefSelector('colorPicker')], BackgroundPanel.prototype, \"colorPicker\", void 0);\n  __decorate$15([agGridCommunity.Autowired('chartTranslator')], BackgroundPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$15([agGridCommunity.PostConstruct], BackgroundPanel.prototype, \"init\", null);\n  return BackgroundPanel;\n}(agGridCommunity.Component);\nvar __extends$1Q = undefined && undefined.__extends || function () {\n  var _extendStatics117 = function extendStatics(d, b) {\n    _extendStatics117 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics117(d, b);\n  };\n  return function (d, b) {\n    _extendStatics117(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$16 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar TitlePanel = /** @class */function (_super) {\n  __extends$1Q(TitlePanel, _super);\n  function TitlePanel(chartController) {\n    var _this = _super.call(this, TitlePanel.TEMPLATE) || this;\n    _this.activePanels = [];\n    _this.chartController = chartController;\n    return _this;\n  }\n  TitlePanel.prototype.init = function () {\n    this.initFontPanel();\n  };\n  TitlePanel.prototype.hasTitle = function () {\n    var chartProxy = this.chartController.getChartProxy();\n    var title = chartProxy.getChartOption('title');\n    return title && title.enabled && title.text && title.text.length > 0;\n  };\n  TitlePanel.prototype.initFontPanel = function () {\n    var _this = this;\n    var chartProxy = this.chartController.getChartProxy();\n    var hasTitle = this.hasTitle;\n    var setFont = function setFont(font) {\n      var chartProxy = _this.chartController.getChartProxy();\n      if (font.family) {\n        chartProxy.setTitleOption('fontFamily', font.family);\n      }\n      if (font.weight) {\n        chartProxy.setTitleOption('fontWeight', font.weight);\n      }\n      if (font.style) {\n        chartProxy.setTitleOption('fontStyle', font.style);\n      }\n      if (font.size) {\n        chartProxy.setTitleOption('fontSize', font.size);\n      }\n      if (font.color) {\n        chartProxy.setTitleOption('color', font.color);\n      }\n    };\n    var initialFont = {\n      family: hasTitle ? chartProxy.getChartOption('title.fontFamily') : 'Verdana, sans-serif',\n      style: hasTitle ? chartProxy.getChartOption('title.fontStyle') : undefined,\n      weight: hasTitle ? chartProxy.getChartOption('title.fontWeight') : undefined,\n      size: hasTitle ? chartProxy.getChartOption('title.fontSize') : 22,\n      color: hasTitle ? chartProxy.getChartOption('title.color') : 'black'\n    };\n    if (!hasTitle) {\n      setFont(initialFont);\n    }\n    var fontPanelParams = {\n      name: this.chartTranslator.translate('title'),\n      enabled: this.hasTitle(),\n      suppressEnabledCheckbox: false,\n      initialFont: initialFont,\n      setFont: setFont,\n      setEnabled: function setEnabled(enabled) {\n        var chartProxy = _this.chartController.getChartProxy();\n        if (enabled) {\n          var newTitle = _this.disabledTitle || _this.chartTranslator.translate('titlePlaceholder');\n          chartProxy.setTitleOption('text', newTitle);\n          _this.disabledTitle = '';\n        } else {\n          _this.disabledTitle = _this.chartController.getChartProxy().getTitleOption('text');\n          chartProxy.setTitleOption('text', '');\n        }\n      }\n    };\n    var fontPanelComp = this.createBean(new FontPanel(fontPanelParams));\n    this.getGui().appendChild(fontPanelComp.getGui());\n    this.activePanels.push(fontPanelComp);\n    // edits to the title can disable it, so keep the checkbox in sync:\n    this.addManagedListener(this.eventService, 'chartTitleEdit', function () {\n      fontPanelComp.setEnabled(_this.hasTitle());\n    });\n  };\n  TitlePanel.prototype.destroyActivePanels = function () {\n    var _this = this;\n    this.activePanels.forEach(function (panel) {\n      agGridCommunity._.removeFromParent(panel.getGui());\n      _this.destroyBean(panel);\n    });\n  };\n  TitlePanel.prototype.destroy = function () {\n    this.destroyActivePanels();\n    _super.prototype.destroy.call(this);\n  };\n  TitlePanel.TEMPLATE = \"<div></div>\";\n  __decorate$16([agGridCommunity.Autowired('chartTranslator')], TitlePanel.prototype, \"chartTranslator\", void 0);\n  __decorate$16([agGridCommunity.PostConstruct], TitlePanel.prototype, \"init\", null);\n  return TitlePanel;\n}(agGridCommunity.Component);\nvar __extends$1R = undefined && undefined.__extends || function () {\n  var _extendStatics118 = function extendStatics(d, b) {\n    _extendStatics118 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics118(d, b);\n  };\n  return function (d, b) {\n    _extendStatics118(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$17 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ChartPanel = /** @class */function (_super) {\n  __extends$1R(ChartPanel, _super);\n  function ChartPanel(chartController) {\n    var _this = _super.call(this) || this;\n    _this.activePanels = [];\n    _this.chartController = chartController;\n    return _this;\n  }\n  ChartPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-top-level',\n      direction: 'vertical'\n    };\n    this.setTemplate(ChartPanel.TEMPLATE, {\n      chartGroup: groupParams\n    });\n    this.initGroup();\n    this.initTitles();\n    this.initPaddingPanel();\n    this.initBackgroundPanel();\n  };\n  ChartPanel.prototype.initGroup = function () {\n    this.chartGroup.setTitle(this.chartTranslator.translate('chart')).toggleGroupExpand(true).hideEnabledCheckbox(true);\n  };\n  ChartPanel.prototype.initTitles = function () {\n    var titlePanelComp = this.createBean(new TitlePanel(this.chartController));\n    this.chartGroup.addItem(titlePanelComp);\n    this.activePanels.push(titlePanelComp);\n  };\n  ChartPanel.prototype.initPaddingPanel = function () {\n    var paddingPanelComp = this.createBean(new PaddingPanel(this.chartController));\n    this.chartGroup.addItem(paddingPanelComp);\n    this.activePanels.push(paddingPanelComp);\n  };\n  ChartPanel.prototype.initBackgroundPanel = function () {\n    var backgroundPanelComp = this.createBean(new BackgroundPanel(this.chartController));\n    this.chartGroup.addItem(backgroundPanelComp);\n    this.activePanels.push(backgroundPanelComp);\n  };\n  ChartPanel.prototype.destroyActivePanels = function () {\n    var _this = this;\n    this.activePanels.forEach(function (panel) {\n      agGridCommunity._.removeFromParent(panel.getGui());\n      _this.destroyBean(panel);\n    });\n  };\n  ChartPanel.prototype.destroy = function () {\n    this.destroyActivePanels();\n    _super.prototype.destroy.call(this);\n  };\n  ChartPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"chartGroup\\\"></ag-group-component>\\n        </div>\";\n  __decorate$17([agGridCommunity.RefSelector('chartGroup')], ChartPanel.prototype, \"chartGroup\", void 0);\n  __decorate$17([agGridCommunity.Autowired('chartTranslator')], ChartPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$17([agGridCommunity.PostConstruct], ChartPanel.prototype, \"init\", null);\n  return ChartPanel;\n}(agGridCommunity.Component);\nvar __extends$1S = undefined && undefined.__extends || function () {\n  var _extendStatics119 = function extendStatics(d, b) {\n    _extendStatics119 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics119(d, b);\n  };\n  return function (d, b) {\n    _extendStatics119(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$18 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar AreaSeriesPanel = /** @class */function (_super) {\n  __extends$1S(AreaSeriesPanel, _super);\n  function AreaSeriesPanel(chartController) {\n    var _this = _super.call(this) || this;\n    _this.activePanels = [];\n    _this.chartController = chartController;\n    return _this;\n  }\n  AreaSeriesPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-top-level',\n      direction: 'vertical'\n    };\n    this.setTemplate(AreaSeriesPanel.TEMPLATE, {\n      seriesGroup: groupParams\n    });\n    this.initSeriesGroup();\n    this.initSeriesTooltips();\n    this.initSeriesLineWidth();\n    this.initOpacity();\n    this.initMarkersPanel();\n    this.initShadowPanel();\n  };\n  AreaSeriesPanel.prototype.initSeriesGroup = function () {\n    this.seriesGroup.setTitle(this.chartTranslator.translate(\"series\")).toggleGroupExpand(false).hideEnabledCheckbox(true);\n  };\n  AreaSeriesPanel.prototype.initSeriesTooltips = function () {\n    var _this = this;\n    this.seriesTooltipsToggle.setLabel(this.chartTranslator.translate(\"tooltips\")).setLabelAlignment(\"left\").setLabelWidth(\"flex\").setInputWidth(45).setValue(this.getChartProxy().getSeriesOption(\"tooltip.enabled\") || false).onValueChange(function (newValue) {\n      return _this.getChartProxy().setSeriesOption(\"tooltip.enabled\", newValue);\n    });\n  };\n  AreaSeriesPanel.prototype.initSeriesLineWidth = function () {\n    var _this = this;\n    this.seriesLineWidthSlider.setLabel(this.chartTranslator.translate(\"lineWidth\")).setMaxValue(10).setTextFieldWidth(45).setValue(this.getChartProxy().getSeriesOption(\"stroke.width\")).onValueChange(function (newValue) {\n      return _this.getChartProxy().setSeriesOption(\"stroke.width\", newValue);\n    });\n  };\n  AreaSeriesPanel.prototype.initOpacity = function () {\n    initLineOpacitySlider(this.seriesLineOpacitySlider, this.chartTranslator, this.getChartProxy());\n    initFillOpacitySlider(this.seriesFillOpacitySlider, this.chartTranslator, this.getChartProxy());\n  };\n  AreaSeriesPanel.prototype.initMarkersPanel = function () {\n    var markersPanelComp = this.createBean(new MarkersPanel(this.chartController));\n    this.seriesGroup.addItem(markersPanelComp);\n    this.activePanels.push(markersPanelComp);\n  };\n  AreaSeriesPanel.prototype.initShadowPanel = function () {\n    var shadowPanelComp = this.createBean(new ShadowPanel(this.chartController));\n    this.seriesGroup.addItem(shadowPanelComp);\n    this.activePanels.push(shadowPanelComp);\n  };\n  AreaSeriesPanel.prototype.destroyActivePanels = function () {\n    var _this = this;\n    this.activePanels.forEach(function (panel) {\n      agGridCommunity._.removeFromParent(panel.getGui());\n      _this.destroyBean(panel);\n    });\n  };\n  AreaSeriesPanel.prototype.getChartProxy = function () {\n    return this.chartController.getChartProxy();\n  };\n  AreaSeriesPanel.prototype.destroy = function () {\n    this.destroyActivePanels();\n    _super.prototype.destroy.call(this);\n  };\n  AreaSeriesPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"seriesGroup\\\">\\n                <ag-toggle-button ref=\\\"seriesTooltipsToggle\\\"></ag-toggle-button>\\n                <ag-slider ref=\\\"seriesLineWidthSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesLineOpacitySlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesFillOpacitySlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n  __decorate$18([agGridCommunity.RefSelector('seriesGroup')], AreaSeriesPanel.prototype, \"seriesGroup\", void 0);\n  __decorate$18([agGridCommunity.RefSelector('seriesTooltipsToggle')], AreaSeriesPanel.prototype, \"seriesTooltipsToggle\", void 0);\n  __decorate$18([agGridCommunity.RefSelector('seriesLineWidthSlider')], AreaSeriesPanel.prototype, \"seriesLineWidthSlider\", void 0);\n  __decorate$18([agGridCommunity.RefSelector('seriesLineOpacitySlider')], AreaSeriesPanel.prototype, \"seriesLineOpacitySlider\", void 0);\n  __decorate$18([agGridCommunity.RefSelector('seriesFillOpacitySlider')], AreaSeriesPanel.prototype, \"seriesFillOpacitySlider\", void 0);\n  __decorate$18([agGridCommunity.Autowired('chartTranslator')], AreaSeriesPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$18([agGridCommunity.PostConstruct], AreaSeriesPanel.prototype, \"init\", null);\n  return AreaSeriesPanel;\n}(agGridCommunity.Component);\nvar __extends$1T = undefined && undefined.__extends || function () {\n  var _extendStatics120 = function extendStatics(d, b) {\n    _extendStatics120 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics120(d, b);\n  };\n  return function (d, b) {\n    _extendStatics120(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$19 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ScatterSeriesPanel = /** @class */function (_super) {\n  __extends$1T(ScatterSeriesPanel, _super);\n  function ScatterSeriesPanel(chartController) {\n    var _this = _super.call(this) || this;\n    _this.activePanels = [];\n    _this.chartController = chartController;\n    return _this;\n  }\n  ScatterSeriesPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-top-level',\n      direction: 'vertical'\n    };\n    this.setTemplate(ScatterSeriesPanel.TEMPLATE, {\n      seriesGroup: groupParams\n    });\n    this.initSeriesGroup();\n    this.initSeriesTooltips();\n    this.initMarkersPanel();\n  };\n  ScatterSeriesPanel.prototype.initSeriesGroup = function () {\n    this.seriesGroup.setTitle(this.chartTranslator.translate(\"series\")).toggleGroupExpand(false).hideEnabledCheckbox(true);\n  };\n  ScatterSeriesPanel.prototype.initSeriesTooltips = function () {\n    var _this = this;\n    this.seriesTooltipsToggle.setLabel(this.chartTranslator.translate(\"tooltips\")).setLabelAlignment(\"left\").setLabelWidth(\"flex\").setInputWidth(45).setValue(this.getChartProxy().getSeriesOption(\"tooltip.enabled\") || false).onValueChange(function (newValue) {\n      return _this.getChartProxy().setSeriesOption(\"tooltip.enabled\", newValue);\n    });\n  };\n  ScatterSeriesPanel.prototype.initMarkersPanel = function () {\n    var markersPanelComp = this.createBean(new MarkersPanel(this.chartController));\n    this.seriesGroup.addItem(markersPanelComp);\n    this.activePanels.push(markersPanelComp);\n  };\n  ScatterSeriesPanel.prototype.destroyActivePanels = function () {\n    var _this = this;\n    this.activePanels.forEach(function (panel) {\n      agGridCommunity._.removeFromParent(panel.getGui());\n      _this.destroyBean(panel);\n    });\n  };\n  ScatterSeriesPanel.prototype.getChartProxy = function () {\n    return this.chartController.getChartProxy();\n  };\n  ScatterSeriesPanel.prototype.destroy = function () {\n    this.destroyActivePanels();\n    _super.prototype.destroy.call(this);\n  };\n  ScatterSeriesPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"seriesGroup\\\">\\n                <ag-toggle-button ref=\\\"seriesTooltipsToggle\\\"></ag-toggle-button>\\n            </ag-group-component>\\n        </div>\";\n  __decorate$19([agGridCommunity.RefSelector('seriesGroup')], ScatterSeriesPanel.prototype, \"seriesGroup\", void 0);\n  __decorate$19([agGridCommunity.RefSelector('seriesTooltipsToggle')], ScatterSeriesPanel.prototype, \"seriesTooltipsToggle\", void 0);\n  __decorate$19([agGridCommunity.Autowired('chartTranslator')], ScatterSeriesPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$19([agGridCommunity.PostConstruct], ScatterSeriesPanel.prototype, \"init\", null);\n  return ScatterSeriesPanel;\n}(agGridCommunity.Component);\nvar __extends$1U = undefined && undefined.__extends || function () {\n  var _extendStatics121 = function extendStatics(d, b) {\n    _extendStatics121 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics121(d, b);\n  };\n  return function (d, b) {\n    _extendStatics121(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1a = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar HistogramSeriesPanel = /** @class */function (_super) {\n  __extends$1U(HistogramSeriesPanel, _super);\n  function HistogramSeriesPanel(chartController) {\n    var _this = _super.call(this) || this;\n    _this.activePanels = [];\n    _this.chartController = chartController;\n    return _this;\n  }\n  HistogramSeriesPanel.prototype.init = function () {\n    var groupParams = {\n      cssIdentifier: 'charts-format-top-level',\n      direction: 'vertical'\n    };\n    this.setTemplate(HistogramSeriesPanel.TEMPLATE, {\n      seriesGroup: groupParams\n    });\n    this.seriesGroup.setTitle(this.chartTranslator.translate(\"series\")).toggleGroupExpand(false).hideEnabledCheckbox(true);\n    this.initSeriesTooltips();\n    this.initSeriesStrokeWidth();\n    this.initOpacity();\n    this.initLabelPanel();\n    this.initShadowPanel();\n    this.initBins();\n  };\n  HistogramSeriesPanel.prototype.initSeriesTooltips = function () {\n    var _this = this;\n    this.seriesTooltipsToggle.setLabel(this.chartTranslator.translate(\"tooltips\")).setLabelAlignment(\"left\").setLabelWidth(\"flex\").setInputWidth(45).setValue(this.getChartProxy().getSeriesOption(\"tooltip.enabled\") || false).onValueChange(function (newValue) {\n      return _this.getChartProxy().setSeriesOption(\"tooltip.enabled\", newValue);\n    });\n  };\n  HistogramSeriesPanel.prototype.initSeriesStrokeWidth = function () {\n    var _this = this;\n    this.seriesStrokeWidthSlider.setLabel(this.chartTranslator.translate(\"strokeWidth\")).setMaxValue(10).setTextFieldWidth(45).setValue(this.getChartProxy().getSeriesOption(\"stroke.width\")).onValueChange(function (newValue) {\n      return _this.getChartProxy().setSeriesOption(\"stroke.width\", newValue);\n    });\n  };\n  HistogramSeriesPanel.prototype.initOpacity = function () {\n    initLineOpacitySlider(this.seriesLineOpacitySlider, this.chartTranslator, this.getChartProxy());\n    initFillOpacitySlider(this.seriesFillOpacitySlider, this.chartTranslator, this.getChartProxy());\n  };\n  HistogramSeriesPanel.prototype.initBins = function () {\n    var _this = this;\n    this.seriesBinCountSlider.setLabel(this.chartTranslator.translate(\"histogramBinCount\")).setMinValue(4).setMaxValue(100).setTextFieldWidth(45).setValue(this.getChartProxy().getSeriesOption(\"binCount\")).onValueChange(function (newValue) {\n      return _this.getChartProxy().setSeriesOption(\"binCount\", newValue);\n    });\n  };\n  HistogramSeriesPanel.prototype.initLabelPanel = function () {\n    var params = initFontPanelParams(this.chartTranslator, this.getChartProxy());\n    var labelPanelComp = this.createBean(new FontPanel(params));\n    this.activePanels.push(labelPanelComp);\n    this.seriesGroup.addItem(labelPanelComp);\n  };\n  HistogramSeriesPanel.prototype.initShadowPanel = function () {\n    var shadowPanelComp = this.createBean(new ShadowPanel(this.chartController));\n    this.seriesGroup.addItem(shadowPanelComp);\n    this.activePanels.push(shadowPanelComp);\n  };\n  HistogramSeriesPanel.prototype.destroyActivePanels = function () {\n    var _this = this;\n    this.activePanels.forEach(function (panel) {\n      agGridCommunity._.removeFromParent(panel.getGui());\n      _this.destroyBean(panel);\n    });\n  };\n  HistogramSeriesPanel.prototype.getChartProxy = function () {\n    return this.chartController.getChartProxy();\n  };\n  HistogramSeriesPanel.prototype.destroy = function () {\n    this.destroyActivePanels();\n    _super.prototype.destroy.call(this);\n  };\n  HistogramSeriesPanel.TEMPLATE = \"<div>\\n            <ag-group-component ref=\\\"seriesGroup\\\">\\n                <ag-toggle-button ref=\\\"seriesTooltipsToggle\\\"></ag-toggle-button>\\n                <ag-slider ref=\\\"binCountSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesStrokeWidthSlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesLineOpacitySlider\\\"></ag-slider>\\n                <ag-slider ref=\\\"seriesFillOpacitySlider\\\"></ag-slider>\\n            </ag-group-component>\\n        </div>\";\n  __decorate$1a([agGridCommunity.RefSelector('seriesGroup')], HistogramSeriesPanel.prototype, \"seriesGroup\", void 0);\n  __decorate$1a([agGridCommunity.RefSelector('seriesTooltipsToggle')], HistogramSeriesPanel.prototype, \"seriesTooltipsToggle\", void 0);\n  __decorate$1a([agGridCommunity.RefSelector('binCountSlider')], HistogramSeriesPanel.prototype, \"seriesBinCountSlider\", void 0);\n  __decorate$1a([agGridCommunity.RefSelector('seriesStrokeWidthSlider')], HistogramSeriesPanel.prototype, \"seriesStrokeWidthSlider\", void 0);\n  __decorate$1a([agGridCommunity.RefSelector('seriesLineOpacitySlider')], HistogramSeriesPanel.prototype, \"seriesLineOpacitySlider\", void 0);\n  __decorate$1a([agGridCommunity.RefSelector('seriesFillOpacitySlider')], HistogramSeriesPanel.prototype, \"seriesFillOpacitySlider\", void 0);\n  __decorate$1a([agGridCommunity.Autowired('chartTranslator')], HistogramSeriesPanel.prototype, \"chartTranslator\", void 0);\n  __decorate$1a([agGridCommunity.PostConstruct], HistogramSeriesPanel.prototype, \"init\", null);\n  return HistogramSeriesPanel;\n}(agGridCommunity.Component);\nvar __extends$1V = undefined && undefined.__extends || function () {\n  var _extendStatics122 = function extendStatics(d, b) {\n    _extendStatics122 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics122(d, b);\n  };\n  return function (d, b) {\n    _extendStatics122(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1b = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ChartFormattingPanel = /** @class */function (_super) {\n  __extends$1V(ChartFormattingPanel, _super);\n  function ChartFormattingPanel(chartController) {\n    var _this = _super.call(this, ChartFormattingPanel.TEMPLATE) || this;\n    _this.panels = [];\n    _this.chartController = chartController;\n    return _this;\n  }\n  ChartFormattingPanel.prototype.init = function () {\n    this.createPanels();\n    this.addManagedListener(this.chartController, ChartController.EVENT_CHART_UPDATED, this.createPanels.bind(this));\n  };\n  ChartFormattingPanel.prototype.createPanels = function () {\n    var chartType = this.chartController.getChartType();\n    var isGrouping = this.chartController.isGrouping();\n    if (chartType === this.chartType && isGrouping === this.isGrouping) {\n      // existing panels can be re-used\n      return;\n    }\n    this.destroyPanels();\n    this.addComponent(new ChartPanel(this.chartController));\n    this.addComponent(new LegendPanel(this.chartController));\n    switch (chartType) {\n      case agGridCommunity.ChartType.GroupedColumn:\n      case agGridCommunity.ChartType.StackedColumn:\n      case agGridCommunity.ChartType.NormalizedColumn:\n      case agGridCommunity.ChartType.GroupedBar:\n      case agGridCommunity.ChartType.StackedBar:\n      case agGridCommunity.ChartType.NormalizedBar:\n        this.addComponent(new AxisPanel(this.chartController));\n        this.addComponent(new NavigatorPanel(this.chartController));\n        this.addComponent(new BarSeriesPanel(this.chartController));\n        break;\n      case agGridCommunity.ChartType.Pie:\n      case agGridCommunity.ChartType.Doughnut:\n        this.addComponent(new PieSeriesPanel(this.chartController));\n        break;\n      case agGridCommunity.ChartType.Line:\n        this.addComponent(new AxisPanel(this.chartController));\n        this.addComponent(new NavigatorPanel(this.chartController));\n        this.addComponent(new LineSeriesPanel(this.chartController));\n        break;\n      case agGridCommunity.ChartType.Scatter:\n      case agGridCommunity.ChartType.Bubble:\n        this.addComponent(new AxisPanel(this.chartController));\n        this.addComponent(new NavigatorPanel(this.chartController));\n        this.addComponent(new ScatterSeriesPanel(this.chartController));\n        break;\n      case agGridCommunity.ChartType.Area:\n      case agGridCommunity.ChartType.StackedArea:\n      case agGridCommunity.ChartType.NormalizedArea:\n        this.addComponent(new AxisPanel(this.chartController));\n        this.addComponent(new NavigatorPanel(this.chartController));\n        this.addComponent(new AreaSeriesPanel(this.chartController));\n        break;\n      case agGridCommunity.ChartType.Histogram:\n        this.addComponent(new AxisPanel(this.chartController));\n        this.addComponent(new NavigatorPanel(this.chartController));\n        this.addComponent(new HistogramSeriesPanel(this.chartController));\n        break;\n      default:\n        console.warn(\"ag-Grid: ChartFormattingPanel - unexpected chart type index: \" + chartType + \" supplied\");\n    }\n    this.chartType = chartType;\n    this.isGrouping = isGrouping;\n  };\n  ChartFormattingPanel.prototype.addComponent = function (component) {\n    this.createBean(component);\n    this.panels.push(component);\n    agGridCommunity._.addCssClass(component.getGui(), 'ag-chart-format-section');\n    this.getGui().appendChild(component.getGui());\n  };\n  ChartFormattingPanel.prototype.destroyPanels = function () {\n    var _this = this;\n    this.panels.forEach(function (panel) {\n      agGridCommunity._.removeFromParent(panel.getGui());\n      _this.destroyBean(panel);\n    });\n  };\n  ChartFormattingPanel.prototype.destroy = function () {\n    this.destroyPanels();\n    _super.prototype.destroy.call(this);\n  };\n  ChartFormattingPanel.TEMPLATE = \"<div class=\\\"ag-chart-format-wrapper\\\"></div>\";\n  __decorate$1b([agGridCommunity.PostConstruct], ChartFormattingPanel.prototype, \"init\", null);\n  return ChartFormattingPanel;\n}(agGridCommunity.Component);\nvar __extends$1W = undefined && undefined.__extends || function () {\n  var _extendStatics123 = function extendStatics(d, b) {\n    _extendStatics123 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics123(d, b);\n  };\n  return function (d, b) {\n    _extendStatics123(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1c = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MiniChart = /** @class */function (_super) {\n  __extends$1W(MiniChart, _super);\n  function MiniChart(container, tooltipName) {\n    var _this = _super.call(this) || this;\n    _this.size = 58;\n    _this.padding = 5;\n    _this.root = new Group();\n    var scene = new Scene(window.document, _this.size, _this.size);\n    agGridCommunity._.addCssClass(scene.canvas.element, 'ag-chart-mini-thumbnail-canvas');\n    scene.root = _this.root;\n    scene.container = container;\n    _this.scene = scene;\n    _this.tooltipName = tooltipName;\n    return _this;\n  }\n  MiniChart.prototype.init = function () {\n    this.scene.canvas.element.title = this.chartTranslator.translate(this.tooltipName);\n  };\n  __decorate$1c([agGridCommunity.Autowired('chartTranslator')], MiniChart.prototype, \"chartTranslator\", void 0);\n  __decorate$1c([agGridCommunity.PostConstruct], MiniChart.prototype, \"init\", null);\n  return MiniChart;\n}(agGridCommunity.Component);\nvar __extends$1X = undefined && undefined.__extends || function () {\n  var _extendStatics124 = function extendStatics(d, b) {\n    _extendStatics124 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics124(d, b);\n  };\n  return function (d, b) {\n    _extendStatics124(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1d = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MiniChartWithAxes = /** @class */function (_super) {\n  __extends$1X(MiniChartWithAxes, _super);\n  function MiniChartWithAxes(container, tooltipName) {\n    var _this = _super.call(this, container, tooltipName) || this;\n    _this.stroke = 'gray';\n    _this.axisOvershoot = 3;\n    return _this;\n  }\n  MiniChartWithAxes.prototype.addAxes = function () {\n    var size = this.size;\n    var padding = this.padding;\n    var leftAxis = new Line();\n    leftAxis.x1 = padding;\n    leftAxis.y1 = padding;\n    leftAxis.x2 = padding;\n    leftAxis.y2 = size - padding + this.axisOvershoot;\n    leftAxis.stroke = this.stroke;\n    var bottomAxis = new Line();\n    bottomAxis.x1 = padding - this.axisOvershoot + 1;\n    bottomAxis.y1 = size - padding;\n    bottomAxis.x2 = size - padding + 1;\n    bottomAxis.y2 = size - padding;\n    bottomAxis.stroke = this.stroke;\n    var root = this.root;\n    root.append(leftAxis);\n    root.append(bottomAxis);\n  };\n  __decorate$1d([agGridCommunity.PostConstruct], MiniChartWithAxes.prototype, \"addAxes\", null);\n  return MiniChartWithAxes;\n}(MiniChart);\nvar __extends$1Y = undefined && undefined.__extends || function () {\n  var _extendStatics125 = function extendStatics(d, b) {\n    _extendStatics125 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics125(d, b);\n  };\n  return function (d, b) {\n    _extendStatics125(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MiniColumn = /** @class */function (_super) {\n  __extends$1Y(MiniColumn, _super);\n  function MiniColumn(container, fills, strokes) {\n    var _this = _super.call(this, container, \"groupedColumnTooltip\") || this;\n    var padding = _this.padding;\n    var size = _this.size;\n    var data = [2, 3, 4];\n    var xScale = new BandScale();\n    xScale.domain = [0, 1, 2];\n    xScale.range = [padding, size - padding];\n    xScale.paddingInner = 0.3;\n    xScale.paddingOuter = 0.3;\n    var yScale = new LinearScale();\n    yScale.domain = [0, 4];\n    yScale.range = [size - padding, padding];\n    var bottom = yScale.convert(0);\n    var width = xScale.bandwidth;\n    _this.bars = data.map(function (datum, i) {\n      var top = yScale.convert(datum);\n      var rect = new Rect();\n      rect.x = xScale.convert(i);\n      rect.y = top;\n      rect.width = width;\n      rect.height = bottom - top;\n      rect.strokeWidth = 1;\n      rect.crisp = true;\n      return rect;\n    });\n    _this.updateColors(fills, strokes);\n    _this.root.append(_this.bars);\n    return _this;\n  }\n  MiniColumn.prototype.updateColors = function (fills, strokes) {\n    this.bars.forEach(function (bar, i) {\n      bar.fill = fills[i];\n      bar.stroke = strokes[i];\n    });\n  };\n  MiniColumn.chartType = agGridCommunity.ChartType.GroupedColumn;\n  return MiniColumn;\n}(MiniChartWithAxes);\nvar __extends$1Z = undefined && undefined.__extends || function () {\n  var _extendStatics126 = function extendStatics(d, b) {\n    _extendStatics126 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics126(d, b);\n  };\n  return function (d, b) {\n    _extendStatics126(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MiniStackedColumn = /** @class */function (_super) {\n  __extends$1Z(MiniStackedColumn, _super);\n  function MiniStackedColumn(container, fills, strokes, data, yScaleDomain, tooltipName) {\n    if (data === void 0) {\n      data = MiniStackedColumn.data;\n    }\n    if (yScaleDomain === void 0) {\n      yScaleDomain = [0, 16];\n    }\n    if (tooltipName === void 0) {\n      tooltipName = \"stackedColumnTooltip\";\n    }\n    var _this = _super.call(this, container, tooltipName) || this;\n    var padding = _this.padding;\n    var size = _this.size;\n    var xScale = new BandScale();\n    xScale.domain = [0, 1, 2];\n    xScale.range = [padding, size - padding];\n    xScale.paddingInner = 0.3;\n    xScale.paddingOuter = 0.3;\n    var yScale = new LinearScale();\n    yScale.domain = yScaleDomain;\n    yScale.range = [size - padding, padding];\n    var bottom = yScale.convert(0);\n    var width = xScale.bandwidth;\n    _this.bars = data.map(function (series) {\n      return series.map(function (datum, i) {\n        var top = yScale.convert(datum);\n        var rect = new Rect();\n        rect.x = xScale.convert(i);\n        rect.y = top;\n        rect.width = width;\n        rect.height = bottom - top;\n        rect.strokeWidth = 1;\n        rect.crisp = true;\n        return rect;\n      });\n    });\n    _this.updateColors(fills, strokes);\n    _this.root.append([].concat.apply([], _this.bars));\n    return _this;\n  }\n  MiniStackedColumn.prototype.updateColors = function (fills, strokes) {\n    this.bars.forEach(function (series, i) {\n      return series.forEach(function (bar) {\n        bar.fill = fills[i];\n        bar.stroke = strokes[i];\n      });\n    });\n  };\n  MiniStackedColumn.chartType = agGridCommunity.ChartType.StackedColumn;\n  MiniStackedColumn.data = [[8, 12, 16], [6, 9, 12], [2, 3, 4]];\n  return MiniStackedColumn;\n}(MiniChartWithAxes);\nvar __extends$1_ = undefined && undefined.__extends || function () {\n  var _extendStatics127 = function extendStatics(d, b) {\n    _extendStatics127 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics127(d, b);\n  };\n  return function (d, b) {\n    _extendStatics127(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MiniNormalizedColumn = /** @class */function (_super) {\n  __extends$1_(MiniNormalizedColumn, _super);\n  function MiniNormalizedColumn(container, fills, strokes) {\n    return _super.call(this, container, fills, strokes, MiniNormalizedColumn.data, [0, 10], \"normalizedColumnTooltip\") || this;\n  }\n  MiniNormalizedColumn.chartType = agGridCommunity.ChartType.NormalizedColumn;\n  MiniNormalizedColumn.data = [[10, 10, 10], [6, 7, 8], [2, 4, 6]];\n  return MiniNormalizedColumn;\n}(MiniStackedColumn);\nvar __extends$1$ = undefined && undefined.__extends || function () {\n  var _extendStatics128 = function extendStatics(d, b) {\n    _extendStatics128 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics128(d, b);\n  };\n  return function (d, b) {\n    _extendStatics128(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MiniBar = /** @class */function (_super) {\n  __extends$1$(MiniBar, _super);\n  function MiniBar(container, fills, strokes) {\n    var _this = _super.call(this, container, \"groupedBarTooltip\") || this;\n    var padding = _this.padding;\n    var size = _this.size;\n    var data = [2, 3, 4];\n    var yScale = new BandScale();\n    yScale.domain = [0, 1, 2];\n    yScale.range = [padding, size - padding];\n    yScale.paddingInner = 0.3;\n    yScale.paddingOuter = 0.3;\n    var xScale = new LinearScale();\n    xScale.domain = [0, 4];\n    xScale.range = [size - padding, padding];\n    var bottom = xScale.convert(0);\n    var height = yScale.bandwidth;\n    _this.bars = data.map(function (datum, i) {\n      var rect = new Rect();\n      rect.x = padding;\n      rect.y = yScale.convert(i);\n      rect.width = bottom - xScale.convert(datum);\n      rect.height = height;\n      rect.strokeWidth = 1;\n      rect.crisp = true;\n      return rect;\n    });\n    _this.updateColors(fills, strokes);\n    _this.root.append(_this.bars);\n    return _this;\n  }\n  MiniBar.prototype.updateColors = function (fills, strokes) {\n    this.bars.forEach(function (bar, i) {\n      bar.fill = fills[i];\n      bar.stroke = strokes[i];\n    });\n  };\n  MiniBar.chartType = agGridCommunity.ChartType.GroupedBar;\n  return MiniBar;\n}(MiniChartWithAxes);\nvar __extends$20 = undefined && undefined.__extends || function () {\n  var _extendStatics129 = function extendStatics(d, b) {\n    _extendStatics129 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics129(d, b);\n  };\n  return function (d, b) {\n    _extendStatics129(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MiniStackedBar = /** @class */function (_super) {\n  __extends$20(MiniStackedBar, _super);\n  function MiniStackedBar(container, fills, strokes, data, xScaleDomain, tooltipName) {\n    if (data === void 0) {\n      data = MiniStackedBar.data;\n    }\n    if (xScaleDomain === void 0) {\n      xScaleDomain = [0, 16];\n    }\n    if (tooltipName === void 0) {\n      tooltipName = \"stackedBarTooltip\";\n    }\n    var _this = _super.call(this, container, tooltipName) || this;\n    var size = _this.size;\n    var padding = _this.padding;\n    var yScale = new BandScale();\n    yScale.domain = [0, 1, 2];\n    yScale.range = [padding, size - padding];\n    yScale.paddingInner = 0.3;\n    yScale.paddingOuter = 0.3;\n    var xScale = new LinearScale();\n    xScale.domain = xScaleDomain;\n    xScale.range = [size - padding, padding];\n    var bottom = xScale.convert(0);\n    var height = yScale.bandwidth;\n    _this.bars = data.map(function (series) {\n      return series.map(function (datum, i) {\n        var rect = new Rect();\n        rect.x = padding;\n        rect.y = yScale.convert(i);\n        rect.width = bottom - xScale.convert(datum);\n        rect.height = height;\n        rect.strokeWidth = 1;\n        rect.crisp = true;\n        return rect;\n      });\n    });\n    _this.updateColors(fills, strokes);\n    _this.root.append([].concat.apply([], _this.bars));\n    return _this;\n  }\n  MiniStackedBar.prototype.updateColors = function (fills, strokes) {\n    this.bars.forEach(function (series, i) {\n      return series.forEach(function (bar) {\n        bar.fill = fills[i];\n        bar.stroke = strokes[i];\n      });\n    });\n  };\n  MiniStackedBar.chartType = agGridCommunity.ChartType.StackedBar;\n  MiniStackedBar.data = [[8, 12, 16], [6, 9, 12], [2, 3, 4]];\n  return MiniStackedBar;\n}(MiniChartWithAxes);\nvar __extends$21 = undefined && undefined.__extends || function () {\n  var _extendStatics130 = function extendStatics(d, b) {\n    _extendStatics130 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics130(d, b);\n  };\n  return function (d, b) {\n    _extendStatics130(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MiniNormalizedBar = /** @class */function (_super) {\n  __extends$21(MiniNormalizedBar, _super);\n  function MiniNormalizedBar(container, fills, strokes) {\n    return _super.call(this, container, fills, strokes, MiniNormalizedBar.data, [0, 10], \"normalizedBarTooltip\") || this;\n  }\n  MiniNormalizedBar.chartType = agGridCommunity.ChartType.NormalizedBar;\n  MiniNormalizedBar.data = [[10, 10, 10], [6, 7, 8], [2, 4, 6]];\n  return MiniNormalizedBar;\n}(MiniStackedBar);\nvar __extends$22 = undefined && undefined.__extends || function () {\n  var _extendStatics131 = function extendStatics(d, b) {\n    _extendStatics131 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics131(d, b);\n  };\n  return function (d, b) {\n    _extendStatics131(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MiniDoughnut = /** @class */function (_super) {\n  __extends$22(MiniDoughnut, _super);\n  function MiniDoughnut(container, fills, strokes, centerRadiusScaler, tooltipName) {\n    if (centerRadiusScaler === void 0) {\n      centerRadiusScaler = 0.6;\n    }\n    if (tooltipName === void 0) {\n      tooltipName = \"doughnutTooltip\";\n    }\n    var _this = _super.call(this, container, tooltipName) || this;\n    var radius = (_this.size - _this.padding * 2) / 2;\n    var center = radius + _this.padding;\n    var angles = [[toRadians(-90), toRadians(30)], [toRadians(30), toRadians(120)], [toRadians(120), toRadians(180)], [toRadians(180), toRadians(210)], [toRadians(210), toRadians(240)], [toRadians(240), toRadians(270)]];\n    _this.sectors = angles.map(function (_a) {\n      var startAngle = _a[0],\n        endAngle = _a[1];\n      var sector = new Sector();\n      sector.centerX = center;\n      sector.centerY = center;\n      sector.innerRadius = radius * centerRadiusScaler;\n      sector.outerRadius = radius;\n      sector.startAngle = startAngle;\n      sector.endAngle = endAngle;\n      sector.stroke = undefined;\n      sector.strokeWidth = 1;\n      return sector;\n    });\n    _this.updateColors(fills, strokes);\n    _this.root.append(_this.sectors);\n    return _this;\n  }\n  MiniDoughnut.prototype.updateColors = function (fills, strokes) {\n    this.sectors.forEach(function (sector, i) {\n      sector.fill = fills[i % fills.length];\n      sector.stroke = strokes[i % strokes.length];\n    });\n  };\n  MiniDoughnut.chartType = agGridCommunity.ChartType.Doughnut;\n  return MiniDoughnut;\n}(MiniChart);\nvar __extends$23 = undefined && undefined.__extends || function () {\n  var _extendStatics132 = function extendStatics(d, b) {\n    _extendStatics132 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics132(d, b);\n  };\n  return function (d, b) {\n    _extendStatics132(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MiniPie = /** @class */function (_super) {\n  __extends$23(MiniPie, _super);\n  function MiniPie(container, fills, strokes) {\n    return _super.call(this, container, fills, strokes, 0, \"pieTooltip\") || this;\n  }\n  MiniPie.chartType = agGridCommunity.ChartType.Pie;\n  return MiniPie;\n}(MiniDoughnut);\nvar __extends$24 = undefined && undefined.__extends || function () {\n  var _extendStatics133 = function extendStatics(d, b) {\n    _extendStatics133 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics133(d, b);\n  };\n  return function (d, b) {\n    _extendStatics133(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MiniLine = /** @class */function (_super) {\n  __extends$24(MiniLine, _super);\n  function MiniLine(container, fills, strokes) {\n    var _this = _super.call(this, container, \"lineTooltip\") || this;\n    var size = _this.size;\n    var padding = _this.padding;\n    var xScale = new LinearScale();\n    xScale.domain = [0, 4];\n    xScale.range = [padding, size - padding];\n    var yScale = new LinearScale();\n    yScale.domain = [0, 10];\n    yScale.range = [size - padding, padding];\n    var data = [[9, 7, 8, 5, 6], [5, 6, 3, 4, 1], [1, 3, 4, 8, 7]];\n    _this.lines = data.map(function (series) {\n      var line = new Path();\n      line.strokeWidth = 3;\n      line.lineCap = \"round\";\n      line.fill = undefined;\n      series.forEach(function (datum, i) {\n        line.path[i > 0 ? \"lineTo\" : \"moveTo\"](xScale.convert(i), yScale.convert(datum));\n      });\n      return line;\n    });\n    _this.updateColors(fills, strokes);\n    var clipRect = new ClipRect();\n    clipRect.x = clipRect.y = padding;\n    clipRect.width = clipRect.height = size - padding * 2;\n    clipRect.append(_this.lines);\n    _this.root.append(clipRect);\n    return _this;\n  }\n  MiniLine.prototype.updateColors = function (fills, strokes) {\n    this.lines.forEach(function (line, i) {\n      line.stroke = fills[i];\n    });\n  };\n  MiniLine.chartType = agGridCommunity.ChartType.Line;\n  return MiniLine;\n}(MiniChartWithAxes);\nvar __extends$25 = undefined && undefined.__extends || function () {\n  var _extendStatics134 = function extendStatics(d, b) {\n    _extendStatics134 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics134(d, b);\n  };\n  return function (d, b) {\n    _extendStatics134(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MiniScatter = /** @class */function (_super) {\n  __extends$25(MiniScatter, _super);\n  function MiniScatter(container, fills, strokes) {\n    var _this = _super.call(this, container, \"scatterTooltip\") || this;\n    var size = _this.size;\n    var padding = _this.padding;\n    // [x, y] pairs\n    var data = [[[0.3, 3], [1.1, 0.9], [2, 0.4], [3.4, 2.4]], [[0, 0.3], [1, 2], [2.4, 1.4], [3, 0]]];\n    var xScale = new LinearScale();\n    xScale.domain = [-0.5, 4];\n    xScale.range = [padding * 2, size - padding];\n    var yScale = new LinearScale();\n    yScale.domain = [-0.5, 3.5];\n    yScale.range = [size - padding, padding];\n    var points = [];\n    data.forEach(function (series) {\n      series.forEach(function (_a) {\n        var x = _a[0],\n          y = _a[1];\n        var arc = new Arc();\n        arc.strokeWidth = 1;\n        arc.centerX = xScale.convert(x);\n        arc.centerY = yScale.convert(y);\n        arc.radiusX = arc.radiusY = 2.5;\n        points.push(arc);\n      });\n    });\n    _this.points = points;\n    _this.updateColors(fills, strokes);\n    var clipRect = new ClipRect();\n    clipRect.x = clipRect.y = padding;\n    clipRect.width = clipRect.height = size - padding * 2;\n    clipRect.append(_this.points);\n    _this.root.append(clipRect);\n    return _this;\n  }\n  MiniScatter.prototype.updateColors = function (fills, strokes) {\n    this.points.forEach(function (line, i) {\n      line.stroke = strokes[i % strokes.length];\n      line.fill = fills[i % fills.length];\n    });\n  };\n  MiniScatter.chartType = agGridCommunity.ChartType.Scatter;\n  return MiniScatter;\n}(MiniChartWithAxes);\nvar __extends$26 = undefined && undefined.__extends || function () {\n  var _extendStatics135 = function extendStatics(d, b) {\n    _extendStatics135 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics135(d, b);\n  };\n  return function (d, b) {\n    _extendStatics135(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MiniBubble = /** @class */function (_super) {\n  __extends$26(MiniBubble, _super);\n  function MiniBubble(container, fills, strokes) {\n    var _this = _super.call(this, container, \"bubbleTooltip\") || this;\n    var size = _this.size;\n    var padding = _this.padding;\n    // [x, y, radius] triples\n    var data = [[[0.1, 0.3, 5], [0.5, 0.4, 7], [0.2, 0.8, 7]], [[0.8, 0.7, 5], [0.7, 0.3, 9]]];\n    var xScale = new LinearScale();\n    xScale.domain = [0, 1];\n    xScale.range = [padding * 2, size - padding];\n    var yScale = new LinearScale();\n    yScale.domain = [0, 1];\n    yScale.range = [size - padding, padding];\n    var points = [];\n    data.forEach(function (series) {\n      series.forEach(function (_a) {\n        var x = _a[0],\n          y = _a[1],\n          radius = _a[2];\n        var arc = new Arc();\n        arc.strokeWidth = 1;\n        arc.centerX = xScale.convert(x);\n        arc.centerY = yScale.convert(y);\n        arc.radiusX = arc.radiusY = radius;\n        arc.fillOpacity = 0.7;\n        points.push(arc);\n      });\n    });\n    _this.points = points;\n    _this.updateColors(fills, strokes);\n    var clipRect = new ClipRect();\n    clipRect.x = padding;\n    clipRect.y = padding;\n    clipRect.width = size - padding * 2;\n    clipRect.height = size - padding * 2;\n    clipRect.append(_this.points);\n    _this.root.append(clipRect);\n    return _this;\n  }\n  MiniBubble.prototype.updateColors = function (fills, strokes) {\n    this.points.forEach(function (line, i) {\n      line.stroke = strokes[i % strokes.length];\n      line.fill = fills[i % fills.length];\n    });\n  };\n  MiniBubble.chartType = agGridCommunity.ChartType.Bubble;\n  return MiniBubble;\n}(MiniChartWithAxes);\nvar __extends$27 = undefined && undefined.__extends || function () {\n  var _extendStatics136 = function extendStatics(d, b) {\n    _extendStatics136 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics136(d, b);\n  };\n  return function (d, b) {\n    _extendStatics136(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MiniArea = /** @class */function (_super) {\n  __extends$27(MiniArea, _super);\n  function MiniArea(container, fills, strokes, data) {\n    if (data === void 0) {\n      data = MiniArea.data;\n    }\n    var _this = _super.call(this, container, \"groupedAreaTooltip\") || this;\n    var size = _this.size;\n    var padding = _this.padding;\n    var xScale = new BandScale();\n    xScale.domain = [0, 1, 2];\n    xScale.paddingInner = 1;\n    xScale.paddingOuter = 0;\n    xScale.range = [padding + 0.5, size - padding - 0.5];\n    var yScale = new LinearScale();\n    yScale.domain = [0, 6];\n    yScale.range = [size - padding + 0.5, padding];\n    var xCount = data.length;\n    var last = xCount * 2 - 1;\n    var pathData = [];\n    var bottomY = yScale.convert(0);\n    data.forEach(function (datum, i) {\n      var x = xScale.convert(i);\n      datum.forEach(function (yDatum, j) {\n        var y = yScale.convert(yDatum);\n        var points = pathData[j] || (pathData[j] = []);\n        points[i] = {\n          x: x,\n          y: y\n        };\n        points[last - i] = {\n          x: x,\n          y: bottomY\n        };\n      });\n    });\n    _this.areas = pathData.reverse().map(function (points) {\n      var area = new Path();\n      area.strokeWidth = 1;\n      area.fillOpacity = 0.7;\n      var path = area.path;\n      path.clear();\n      points.forEach(function (point, i) {\n        return path[i > 0 ? \"lineTo\" : \"moveTo\"](point.x, point.y);\n      });\n      path.closePath();\n      return area;\n    });\n    _this.updateColors(fills, strokes);\n    _this.root.append(_this.areas);\n    return _this;\n  }\n  MiniArea.prototype.updateColors = function (fills, strokes) {\n    this.areas.forEach(function (area, i) {\n      area.fill = fills[i];\n      area.stroke = strokes[i];\n    });\n  };\n  MiniArea.chartType = agGridCommunity.ChartType.Area;\n  MiniArea.data = [[1, 3, 5], [2, 6, 4], [5, 3, 1]];\n  return MiniArea;\n}(MiniChartWithAxes);\nvar __extends$28 = undefined && undefined.__extends || function () {\n  var _extendStatics137 = function extendStatics(d, b) {\n    _extendStatics137 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics137(d, b);\n  };\n  return function (d, b) {\n    _extendStatics137(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MiniStackedArea = /** @class */function (_super) {\n  __extends$28(MiniStackedArea, _super);\n  function MiniStackedArea(container, fills, strokes, data, tooltipName) {\n    if (data === void 0) {\n      data = MiniStackedArea.data;\n    }\n    if (tooltipName === void 0) {\n      tooltipName = \"stackedAreaTooltip\";\n    }\n    var _this = _super.call(this, container, tooltipName) || this;\n    var size = _this.size;\n    var padding = _this.padding;\n    var xScale = new BandScale();\n    xScale.domain = [0, 1, 2];\n    xScale.paddingInner = 1;\n    xScale.paddingOuter = 0;\n    xScale.range = [padding + 0.5, size - padding - 0.5];\n    var yScale = new LinearScale();\n    yScale.domain = [0, 16];\n    yScale.range = [size - padding + 0.5, padding + 0.5];\n    var xCount = data.length;\n    var last = xCount * 2 - 1;\n    var pathData = [];\n    data.forEach(function (datum, i) {\n      var x = xScale.convert(i);\n      var total = 0;\n      datum.forEach(function (yDatum, j) {\n        var y = yScale.convert(total + yDatum);\n        var points = pathData[j] || (pathData[j] = []);\n        points[i] = {\n          x: x,\n          y: y\n        };\n        points[last - i] = {\n          x: x,\n          y: yScale.convert(total) // bottom y\n        };\n\n        total += yDatum;\n      });\n    });\n    _this.areas = pathData.map(function (points) {\n      var area = new Path();\n      area.strokeWidth = 1;\n      var path = area.path;\n      path.clear();\n      points.forEach(function (point, i) {\n        return path[i > 0 ? \"lineTo\" : \"moveTo\"](point.x, point.y);\n      });\n      path.closePath();\n      return area;\n    });\n    _this.updateColors(fills, strokes);\n    _this.root.append(_this.areas);\n    return _this;\n  }\n  MiniStackedArea.prototype.updateColors = function (fills, strokes) {\n    this.areas.forEach(function (area, i) {\n      area.fill = fills[i];\n      area.stroke = strokes[i];\n    });\n  };\n  MiniStackedArea.chartType = agGridCommunity.ChartType.StackedArea;\n  MiniStackedArea.data = [[2, 3, 2], [3, 6, 5], [6, 2, 2]];\n  return MiniStackedArea;\n}(MiniChartWithAxes);\nvar __extends$29 = undefined && undefined.__extends || function () {\n  var _extendStatics138 = function extendStatics(d, b) {\n    _extendStatics138 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics138(d, b);\n  };\n  return function (d, b) {\n    _extendStatics138(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MiniNormalizedArea = /** @class */function (_super) {\n  __extends$29(MiniNormalizedArea, _super);\n  function MiniNormalizedArea(container, fills, strokes, data) {\n    if (data === void 0) {\n      data = MiniNormalizedArea.data;\n    }\n    return _super.call(this, container, fills, strokes, data, \"normalizedAreaTooltip\") || this;\n  }\n  MiniNormalizedArea.chartType = agGridCommunity.ChartType.NormalizedArea;\n  MiniNormalizedArea.data = MiniStackedArea.data.map(function (stack) {\n    var sum = stack.reduce(function (p, c) {\n      return p + c;\n    }, 0);\n    return stack.map(function (v) {\n      return v / sum * 16;\n    });\n  });\n  return MiniNormalizedArea;\n}(MiniStackedArea);\nvar __extends$2a = undefined && undefined.__extends || function () {\n  var _extendStatics139 = function extendStatics(d, b) {\n    _extendStatics139 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics139(d, b);\n  };\n  return function (d, b) {\n    _extendStatics139(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MiniHistogram = /** @class */function (_super) {\n  __extends$2a(MiniHistogram, _super);\n  function MiniHistogram(container, fills, strokes) {\n    var _this = _super.call(this, container, \"histogramTooltip\") || this;\n    var padding = _this.padding;\n    var size = _this.size;\n    // approx normal curve\n    var data = [2, 5, 11, 13, 10, 6, 1];\n    var xScale = new LinearScale();\n    xScale.domain = [0, data.length];\n    xScale.range = [padding, size - padding];\n    var yScale = new LinearScale();\n    yScale.domain = [0, data.reduce(function (a, b) {\n      return Math.max(a, b);\n    }, 0)];\n    yScale.range = [size - padding, padding];\n    var bottom = yScale.convert(0);\n    _this.bars = data.map(function (datum, i) {\n      var top = yScale.convert(datum);\n      var left = xScale.convert(i);\n      var right = xScale.convert(i + 1);\n      var rect = new Rect();\n      rect.x = left;\n      rect.y = top;\n      rect.width = right - left;\n      rect.height = bottom - top;\n      rect.strokeWidth = 1;\n      rect.crisp = true;\n      return rect;\n    });\n    _this.updateColors(fills, strokes);\n    _this.root.append(_this.bars);\n    return _this;\n  }\n  MiniHistogram.prototype.updateColors = function (_a, _b) {\n    var fill = _a[0];\n    var stroke = _b[0];\n    this.bars.forEach(function (bar) {\n      bar.fill = fill;\n      bar.stroke = stroke;\n    });\n  };\n  MiniHistogram.chartType = agGridCommunity.ChartType.Histogram;\n  return MiniHistogram;\n}(MiniChartWithAxes);\nvar __extends$2b = undefined && undefined.__extends || function () {\n  var _extendStatics140 = function extendStatics(d, b) {\n    _extendStatics140 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics140(d, b);\n  };\n  return function (d, b) {\n    _extendStatics140(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1e = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MiniChartsContainer = /** @class */function (_super) {\n  __extends$2b(MiniChartsContainer, _super);\n  function MiniChartsContainer(chartController, fills, strokes) {\n    var _this = _super.call(this, MiniChartsContainer.TEMPLATE) || this;\n    _this.wrappers = {};\n    _this.chartController = chartController;\n    _this.fills = fills;\n    _this.strokes = strokes;\n    return _this;\n  }\n  MiniChartsContainer.prototype.init = function () {\n    var _this = this;\n    var chartGroups = {\n      columnGroup: [MiniColumn, MiniStackedColumn, MiniNormalizedColumn],\n      barGroup: [MiniBar, MiniStackedBar, MiniNormalizedBar],\n      pieGroup: [MiniPie, MiniDoughnut],\n      lineGroup: [MiniLine],\n      scatterGroup: [MiniScatter, MiniBubble],\n      areaGroup: [MiniArea, MiniStackedArea, MiniNormalizedArea],\n      histogramGroup: [MiniHistogram]\n    };\n    var eGui = this.getGui();\n    Object.keys(chartGroups).forEach(function (group) {\n      var chartGroup = chartGroups[group];\n      var groupComponent = _this.createBean(new agGridCommunity.AgGroupComponent({\n        title: _this.chartTranslator.translate(group),\n        suppressEnabledCheckbox: true,\n        enabled: true,\n        suppressOpenCloseIcons: true,\n        cssIdentifier: 'charts-settings',\n        direction: 'horizontal'\n      }));\n      chartGroup.forEach(function (MiniClass) {\n        var miniWrapper = document.createElement('div');\n        agGridCommunity._.addCssClass(miniWrapper, 'ag-chart-mini-thumbnail');\n        _this.addManagedListener(miniWrapper, 'click', function () {\n          _this.chartController.setChartType(MiniClass.chartType);\n          _this.refreshSelected();\n        });\n        _this.wrappers[MiniClass.chartType] = miniWrapper;\n        _this.createBean(new MiniClass(miniWrapper, _this.fills, _this.strokes));\n        groupComponent.addItem(miniWrapper);\n      });\n      eGui.appendChild(groupComponent.getGui());\n    });\n    this.refreshSelected();\n  };\n  MiniChartsContainer.prototype.refreshSelected = function () {\n    var type = this.chartController.getChartType();\n    for (var wrapper in this.wrappers) {\n      agGridCommunity._.addOrRemoveCssClass(this.wrappers[wrapper], 'ag-selected', wrapper === type);\n    }\n  };\n  MiniChartsContainer.TEMPLATE = \"<div class=\\\"ag-chart-settings-mini-wrapper\\\"></div>\";\n  __decorate$1e([agGridCommunity.Autowired('chartTranslator')], MiniChartsContainer.prototype, \"chartTranslator\", void 0);\n  __decorate$1e([agGridCommunity.PostConstruct], MiniChartsContainer.prototype, \"init\", null);\n  return MiniChartsContainer;\n}(agGridCommunity.Component);\nvar __extends$2c = undefined && undefined.__extends || function () {\n  var _extendStatics141 = function extendStatics(d, b) {\n    _extendStatics141 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics141(d, b);\n  };\n  return function (d, b) {\n    _extendStatics141(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1f = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ChartSettingsPanel = /** @class */function (_super) {\n  __extends$2c(ChartSettingsPanel, _super);\n  function ChartSettingsPanel(chartController) {\n    var _this = _super.call(this, ChartSettingsPanel.TEMPLATE) || this;\n    _this.miniCharts = [];\n    _this.cardItems = [];\n    _this.activePaletteIndex = 0;\n    _this.palettes = [];\n    _this.themes = [];\n    _this.chartController = chartController;\n    return _this;\n  }\n  ChartSettingsPanel.prototype.postConstruct = function () {\n    var _this = this;\n    this.resetPalettes();\n    this.ePrevBtn.insertAdjacentElement('afterbegin', agGridCommunity._.createIconNoSpan('previous', this.gridOptionsWrapper));\n    this.eNextBtn.insertAdjacentElement('afterbegin', agGridCommunity._.createIconNoSpan('next', this.gridOptionsWrapper));\n    this.addManagedListener(this.ePrevBtn, 'click', function () {\n      return _this.setActivePalette(_this.getPrev(), 'left');\n    });\n    this.addManagedListener(this.eNextBtn, 'click', function () {\n      return _this.setActivePalette(_this.getNext(), 'right');\n    });\n    this.addManagedListener(this.chartController, ChartController.EVENT_CHART_UPDATED, this.resetPalettes.bind(this));\n  };\n  ChartSettingsPanel.prototype.resetPalettes = function () {\n    var _this = this;\n    var palettes = this.chartController.getPalettes();\n    if (agGridCommunity._.shallowCompare(palettes, this.palettes)) {\n      return;\n    }\n    this.palettes = palettes;\n    this.themes = this.chartController.getThemes();\n    this.activePaletteIndex = agGridCommunity._.findIndex(this.themes, function (name) {\n      return name === _this.chartController.getThemeName();\n    });\n    this.cardItems = [];\n    agGridCommunity._.clearElement(this.eCardSelector);\n    this.destroyMiniCharts();\n    this.palettes.forEach(function (palette, index) {\n      var isActivePalette = _this.activePaletteIndex === index;\n      var fills = palette.fills,\n        strokes = palette.strokes;\n      var miniChartsContainer = _this.createBean(new MiniChartsContainer(_this.chartController, fills, strokes));\n      _this.miniCharts.push(miniChartsContainer);\n      _this.eMiniChartsContainer.appendChild(miniChartsContainer.getGui());\n      _this.addCardLink(index);\n      if (isActivePalette) {\n        miniChartsContainer.refreshSelected();\n      } else {\n        agGridCommunity._.addCssClass(miniChartsContainer.getGui(), 'ag-hidden');\n      }\n    });\n    agGridCommunity._.addOrRemoveCssClass(this.eNavBar, 'ag-hidden', this.palettes.length <= 1);\n    agGridCommunity._.radioCssClass(this.cardItems[this.activePaletteIndex], 'ag-selected', 'ag-not-selected');\n  };\n  ChartSettingsPanel.prototype.addCardLink = function (index) {\n    var _this = this;\n    var link = document.createElement('div');\n    agGridCommunity._.addCssClass(link, 'ag-chart-settings-card-item');\n    this.addManagedListener(link, 'click', function () {\n      var activePaletteIndex = _this.activePaletteIndex;\n      _this.setActivePalette(index, index < activePaletteIndex ? 'left' : 'right');\n    });\n    this.eCardSelector.appendChild(link);\n    this.cardItems.push(link);\n  };\n  ChartSettingsPanel.prototype.getPrev = function () {\n    var prev = this.activePaletteIndex - 1;\n    if (prev < 0) {\n      prev = this.palettes.length - 1;\n    }\n    return prev;\n  };\n  ChartSettingsPanel.prototype.prev = function () {};\n  ChartSettingsPanel.prototype.getNext = function () {\n    var next = this.activePaletteIndex + 1;\n    if (next >= this.palettes.length) {\n      next = 0;\n    }\n    return next;\n  };\n  ChartSettingsPanel.prototype.setActivePalette = function (index, animationDirection) {\n    var _this = this;\n    if (this.isAnimating || this.activePaletteIndex === index) {\n      return;\n    }\n    agGridCommunity._.radioCssClass(this.cardItems[index], 'ag-selected', 'ag-not-selected');\n    var currentPalette = this.miniCharts[this.activePaletteIndex];\n    var currentGui = currentPalette.getGui();\n    var futurePalette = this.miniCharts[index];\n    var nextGui = futurePalette.getGui();\n    currentPalette.refreshSelected();\n    futurePalette.refreshSelected();\n    var multiplier = animationDirection === 'left' ? -1 : 1;\n    var final = nextGui.style.left = agGridCommunity._.getAbsoluteWidth(this.getGui()) * multiplier + \"px\";\n    var animatingClass = 'ag-animating';\n    agGridCommunity._.removeCssClass(nextGui, 'ag-hidden');\n    agGridCommunity._.addCssClass(currentGui, animatingClass);\n    agGridCommunity._.addCssClass(nextGui, animatingClass);\n    this.activePaletteIndex = index;\n    this.chartController.setChartThemeName(this.themes[index]);\n    this.isAnimating = true;\n    window.setTimeout(function () {\n      currentGui.style.left = -parseFloat(final) + \"px\";\n      nextGui.style.left = '0px';\n    }, 0);\n    window.setTimeout(function () {\n      _this.isAnimating = false;\n      agGridCommunity._.removeCssClass(currentGui, animatingClass);\n      agGridCommunity._.removeCssClass(nextGui, animatingClass);\n      agGridCommunity._.addCssClass(currentGui, 'ag-hidden');\n    }, 300);\n  };\n  ChartSettingsPanel.prototype.destroyMiniCharts = function () {\n    agGridCommunity._.clearElement(this.eMiniChartsContainer);\n    this.miniCharts = this.destroyBeans(this.miniCharts);\n  };\n  ChartSettingsPanel.prototype.destroy = function () {\n    this.destroyMiniCharts();\n    _super.prototype.destroy.call(this);\n  };\n  ChartSettingsPanel.TEMPLATE = \"<div class=\\\"ag-chart-settings-wrapper\\\">\\n            <div ref=\\\"eMiniChartsContainer\\\" class=\\\"ag-chart-settings-mini-charts-container\\\"></div>\\n            <div ref=\\\"eNavBar\\\" class=\\\"ag-chart-settings-nav-bar\\\">\\n                <div ref=\\\"ePrevBtn\\\" class=\\\"ag-chart-settings-prev\\\">\\n                    <button type=\\\"button\\\" class=\\\"ag-chart-settings-prev-button\\\"></button>\\n                </div>\\n                <div ref=\\\"eCardSelector\\\" class=\\\"ag-chart-settings-card-selector\\\"></div>\\n                <div ref=\\\"eNextBtn\\\" class=\\\"ag-chart-settings-next\\\">\\n                    <button type=\\\"button\\\" class=\\\"ag-chart-settings-next-button\\\"></button>\\n                </div>\\n            </div>\\n        </div>\";\n  __decorate$1f([agGridCommunity.Autowired('gridOptionsWrapper')], ChartSettingsPanel.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1f([agGridCommunity.RefSelector('eMiniChartsContainer')], ChartSettingsPanel.prototype, \"eMiniChartsContainer\", void 0);\n  __decorate$1f([agGridCommunity.RefSelector('eNavBar')], ChartSettingsPanel.prototype, \"eNavBar\", void 0);\n  __decorate$1f([agGridCommunity.RefSelector('eCardSelector')], ChartSettingsPanel.prototype, \"eCardSelector\", void 0);\n  __decorate$1f([agGridCommunity.RefSelector('ePrevBtn')], ChartSettingsPanel.prototype, \"ePrevBtn\", void 0);\n  __decorate$1f([agGridCommunity.RefSelector('eNextBtn')], ChartSettingsPanel.prototype, \"eNextBtn\", void 0);\n  __decorate$1f([agGridCommunity.PostConstruct], ChartSettingsPanel.prototype, \"postConstruct\", null);\n  return ChartSettingsPanel;\n}(agGridCommunity.Component);\nvar __extends$2d = undefined && undefined.__extends || function () {\n  var _extendStatics142 = function extendStatics(d, b) {\n    _extendStatics142 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics142(d, b);\n  };\n  return function (d, b) {\n    _extendStatics142(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1g = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar TabbedChartMenu = /** @class */function (_super) {\n  __extends$2d(TabbedChartMenu, _super);\n  function TabbedChartMenu(params) {\n    var _this = _super.call(this) || this;\n    _this.tabs = [];\n    _this.chartIcons = {};\n    var controller = params.controller,\n      type = params.type,\n      panels = params.panels;\n    _this.chartController = controller;\n    _this.currentChartType = type;\n    _this.panels = panels;\n    return _this;\n  }\n  TabbedChartMenu.prototype.init = function () {\n    var _this = this;\n    this.panels.forEach(function (panel) {\n      var panelType = panel.replace('chart', '').toLowerCase();\n      var _a = _this.createTab(panel, panelType, _this.getPanelClass(panelType)),\n        comp = _a.comp,\n        tab = _a.tab;\n      _this.tabs.push(tab);\n      _this.addDestroyFunc(function () {\n        return _this.destroyBean(comp);\n      });\n    });\n    this.tabbedLayout = new agGridCommunity.TabbedLayout({\n      items: this.tabs,\n      cssClass: 'ag-chart-tabbed-menu'\n    });\n    this.getContext().createBean(this.tabbedLayout);\n  };\n  TabbedChartMenu.prototype.createTab = function (name, title, ChildClass) {\n    var eWrapperDiv = document.createElement('div');\n    agGridCommunity._.addCssClass(eWrapperDiv, 'ag-chart-tab');\n    agGridCommunity._.addCssClass(eWrapperDiv, \"ag-chart-\" + title);\n    var comp = new ChildClass(this.chartController);\n    this.getContext().createBean(comp);\n    eWrapperDiv.appendChild(comp.getGui());\n    var titleEl = document.createElement('div');\n    var translatedTitle = this.chartTranslator.translate(title);\n    titleEl.innerText = translatedTitle;\n    return {\n      comp: comp,\n      tab: {\n        title: titleEl,\n        titleLabel: translatedTitle,\n        bodyPromise: agGridCommunity.Promise.resolve(eWrapperDiv),\n        name: name\n      }\n    };\n  };\n  TabbedChartMenu.prototype.getMinDimensions = function () {\n    return this.tabbedLayout.getMinDimensions();\n  };\n  TabbedChartMenu.prototype.updateCurrentChartType = function (chartType) {\n    agGridCommunity._.removeCssClass(this.chartIcons[this.currentChartType], 'ag-selected');\n    this.currentChartType = chartType;\n    agGridCommunity._.addCssClass(this.chartIcons[chartType], 'ag-selected');\n  };\n  TabbedChartMenu.prototype.showTab = function (tab) {\n    var tabItem = this.tabs[tab];\n    this.tabbedLayout.showItem(tabItem);\n  };\n  TabbedChartMenu.prototype.getGui = function () {\n    return this.tabbedLayout && this.tabbedLayout.getGui();\n  };\n  TabbedChartMenu.prototype.destroy = function () {\n    if (this.parentComponent && this.parentComponent.isAlive()) {\n      this.destroyBean(this.parentComponent);\n    }\n    _super.prototype.destroy.call(this);\n  };\n  TabbedChartMenu.prototype.getPanelClass = function (panelType) {\n    switch (panelType) {\n      case TabbedChartMenu.TAB_DATA:\n        return ChartDataPanel;\n      case TabbedChartMenu.TAB_FORMAT:\n        return ChartFormattingPanel;\n      default:\n        return ChartSettingsPanel;\n    }\n  };\n  TabbedChartMenu.EVENT_TAB_SELECTED = 'tabSelected';\n  TabbedChartMenu.TAB_MAIN = 'settings';\n  TabbedChartMenu.TAB_DATA = 'data';\n  TabbedChartMenu.TAB_FORMAT = 'format';\n  __decorate$1g([agGridCommunity.Autowired('chartTranslator')], TabbedChartMenu.prototype, \"chartTranslator\", void 0);\n  __decorate$1g([agGridCommunity.PostConstruct], TabbedChartMenu.prototype, \"init\", null);\n  return TabbedChartMenu;\n}(agGridCommunity.Component);\nvar __extends$2e = undefined && undefined.__extends || function () {\n  var _extendStatics143 = function extendStatics(d, b) {\n    _extendStatics143 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics143(d, b);\n  };\n  return function (d, b) {\n    _extendStatics143(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1h = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ChartMenu = /** @class */function (_super) {\n  __extends$2e(ChartMenu, _super);\n  function ChartMenu(eChartContainer, eMenuPanelContainer, chartController) {\n    var _this = _super.call(this, ChartMenu.TEMPLATE) || this;\n    _this.eChartContainer = eChartContainer;\n    _this.eMenuPanelContainer = eMenuPanelContainer;\n    _this.chartController = chartController;\n    _this.buttons = {\n      chartSettings: ['menu', function () {\n        return _this.showMenu(\"chartSettings\");\n      }],\n      chartData: ['menu', function () {\n        return _this.showMenu(\"chartData\");\n      }],\n      chartFormat: ['menu', function () {\n        return _this.showMenu(\"chartFormat\");\n      }],\n      chartLink: ['linked', function (e) {\n        return _this.toggleDetached(e);\n      }],\n      chartUnlink: ['unlinked', function (e) {\n        return _this.toggleDetached(e);\n      }],\n      chartDownload: ['save', function () {\n        return _this.saveChart();\n      }]\n    };\n    _this.tabs = [];\n    _this.menuVisible = false;\n    return _this;\n  }\n  ChartMenu.prototype.postConstruct = function () {\n    this.createButtons();\n    this.refreshMenuClasses();\n  };\n  ChartMenu.prototype.isVisible = function () {\n    return this.menuVisible;\n  };\n  ChartMenu.prototype.getToolbarOptions = function () {\n    var _this = this;\n    var tabOptions = ['chartSettings', 'chartData', 'chartFormat', this.chartController.isChartLinked() ? 'chartLink' : 'chartUnlink', 'chartDownload'];\n    var toolbarItemsFunc = this.gridOptionsWrapper.getChartToolbarItemsFunc();\n    if (toolbarItemsFunc) {\n      var params = {\n        api: this.gridOptionsWrapper.getApi(),\n        columnApi: this.gridOptionsWrapper.getColumnApi(),\n        defaultItems: tabOptions\n      };\n      tabOptions = toolbarItemsFunc(params).filter(function (option) {\n        if (!_this.buttons[option]) {\n          console.warn(\"ag-Grid: '\" + option + \" is not a valid Chart Toolbar Option\");\n          return false;\n        }\n        return true;\n      });\n    }\n    // pivot charts use the column tool panel instead of the data panel\n    if (this.chartController.isPivotChart()) {\n      tabOptions = tabOptions.filter(function (option) {\n        return option !== 'chartData';\n      });\n    }\n    var ignoreOptions = ['chartUnlink', 'chartLink', 'chartDownload'];\n    this.tabs = tabOptions.filter(function (option) {\n      return ignoreOptions.indexOf(option) === -1;\n    });\n    return tabOptions.filter(function (value) {\n      return ignoreOptions.indexOf(value) !== -1 || _this.tabs.length && value === _this.tabs[0];\n    });\n  };\n  ChartMenu.prototype.toggleDetached = function (e) {\n    var target = e.target;\n    var active = agGridCommunity._.containsClass(target, 'ag-icon-linked');\n    agGridCommunity._.addOrRemoveCssClass(target, 'ag-icon-linked', !active);\n    agGridCommunity._.addOrRemoveCssClass(target, 'ag-icon-unlinked', active);\n    this.chartController.detachChartRange();\n  };\n  ChartMenu.prototype.createButtons = function () {\n    var _this = this;\n    var chartToolbarOptions = this.getToolbarOptions();\n    var gui = this.getGui();\n    chartToolbarOptions.forEach(function (button) {\n      var buttonConfig = _this.buttons[button];\n      var iconName = buttonConfig[0],\n        callback = buttonConfig[1];\n      var buttonEl = agGridCommunity._.createIconNoSpan(iconName, _this.gridOptionsWrapper, undefined, true);\n      agGridCommunity._.addCssClass(buttonEl, 'ag-chart-menu-icon');\n      _this.addManagedListener(buttonEl, 'click', callback);\n      gui.appendChild(buttonEl);\n    });\n  };\n  ChartMenu.prototype.saveChart = function () {\n    var event = {\n      type: ChartMenu.EVENT_DOWNLOAD_CHART\n    };\n    this.dispatchEvent(event);\n  };\n  ChartMenu.prototype.createMenuPanel = function (defaultTab) {\n    var _this = this;\n    var width = this.gridOptionsWrapper.chartMenuPanelWidth();\n    var menuPanel = this.menuPanel = this.createBean(new agGridCommunity.AgPanel({\n      minWidth: width,\n      width: width,\n      height: '100%',\n      closable: true,\n      hideTitleBar: true,\n      cssIdentifier: 'chart-menu'\n    }));\n    menuPanel.setParentComponent(this);\n    this.eMenuPanelContainer.appendChild(menuPanel.getGui());\n    this.tabbedMenu = this.createBean(new TabbedChartMenu({\n      controller: this.chartController,\n      type: this.chartController.getChartType(),\n      panels: this.tabs\n    }));\n    this.addManagedListener(menuPanel, agGridCommunity.Component.EVENT_DESTROYED, function () {\n      return _this.destroyBean(_this.tabbedMenu);\n    });\n    return new agGridCommunity.Promise(function (res) {\n      window.setTimeout(function () {\n        menuPanel.setBodyComponent(_this.tabbedMenu);\n        _this.tabbedMenu.showTab(defaultTab);\n        _this.addManagedListener(_this.eChartContainer, 'click', function (event) {\n          if (_this.getGui().contains(event.target)) {\n            return;\n          }\n          if (_this.menuVisible) {\n            _this.hideMenu();\n          }\n        });\n        res(menuPanel);\n      }, 100);\n    });\n  };\n  ChartMenu.prototype.showContainer = function () {\n    if (!this.menuPanel) {\n      return;\n    }\n    this.menuVisible = true;\n    this.showParent(this.menuPanel.getWidth());\n    this.refreshMenuClasses();\n  };\n  ChartMenu.prototype.showMenu = function (tabName) {\n    var tab = this.tabs.indexOf(tabName);\n    if (!this.menuPanel) {\n      this.createMenuPanel(tab).then(this.showContainer.bind(this));\n    } else {\n      this.showContainer();\n    }\n  };\n  ChartMenu.prototype.hideMenu = function () {\n    var _this = this;\n    this.hideParent();\n    window.setTimeout(function () {\n      _this.menuVisible = false;\n      _this.refreshMenuClasses();\n    }, 500);\n  };\n  ChartMenu.prototype.refreshMenuClasses = function () {\n    agGridCommunity._.addOrRemoveCssClass(this.eChartContainer, 'ag-chart-menu-visible', this.menuVisible);\n    agGridCommunity._.addOrRemoveCssClass(this.eChartContainer, 'ag-chart-menu-hidden', !this.menuVisible);\n  };\n  ChartMenu.prototype.showParent = function (width) {\n    this.eMenuPanelContainer.style.minWidth = width + \"px\";\n  };\n  ChartMenu.prototype.hideParent = function () {\n    this.eMenuPanelContainer.style.minWidth = '0';\n  };\n  ChartMenu.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    if (this.menuPanel && this.menuPanel.isAlive()) {\n      this.destroyBean(this.menuPanel);\n    }\n  };\n  ChartMenu.EVENT_DOWNLOAD_CHART = \"downloadChart\";\n  ChartMenu.TEMPLATE = \"<div class=\\\"ag-chart-menu\\\"></div>\";\n  __decorate$1h([agGridCommunity.Autowired(\"gridOptionsWrapper\")], ChartMenu.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1h([agGridCommunity.PostConstruct], ChartMenu.prototype, \"postConstruct\", null);\n  return ChartMenu;\n}(agGridCommunity.Component);\nvar __extends$2f = undefined && undefined.__extends || function () {\n  var _extendStatics144 = function extendStatics(d, b) {\n    _extendStatics144 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics144(d, b);\n  };\n  return function (d, b) {\n    _extendStatics144(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign$a = undefined && undefined.__assign || function () {\n  __assign$a = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$a.apply(this, arguments);\n};\nvar __decorate$1i = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar TitleEdit = /** @class */function (_super) {\n  __extends$2f(TitleEdit, _super);\n  function TitleEdit(chartMenu) {\n    var _this = _super.call(this, TitleEdit.TEMPLATE) || this;\n    _this.chartMenu = chartMenu;\n    return _this;\n  }\n  TitleEdit.prototype.init = function () {\n    var _this = this;\n    this.addManagedListener(this.getGui(), 'keypress', function (e) {\n      if (e.key === 'Enter') {\n        _this.endEditing();\n      }\n    });\n    this.addManagedListener(this.getGui(), 'blur', this.endEditing.bind(this));\n  };\n  /* should be called when the containing component changes to a new chart proxy */\n  TitleEdit.prototype.setChartProxy = function (chartProxy) {\n    var _this = this;\n    if (this.chartProxy) {\n      for (var i = 0; i++; i < this.destroyableChartListeners.length) {\n        this.destroyableChartListeners[i]();\n      }\n      this.destroyableChartListeners = [];\n    }\n    this.chartProxy = chartProxy;\n    var chart = this.chartProxy.getChart();\n    var canvas = chart.scene.canvas.element;\n    var destroyDbleClickListener = this.addManagedListener(canvas, 'dblclick', function (event) {\n      var title = chart.title;\n      if (title && title.node.containsPoint(event.offsetX, event.offsetY)) {\n        var bbox = title.node.computeBBox();\n        var xy = title.node.inverseTransformPoint(bbox.x, bbox.y);\n        _this.startEditing(__assign$a(__assign$a({}, bbox), xy));\n      }\n    });\n    var destroyMouseMoveListener = this.addManagedListener(canvas, 'mousemove', function (event) {\n      var title = chart.title;\n      var inTitle = title && title.node.containsPoint(event.offsetX, event.offsetY);\n      canvas.style.cursor = inTitle ? 'pointer' : '';\n    });\n    this.destroyableChartListeners = [destroyDbleClickListener, destroyMouseMoveListener];\n  };\n  TitleEdit.prototype.startEditing = function (titleBBox) {\n    if (this.chartMenu.isVisible()) {\n      // currently we ignore requests to edit the chart title while the chart menu is showing\n      // because the click to edit the chart will also close the chart menu, making the position\n      // of the title change.\n      return;\n    }\n    var minimumTargetInputWidth = 300;\n    var maximumInputWidth = this.chartProxy.getChart().width;\n    var inputWidth = Math.max(Math.min(titleBBox.width + 20, maximumInputWidth), minimumTargetInputWidth);\n    var inputElement = this.getGui();\n    agGridCommunity._.addCssClass(inputElement, 'currently-editing');\n    var inputStyle = inputElement.style;\n    // match style of input to title that we're editing\n    inputStyle.fontFamily = this.chartProxy.getTitleOption('fontFamily');\n    inputStyle.fontWeight = this.chartProxy.getTitleOption('fontWeight');\n    inputStyle.fontStyle = this.chartProxy.getTitleOption('fontStyle');\n    inputStyle.fontSize = this.chartProxy.getTitleOption('fontSize') + 'px';\n    inputStyle.color = this.chartProxy.getTitleOption('color');\n    // populate the input with the title, unless the title is the placeholder:\n    var oldTitle = this.chartProxy.getTitleOption('text');\n    var inputValue = oldTitle === this.chartTranslator.translate('titlePlaceholder') ? '' : oldTitle;\n    inputElement.value = inputValue;\n    var inputRect = inputElement.getBoundingClientRect();\n    inputStyle.left = Math.round(titleBBox.x + titleBBox.width / 2 - inputWidth / 2) + 'px';\n    inputStyle.top = Math.round(titleBBox.y + titleBBox.height / 2 - inputRect.height / 2) + 'px';\n    inputStyle.width = Math.round(inputWidth) + 'px';\n    inputElement.focus();\n  };\n  TitleEdit.prototype.endEditing = function () {\n    var value = this.getGui().value;\n    this.chartProxy.setTitleOption('text', value);\n    this.eventService.dispatchEvent({\n      'type': 'chartTitleEdit'\n    });\n    agGridCommunity._.removeCssClass(this.getGui(), 'currently-editing');\n  };\n  TitleEdit.TEMPLATE = \"<input\\n            class=\\\"ag-chart-title-edit\\\"\\n            style=\\\"padding:0; border:none; border-radius: 0; min-height: 0; text-align: center;\\\" />\\n        \";\n  __decorate$1i([agGridCommunity.Autowired('chartTranslator')], TitleEdit.prototype, \"chartTranslator\", void 0);\n  __decorate$1i([agGridCommunity.PostConstruct], TitleEdit.prototype, \"init\", null);\n  return TitleEdit;\n}(agGridCommunity.Component);\nvar __extends$2g = undefined && undefined.__extends || function () {\n  var _extendStatics145 = function extendStatics(d, b) {\n    _extendStatics145 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics145(d, b);\n  };\n  return function (d, b) {\n    _extendStatics145(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign$b = undefined && undefined.__assign || function () {\n  __assign$b = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$b.apply(this, arguments);\n};\nvar BarChartProxy = /** @class */function (_super) {\n  __extends$2g(BarChartProxy, _super);\n  function BarChartProxy(params) {\n    var _this = _super.call(this, params) || this;\n    _this.initChartOptions();\n    _this.recreateChart();\n    return _this;\n  }\n  BarChartProxy.prototype.getDefaultOptionsFromTheme = function (theme) {\n    var options = _super.prototype.getDefaultOptionsFromTheme.call(this, theme);\n    var integratedChartType = this.chartType;\n    var standaloneChartType = this.getStandaloneChartType();\n    var seriesType = integratedChartType === agGridCommunity.ChartType.GroupedBar || integratedChartType === agGridCommunity.ChartType.StackedBar || integratedChartType === agGridCommunity.ChartType.NormalizedBar ? 'bar' : 'column';\n    var seriesDefaults = theme.getConfig(standaloneChartType + '.series.' + seriesType);\n    options.seriesDefaults = {\n      shadow: seriesDefaults.shadow,\n      label: seriesDefaults.label,\n      tooltip: {\n        enabled: seriesDefaults.tooltipEnabled,\n        renderer: seriesDefaults.tooltipRenderer\n      },\n      fill: {\n        colors: theme.palette.fills,\n        opacity: seriesDefaults.fillOpacity\n      },\n      stroke: {\n        colors: theme.palette.strokes,\n        opacity: seriesDefaults.strokeOpacity,\n        width: seriesDefaults.strokeWidth\n      },\n      highlightStyle: seriesDefaults.highlightStyle\n    };\n    return options;\n  };\n  BarChartProxy.prototype.createChart = function (options) {\n    var _a = this.chartProxyParams,\n      grouping = _a.grouping,\n      parentElement = _a.parentElement;\n    var isColumn = this.isColumnChart();\n    options = options || this.chartOptions;\n    var seriesDefaults = options.seriesDefaults;\n    var agChartOptions = options;\n    if (grouping) {\n      agChartOptions.type = 'groupedCategory';\n    }\n    agChartOptions.autoSize = true;\n    agChartOptions.axes = [__assign$b(__assign$b({}, isColumn ? options.xAxis : options.yAxis), {\n      position: isColumn ? 'bottom' : 'left',\n      type: grouping ? 'groupedCategory' : 'category'\n    }), __assign$b(__assign$b({}, isColumn ? options.yAxis : options.xAxis), {\n      position: isColumn ? 'left' : 'bottom',\n      type: 'number'\n    })];\n    agChartOptions.series = [__assign$b(__assign$b({}, this.getSeriesDefaults()), {\n      fills: seriesDefaults.fill.colors,\n      fillOpacity: seriesDefaults.fill.opacity,\n      strokes: seriesDefaults.stroke.colors,\n      strokeOpacity: seriesDefaults.stroke.opacity,\n      strokeWidth: seriesDefaults.stroke.width,\n      tooltipRenderer: seriesDefaults.tooltip && seriesDefaults.tooltip.enabled && seriesDefaults.tooltip.renderer\n    })];\n    agChartOptions.container = parentElement;\n    return AgChart.create(agChartOptions);\n  };\n  BarChartProxy.prototype.update = function (params) {\n    this.chartProxyParams.grouping = params.grouping;\n    this.updateAxes('category', !this.isColumnChart());\n    var chart = this.chart;\n    var barSeries = chart.series[0];\n    var palette = this.getPalette();\n    barSeries.data = this.transformData(params.data, params.category.id);\n    barSeries.xKey = params.category.id;\n    barSeries.xName = params.category.name;\n    barSeries.yKeys = params.fields.map(function (f) {\n      return f.colId;\n    });\n    barSeries.yNames = params.fields.map(function (f) {\n      return f.displayName;\n    });\n    barSeries.fills = palette.fills;\n    barSeries.strokes = palette.strokes;\n    this.updateLabelRotation(params.category.id, !this.isColumnChart());\n  };\n  BarChartProxy.prototype.getDefaultOptions = function () {\n    var fontOptions = this.getDefaultFontOptions();\n    var options = this.getDefaultCartesianChartOptions();\n    options.seriesDefaults = __assign$b(__assign$b({}, options.seriesDefaults), {\n      tooltip: {\n        enabled: true\n      },\n      label: __assign$b(__assign$b({}, fontOptions), {\n        enabled: false\n      }),\n      shadow: this.getDefaultDropShadowOptions()\n    });\n    return options;\n  };\n  BarChartProxy.prototype.isColumnChart = function () {\n    return agGridCommunity._.includes([agGridCommunity.ChartType.GroupedColumn, agGridCommunity.ChartType.StackedColumn, agGridCommunity.ChartType.NormalizedColumn], this.chartType);\n  };\n  BarChartProxy.prototype.getSeriesDefaults = function () {\n    var chartType = this.chartType;\n    var isColumn = this.isColumnChart();\n    var isGrouped = chartType === agGridCommunity.ChartType.GroupedColumn || chartType === agGridCommunity.ChartType.GroupedBar;\n    var isNormalized = chartType === agGridCommunity.ChartType.NormalizedColumn || chartType === agGridCommunity.ChartType.NormalizedBar;\n    return __assign$b(__assign$b({}, this.chartOptions.seriesDefaults), {\n      type: isColumn ? 'column' : 'bar',\n      grouped: isGrouped,\n      normalizedTo: isNormalized ? 100 : undefined\n    });\n  };\n  return BarChartProxy;\n}(CartesianChartProxy);\nvar __extends$2h = undefined && undefined.__extends || function () {\n  var _extendStatics146 = function extendStatics(d, b) {\n    _extendStatics146 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics146(d, b);\n  };\n  return function (d, b) {\n    _extendStatics146(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign$c = undefined && undefined.__assign || function () {\n  __assign$c = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$c.apply(this, arguments);\n};\nvar AreaChartProxy = /** @class */function (_super) {\n  __extends$2h(AreaChartProxy, _super);\n  function AreaChartProxy(params) {\n    var _this = _super.call(this, params) || this;\n    _this.initChartOptions();\n    _this.recreateChart();\n    return _this;\n  }\n  AreaChartProxy.prototype.createChart = function (options) {\n    var _a = this.chartProxyParams,\n      grouping = _a.grouping,\n      parentElement = _a.parentElement;\n    var seriesDefaults = this.getSeriesDefaults();\n    var marker = __assign$c({}, seriesDefaults.marker);\n    if (marker.type) {\n      // deprecated\n      marker.shape = marker.type;\n      delete marker.type;\n    }\n    options = options || this.chartOptions;\n    var agChartOptions = options;\n    var xAxisType = options.xAxis.type ? options.xAxis.type : 'category';\n    if (grouping) {\n      agChartOptions.type = 'groupedCategory';\n    }\n    agChartOptions.autoSize = true;\n    agChartOptions.axes = [__assign$c({\n      type: grouping ? 'groupedCategory' : xAxisType,\n      position: 'bottom',\n      paddingInner: 1,\n      paddingOuter: 0\n    }, this.getXAxisDefaults(xAxisType, options)), __assign$c({\n      type: 'number',\n      position: 'left'\n    }, options.yAxis)];\n    agChartOptions.series = [__assign$c(__assign$c({}, seriesDefaults), {\n      type: 'area',\n      fills: seriesDefaults.fill.colors,\n      fillOpacity: seriesDefaults.fill.opacity,\n      strokes: seriesDefaults.stroke.colors,\n      strokeOpacity: seriesDefaults.stroke.opacity,\n      strokeWidth: seriesDefaults.stroke.width,\n      tooltipRenderer: seriesDefaults.tooltip && seriesDefaults.tooltip.renderer,\n      marker: marker\n    })];\n    return AgChart.create(agChartOptions, parentElement);\n  };\n  AreaChartProxy.prototype.update = function (params) {\n    this.chartProxyParams.grouping = params.grouping;\n    var axisType = this.isTimeAxis(params) ? 'time' : 'category';\n    this.updateAxes(axisType);\n    if (this.chartType === agGridCommunity.ChartType.Area) {\n      // area charts have multiple series\n      this.updateAreaChart(params);\n    } else {\n      // stacked and normalized has a single series\n      var areaSeries = this.chart.series[0];\n      if (!areaSeries) {\n        var seriesDefaults = this.getSeriesDefaults();\n        var marker = __assign$c({}, seriesDefaults.marker);\n        if (marker.type) {\n          // deprecated\n          marker.shape = marker.type;\n          delete marker.type;\n        }\n        areaSeries = AgChart.createComponent(__assign$c(__assign$c({}, seriesDefaults), {\n          fills: seriesDefaults.fill.colors,\n          fillOpacity: seriesDefaults.fill.opacity,\n          strokes: seriesDefaults.stroke.colors,\n          strokeOpacity: seriesDefaults.stroke.opacity,\n          strokeWidth: seriesDefaults.stroke.width,\n          marker: marker\n        }), 'area.series');\n        if (areaSeries) {\n          this.chart.addSeries(areaSeries);\n        } else {\n          return;\n        }\n      }\n      var _a = this.getPalette(),\n        fills = _a.fills,\n        strokes = _a.strokes;\n      areaSeries.data = this.transformData(params.data, params.category.id);\n      areaSeries.xKey = params.category.id;\n      areaSeries.xName = params.category.name;\n      areaSeries.yKeys = params.fields.map(function (f) {\n        return f.colId;\n      });\n      areaSeries.yNames = params.fields.map(function (f) {\n        return f.displayName;\n      });\n      areaSeries.fills = fills;\n      areaSeries.strokes = strokes;\n    }\n    this.updateLabelRotation(params.category.id, false, axisType);\n  };\n  AreaChartProxy.prototype.updateAreaChart = function (params) {\n    var _this = this;\n    var chart = this.chart;\n    if (params.fields.length === 0) {\n      chart.removeAllSeries();\n      return;\n    }\n    var fieldIds = params.fields.map(function (f) {\n      return f.colId;\n    });\n    var _a = this.getPalette(),\n      fills = _a.fills,\n      strokes = _a.strokes;\n    var existingSeriesById = chart.series.reduceRight(function (map, series, i) {\n      var id = series.yKeys[0];\n      if (fieldIds.indexOf(id) === i) {\n        map.set(id, series);\n      } else {\n        chart.removeSeries(series);\n      }\n      return map;\n    }, new Map());\n    var data = this.transformData(params.data, params.category.id);\n    var previousSeries = undefined;\n    params.fields.forEach(function (f, index) {\n      var areaSeries = existingSeriesById.get(f.colId);\n      var fill = fills[index % fills.length];\n      var stroke = strokes[index % strokes.length];\n      if (areaSeries) {\n        areaSeries.data = data;\n        areaSeries.xKey = params.category.id;\n        areaSeries.xName = params.category.name;\n        areaSeries.yKeys = [f.colId];\n        areaSeries.yNames = [f.displayName];\n        areaSeries.fills = [fill];\n        areaSeries.strokes = [stroke];\n      } else {\n        var seriesDefaults = _this.getSeriesDefaults();\n        var marker = __assign$c({}, seriesDefaults.marker);\n        if (marker.type) {\n          // deprecated\n          marker.shape = marker.type;\n          delete marker.type;\n        }\n        var options = __assign$c(__assign$c({}, seriesDefaults), {\n          data: data,\n          xKey: params.category.id,\n          xName: params.category.name,\n          yKeys: [f.colId],\n          yNames: [f.displayName],\n          fills: [fill],\n          strokes: [stroke],\n          fillOpacity: seriesDefaults.fill.opacity,\n          strokeOpacity: seriesDefaults.stroke.opacity,\n          strokeWidth: seriesDefaults.stroke.width,\n          marker: marker\n        });\n        areaSeries = AgChart.createComponent(options, 'area.series');\n        chart.addSeriesAfter(areaSeries, previousSeries);\n      }\n      previousSeries = areaSeries;\n    });\n  };\n  AreaChartProxy.prototype.getDefaultOptionsFromTheme = function (theme) {\n    var options = _super.prototype.getDefaultOptionsFromTheme.call(this, theme);\n    var seriesDefaults = theme.getConfig('area.series.area');\n    options.seriesDefaults = {\n      shadow: seriesDefaults.shadow,\n      tooltip: {\n        enabled: seriesDefaults.tooltipEnabled,\n        renderer: seriesDefaults.tooltipRenderer\n      },\n      fill: {\n        colors: theme.palette.fills,\n        opacity: seriesDefaults.fillOpacity\n      },\n      stroke: {\n        colors: theme.palette.strokes,\n        opacity: seriesDefaults.strokeOpacity,\n        width: seriesDefaults.strokeWidth\n      },\n      marker: {\n        enabled: seriesDefaults.marker.enabled,\n        shape: seriesDefaults.marker.shape,\n        size: seriesDefaults.marker.size,\n        strokeWidth: seriesDefaults.marker.strokeWidth\n      },\n      highlightStyle: seriesDefaults.highlightStyle\n    };\n    return options;\n  };\n  AreaChartProxy.prototype.getDefaultOptions = function () {\n    var options = this.getDefaultCartesianChartOptions();\n    options.xAxis.label.rotation = 335;\n    options.seriesDefaults = __assign$c(__assign$c({}, options.seriesDefaults), {\n      fill: __assign$c(__assign$c({}, options.seriesDefaults.fill), {\n        opacity: this.chartType === agGridCommunity.ChartType.Area ? 0.7 : 1\n      }),\n      stroke: __assign$c(__assign$c({}, options.seriesDefaults.stroke), {\n        width: 3\n      }),\n      marker: {\n        shape: 'circle',\n        enabled: true,\n        size: 6,\n        strokeWidth: 1\n      },\n      tooltip: {\n        enabled: true\n      },\n      shadow: this.getDefaultDropShadowOptions()\n    });\n    return options;\n  };\n  AreaChartProxy.prototype.getSeriesDefaults = function () {\n    return __assign$c(__assign$c({}, this.chartOptions.seriesDefaults), {\n      type: 'area',\n      normalizedTo: this.chartType === agGridCommunity.ChartType.NormalizedArea ? 100 : undefined\n    });\n  };\n  return AreaChartProxy;\n}(CartesianChartProxy);\nvar __extends$2i = undefined && undefined.__extends || function () {\n  var _extendStatics147 = function extendStatics(d, b) {\n    _extendStatics147 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics147(d, b);\n  };\n  return function (d, b) {\n    _extendStatics147(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign$d = undefined && undefined.__assign || function () {\n  __assign$d = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$d.apply(this, arguments);\n};\nvar LineChartProxy = /** @class */function (_super) {\n  __extends$2i(LineChartProxy, _super);\n  function LineChartProxy(params) {\n    var _this = _super.call(this, params) || this;\n    _this.initChartOptions();\n    _this.recreateChart();\n    return _this;\n  }\n  LineChartProxy.prototype.createChart = function (options) {\n    var _a = this.chartProxyParams,\n      grouping = _a.grouping,\n      parentElement = _a.parentElement;\n    options = options || this.chartOptions;\n    var agChartOptions = options;\n    agChartOptions.autoSize = true;\n    var xAxisType = options.xAxis.type ? options.xAxis.type : 'category';\n    if (grouping) {\n      agChartOptions.type = 'groupedCategory';\n    }\n    agChartOptions.axes = [__assign$d({\n      type: grouping ? 'groupedCategory' : xAxisType,\n      position: 'bottom'\n    }, this.getXAxisDefaults(xAxisType, options)), __assign$d({\n      type: 'number',\n      position: 'left'\n    }, options.yAxis)];\n    return AgChart.create(agChartOptions, parentElement);\n  };\n  LineChartProxy.prototype.update = function (params) {\n    var _this = this;\n    this.chartProxyParams.grouping = params.grouping;\n    if (params.fields.length === 0) {\n      this.chart.removeAllSeries();\n      return;\n    }\n    var axisType = this.isTimeAxis(params) ? 'time' : 'category';\n    this.updateAxes(axisType);\n    var chart = this.chart;\n    var fieldIds = params.fields.map(function (f) {\n      return f.colId;\n    });\n    var _a = this.getPalette(),\n      fills = _a.fills,\n      strokes = _a.strokes;\n    var data = this.transformData(params.data, params.category.id);\n    var existingSeriesById = chart.series.reduceRight(function (map, series, i) {\n      var id = series.yKey;\n      if (fieldIds.indexOf(id) === i) {\n        map.set(id, series);\n      } else {\n        chart.removeSeries(series);\n      }\n      return map;\n    }, new Map());\n    var previousSeries = undefined;\n    params.fields.forEach(function (f, index) {\n      var lineSeries = existingSeriesById.get(f.colId);\n      var fill = fills[index % fills.length];\n      var stroke = strokes[index % strokes.length];\n      if (lineSeries) {\n        lineSeries.title = f.displayName;\n        lineSeries.data = data;\n        lineSeries.xKey = params.category.id;\n        lineSeries.xName = params.category.name;\n        lineSeries.yKey = f.colId;\n        lineSeries.yName = f.displayName;\n        lineSeries.marker.fill = fill;\n        lineSeries.marker.stroke = stroke;\n        lineSeries.stroke = fill; // this is deliberate, so that the line colours match the fills of other series\n      } else {\n        var seriesDefaults = _this.chartOptions.seriesDefaults;\n        var marker = __assign$d(__assign$d({}, seriesDefaults.marker), {\n          fill: fill,\n          stroke: stroke\n        });\n        if (marker.type) {\n          // deprecated\n          marker.shape = marker.type;\n          delete marker.type;\n        }\n        var options = __assign$d(__assign$d({}, seriesDefaults), {\n          type: 'line',\n          title: f.displayName,\n          data: data,\n          xKey: params.category.id,\n          xName: params.category.name,\n          yKey: f.colId,\n          yName: f.displayName,\n          fill: fill,\n          stroke: fill,\n          fillOpacity: seriesDefaults.fill.opacity,\n          strokeOpacity: seriesDefaults.stroke.opacity,\n          strokeWidth: seriesDefaults.stroke.width,\n          tooltipRenderer: seriesDefaults.tooltip && seriesDefaults.tooltip.enabled && seriesDefaults.tooltip.renderer,\n          marker: marker\n        });\n        lineSeries = AgChart.createComponent(options, 'line.series');\n        chart.addSeriesAfter(lineSeries, previousSeries);\n      }\n      previousSeries = lineSeries;\n    });\n    this.updateLabelRotation(params.category.id, false, axisType);\n  };\n  LineChartProxy.prototype.getDefaultOptionsFromTheme = function (theme) {\n    var options = _super.prototype.getDefaultOptionsFromTheme.call(this, theme);\n    var seriesDefaults = theme.getConfig('line.series.line');\n    options.seriesDefaults = {\n      tooltip: {\n        enabled: seriesDefaults.tooltipEnabled,\n        renderer: seriesDefaults.tooltipRenderer\n      },\n      fill: {\n        colors: [],\n        opacity: 1\n      },\n      stroke: {\n        colors: theme.palette.strokes,\n        opacity: seriesDefaults.strokeOpacity,\n        width: seriesDefaults.strokeWidth\n      },\n      marker: {\n        enabled: seriesDefaults.marker.enabled,\n        shape: seriesDefaults.marker.shape,\n        size: seriesDefaults.marker.size,\n        strokeWidth: seriesDefaults.marker.strokeWidth\n      },\n      highlightStyle: seriesDefaults.highlightStyle\n    };\n    return options;\n  };\n  LineChartProxy.prototype.getDefaultOptions = function () {\n    var options = this.getDefaultCartesianChartOptions();\n    options.xAxis.label.rotation = 335;\n    options.seriesDefaults = __assign$d(__assign$d({}, options.seriesDefaults), {\n      stroke: __assign$d(__assign$d({}, options.seriesDefaults.stroke), {\n        width: 3\n      }),\n      marker: {\n        enabled: true,\n        shape: 'circle',\n        size: 6,\n        strokeWidth: 1\n      },\n      tooltip: {\n        enabled: true\n      }\n    });\n    return options;\n  };\n  return LineChartProxy;\n}(CartesianChartProxy);\nvar __extends$2j = undefined && undefined.__extends || function () {\n  var _extendStatics148 = function extendStatics(d, b) {\n    _extendStatics148 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics148(d, b);\n  };\n  return function (d, b) {\n    _extendStatics148(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar PolarChartProxy = /** @class */function (_super) {\n  __extends$2j(PolarChartProxy, _super);\n  function PolarChartProxy(params) {\n    return _super.call(this, params) || this;\n  }\n  return PolarChartProxy;\n}(ChartProxy);\nvar __extends$2k = undefined && undefined.__extends || function () {\n  var _extendStatics149 = function extendStatics(d, b) {\n    _extendStatics149 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics149(d, b);\n  };\n  return function (d, b) {\n    _extendStatics149(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign$e = undefined && undefined.__assign || function () {\n  __assign$e = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$e.apply(this, arguments);\n};\nvar PieChartProxy = /** @class */function (_super) {\n  __extends$2k(PieChartProxy, _super);\n  function PieChartProxy(params) {\n    var _this = _super.call(this, params) || this;\n    _this.initChartOptions();\n    _this.recreateChart();\n    return _this;\n  }\n  PieChartProxy.prototype.getDefaultOptionsFromTheme = function (theme) {\n    var options = _super.prototype.getDefaultOptionsFromTheme.call(this, theme);\n    var seriesDefaults = theme.getConfig('pie.series.pie');\n    options.seriesDefaults = {\n      title: seriesDefaults.title,\n      label: __assign$e(__assign$e({}, seriesDefaults.label), {\n        minRequiredAngle: seriesDefaults.label.minAngle\n      }),\n      callout: seriesDefaults.callout,\n      shadow: seriesDefaults.shadow,\n      tooltip: {\n        enabled: seriesDefaults.tooltipEnabled,\n        renderer: seriesDefaults.tooltipRenderer\n      },\n      fill: {\n        colors: theme.palette.fills,\n        opacity: seriesDefaults.fillOpacity\n      },\n      stroke: {\n        colors: theme.palette.strokes,\n        opacity: seriesDefaults.strokeOpacity,\n        width: seriesDefaults.strokeWidth\n      },\n      highlightStyle: seriesDefaults.highlightStyle\n    };\n    return options;\n  };\n  PieChartProxy.prototype.createChart = function (options) {\n    options = options || this.chartOptions;\n    var seriesDefaults = options.seriesDefaults;\n    var agChartOptions = options;\n    agChartOptions.autoSize = true;\n    agChartOptions.series = [__assign$e(__assign$e({}, seriesDefaults), {\n      fills: seriesDefaults.fill.colors,\n      fillOpacity: seriesDefaults.fill.opacity,\n      strokes: seriesDefaults.stroke.colors,\n      strokeOpacity: seriesDefaults.stroke.opacity,\n      strokeWidth: seriesDefaults.stroke.width,\n      type: 'pie'\n    })];\n    return AgChart.create(agChartOptions, this.chartProxyParams.parentElement);\n  };\n  PieChartProxy.prototype.update = function (params) {\n    var chart = this.chart;\n    if (params.fields.length === 0) {\n      chart.removeAllSeries();\n      return;\n    }\n    var existingSeries = chart.series[0];\n    var existingSeriesId = existingSeries && existingSeries.angleKey;\n    var pieSeriesField = params.fields[0];\n    var _a = this.getPalette(),\n      fills = _a.fills,\n      strokes = _a.strokes;\n    var seriesDefaults = this.chartOptions.seriesDefaults;\n    var pieSeries = existingSeries;\n    var calloutColors = seriesDefaults.callout && seriesDefaults.callout.colors;\n    if (existingSeriesId !== pieSeriesField.colId) {\n      chart.removeSeries(existingSeries);\n      pieSeries = AgChart.createComponent(__assign$e(__assign$e({}, seriesDefaults), {\n        type: 'pie',\n        angleKey: pieSeriesField.colId,\n        title: __assign$e(__assign$e({}, seriesDefaults.title), {\n          text: seriesDefaults.title.text || params.fields[0].displayName\n        }),\n        fills: seriesDefaults.fill.colors,\n        fillOpacity: seriesDefaults.fill.opacity,\n        strokes: seriesDefaults.stroke.colors,\n        strokeOpacity: seriesDefaults.stroke.opacity,\n        strokeWidth: seriesDefaults.stroke.width,\n        tooltipRenderer: seriesDefaults.tooltip && seriesDefaults.tooltip.enabled && seriesDefaults.tooltip.renderer\n      }), 'pie.series');\n    }\n    pieSeries.angleName = pieSeriesField.displayName;\n    pieSeries.labelKey = params.category.id;\n    pieSeries.labelName = params.category.name;\n    pieSeries.data = params.data;\n    pieSeries.fills = fills;\n    pieSeries.strokes = strokes;\n    if (calloutColors) {\n      pieSeries.callout.colors = strokes;\n    }\n    chart.addSeries(pieSeries);\n  };\n  PieChartProxy.prototype.getDefaultOptions = function () {\n    var strokes = this.getPredefinedPalette().strokes;\n    var options = this.getDefaultChartOptions();\n    var fontOptions = this.getDefaultFontOptions();\n    options.seriesDefaults = __assign$e(__assign$e({}, options.seriesDefaults), {\n      title: __assign$e(__assign$e({}, fontOptions), {\n        enabled: false,\n        fontSize: 12,\n        fontWeight: 'bold'\n      }),\n      callout: {\n        colors: strokes,\n        length: 10,\n        strokeWidth: 2\n      },\n      label: __assign$e(__assign$e({}, fontOptions), {\n        enabled: false,\n        offset: 3,\n        minRequiredAngle: 0\n      }),\n      tooltip: {\n        enabled: true\n      },\n      shadow: this.getDefaultDropShadowOptions()\n    });\n    return options;\n  };\n  return PieChartProxy;\n}(PolarChartProxy);\nvar __extends$2l = undefined && undefined.__extends || function () {\n  var _extendStatics150 = function extendStatics(d, b) {\n    _extendStatics150 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics150(d, b);\n  };\n  return function (d, b) {\n    _extendStatics150(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign$f = undefined && undefined.__assign || function () {\n  __assign$f = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$f.apply(this, arguments);\n};\nvar DoughnutChartProxy = /** @class */function (_super) {\n  __extends$2l(DoughnutChartProxy, _super);\n  function DoughnutChartProxy(params) {\n    var _this = _super.call(this, params) || this;\n    _this.initChartOptions();\n    _this.recreateChart();\n    return _this;\n  }\n  DoughnutChartProxy.prototype.getDefaultOptionsFromTheme = function (theme) {\n    var options = _super.prototype.getDefaultOptionsFromTheme.call(this, theme);\n    var seriesDefaults = theme.getConfig('pie.series.pie');\n    options.seriesDefaults = {\n      title: seriesDefaults.title,\n      label: __assign$f(__assign$f({}, seriesDefaults.label), {\n        minRequiredAngle: seriesDefaults.label.minAngle\n      }),\n      callout: seriesDefaults.callout,\n      shadow: seriesDefaults.shadow,\n      tooltip: {\n        enabled: seriesDefaults.tooltipEnabled,\n        renderer: seriesDefaults.tooltipRenderer\n      },\n      fill: {\n        colors: theme.palette.fills,\n        opacity: seriesDefaults.fillOpacity\n      },\n      stroke: {\n        colors: theme.palette.strokes,\n        opacity: seriesDefaults.strokeOpacity,\n        width: seriesDefaults.strokeWidth\n      },\n      highlightStyle: seriesDefaults.highlightStyle\n    };\n    return options;\n  };\n  DoughnutChartProxy.prototype.createChart = function (options) {\n    options = options || this.chartOptions;\n    var agChartOptions = options;\n    agChartOptions.type = 'pie';\n    agChartOptions.autoSize = true;\n    agChartOptions.series = [];\n    return AgChart.create(agChartOptions, this.chartProxyParams.parentElement);\n  };\n  DoughnutChartProxy.prototype.update = function (params) {\n    if (params.fields.length === 0) {\n      this.chart.removeAllSeries();\n      return;\n    }\n    var doughnutChart = this.chart;\n    var fieldIds = params.fields.map(function (f) {\n      return f.colId;\n    });\n    var seriesMap = {};\n    doughnutChart.series.forEach(function (series) {\n      var pieSeries = series;\n      var id = pieSeries.angleKey;\n      if (agGridCommunity._.includes(fieldIds, id)) {\n        seriesMap[id] = pieSeries;\n      }\n    });\n    var seriesDefaults = this.chartOptions.seriesDefaults;\n    var _a = this.getPalette(),\n      fills = _a.fills,\n      strokes = _a.strokes;\n    var offset = 0;\n    params.fields.forEach(function (f, index) {\n      var existingSeries = seriesMap[f.colId];\n      var seriesOptions = __assign$f(__assign$f({}, seriesDefaults), {\n        type: 'pie',\n        angleKey: f.colId,\n        showInLegend: index === 0,\n        title: __assign$f(__assign$f({}, seriesDefaults.title), {\n          text: seriesDefaults.title.text || f.displayName\n        }),\n        fills: seriesDefaults.fill.colors,\n        fillOpacity: seriesDefaults.fill.opacity,\n        strokes: seriesDefaults.stroke.colors,\n        strokeOpacity: seriesDefaults.stroke.opacity,\n        strokeWidth: seriesDefaults.stroke.width,\n        tooltipRenderer: seriesDefaults.tooltip && seriesDefaults.tooltip.enabled && seriesDefaults.tooltip.renderer\n      });\n      var calloutColors = seriesOptions.callout && seriesOptions.callout.colors;\n      var pieSeries = existingSeries || AgChart.createComponent(seriesOptions, 'pie.series');\n      pieSeries.angleName = f.displayName;\n      pieSeries.labelKey = params.category.id;\n      pieSeries.labelName = params.category.name;\n      pieSeries.data = params.data;\n      pieSeries.fills = fills;\n      pieSeries.strokes = strokes;\n      // Normally all series provide legend items for every slice.\n      // For our use case, where all series have the same number of slices in the same order with the same labels\n      // (all of which can be different in other use cases) we don't want to show repeating labels in the legend,\n      // so we only show legend items for the first series, and then when the user toggles the slices of the\n      // first series in the legend, we programmatically toggle the corresponding slices of other series.\n      if (index === 0) {\n        pieSeries.toggleSeriesItem = function (itemId, enabled) {\n          if (doughnutChart) {\n            doughnutChart.series.forEach(function (series) {\n              series.seriesItemEnabled[itemId] = enabled;\n            });\n          }\n          pieSeries.scheduleData();\n        };\n      }\n      pieSeries.outerRadiusOffset = offset;\n      offset -= 20;\n      pieSeries.innerRadiusOffset = offset;\n      offset -= 20;\n      if (calloutColors) {\n        pieSeries.callout.colors = strokes;\n      }\n      if (!existingSeries) {\n        seriesMap[f.colId] = pieSeries;\n      }\n    });\n    // Because repaints are automatic, it's important to remove/add/update series at once,\n    // so that we don't get painted twice.\n    doughnutChart.series = agGridCommunity._.values(seriesMap);\n  };\n  DoughnutChartProxy.prototype.getDefaultOptions = function () {\n    var strokes = this.getPredefinedPalette().strokes;\n    var options = this.getDefaultChartOptions();\n    var fontOptions = this.getDefaultFontOptions();\n    options.seriesDefaults = __assign$f(__assign$f({}, options.seriesDefaults), {\n      title: __assign$f(__assign$f({}, fontOptions), {\n        enabled: true,\n        fontSize: 12,\n        fontWeight: 'bold'\n      }),\n      callout: {\n        colors: strokes,\n        length: 10,\n        strokeWidth: 2\n      },\n      label: __assign$f(__assign$f({}, fontOptions), {\n        enabled: false,\n        offset: 3,\n        minRequiredAngle: 0\n      }),\n      tooltip: {\n        enabled: true\n      },\n      shadow: this.getDefaultDropShadowOptions()\n    });\n    return options;\n  };\n  return DoughnutChartProxy;\n}(PolarChartProxy);\nvar __extends$2m = undefined && undefined.__extends || function () {\n  var _extendStatics151 = function extendStatics(d, b) {\n    _extendStatics151 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics151(d, b);\n  };\n  return function (d, b) {\n    _extendStatics151(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign$g = undefined && undefined.__assign || function () {\n  __assign$g = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$g.apply(this, arguments);\n};\nvar HistogramChartProxy = /** @class */function (_super) {\n  __extends$2m(HistogramChartProxy, _super);\n  function HistogramChartProxy(params) {\n    var _this = _super.call(this, params) || this;\n    _this.initChartOptions();\n    _this.recreateChart();\n    return _this;\n  }\n  HistogramChartProxy.prototype.getDefaultOptionsFromTheme = function (theme) {\n    var options = _super.prototype.getDefaultOptionsFromTheme.call(this, theme);\n    var seriesDefaults = theme.getConfig('histogram.series.histogram');\n    options.seriesDefaults = {\n      shadow: this.getDefaultDropShadowOptions(),\n      label: seriesDefaults.label,\n      tooltip: {\n        enabled: seriesDefaults.tooltipEnabled,\n        renderer: seriesDefaults.tooltipRenderer\n      },\n      fill: {\n        colors: theme.palette.fills,\n        opacity: seriesDefaults.fillOpacity\n      },\n      stroke: {\n        colors: theme.palette.strokes,\n        opacity: seriesDefaults.strokeOpacity,\n        width: seriesDefaults.strokeWidth\n      },\n      highlightStyle: seriesDefaults.highlightStyle\n    };\n    return options;\n  };\n  HistogramChartProxy.prototype.createChart = function (options) {\n    var parentElement = this.chartProxyParams.parentElement;\n    var seriesDefaults = this.getSeriesDefaults();\n    options = options || this.chartOptions;\n    var agChartOptions = options;\n    agChartOptions.autoSize = true;\n    agChartOptions.axes = [__assign$g({\n      type: 'number',\n      position: 'bottom'\n    }, options.xAxis), __assign$g({\n      type: 'number',\n      position: 'left'\n    }, options.yAxis)];\n    agChartOptions.series = [__assign$g(__assign$g({}, seriesDefaults), {\n      fill: seriesDefaults.fill.colors[0],\n      fillOpacity: seriesDefaults.fill.opacity,\n      stroke: seriesDefaults.stroke.colors[0],\n      strokeOpacity: seriesDefaults.stroke.opacity,\n      strokeWidth: seriesDefaults.stroke.width,\n      tooltipRenderer: seriesDefaults.tooltip && seriesDefaults.tooltip.enabled && seriesDefaults.tooltip.renderer,\n      type: 'histogram'\n    })];\n    return AgChart.create(agChartOptions, parentElement);\n  };\n  HistogramChartProxy.prototype.update = function (params) {\n    var xField = params.fields[0];\n    var chart = this.chart;\n    var series = chart.series[0];\n    series.data = params.data;\n    series.xKey = xField.colId;\n    series.xName = xField.displayName;\n    // for now, only constant width is supported via integrated charts\n    series.areaPlot = false;\n    var _a = this.getPalette(),\n      fills = _a.fills,\n      strokes = _a.strokes;\n    series.fill = fills[0];\n    series.stroke = strokes[0];\n  };\n  HistogramChartProxy.prototype.getDefaultOptions = function () {\n    var fontOptions = this.getDefaultFontOptions();\n    var options = this.getDefaultCartesianChartOptions();\n    options.xAxis.label.rotation = 0;\n    options.yAxis.label.rotation = 0;\n    options.seriesDefaults = __assign$g(__assign$g({}, options.seriesDefaults), {\n      tooltip: {\n        enabled: true\n      },\n      label: __assign$g(__assign$g({}, fontOptions), {\n        enabled: false\n      }),\n      shadow: this.getDefaultDropShadowOptions(),\n      binCount: 10\n    });\n    return options;\n  };\n  HistogramChartProxy.prototype.getSeriesDefaults = function () {\n    return __assign$g({}, this.chartOptions.seriesDefaults);\n  };\n  return HistogramChartProxy;\n}(CartesianChartProxy);\nvar __extends$2n = undefined && undefined.__extends || function () {\n  var _extendStatics152 = function extendStatics(d, b) {\n    _extendStatics152 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics152(d, b);\n  };\n  return function (d, b) {\n    _extendStatics152(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1j = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar GridChartComp = /** @class */function (_super) {\n  __extends$2n(GridChartComp, _super);\n  function GridChartComp(params) {\n    var _this = _super.call(this, GridChartComp.TEMPLATE) || this;\n    _this.params = params;\n    return _this;\n  }\n  GridChartComp.prototype.init = function () {\n    var availableChartThemes = this.gridOptionsWrapper.getChartThemes();\n    if (availableChartThemes.length < 1) {\n      throw new Error('Cannot create chart: no chart themes are available to be used.');\n    }\n    var chartThemeName = this.params.chartThemeName;\n    if (!agGridCommunity._.includes(availableChartThemes, chartThemeName)) {\n      chartThemeName = availableChartThemes[0];\n    }\n    var modelParams = {\n      pivotChart: this.params.pivotChart,\n      chartType: this.params.chartType,\n      chartThemeName: chartThemeName,\n      aggFunc: this.params.aggFunc,\n      cellRange: this.params.cellRange,\n      suppressChartRanges: this.params.suppressChartRanges,\n      unlinkChart: this.params.unlinkChart\n    };\n    var isRtl = this.gridOptionsWrapper.isEnableRtl();\n    agGridCommunity._.addCssClass(this.getGui(), isRtl ? 'ag-rtl' : 'ag-ltr');\n    this.model = this.createBean(new ChartDataModel(modelParams));\n    this.chartController = this.createManagedBean(new ChartController(this.model));\n    this.validateCustomThemes();\n    // create chart before dialog to ensure dialog is correct size\n    this.createChart();\n    if (this.params.insideDialog) {\n      this.addDialog();\n    }\n    this.addMenu();\n    this.addTitleEditComp();\n    this.addManagedListener(this.getGui(), 'focusin', this.setActiveChartCellRange.bind(this));\n    this.addManagedListener(this.chartController, ChartController.EVENT_CHART_UPDATED, this.refresh.bind(this));\n    this.addManagedListener(this.chartMenu, ChartMenu.EVENT_DOWNLOAD_CHART, this.downloadChart.bind(this));\n    this.refresh();\n    this.raiseChartCreatedEvent();\n  };\n  GridChartComp.prototype.validateCustomThemes = function () {\n    var suppliedThemes = this.gridOptionsWrapper.getChartThemes();\n    var customChartThemes = this.gridOptionsWrapper.getCustomChartThemes();\n    if (customChartThemes) {\n      agGridCommunity._.getAllKeysInObjects([customChartThemes]).forEach(function (customThemeName) {\n        if (!agGridCommunity._.includes(suppliedThemes, customThemeName)) {\n          console.warn(\"ag-Grid: a custom chart theme with the name '\" + customThemeName + \"' has been \" + \"supplied but not added to the 'chartThemes' list\");\n        }\n      });\n    }\n  };\n  GridChartComp.prototype.createChart = function () {\n    var width, height;\n    // if chart already exists, destroy it and remove it from DOM\n    if (this.chartProxy) {\n      var chart = this.chartProxy.getChart();\n      if (chart) {\n        // preserve existing width/height\n        width = chart.width;\n        height = chart.height;\n      }\n      this.chartProxy.destroy();\n    }\n    var processChartOptionsFunc = this.params.processChartOptions || this.gridOptionsWrapper.getProcessChartOptionsFunc();\n    var customChartThemes = this.gridOptionsWrapper.getCustomChartThemes();\n    var chartType = this.model.getChartType();\n    var isGrouping = this.model.isGrouping();\n    var chartProxyParams = {\n      chartId: this.model.getChartId(),\n      chartType: chartType,\n      chartThemeName: this.model.getChartThemeName(),\n      processChartOptions: processChartOptionsFunc,\n      getChartThemeName: this.getChartThemeName.bind(this),\n      getChartThemes: this.getChartThemes.bind(this),\n      customChartThemes: customChartThemes,\n      getGridOptionsChartThemeOverrides: this.getGridOptionsChartThemeOverrides.bind(this),\n      apiChartThemeOverrides: this.params.chartThemeOverrides,\n      allowPaletteOverride: !this.params.chartThemeName,\n      isDarkTheme: this.environment.isThemeDark.bind(this.environment),\n      parentElement: this.eChart,\n      width: width,\n      height: height,\n      grouping: isGrouping,\n      document: this.gridOptionsWrapper.getDocument(),\n      eventService: this.eventService,\n      gridApi: this.gridApi,\n      columnApi: this.columnApi\n    };\n    // set local state used to detect when chart changes\n    this.chartType = chartType;\n    this.chartThemeName = this.model.getChartThemeName();\n    this.chartProxy = GridChartComp.createChartProxy(chartProxyParams);\n    this.titleEdit && this.titleEdit.setChartProxy(this.chartProxy);\n    agGridCommunity._.addCssClass(this.eChart.querySelector('canvas'), 'ag-charts-canvas');\n    this.chartController.setChartProxy(this.chartProxy);\n  };\n  GridChartComp.prototype.getChartThemeName = function () {\n    return this.chartController.getThemeName();\n  };\n  GridChartComp.prototype.getChartThemes = function () {\n    return this.chartController.getThemes();\n  };\n  GridChartComp.prototype.getGridOptionsChartThemeOverrides = function () {\n    return this.gridOptionsWrapper.getChartThemeOverrides();\n  };\n  GridChartComp.createChartProxy = function (chartProxyParams) {\n    switch (chartProxyParams.chartType) {\n      case agGridCommunity.ChartType.GroupedColumn:\n      case agGridCommunity.ChartType.StackedColumn:\n      case agGridCommunity.ChartType.NormalizedColumn:\n      case agGridCommunity.ChartType.GroupedBar:\n      case agGridCommunity.ChartType.StackedBar:\n      case agGridCommunity.ChartType.NormalizedBar:\n        return new BarChartProxy(chartProxyParams);\n      case agGridCommunity.ChartType.Pie:\n        return new PieChartProxy(chartProxyParams);\n      case agGridCommunity.ChartType.Doughnut:\n        return new DoughnutChartProxy(chartProxyParams);\n      case agGridCommunity.ChartType.Area:\n      case agGridCommunity.ChartType.StackedArea:\n      case agGridCommunity.ChartType.NormalizedArea:\n        return new AreaChartProxy(chartProxyParams);\n      case agGridCommunity.ChartType.Line:\n        return new LineChartProxy(chartProxyParams);\n      case agGridCommunity.ChartType.Scatter:\n      case agGridCommunity.ChartType.Bubble:\n        return new ScatterChartProxy(chartProxyParams);\n      case agGridCommunity.ChartType.Histogram:\n        return new HistogramChartProxy(chartProxyParams);\n    }\n  };\n  GridChartComp.prototype.addDialog = function () {\n    var _this = this;\n    var title = this.chartTranslator.translate(this.params.pivotChart ? 'pivotChartTitle' : 'rangeChartTitle');\n    var _a = this.getBestDialogSize(),\n      width = _a.width,\n      height = _a.height;\n    this.chartDialog = new agGridCommunity.AgDialog({\n      resizable: true,\n      movable: true,\n      maximizable: true,\n      title: title,\n      width: width,\n      height: height,\n      component: this,\n      centered: true,\n      closable: true\n    });\n    this.getContext().createBean(this.chartDialog);\n    this.chartDialog.addEventListener(agGridCommunity.AgDialog.EVENT_DESTROYED, function () {\n      return _this.destroy();\n    });\n  };\n  GridChartComp.prototype.getBestDialogSize = function () {\n    var popupParent = this.popupService.getPopupParent();\n    var maxWidth = agGridCommunity._.getAbsoluteWidth(popupParent) * 0.75;\n    var maxHeight = agGridCommunity._.getAbsoluteHeight(popupParent) * 0.75;\n    var ratio = 0.553;\n    {\n      var _a = this.chartProxy.getChartOptions(),\n        width_1 = _a.width,\n        height_1 = _a.height;\n      if (width_1 && height_1) {\n        return {\n          width: width_1,\n          height: height_1\n        };\n      }\n    }\n    var chart = this.chartProxy.getChart();\n    var width = this.params.insideDialog ? 850 : chart.width;\n    var height = this.params.insideDialog ? 470 : chart.height;\n    if (width > maxWidth || height > maxHeight) {\n      width = Math.min(width, maxWidth);\n      height = Math.round(width * ratio);\n      if (height > maxHeight) {\n        height = maxHeight;\n        width = Math.min(width, Math.round(height / ratio));\n      }\n    }\n    return {\n      width: width,\n      height: height\n    };\n  };\n  GridChartComp.prototype.addMenu = function () {\n    this.chartMenu = this.createBean(new ChartMenu(this.eChartContainer, this.eMenuContainer, this.chartController));\n    this.eChartContainer.appendChild(this.chartMenu.getGui());\n  };\n  GridChartComp.prototype.addTitleEditComp = function () {\n    this.titleEdit = this.createBean(new TitleEdit(this.chartMenu));\n    this.eTitleEditContainer.appendChild(this.titleEdit.getGui());\n    if (this.chartProxy) {\n      this.titleEdit.setChartProxy(this.chartProxy);\n    }\n  };\n  GridChartComp.prototype.refresh = function () {\n    if (this.shouldRecreateChart()) {\n      this.createChart();\n    }\n    this.updateChart();\n  };\n  GridChartComp.prototype.shouldRecreateChart = function () {\n    return this.chartType !== this.model.getChartType() || this.chartThemeName !== this.model.getChartThemeName();\n  };\n  GridChartComp.prototype.getCurrentChartType = function () {\n    return this.chartType;\n  };\n  GridChartComp.prototype.getChartModel = function () {\n    return this.chartController.getChartModel();\n  };\n  GridChartComp.prototype.updateChart = function () {\n    var _a = this,\n      model = _a.model,\n      chartProxy = _a.chartProxy;\n    var selectedCols = model.getSelectedValueColState();\n    var fields = selectedCols.map(function (c) {\n      return {\n        colId: c.colId,\n        displayName: c.displayName\n      };\n    });\n    var data = model.getData();\n    var chartEmpty = this.handleEmptyChart(data, fields);\n    if (chartEmpty) {\n      return;\n    }\n    var selectedDimension = model.getSelectedDimension();\n    var chartUpdateParams = {\n      data: data,\n      grouping: model.isGrouping(),\n      category: {\n        id: selectedDimension.colId,\n        name: selectedDimension.displayName,\n        chartDataType: this.getChartDataType(selectedDimension.colId)\n      },\n      fields: fields\n    };\n    chartProxy.update(chartUpdateParams);\n    this.titleEdit.setChartProxy(this.chartProxy);\n  };\n  GridChartComp.prototype.getChartDataType = function (colId) {\n    var column = this.columnController.getPrimaryColumn(colId);\n    return column ? column.getColDef().chartDataType : undefined;\n  };\n  GridChartComp.prototype.handleEmptyChart = function (data, fields) {\n    var container = this.chartProxy.getChart().container;\n    var pivotModeDisabled = this.model.isPivotChart() && !this.model.isPivotMode();\n    var minFieldsRequired = 1;\n    if (this.chartController.isActiveXYChart()) {\n      minFieldsRequired = this.model.getChartType() === agGridCommunity.ChartType.Bubble ? 3 : 2;\n    }\n    var isEmptyChart = fields.length < minFieldsRequired || data.length === 0;\n    if (container) {\n      var isEmpty = pivotModeDisabled || isEmptyChart;\n      agGridCommunity._.setDisplayed(this.eChart, !isEmpty);\n      agGridCommunity._.setDisplayed(this.eEmpty, isEmpty);\n    }\n    if (pivotModeDisabled) {\n      this.eEmpty.innerText = this.chartTranslator.translate('pivotChartRequiresPivotMode');\n      return true;\n    }\n    if (isEmptyChart) {\n      this.eEmpty.innerText = this.chartTranslator.translate('noDataToChart');\n      return true;\n    }\n    return false;\n  };\n  GridChartComp.prototype.downloadChart = function () {\n    this.chartProxy.downloadChart();\n  };\n  GridChartComp.prototype.getUnderlyingChart = function () {\n    return this.chartProxy.getChart();\n  };\n  GridChartComp.prototype.refreshCanvasSize = function () {\n    if (!this.params.insideDialog) {\n      return;\n    }\n    var _a = this,\n      chartProxy = _a.chartProxy,\n      eChart = _a.eChart;\n    if (this.chartMenu.isVisible()) {\n      // we don't want the menu showing to affect the chart options\n      var chart = this.chartProxy.getChart();\n      chart.height = agGridCommunity._.getInnerHeight(eChart);\n      chart.width = agGridCommunity._.getInnerWidth(eChart);\n    } else {\n      chartProxy.setChartOption('width', agGridCommunity._.getInnerWidth(eChart));\n      chartProxy.setChartOption('height', agGridCommunity._.getInnerHeight(eChart));\n    }\n  };\n  GridChartComp.prototype.setActiveChartCellRange = function (focusEvent) {\n    if (this.getGui().contains(focusEvent.relatedTarget)) {\n      return;\n    }\n    this.chartController.setChartRange(true);\n    this.gridApi.focusController.clearFocusedCell();\n  };\n  GridChartComp.prototype.raiseChartCreatedEvent = function () {\n    var chartModel = this.chartController.getChartModel();\n    var event = Object.freeze({\n      type: agGridCommunity.Events.EVENT_CHART_CREATED,\n      chartId: chartModel.chartId,\n      chartModel: chartModel,\n      api: this.gridApi,\n      columnApi: this.columnApi\n    });\n    this.eventService.dispatchEvent(event);\n  };\n  GridChartComp.prototype.raiseChartDestroyedEvent = function () {\n    var event = Object.freeze({\n      type: agGridCommunity.Events.EVENT_CHART_DESTROYED,\n      chartId: this.model.getChartId(),\n      api: this.gridApi,\n      columnApi: this.columnApi\n    });\n    this.eventService.dispatchEvent(event);\n  };\n  GridChartComp.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    if (this.chartProxy) {\n      this.chartProxy.destroy();\n    }\n    this.destroyBean(this.chartMenu);\n    // don't want to invoke destroy() on the Dialog (prevents destroy loop)\n    if (this.chartDialog && this.chartDialog.isAlive()) {\n      this.destroyBean(this.chartDialog);\n    }\n    // if the user is providing containers for the charts, we need to clean up, otherwise the old chart\n    // data will still be visible although the chart is no longer bound to the grid\n    var eGui = this.getGui();\n    agGridCommunity._.clearElement(eGui);\n    // remove from parent, so if user provided container, we detach from the provided dom element\n    agGridCommunity._.removeFromParent(eGui);\n    this.raiseChartDestroyedEvent();\n  };\n  GridChartComp.TEMPLATE = \"<div class=\\\"ag-chart\\\" tabindex=\\\"-1\\\">\\n            <div ref=\\\"eChartContainer\\\" tabindex=\\\"-1\\\" class=\\\"ag-chart-components-wrapper\\\">\\n                <div ref=\\\"eChart\\\" class=\\\"ag-chart-canvas-wrapper\\\"></div>\\n                <div ref=\\\"eEmpty\\\" class=\\\"ag-chart-empty-text ag-unselectable\\\"></div>\\n            </div>\\n            <div ref=\\\"eTitleEditContainer\\\"></div>\\n            <div ref=\\\"eMenuContainer\\\" class=\\\"ag-chart-docked-container\\\"></div>\\n        </div>\";\n  __decorate$1j([agGridCommunity.RefSelector('eChart')], GridChartComp.prototype, \"eChart\", void 0);\n  __decorate$1j([agGridCommunity.RefSelector('eChartContainer')], GridChartComp.prototype, \"eChartContainer\", void 0);\n  __decorate$1j([agGridCommunity.RefSelector('eMenuContainer')], GridChartComp.prototype, \"eMenuContainer\", void 0);\n  __decorate$1j([agGridCommunity.RefSelector('eEmpty')], GridChartComp.prototype, \"eEmpty\", void 0);\n  __decorate$1j([agGridCommunity.RefSelector('eTitleEditContainer')], GridChartComp.prototype, \"eTitleEditContainer\", void 0);\n  __decorate$1j([agGridCommunity.Autowired('gridOptionsWrapper')], GridChartComp.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1j([agGridCommunity.Autowired('environment')], GridChartComp.prototype, \"environment\", void 0);\n  __decorate$1j([agGridCommunity.Autowired('chartTranslator')], GridChartComp.prototype, \"chartTranslator\", void 0);\n  __decorate$1j([agGridCommunity.Autowired('columnController')], GridChartComp.prototype, \"columnController\", void 0);\n  __decorate$1j([agGridCommunity.Autowired('gridApi')], GridChartComp.prototype, \"gridApi\", void 0);\n  __decorate$1j([agGridCommunity.Autowired('columnApi')], GridChartComp.prototype, \"columnApi\", void 0);\n  __decorate$1j([agGridCommunity.Autowired('popupService')], GridChartComp.prototype, \"popupService\", void 0);\n  __decorate$1j([agGridCommunity.PostConstruct], GridChartComp.prototype, \"init\", null);\n  return GridChartComp;\n}(agGridCommunity.Component);\nvar __extends$2o = undefined && undefined.__extends || function () {\n  var _extendStatics153 = function extendStatics(d, b) {\n    _extendStatics153 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics153(d, b);\n  };\n  return function (d, b) {\n    _extendStatics153(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1k = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ChartService = /** @class */function (_super) {\n  __extends$2o(ChartService, _super);\n  function ChartService() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    // we destroy all charts bound to this grid when grid is destroyed. activeCharts contains all charts, including\n    // those in developer provided containers.\n    _this.activeCharts = new Set();\n    _this.activeChartComps = new Set();\n    return _this;\n  }\n  ChartService.prototype.getChartModels = function () {\n    var models = [];\n    this.activeChartComps.forEach(function (c) {\n      return models.push(c.getChartModel());\n    });\n    return models;\n  };\n  ChartService.prototype.createChartFromCurrentRange = function (chartType) {\n    if (chartType === void 0) {\n      chartType = agGridCommunity.ChartType.GroupedColumn;\n    }\n    var selectedRange = this.getSelectedRange();\n    return this.createChart(selectedRange, chartType);\n  };\n  ChartService.prototype.createRangeChart = function (params) {\n    var cellRange = this.rangeController ? this.rangeController.createCellRangeFromCellRangeParams(params.cellRange) : undefined;\n    if (!cellRange) {\n      console.warn(\"ag-Grid - unable to create chart as no range is selected\");\n      return;\n    }\n    return this.createChart(cellRange, params.chartType, params.chartThemeName, false, params.suppressChartRanges, params.chartContainer, params.aggFunc, params.chartThemeOverrides, params.unlinkChart, params.processChartOptions);\n  };\n  ChartService.prototype.createPivotChart = function (params) {\n    // if required enter pivot mode\n    if (!this.columnController.isPivotMode()) {\n      this.columnController.setPivotMode(true, \"pivotChart\");\n    }\n    // pivot chart range contains all visible column without a row range to include all rows\n    var chartAllRangeParams = {\n      columns: this.columnController.getAllDisplayedColumns().map(function (col) {\n        return col.getColId();\n      })\n    };\n    var cellRange = this.rangeController ? this.rangeController.createCellRangeFromCellRangeParams(chartAllRangeParams) : undefined;\n    if (!cellRange) {\n      console.warn(\"ag-Grid - unable to create chart as there are no columns in the grid.\");\n      return;\n    }\n    return this.createChart(cellRange, params.chartType, params.chartThemeName, true, true, params.chartContainer, undefined, params.chartThemeOverrides, params.unlinkChart, params.processChartOptions);\n  };\n  ChartService.prototype.createChart = function (cellRange, chartType, chartThemeName, pivotChart, suppressChartRanges, container, aggFunc, chartThemeOverrides, unlinkChart, processChartOptions) {\n    var _this = this;\n    if (pivotChart === void 0) {\n      pivotChart = false;\n    }\n    if (suppressChartRanges === void 0) {\n      suppressChartRanges = false;\n    }\n    if (unlinkChart === void 0) {\n      unlinkChart = false;\n    }\n    var createChartContainerFunc = this.gridOptionsWrapper.getCreateChartContainerFunc();\n    var params = {\n      pivotChart: pivotChart,\n      cellRange: cellRange,\n      chartType: chartType,\n      chartThemeName: chartThemeName,\n      insideDialog: !(container || createChartContainerFunc),\n      suppressChartRanges: suppressChartRanges,\n      aggFunc: aggFunc,\n      chartThemeOverrides: chartThemeOverrides,\n      processChartOptions: processChartOptions,\n      unlinkChart: unlinkChart\n    };\n    var chartComp = new GridChartComp(params);\n    this.context.createBean(chartComp);\n    var chartRef = this.createChartRef(chartComp);\n    if (container) {\n      // if container exists, means developer initiated chart create via API, so place in provided container\n      container.appendChild(chartComp.getGui());\n      // if the chart container was placed outside of an element that\n      // has the grid's theme, we manually add the current theme to\n      // make sure all styles for the chartMenu are rendered correctly\n      var theme = this.environment.getTheme();\n      if (theme.el && !theme.el.contains(container)) {\n        agGridCommunity._.addCssClass(container, theme.theme);\n      }\n    } else if (createChartContainerFunc) {\n      // otherwise user created chart via grid UI, check if developer provides containers (eg if the application\n      // is using its own dialogs rather than the grid provided dialogs)\n      createChartContainerFunc(chartRef);\n    } else {\n      // add listener to remove from active charts list when charts are destroyed, e.g. closing chart dialog\n      chartComp.addEventListener(GridChartComp.EVENT_DESTROYED, function () {\n        _this.activeChartComps.delete(chartComp);\n        _this.activeCharts.delete(chartRef);\n      });\n    }\n    return chartRef;\n  };\n  ChartService.prototype.createChartRef = function (chartComp) {\n    var _this = this;\n    var chartRef = {\n      destroyChart: function destroyChart() {\n        if (_this.activeCharts.has(chartRef)) {\n          _this.context.destroyBean(chartComp);\n          _this.activeChartComps.delete(chartComp);\n          _this.activeCharts.delete(chartRef);\n        }\n      },\n      chartElement: chartComp.getGui(),\n      chart: chartComp.getUnderlyingChart()\n    };\n    this.activeCharts.add(chartRef);\n    this.activeChartComps.add(chartComp);\n    return chartRef;\n  };\n  ChartService.prototype.getSelectedRange = function () {\n    var ranges = this.rangeController.getCellRanges();\n    return ranges.length > 0 ? ranges[0] : {};\n  };\n  ChartService.prototype.destroyAllActiveCharts = function () {\n    this.activeCharts.forEach(function (chart) {\n      return chart.destroyChart();\n    });\n  };\n  __decorate$1k([agGridCommunity.Optional('rangeController')], ChartService.prototype, \"rangeController\", void 0);\n  __decorate$1k([agGridCommunity.Autowired('columnController')], ChartService.prototype, \"columnController\", void 0);\n  __decorate$1k([agGridCommunity.Autowired('environment')], ChartService.prototype, \"environment\", void 0);\n  __decorate$1k([agGridCommunity.Autowired('gridOptionsWrapper')], ChartService.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1k([agGridCommunity.PreDestroy], ChartService.prototype, \"destroyAllActiveCharts\", null);\n  ChartService = __decorate$1k([agGridCommunity.Bean('chartService')], ChartService);\n  return ChartService;\n}(agGridCommunity.BeanStub);\nvar __extends$2p = undefined && undefined.__extends || function () {\n  var _extendStatics154 = function extendStatics(d, b) {\n    _extendStatics154 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics154(d, b);\n  };\n  return function (d, b) {\n    _extendStatics154(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1l = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ChartTranslator = /** @class */function (_super) {\n  __extends$2p(ChartTranslator, _super);\n  function ChartTranslator() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  ChartTranslator_1 = ChartTranslator;\n  ChartTranslator.prototype.translate = function (toTranslate) {\n    var translate = this.gridOptionsWrapper.getLocaleTextFunc();\n    var defaultTranslation = ChartTranslator_1.DEFAULT_TRANSLATIONS[toTranslate];\n    return translate(toTranslate, defaultTranslation);\n  };\n  var ChartTranslator_1;\n  ChartTranslator.DEFAULT_TRANSLATIONS = {\n    pivotChartTitle: 'Pivot Chart',\n    rangeChartTitle: 'Range Chart',\n    settings: 'Settings',\n    data: 'Data',\n    format: 'Format',\n    categories: 'Categories',\n    defaultCategory: '(None)',\n    series: 'Series',\n    xyValues: 'X Y Values',\n    paired: 'Paired Mode',\n    axis: 'Axis',\n    navigator: 'Navigator',\n    color: 'Color',\n    thickness: 'Thickness',\n    xType: 'X Type',\n    automatic: 'Automatic',\n    category: 'Category',\n    number: 'Number',\n    time: 'Time',\n    xRotation: 'X Rotation',\n    yRotation: 'Y Rotation',\n    ticks: 'Ticks',\n    width: 'Width',\n    height: 'Height',\n    length: 'Length',\n    padding: 'Padding',\n    spacing: 'Spacing',\n    chart: 'Chart',\n    title: 'Title',\n    titlePlaceholder: 'Chart title - double click to edit',\n    background: 'Background',\n    font: 'Font',\n    top: 'Top',\n    right: 'Right',\n    bottom: 'Bottom',\n    left: 'Left',\n    labels: 'Labels',\n    size: 'Size',\n    shape: 'Shape',\n    minSize: 'Minimum Size',\n    maxSize: 'Maximum Size',\n    legend: 'Legend',\n    position: 'Position',\n    markerSize: 'Marker Size',\n    markerStroke: 'Marker Stroke',\n    markerPadding: 'Marker Padding',\n    itemSpacing: 'Item Spacing',\n    itemPaddingX: 'Item Padding X',\n    itemPaddingY: 'Item Padding Y',\n    layoutHorizontalSpacing: 'Horizontal Spacing',\n    layoutVerticalSpacing: 'Vertical Spacing',\n    strokeWidth: 'Stroke Width',\n    offset: 'Offset',\n    offsets: 'Offsets',\n    tooltips: 'Tooltips',\n    callout: 'Callout',\n    markers: 'Markers',\n    shadow: 'Shadow',\n    blur: 'Blur',\n    xOffset: 'X Offset',\n    yOffset: 'Y Offset',\n    lineWidth: 'Line Width',\n    normal: 'Normal',\n    bold: 'Bold',\n    italic: 'Italic',\n    boldItalic: 'Bold Italic',\n    predefined: 'Predefined',\n    fillOpacity: 'Fill Opacity',\n    strokeOpacity: 'Line Opacity',\n    histogramBinCount: 'Bin count',\n    columnGroup: 'Column',\n    barGroup: 'Bar',\n    pieGroup: 'Pie',\n    lineGroup: 'Line',\n    scatterGroup: 'X Y (Scatter)',\n    areaGroup: 'Area',\n    histogramGroup: 'Histogram',\n    groupedColumnTooltip: 'Grouped',\n    stackedColumnTooltip: 'Stacked',\n    normalizedColumnTooltip: '100% Stacked',\n    groupedBarTooltip: 'Grouped',\n    stackedBarTooltip: 'Stacked',\n    normalizedBarTooltip: '100% Stacked',\n    pieTooltip: 'Pie',\n    doughnutTooltip: 'Doughnut',\n    lineTooltip: 'Line',\n    groupedAreaTooltip: 'Area',\n    stackedAreaTooltip: 'Stacked',\n    normalizedAreaTooltip: '100% Stacked',\n    scatterTooltip: 'Scatter',\n    bubbleTooltip: 'Bubble',\n    histogramTooltip: 'Histogram',\n    noDataToChart: 'No data available to be charted.',\n    pivotChartRequiresPivotMode: 'Pivot Chart requires Pivot Mode enabled.'\n  };\n  __decorate$1l([agGridCommunity.Autowired('gridOptionsWrapper')], ChartTranslator.prototype, \"gridOptionsWrapper\", void 0);\n  ChartTranslator = ChartTranslator_1 = __decorate$1l([agGridCommunity.Bean(\"chartTranslator\")], ChartTranslator);\n  return ChartTranslator;\n}(agGridCommunity.BeanStub);\nvar __extends$2q = undefined && undefined.__extends || function () {\n  var _extendStatics155 = function extendStatics(d, b) {\n    _extendStatics155 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics155(d, b);\n  };\n  return function (d, b) {\n    _extendStatics155(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1m = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays$8 = undefined && undefined.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nvar RangeController = /** @class */function (_super) {\n  __extends$2q(RangeController, _super);\n  function RangeController() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.cellRanges = [];\n    _this.bodyScrollListener = _this.onBodyScroll.bind(_this);\n    _this.dragging = false;\n    return _this;\n  }\n  RangeController.prototype.registerGridComp = function (gridPanel) {\n    this.gridPanel = gridPanel;\n    this.autoScrollService = new AutoScrollService(this.gridPanel, this.gridOptionsWrapper);\n  };\n  RangeController.prototype.init = function () {\n    this.logger = this.loggerFactory.create('RangeController');\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_EVERYTHING_CHANGED, this.removeAllCellRanges.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.removeAllCellRanges.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.removeAllCellRanges.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_GROUP_OPENED, this.refreshLastRangeStart.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_MOVED, this.refreshLastRangeStart.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PINNED, this.refreshLastRangeStart.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_VISIBLE, this.onColumnVisibleChange.bind(this));\n  };\n  RangeController.prototype.onColumnVisibleChange = function () {\n    var _this = this;\n    // first move start column in last cell range (i.e. series chart range)\n    this.refreshLastRangeStart();\n    // then check if the column visibility has changed in any cell range\n    this.cellRanges.forEach(function (cellRange) {\n      var beforeCols = cellRange.columns;\n      // remove hidden cols from cell range\n      cellRange.columns = cellRange.columns.filter(function (col) {\n        return col.isVisible();\n      });\n      var colsInRangeChanged = !agGridCommunity._.areEqual(beforeCols, cellRange.columns);\n      if (colsInRangeChanged) {\n        // notify users and other parts of grid (i.e. status panel) that range has changed\n        _this.dispatchChangedEvent(false, true, cellRange.id);\n      }\n    });\n  };\n  RangeController.prototype.refreshLastRangeStart = function () {\n    var lastRange = agGridCommunity._.last(this.cellRanges);\n    if (!lastRange) {\n      return;\n    }\n    this.refreshRangeStart(lastRange);\n  };\n  RangeController.prototype.isContiguousRange = function (cellRange) {\n    var rangeColumns = cellRange.columns;\n    if (!rangeColumns.length) {\n      return false;\n    }\n    var allColumns = this.columnController.getAllDisplayedColumns();\n    var allPositions = rangeColumns.map(function (c) {\n      return allColumns.indexOf(c);\n    }).sort(function (a, b) {\n      return a - b;\n    });\n    return agGridCommunity._.last(allPositions) - allPositions[0] + 1 === rangeColumns.length;\n  };\n  RangeController.prototype.getRangeStartRow = function (cellRange) {\n    if (cellRange.startRow && cellRange.endRow) {\n      return this.rowPositionUtils.before(cellRange.startRow, cellRange.endRow) ? cellRange.startRow : cellRange.endRow;\n    }\n    var rowPinned = this.pinnedRowModel.getPinnedTopRowCount() > 0 ? agGridCommunity.Constants.PINNED_TOP : undefined;\n    return {\n      rowIndex: 0,\n      rowPinned: rowPinned\n    };\n  };\n  RangeController.prototype.getRangeEndRow = function (cellRange) {\n    if (cellRange.startRow && cellRange.endRow) {\n      return this.rowPositionUtils.before(cellRange.startRow, cellRange.endRow) ? cellRange.endRow : cellRange.startRow;\n    }\n    var pinnedBottomRowCount = this.pinnedRowModel.getPinnedBottomRowCount();\n    var pinnedBottom = pinnedBottomRowCount > 0;\n    if (pinnedBottom) {\n      return {\n        rowIndex: pinnedBottomRowCount - 1,\n        rowPinned: agGridCommunity.Constants.PINNED_BOTTOM\n      };\n    }\n    return {\n      rowIndex: this.rowModel.getRowCount() - 1,\n      rowPinned: undefined\n    };\n  };\n  RangeController.prototype.setRangeToCell = function (cell, appendRange) {\n    if (appendRange === void 0) {\n      appendRange = false;\n    }\n    if (!this.gridOptionsWrapper.isEnableRangeSelection()) {\n      return;\n    }\n    var columns = this.calculateColumnsBetween(cell.column, cell.column);\n    if (!columns) {\n      return;\n    }\n    var suppressMultiRangeSelections = this.gridOptionsWrapper.isSuppressMultiRangeSelection();\n    // if not appending, then clear previous range selections\n    if (suppressMultiRangeSelections || !appendRange || agGridCommunity._.missing(this.cellRanges)) {\n      this.removeAllCellRanges(true);\n    }\n    var rowForCell = {\n      rowIndex: cell.rowIndex,\n      rowPinned: cell.rowPinned\n    };\n    // if there is already a range for this cell, then we reuse the same range, otherwise the user\n    // can ctrl & click a cell many times and hit ctrl+c, which would result in the cell getting copied\n    // many times to the clipboard.\n    var cellRange;\n    for (var i = 0; i < this.cellRanges.length; i++) {\n      var range = this.cellRanges[i];\n      var matches =\n      // check cols are same\n      range.columns && range.columns.length === 1 && range.columns[0] === cell.column &&\n      // check rows are same\n      this.rowPositionUtils.sameRow(rowForCell, range.startRow) && this.rowPositionUtils.sameRow(rowForCell, range.endRow);\n      if (matches) {\n        cellRange = range;\n        break;\n      }\n    }\n    if (cellRange) {\n      // we need it at the end of the list, as the dragStart picks the last created\n      // range as the start point for the drag\n      if (agGridCommunity._.last(this.cellRanges) !== cellRange) {\n        agGridCommunity._.removeFromArray(this.cellRanges, cellRange);\n        this.cellRanges.push(cellRange);\n      }\n    } else {\n      cellRange = {\n        startRow: rowForCell,\n        endRow: rowForCell,\n        columns: columns,\n        startColumn: cell.column\n      };\n      this.cellRanges.push(cellRange);\n    }\n    this.newestRangeStartCell = cell;\n    this.onDragStop();\n    this.dispatchChangedEvent(true, true, cellRange.id);\n  };\n  RangeController.prototype.extendLatestRangeToCell = function (cellPosition) {\n    if (this.isEmpty() || !this.newestRangeStartCell) {\n      return;\n    }\n    var cellRange = agGridCommunity._.last(this.cellRanges);\n    this.updateRangeEnd(cellRange, cellPosition);\n  };\n  RangeController.prototype.updateRangeEnd = function (cellRange, cellPosition, silent) {\n    if (silent === void 0) {\n      silent = false;\n    }\n    var endColumn = cellPosition.column;\n    var colsToAdd = this.calculateColumnsBetween(cellRange.startColumn, endColumn);\n    if (!colsToAdd || this.isLastCellOfRange(cellRange, cellPosition)) {\n      return;\n    }\n    cellRange.columns = colsToAdd;\n    cellRange.endRow = {\n      rowIndex: cellPosition.rowIndex,\n      rowPinned: cellPosition.rowPinned\n    };\n    if (!silent) {\n      this.dispatchChangedEvent(true, true, cellRange.id);\n    }\n  };\n  RangeController.prototype.refreshRangeStart = function (cellRange) {\n    var startColumn = cellRange.startColumn,\n      columns = cellRange.columns;\n    var moveColInCellRange = function moveColInCellRange(colToMove, moveToFront) {\n      var otherCols = cellRange.columns.filter(function (col) {\n        return col !== colToMove;\n      });\n      if (colToMove) {\n        cellRange.startColumn = colToMove;\n        cellRange.columns = moveToFront ? __spreadArrays$8([colToMove], otherCols) : __spreadArrays$8(otherCols, [colToMove]);\n      } else {\n        cellRange.columns = otherCols;\n      }\n    };\n    var _a = this.getRangeEdgeColumns(cellRange),\n      left = _a.left,\n      right = _a.right;\n    var shouldMoveLeftCol = startColumn === columns[0] && startColumn !== left;\n    if (shouldMoveLeftCol) {\n      moveColInCellRange(left, true);\n      return;\n    }\n    var shouldMoveRightCol = startColumn === agGridCommunity._.last(columns) && startColumn === right;\n    if (shouldMoveRightCol) {\n      moveColInCellRange(right, false);\n      return;\n    }\n  };\n  RangeController.prototype.getRangeEdgeColumns = function (cellRange) {\n    var allColumns = this.columnController.getAllDisplayedColumns();\n    var allIndices = cellRange.columns.map(function (c) {\n      return allColumns.indexOf(c);\n    }).filter(function (i) {\n      return i > -1;\n    }).sort(function (a, b) {\n      return a - b;\n    });\n    return {\n      left: allColumns[allIndices[0]],\n      right: allColumns[agGridCommunity._.last(allIndices)]\n    };\n  };\n  // returns true if successful, false if not successful\n  RangeController.prototype.extendLatestRangeInDirection = function (key) {\n    if (this.isEmpty() || !this.newestRangeStartCell) {\n      return;\n    }\n    var lastRange = agGridCommunity._.last(this.cellRanges);\n    var startCell = this.newestRangeStartCell;\n    var firstCol = lastRange.columns[0];\n    var lastCol = agGridCommunity._.last(lastRange.columns);\n    // find the cell that is at the furthest away corner from the starting cell\n    var endCellIndex = lastRange.endRow.rowIndex;\n    var endCellFloating = lastRange.endRow.rowPinned;\n    var endCellColumn = startCell.column === firstCol ? lastCol : firstCol;\n    var endCell = {\n      column: endCellColumn,\n      rowIndex: endCellIndex,\n      rowPinned: endCellFloating\n    };\n    var newEndCell = this.cellNavigationService.getNextCellToFocus(key, endCell);\n    // if user is at end of grid, so no cell to extend to, we return false\n    if (!newEndCell) {\n      return;\n    }\n    this.setCellRange({\n      rowStartIndex: startCell.rowIndex,\n      rowStartPinned: startCell.rowPinned,\n      rowEndIndex: newEndCell.rowIndex,\n      rowEndPinned: newEndCell.rowPinned,\n      columnStart: startCell.column,\n      columnEnd: newEndCell.column\n    });\n    return newEndCell;\n  };\n  RangeController.prototype.setCellRange = function (params) {\n    if (!this.gridOptionsWrapper.isEnableRangeSelection()) {\n      return;\n    }\n    this.removeAllCellRanges(true);\n    this.addCellRange(params);\n  };\n  RangeController.prototype.setCellRanges = function (cellRanges) {\n    var _this = this;\n    if (agGridCommunity._.shallowCompare(this.cellRanges, cellRanges)) {\n      return;\n    }\n    this.removeAllCellRanges(true);\n    cellRanges.forEach(function (newRange) {\n      if (newRange.columns && newRange.startRow) {\n        _this.newestRangeStartCell = {\n          rowIndex: newRange.startRow.rowIndex,\n          rowPinned: newRange.startRow.rowPinned,\n          column: newRange.columns[0]\n        };\n      }\n      _this.cellRanges.push(newRange);\n    });\n    this.dispatchChangedEvent(false, true);\n  };\n  RangeController.prototype.createCellRangeFromCellRangeParams = function (params) {\n    var _this = this;\n    var columns;\n    if (params.columns) {\n      columns = params.columns.map(function (c) {\n        return _this.columnController.getColumnWithValidation(c);\n      }).filter(function (c) {\n        return c;\n      });\n    } else {\n      var columnStart = this.columnController.getColumnWithValidation(params.columnStart);\n      var columnEnd = this.columnController.getColumnWithValidation(params.columnEnd);\n      if (!columnStart || !columnEnd) {\n        return;\n      }\n      columns = this.calculateColumnsBetween(columnStart, columnEnd);\n    }\n    if (!columns) {\n      return;\n    }\n    var startRow = params.rowStartIndex != null ? {\n      rowIndex: params.rowStartIndex,\n      rowPinned: params.rowStartPinned\n    } : undefined;\n    var endRow = params.rowEndIndex != null ? {\n      rowIndex: params.rowEndIndex,\n      rowPinned: params.rowEndPinned\n    } : undefined;\n    return {\n      startRow: startRow,\n      endRow: endRow,\n      columns: columns,\n      startColumn: columns[0]\n    };\n  };\n  RangeController.prototype.addCellRange = function (params) {\n    if (!this.gridOptionsWrapper.isEnableRangeSelection()) {\n      return;\n    }\n    var newRange = this.createCellRangeFromCellRangeParams(params);\n    if (newRange) {\n      this.cellRanges.push(newRange);\n      this.dispatchChangedEvent(false, true, newRange.id);\n    }\n  };\n  RangeController.prototype.getCellRanges = function () {\n    return this.cellRanges;\n  };\n  RangeController.prototype.isEmpty = function () {\n    return this.cellRanges.length === 0;\n  };\n  RangeController.prototype.isMoreThanOneCell = function () {\n    if (this.cellRanges.length === 0) {\n      // no ranges, so not more than one cell\n      return false;\n    } else if (this.cellRanges.length > 1) {\n      // many ranges, so more than one cell\n      return true;\n    }\n    // only one range, return true if range has more than one\n    var range = this.cellRanges[0];\n    var startRow = this.getRangeStartRow(range);\n    var endRow = this.getRangeEndRow(range);\n    return startRow.rowPinned !== endRow.rowPinned || startRow.rowIndex !== endRow.rowIndex || range.columns.length !== 1;\n  };\n  RangeController.prototype.removeAllCellRanges = function (silent) {\n    if (this.isEmpty()) {\n      return;\n    }\n    this.onDragStop();\n    this.cellRanges.length = 0;\n    if (!silent) {\n      this.dispatchChangedEvent(false, true);\n    }\n  };\n  // as the user is dragging outside of the panel, the div starts to scroll, which in turn\n  // means we are selection more (or less) cells, but the mouse isn't moving, so we recalculate\n  // the selection my mimicking a new mouse event\n  RangeController.prototype.onBodyScroll = function () {\n    this.onDragging(this.lastMouseEvent);\n  };\n  RangeController.prototype.isCellInAnyRange = function (cell) {\n    return this.getCellRangeCount(cell) > 0;\n  };\n  RangeController.prototype.isCellInSpecificRange = function (cell, range) {\n    var columnInRange = range.columns !== null && agGridCommunity._.includes(range.columns, cell.column);\n    var rowInRange = this.isRowInRange(cell.rowIndex, cell.rowPinned, range);\n    return columnInRange && rowInRange;\n  };\n  RangeController.prototype.isLastCellOfRange = function (cellRange, cell) {\n    var startRow = cellRange.startRow,\n      endRow = cellRange.endRow;\n    var lastRow = this.rowPositionUtils.before(startRow, endRow) ? endRow : startRow;\n    var isLastRow = cell.rowIndex === lastRow.rowIndex && cell.rowPinned === lastRow.rowPinned;\n    var rangeFirstIndexColumn = cellRange.columns[0];\n    var rangeLastIndexColumn = agGridCommunity._.last(cellRange.columns);\n    var lastRangeColumn = cellRange.startColumn === rangeFirstIndexColumn ? rangeLastIndexColumn : rangeFirstIndexColumn;\n    var isLastColumn = cell.column === lastRangeColumn;\n    return isLastColumn && isLastRow;\n  };\n  RangeController.prototype.isBottomRightCell = function (cellRange, cell) {\n    var allColumns = this.columnController.getAllDisplayedColumns();\n    var allPositions = cellRange.columns.map(function (c) {\n      return allColumns.indexOf(c);\n    }).sort(function (a, b) {\n      return a - b;\n    });\n    var startRow = cellRange.startRow,\n      endRow = cellRange.endRow;\n    var lastRow = this.rowPositionUtils.before(startRow, endRow) ? endRow : startRow;\n    var isRightColumn = allColumns.indexOf(cell.column) === agGridCommunity._.last(allPositions);\n    var isLastRow = cell.rowIndex === lastRow.rowIndex && agGridCommunity._.makeNull(cell.rowPinned) === agGridCommunity._.makeNull(lastRow.rowPinned);\n    return isRightColumn && isLastRow;\n  };\n  // returns the number of ranges this cell is in\n  RangeController.prototype.getCellRangeCount = function (cell) {\n    var _this = this;\n    if (this.isEmpty()) {\n      return 0;\n    }\n    return this.cellRanges.filter(function (cellRange) {\n      return _this.isCellInSpecificRange(cell, cellRange);\n    }).length;\n  };\n  RangeController.prototype.isRowInRange = function (rowIndex, floating, cellRange) {\n    var firstRow = this.getRangeStartRow(cellRange);\n    var lastRow = this.getRangeEndRow(cellRange);\n    var thisRow = {\n      rowIndex: rowIndex,\n      rowPinned: floating\n    };\n    // compare rowPinned with == instead of === because it can be `null` or `undefined`\n    var equalsFirstRow = thisRow.rowIndex === firstRow.rowIndex && thisRow.rowPinned == firstRow.rowPinned;\n    var equalsLastRow = thisRow.rowIndex === lastRow.rowIndex && thisRow.rowPinned == lastRow.rowPinned;\n    if (equalsFirstRow || equalsLastRow) {\n      return true;\n    }\n    var afterFirstRow = !this.rowPositionUtils.before(thisRow, firstRow);\n    var beforeLastRow = this.rowPositionUtils.before(thisRow, lastRow);\n    return afterFirstRow && beforeLastRow;\n  };\n  RangeController.prototype.getDraggingRange = function () {\n    return this.draggingRange;\n  };\n  RangeController.prototype.onDragStart = function (mouseEvent) {\n    if (!this.gridOptionsWrapper.isEnableRangeSelection()) {\n      return;\n    }\n    var ctrlKey = mouseEvent.ctrlKey,\n      metaKey = mouseEvent.metaKey,\n      shiftKey = mouseEvent.shiftKey;\n    // ctrlKey for windows, metaKey for Apple\n    var multiKeyPressed = ctrlKey || metaKey;\n    var allowMulti = !this.gridOptionsWrapper.isSuppressMultiRangeSelection();\n    var multiSelectKeyPressed = allowMulti ? multiKeyPressed : false;\n    var mouseCell = this.mouseEventService.getCellPositionForEvent(mouseEvent);\n    var extendRange = shiftKey && agGridCommunity._.existsAndNotEmpty(this.cellRanges);\n    if (agGridCommunity._.missing(mouseCell)) {\n      // if drag wasn't on cell, then do nothing, including do not set dragging=true,\n      // (which them means onDragging and onDragStop do nothing)\n      return;\n    }\n    if (!multiSelectKeyPressed && (!extendRange || agGridCommunity._.exists(agGridCommunity._.last(this.cellRanges).type))) {\n      this.removeAllCellRanges(true);\n    }\n    this.dragging = true;\n    this.draggingCell = mouseCell;\n    this.lastMouseEvent = mouseEvent;\n    if (!extendRange) {\n      this.newestRangeStartCell = mouseCell;\n    }\n    // if we didn't clear the ranges, then dragging means the user clicked, and when the\n    // user clicks it means a range of one cell was created. we need to extend this range\n    // rather than creating another range. otherwise we end up with two distinct ranges\n    // from a drag operation (one from click, and one from drag).\n    if (this.cellRanges.length > 0) {\n      this.draggingRange = agGridCommunity._.last(this.cellRanges);\n    } else {\n      var mouseRowPosition = {\n        rowIndex: mouseCell.rowIndex,\n        rowPinned: mouseCell.rowPinned\n      };\n      this.draggingRange = {\n        startRow: mouseRowPosition,\n        endRow: mouseRowPosition,\n        columns: [mouseCell.column],\n        startColumn: this.newestRangeStartCell.column\n      };\n      this.cellRanges.push(this.draggingRange);\n    }\n    this.gridPanel.addScrollEventListener(this.bodyScrollListener);\n    this.dispatchChangedEvent(true, false, this.draggingRange.id);\n  };\n  RangeController.prototype.onDragging = function (mouseEvent) {\n    var _this = this;\n    if (!this.dragging || !mouseEvent) {\n      return;\n    }\n    this.lastMouseEvent = mouseEvent;\n    var cellPosition = this.mouseEventService.getCellPositionForEvent(mouseEvent);\n    var isMouseAndStartInPinned = function isMouseAndStartInPinned(position) {\n      return cellPosition && cellPosition.rowPinned === position && _this.newestRangeStartCell.rowPinned === position;\n    };\n    var skipVerticalScroll = isMouseAndStartInPinned('top') || isMouseAndStartInPinned('bottom');\n    this.autoScrollService.check(mouseEvent, skipVerticalScroll);\n    if (!cellPosition || !this.draggingCell || this.cellPositionUtils.equals(this.draggingCell, cellPosition)) {\n      return;\n    }\n    var columns = this.calculateColumnsBetween(this.newestRangeStartCell.column, cellPosition.column);\n    if (!columns) {\n      return;\n    }\n    this.draggingCell = cellPosition;\n    this.draggingRange.endRow = {\n      rowIndex: cellPosition.rowIndex,\n      rowPinned: cellPosition.rowPinned\n    };\n    this.draggingRange.columns = columns;\n    this.dispatchChangedEvent(false, false, this.draggingRange.id);\n  };\n  RangeController.prototype.onDragStop = function () {\n    if (!this.dragging) {\n      return;\n    }\n    var id = this.draggingRange.id;\n    this.autoScrollService.ensureCleared();\n    this.gridPanel.removeScrollEventListener(this.bodyScrollListener);\n    this.lastMouseEvent = null;\n    this.dragging = false;\n    this.draggingRange = undefined;\n    this.draggingCell = undefined;\n    this.dispatchChangedEvent(false, true, id);\n  };\n  RangeController.prototype.dispatchChangedEvent = function (started, finished, id) {\n    var event = Object.freeze({\n      type: agGridCommunity.Events.EVENT_RANGE_SELECTION_CHANGED,\n      api: this.gridApi,\n      columnApi: this.columnApi,\n      started: started,\n      finished: finished,\n      id: id\n    });\n    this.eventService.dispatchEvent(event);\n  };\n  RangeController.prototype.calculateColumnsBetween = function (columnFrom, columnTo) {\n    var allColumns = this.columnController.getAllDisplayedColumns();\n    var isSameColumn = columnFrom === columnTo;\n    var fromIndex = allColumns.indexOf(columnFrom);\n    if (fromIndex < 0) {\n      console.warn(\"ag-Grid: column \" + columnFrom.getId() + \" is not visible\");\n      return undefined;\n    }\n    var toIndex = isSameColumn ? fromIndex : allColumns.indexOf(columnTo);\n    if (toIndex < 0) {\n      console.warn(\"ag-Grid: column \" + columnTo.getId() + \" is not visible\");\n      return undefined;\n    }\n    if (isSameColumn) {\n      return [columnFrom];\n    }\n    var firstIndex = Math.min(fromIndex, toIndex);\n    var lastIndex = firstIndex === fromIndex ? toIndex : fromIndex;\n    var columns = [];\n    for (var i = firstIndex; i <= lastIndex; i++) {\n      columns.push(allColumns[i]);\n    }\n    return columns;\n  };\n  __decorate$1m([agGridCommunity.Autowired('loggerFactory')], RangeController.prototype, \"loggerFactory\", void 0);\n  __decorate$1m([agGridCommunity.Autowired('rowModel')], RangeController.prototype, \"rowModel\", void 0);\n  __decorate$1m([agGridCommunity.Autowired('columnController')], RangeController.prototype, \"columnController\", void 0);\n  __decorate$1m([agGridCommunity.Autowired('mouseEventService')], RangeController.prototype, \"mouseEventService\", void 0);\n  __decorate$1m([agGridCommunity.Autowired('gridOptionsWrapper')], RangeController.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1m([agGridCommunity.Autowired('columnApi')], RangeController.prototype, \"columnApi\", void 0);\n  __decorate$1m([agGridCommunity.Autowired('gridApi')], RangeController.prototype, \"gridApi\", void 0);\n  __decorate$1m([agGridCommunity.Autowired('cellNavigationService')], RangeController.prototype, \"cellNavigationService\", void 0);\n  __decorate$1m([agGridCommunity.Autowired(\"pinnedRowModel\")], RangeController.prototype, \"pinnedRowModel\", void 0);\n  __decorate$1m([agGridCommunity.Autowired('rowPositionUtils')], RangeController.prototype, \"rowPositionUtils\", void 0);\n  __decorate$1m([agGridCommunity.Autowired('cellPositionUtils')], RangeController.prototype, \"cellPositionUtils\", void 0);\n  __decorate$1m([agGridCommunity.PostConstruct], RangeController.prototype, \"init\", null);\n  RangeController = __decorate$1m([agGridCommunity.Bean('rangeController')], RangeController);\n  return RangeController;\n}(agGridCommunity.BeanStub);\nvar AutoScrollService = /** @class */function () {\n  function AutoScrollService(gridPanel, gridOptionsWrapper) {\n    this.tickingInterval = null;\n    this.gridPanel = gridPanel;\n    this.gridOptionsWrapper = gridOptionsWrapper;\n  }\n  AutoScrollService.prototype.check = function (mouseEvent, skipVerticalScroll) {\n    if (skipVerticalScroll === void 0) {\n      skipVerticalScroll = false;\n    }\n    var rect = this.gridPanel.getBodyClientRect();\n    skipVerticalScroll = skipVerticalScroll || this.gridOptionsWrapper.getDomLayout() !== agGridCommunity.Constants.DOM_LAYOUT_NORMAL;\n    // we don't do ticking if grid is auto height unless we have a horizontal scroller\n    if (skipVerticalScroll && !this.gridPanel.isHorizontalScrollShowing()) {\n      return;\n    }\n    this.tickLeft = mouseEvent.clientX < rect.left + 20;\n    this.tickRight = mouseEvent.clientX > rect.right - 20;\n    this.tickUp = mouseEvent.clientY < rect.top + 20 && !skipVerticalScroll;\n    this.tickDown = mouseEvent.clientY > rect.bottom - 20 && !skipVerticalScroll;\n    if (this.tickLeft || this.tickRight || this.tickUp || this.tickDown) {\n      this.ensureTickingStarted();\n    } else {\n      this.ensureCleared();\n    }\n  };\n  AutoScrollService.prototype.ensureTickingStarted = function () {\n    if (this.tickingInterval === null) {\n      this.tickingInterval = window.setInterval(this.doTick.bind(this), 100);\n      this.tickCount = 0;\n    }\n  };\n  AutoScrollService.prototype.doTick = function () {\n    this.tickCount++;\n    var vScrollPosition = this.gridPanel.getVScrollPosition();\n    var hScrollPosition = this.gridPanel.getHScrollPosition();\n    var tickAmount;\n    tickAmount = this.tickCount > 20 ? 200 : this.tickCount > 10 ? 80 : 40;\n    if (this.tickUp) {\n      this.gridPanel.setVerticalScrollPosition(vScrollPosition.top - tickAmount);\n    }\n    if (this.tickDown) {\n      this.gridPanel.setVerticalScrollPosition(vScrollPosition.top + tickAmount);\n    }\n    if (this.tickLeft) {\n      this.gridPanel.setHorizontalScrollPosition(hScrollPosition.left - tickAmount);\n    }\n    if (this.tickRight) {\n      this.gridPanel.setHorizontalScrollPosition(hScrollPosition.left + tickAmount);\n    }\n  };\n  AutoScrollService.prototype.ensureCleared = function () {\n    if (this.tickingInterval) {\n      window.clearInterval(this.tickingInterval);\n      this.tickingInterval = null;\n    }\n  };\n  return AutoScrollService;\n}();\nvar __extends$2r = undefined && undefined.__extends || function () {\n  var _extendStatics156 = function extendStatics(d, b) {\n    _extendStatics156 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics156(d, b);\n  };\n  return function (d, b) {\n    _extendStatics156(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1n = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar AbstractSelectionHandle = /** @class */function (_super) {\n  __extends$2r(AbstractSelectionHandle, _super);\n  function AbstractSelectionHandle() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.changedCalculatedValues = false;\n    _this.dragging = false;\n    _this.shouldDestroyOnEndDragging = false;\n    return _this;\n  }\n  AbstractSelectionHandle.prototype.init = function () {\n    var _this = this;\n    this.dragService.addDragSource({\n      dragStartPixels: 0,\n      eElement: this.getGui(),\n      onDragStart: this.onDragStart.bind(this),\n      onDragging: function onDragging(e) {\n        _this.dragging = true;\n        _this.rangeController.autoScrollService.check(e);\n        if (_this.changedCalculatedValues) {\n          _this.onDrag(e);\n          _this.changedCalculatedValues = false;\n        }\n      },\n      onDragStop: function onDragStop(e) {\n        _this.dragging = false;\n        _this.onDragEnd(e);\n        _this.clearValues();\n        _this.rangeController.autoScrollService.ensureCleared();\n        // TODO: this causes a bug where if there are multiple grids in the same page, all of them will\n        // be affected by a drag on any. Move it to the root element.\n        agGridCommunity._.removeCssClass(document.body, _this.getDraggingCssClass());\n        if (_this.shouldDestroyOnEndDragging) {\n          _this.destroy();\n        }\n      }\n    });\n    this.addManagedListener(this.getGui(), 'mousedown', this.preventRangeExtension.bind(this));\n  };\n  AbstractSelectionHandle.prototype.isDragging = function () {\n    return this.dragging;\n  };\n  AbstractSelectionHandle.prototype.getCellComp = function () {\n    return this.cellComp;\n  };\n  AbstractSelectionHandle.prototype.setCellComp = function (cellComp) {\n    this.cellComp = cellComp;\n  };\n  AbstractSelectionHandle.prototype.getCellRange = function () {\n    return this.cellRange;\n  };\n  AbstractSelectionHandle.prototype.setCellRange = function (range) {\n    this.cellRange = range;\n  };\n  AbstractSelectionHandle.prototype.getRangeStartRow = function () {\n    return this.rangeStartRow;\n  };\n  AbstractSelectionHandle.prototype.setRangeStartRow = function (row) {\n    this.rangeStartRow = row;\n  };\n  AbstractSelectionHandle.prototype.getRangeEndRow = function () {\n    return this.rangeEndRow;\n  };\n  AbstractSelectionHandle.prototype.setRangeEndRow = function (row) {\n    this.rangeEndRow = row;\n  };\n  AbstractSelectionHandle.prototype.getLastCellHovered = function () {\n    return this.lastCellHovered;\n  };\n  AbstractSelectionHandle.prototype.preventRangeExtension = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  AbstractSelectionHandle.prototype.onDragStart = function (e) {\n    this.cellHoverListener = this.addManagedListener(this.rowRenderer.getGridCore().getRootGui(), 'mousemove', this.updateValuesOnMove.bind(this));\n    agGridCommunity._.addCssClass(document.body, this.getDraggingCssClass());\n  };\n  AbstractSelectionHandle.prototype.getDraggingCssClass = function () {\n    return \"ag-dragging-\" + (this.type === agGridCommunity.SelectionHandleType.FILL ? 'fill' : 'range') + \"-handle\";\n  };\n  AbstractSelectionHandle.prototype.updateValuesOnMove = function (e) {\n    var cell = this.mouseEventService.getCellPositionForEvent(e);\n    if (cell === this.lastCellHovered) {\n      return;\n    }\n    this.lastCellHovered = cell;\n    this.changedCalculatedValues = true;\n  };\n  AbstractSelectionHandle.prototype.getType = function () {\n    return this.type;\n  };\n  AbstractSelectionHandle.prototype.refresh = function (cellComp) {\n    var _this = this;\n    var oldCellComp = this.getCellComp();\n    var eGui = this.getGui();\n    var cellRange = agGridCommunity._.last(this.rangeController.getCellRanges());\n    var start = cellRange.startRow;\n    var end = cellRange.endRow;\n    if (start && end) {\n      var isBefore = this.rowPositionUtils.before(end, start);\n      if (isBefore) {\n        this.setRangeStartRow(end);\n        this.setRangeEndRow(start);\n      } else {\n        this.setRangeStartRow(start);\n        this.setRangeEndRow(end);\n      }\n    }\n    if (oldCellComp !== cellComp || !agGridCommunity._.isVisible(eGui)) {\n      this.setCellComp(cellComp);\n      window.setTimeout(function () {\n        if (_this.isAlive()) {\n          cellComp.appendChild(eGui);\n        }\n      }, 1);\n    }\n    this.setCellRange(cellRange);\n  };\n  AbstractSelectionHandle.prototype.clearValues = function () {\n    this.lastCellHovered = undefined;\n    this.removeListeners();\n  };\n  AbstractSelectionHandle.prototype.removeListeners = function () {\n    if (this.cellHoverListener) {\n      this.cellHoverListener();\n      this.cellHoverListener = undefined;\n    }\n  };\n  AbstractSelectionHandle.prototype.destroy = function () {\n    if (!this.shouldDestroyOnEndDragging && this.isDragging()) {\n      agGridCommunity._.setDisplayed(this.getGui(), false);\n      this.shouldDestroyOnEndDragging = true;\n      return;\n    }\n    this.shouldDestroyOnEndDragging = false;\n    _super.prototype.destroy.call(this);\n    this.removeListeners();\n    var eGui = this.getGui();\n    if (eGui.parentElement) {\n      eGui.parentElement.removeChild(eGui);\n    }\n  };\n  __decorate$1n([agGridCommunity.Autowired(\"rowRenderer\")], AbstractSelectionHandle.prototype, \"rowRenderer\", void 0);\n  __decorate$1n([agGridCommunity.Autowired(\"dragService\")], AbstractSelectionHandle.prototype, \"dragService\", void 0);\n  __decorate$1n([agGridCommunity.Autowired(\"rangeController\")], AbstractSelectionHandle.prototype, \"rangeController\", void 0);\n  __decorate$1n([agGridCommunity.Autowired(\"mouseEventService\")], AbstractSelectionHandle.prototype, \"mouseEventService\", void 0);\n  __decorate$1n([agGridCommunity.Autowired(\"columnController\")], AbstractSelectionHandle.prototype, \"columnController\", void 0);\n  __decorate$1n([agGridCommunity.Autowired(\"cellNavigationService\")], AbstractSelectionHandle.prototype, \"cellNavigationService\", void 0);\n  __decorate$1n([agGridCommunity.Autowired('rowPositionUtils')], AbstractSelectionHandle.prototype, \"rowPositionUtils\", void 0);\n  __decorate$1n([agGridCommunity.PostConstruct], AbstractSelectionHandle.prototype, \"init\", null);\n  return AbstractSelectionHandle;\n}(agGridCommunity.Component);\nvar __extends$2s = undefined && undefined.__extends || function () {\n  var _extendStatics157 = function extendStatics(d, b) {\n    _extendStatics157 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics157(d, b);\n  };\n  return function (d, b) {\n    _extendStatics157(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign$h = undefined && undefined.__assign || function () {\n  __assign$h = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$h.apply(this, arguments);\n};\nvar __decorate$1o = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays$9 = undefined && undefined.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n  return r;\n};\nvar FillHandle = /** @class */function (_super) {\n  __extends$2s(FillHandle, _super);\n  function FillHandle() {\n    var _this = _super.call(this, FillHandle.TEMPLATE) || this;\n    _this.markedCellComps = [];\n    _this.cellValues = [];\n    _this.isUp = false;\n    _this.isLeft = false;\n    _this.isReduce = false;\n    _this.type = agGridCommunity.SelectionHandleType.FILL;\n    return _this;\n  }\n  FillHandle.prototype.updateValuesOnMove = function (e) {\n    _super.prototype.updateValuesOnMove.call(this, e);\n    if (!this.initialXY) {\n      this.initialXY = this.mouseEventService.getNormalisedPosition(e);\n    }\n    var _a = this.initialXY,\n      x = _a.x,\n      y = _a.y;\n    var _b = this.mouseEventService.getNormalisedPosition(e),\n      newX = _b.x,\n      newY = _b.y;\n    var diffX = Math.abs(x - newX);\n    var diffY = Math.abs(y - newY);\n    var allowedDirection = this.gridOptionsWrapper.getFillHandleDirection();\n    var direction;\n    if (allowedDirection === 'xy') {\n      direction = diffX > diffY ? 'x' : 'y';\n    } else {\n      direction = allowedDirection;\n    }\n    if (direction !== this.dragAxis) {\n      this.dragAxis = direction;\n      this.changedCalculatedValues = true;\n    }\n  };\n  FillHandle.prototype.onDrag = function (e) {\n    if (!this.initialPosition) {\n      var cellComp = this.getCellComp();\n      if (!cellComp) {\n        return;\n      }\n      this.initialPosition = cellComp.getCellPosition();\n    }\n    var lastCellHovered = this.getLastCellHovered();\n    if (lastCellHovered) {\n      this.markPathFrom(this.initialPosition, lastCellHovered);\n    }\n  };\n  FillHandle.prototype.onDragEnd = function (e) {\n    this.initialXY = null;\n    if (!this.markedCellComps.length) {\n      return;\n    }\n    var isX = this.dragAxis === 'x';\n    var initialRange = this.getCellRange();\n    var colLen = initialRange.columns.length;\n    var rangeStartRow = this.getRangeStartRow();\n    var rangeEndRow = this.getRangeEndRow();\n    var finalRange;\n    if (!this.isUp && !this.isLeft) {\n      finalRange = this.rangeController.createCellRangeFromCellRangeParams({\n        rowStartIndex: rangeStartRow.rowIndex,\n        rowStartPinned: rangeStartRow.rowPinned,\n        columnStart: initialRange.columns[0],\n        rowEndIndex: isX ? rangeEndRow.rowIndex : this.lastCellMarked.rowIndex,\n        rowEndPinned: isX ? rangeEndRow.rowPinned : this.lastCellMarked.rowPinned,\n        columnEnd: isX ? this.lastCellMarked.column : initialRange.columns[colLen - 1]\n      });\n    } else {\n      var startRow = isX ? rangeStartRow : this.lastCellMarked;\n      finalRange = this.rangeController.createCellRangeFromCellRangeParams({\n        rowStartIndex: startRow.rowIndex,\n        rowStartPinned: startRow.rowPinned,\n        columnStart: isX ? this.lastCellMarked.column : initialRange.columns[0],\n        rowEndIndex: rangeEndRow.rowIndex,\n        rowEndPinned: rangeEndRow.rowPinned,\n        columnEnd: initialRange.columns[colLen - 1]\n      });\n    }\n    if (finalRange) {\n      // raising fill events for undo / redo\n      this.raiseFillStartEvent();\n      this.handleValueChanged(initialRange, finalRange, e);\n      this.rangeController.setCellRanges([finalRange]);\n      this.raiseFillEndEvent(initialRange, finalRange);\n    }\n  };\n  FillHandle.prototype.raiseFillStartEvent = function () {\n    var fillStartEvent = {\n      type: agGridCommunity.Events.EVENT_FILL_START,\n      columnApi: this.gridOptionsWrapper.getColumnApi(),\n      api: this.gridOptionsWrapper.getApi()\n    };\n    this.eventService.dispatchEvent(fillStartEvent);\n  };\n  FillHandle.prototype.raiseFillEndEvent = function (initialRange, finalRange) {\n    var fillEndEvent = {\n      type: agGridCommunity.Events.EVENT_FILL_END,\n      columnApi: this.gridOptionsWrapper.getColumnApi(),\n      api: this.gridOptionsWrapper.getApi(),\n      initialRange: initialRange,\n      finalRange: finalRange\n    };\n    this.eventService.dispatchEvent(fillEndEvent);\n  };\n  FillHandle.prototype.handleValueChanged = function (initialRange, finalRange, e) {\n    var _this = this;\n    var initialRangeEndRow = this.rangeController.getRangeEndRow(initialRange);\n    var initialRangeStartRow = this.rangeController.getRangeStartRow(initialRange);\n    var finalRangeEndRow = this.rangeController.getRangeEndRow(finalRange);\n    var finalRangeStartRow = this.rangeController.getRangeStartRow(finalRange);\n    var isVertical = this.dragAxis === 'y';\n    // if the range is being reduced in size, all we need to do is\n    // clear the cells that are no longer part of the range\n    if (this.isReduce && !this.gridOptionsWrapper.isSuppressClearOnFillReduction()) {\n      var columns = isVertical ? initialRange.columns : initialRange.columns.filter(function (col) {\n        return finalRange.columns.indexOf(col) < 0;\n      });\n      var startRow = isVertical ? this.cellNavigationService.getRowBelow(finalRangeEndRow) : finalRangeStartRow;\n      if (startRow) {\n        this.clearCellsInRange(startRow, initialRangeEndRow, columns);\n      }\n      return;\n    }\n    var withinInitialRange = true;\n    var values = [];\n    var initialValues = [];\n    var idx = 0;\n    var resetValues = function resetValues() {\n      values.length = 0;\n      initialValues.length = 0;\n      idx = 0;\n    };\n    var iterateAcrossCells = function iterateAcrossCells(column, columns) {\n      var currentRow = _this.isUp ? initialRangeEndRow : initialRangeStartRow;\n      var finished = false;\n      if (isVertical) {\n        withinInitialRange = true;\n        resetValues();\n      }\n      var _loop_1 = function _loop_1() {\n        var rowNode = _this.rowPositionUtils.getRowNode(currentRow);\n        if (!rowNode) {\n          return \"break\";\n        }\n        if (isVertical && column) {\n          fillValues(values, column, rowNode, function () {\n            return !_this.rowPositionUtils.sameRow(currentRow, _this.isUp ? initialRangeStartRow : initialRangeEndRow);\n          });\n        } else if (columns) {\n          withinInitialRange = true;\n          resetValues();\n          columns.forEach(function (col) {\n            return fillValues(values, col, rowNode, function () {\n              return col !== (_this.isLeft ? initialRange.columns[0] : agGridCommunity._.last(initialRange.columns));\n            });\n          });\n        }\n        finished = _this.rowPositionUtils.sameRow(currentRow, _this.isUp ? finalRangeStartRow : finalRangeEndRow);\n        currentRow = _this.isUp ? _this.cellNavigationService.getRowAbove(currentRow) : _this.cellNavigationService.getRowBelow(currentRow);\n      };\n      while (!finished && currentRow) {\n        var state_1 = _loop_1();\n        if (state_1 === \"break\") break;\n      }\n    };\n    var fillValues = function fillValues(values, col, rowNode, updateInitialSet) {\n      var currentValue;\n      if (withinInitialRange) {\n        currentValue = _this.valueService.getValue(col, rowNode);\n        initialValues.push(currentValue);\n        withinInitialRange = updateInitialSet();\n      } else {\n        currentValue = _this.processValues(e, values, initialValues, col, rowNode, idx++);\n        if (col.isCellEditable(rowNode)) {\n          rowNode.setDataValue(col, currentValue);\n        }\n      }\n      values.push(currentValue);\n    };\n    if (isVertical) {\n      initialRange.columns.forEach(function (col) {\n        iterateAcrossCells(col);\n      });\n    } else {\n      var columns = this.isLeft ? __spreadArrays$9(finalRange.columns).reverse() : finalRange.columns;\n      iterateAcrossCells(undefined, columns);\n    }\n  };\n  FillHandle.prototype.clearCellsInRange = function (startRow, endRow, columns) {\n    var _this = this;\n    var currentRow = startRow;\n    var finished = false;\n    var _loop_2 = function _loop_2() {\n      var rowNode = this_1.rowPositionUtils.getRowNode(currentRow);\n      // should never happen, defensive programming\n      if (!rowNode) {\n        return \"break\";\n      }\n      columns.forEach(function (col) {\n        if (col.isCellEditable(rowNode)) {\n          _this.valueService.setValue(rowNode, col, null);\n        }\n      });\n      finished = this_1.rowPositionUtils.sameRow(currentRow, endRow);\n      currentRow = this_1.cellNavigationService.getRowBelow(currentRow);\n    };\n    var this_1 = this;\n    while (!finished && currentRow) {\n      var state_2 = _loop_2();\n      if (state_2 === \"break\") break;\n    }\n  };\n  FillHandle.prototype.processValues = function (event, values, initialValues, col, rowNode, idx) {\n    var userFillOperation = this.gridOptionsWrapper.getFillOperation();\n    var isVertical = this.dragAxis === 'y';\n    var direction;\n    if (isVertical) {\n      direction = this.isUp ? 'up' : 'down';\n    } else {\n      direction = this.isLeft ? 'left' : 'right';\n    }\n    if (userFillOperation) {\n      var userResult = userFillOperation({\n        event: event,\n        values: values,\n        initialValues: initialValues,\n        currentIndex: idx,\n        currentCellValue: this.valueService.getValue(col, rowNode),\n        api: this.gridOptionsWrapper.getApi(),\n        columnApi: this.gridOptionsWrapper.getColumnApi(),\n        context: this.gridOptionsWrapper.getContext(),\n        direction: direction,\n        column: isVertical ? col : undefined,\n        rowNode: !isVertical ? rowNode : undefined // only present if left / right\n      });\n\n      if (userResult !== false) {\n        return userResult;\n      }\n    }\n    var allNumbers = !values.some(function (val) {\n      var asFloat = parseFloat(val);\n      return isNaN(asFloat) || asFloat.toString() !== val.toString();\n    });\n    // values should be copied in order if the alt key is pressed\n    // or if the values contain strings and numbers\n    // However, if we only have one initial value selected, and that\n    // value is a number and we are also pressing alt, then we should\n    // increment or decrement the value by 1 based on direction.\n    if (event.altKey || !allNumbers) {\n      if (allNumbers && initialValues.length === 1) {\n        var multiplier = this.isUp || this.isLeft ? -1 : 1;\n        return parseFloat(agGridCommunity._.last(values)) + 1 * multiplier;\n      }\n      return values[idx % values.length];\n    }\n    return agGridCommunity._.last(agGridCommunity._.findLineByLeastSquares(values.map(Number)));\n  };\n  FillHandle.prototype.clearValues = function () {\n    this.clearMarkedPath();\n    this.clearCellValues();\n    this.lastCellMarked = undefined;\n    _super.prototype.clearValues.call(this);\n  };\n  FillHandle.prototype.clearMarkedPath = function () {\n    this.markedCellComps.forEach(function (cellComp) {\n      var eGui = cellComp.getGui();\n      agGridCommunity._.removeCssClass(eGui, 'ag-selection-fill-top');\n      agGridCommunity._.removeCssClass(eGui, 'ag-selection-fill-right');\n      agGridCommunity._.removeCssClass(eGui, 'ag-selection-fill-bottom');\n      agGridCommunity._.removeCssClass(eGui, 'ag-selection-fill-left');\n    });\n    this.markedCellComps.length = 0;\n    this.isUp = false;\n    this.isLeft = false;\n    this.isReduce = false;\n  };\n  FillHandle.prototype.clearCellValues = function () {\n    this.cellValues.length = 0;\n  };\n  FillHandle.prototype.markPathFrom = function (initialPosition, currentPosition) {\n    this.clearMarkedPath();\n    this.clearCellValues();\n    if (this.dragAxis === 'y') {\n      if (this.rowPositionUtils.sameRow(currentPosition, initialPosition)) {\n        return;\n      }\n      var isBefore = this.rowPositionUtils.before(currentPosition, initialPosition);\n      var rangeStartRow = this.getRangeStartRow();\n      var rangeEndRow = this.getRangeEndRow();\n      if (isBefore && (currentPosition.rowPinned == rangeStartRow.rowPinned && currentPosition.rowIndex >= rangeStartRow.rowIndex || rangeStartRow.rowPinned != rangeEndRow.rowPinned && currentPosition.rowPinned == rangeEndRow.rowPinned && currentPosition.rowIndex <= rangeEndRow.rowIndex)) {\n        this.reduceVertical(initialPosition, currentPosition);\n        this.isReduce = true;\n      } else {\n        this.extendVertical(initialPosition, currentPosition, isBefore);\n        this.isReduce = false;\n      }\n    } else {\n      var initialColumn = initialPosition.column;\n      var currentColumn = currentPosition.column;\n      if (initialColumn === currentColumn) {\n        return;\n      }\n      var displayedColumns = this.columnController.getAllDisplayedColumns();\n      var initialIndex = displayedColumns.indexOf(initialColumn);\n      var currentIndex = displayedColumns.indexOf(currentColumn);\n      if (currentIndex <= initialIndex && currentIndex >= displayedColumns.indexOf(this.getCellRange().columns[0])) {\n        this.reduceHorizontal(initialPosition, currentPosition);\n        this.isReduce = true;\n      } else {\n        this.extendHorizontal(initialPosition, currentPosition, currentIndex < initialIndex);\n        this.isReduce = false;\n      }\n    }\n    this.lastCellMarked = currentPosition;\n  };\n  FillHandle.prototype.extendVertical = function (initialPosition, endPosition, isMovingUp) {\n    var _a = this,\n      rowRenderer = _a.rowRenderer,\n      rangeController = _a.rangeController;\n    var row = initialPosition;\n    do {\n      var cellRange = this.getCellRange();\n      var colLen = cellRange.columns.length;\n      for (var i = 0; i < colLen; i++) {\n        var column = cellRange.columns[i];\n        var rowPos = {\n          rowIndex: row.rowIndex,\n          rowPinned: row.rowPinned\n        };\n        var cellPos = __assign$h(__assign$h({}, rowPos), {\n          column: column\n        });\n        var cellInRange = rangeController.isCellInSpecificRange(cellPos, cellRange);\n        var isInitialRow = this.rowPositionUtils.sameRow(row, initialPosition);\n        if (isMovingUp) {\n          this.isUp = true;\n        }\n        if (!isInitialRow) {\n          var cellComp = rowRenderer.getComponentForCell(cellPos);\n          if (cellComp) {\n            this.markedCellComps.push(cellComp);\n            var eGui = cellComp.getGui();\n            if (!cellInRange) {\n              agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-selection-fill-left', i === 0);\n              agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-selection-fill-right', i === colLen - 1);\n            }\n            agGridCommunity._.addOrRemoveCssClass(eGui, isMovingUp ? 'ag-selection-fill-top' : 'ag-selection-fill-bottom', this.rowPositionUtils.sameRow(row, endPosition));\n          }\n        }\n      }\n      if (this.rowPositionUtils.sameRow(row, endPosition)) {\n        break;\n      }\n    } while (row = isMovingUp ? this.cellNavigationService.getRowAbove(row) : this.cellNavigationService.getRowBelow(row));\n  };\n  FillHandle.prototype.reduceVertical = function (initialPosition, endPosition) {\n    var row = initialPosition;\n    do {\n      var cellRange = this.getCellRange();\n      var colLen = cellRange.columns.length;\n      var isLastRow = this.rowPositionUtils.sameRow(row, endPosition);\n      for (var i = 0; i < colLen; i++) {\n        var rowPos = {\n          rowIndex: row.rowIndex,\n          rowPinned: row.rowPinned\n        };\n        var celPos = __assign$h(__assign$h({}, rowPos), {\n          column: cellRange.columns[i]\n        });\n        var cellComp = this.rowRenderer.getComponentForCell(celPos);\n        if (cellComp) {\n          this.markedCellComps.push(cellComp);\n          var eGui = cellComp.getGui();\n          agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-selection-fill-bottom', this.rowPositionUtils.sameRow(row, endPosition));\n        }\n      }\n      if (isLastRow) {\n        break;\n      }\n    } while (row = this.cellNavigationService.getRowAbove(row));\n  };\n  FillHandle.prototype.extendHorizontal = function (initialPosition, endPosition, isMovingLeft) {\n    var _this = this;\n    var allCols = this.columnController.getAllDisplayedColumns();\n    var startCol = allCols.indexOf(isMovingLeft ? endPosition.column : initialPosition.column);\n    var endCol = allCols.indexOf(isMovingLeft ? this.getCellRange().columns[0] : endPosition.column);\n    var offset = isMovingLeft ? 0 : 1;\n    var colsToMark = allCols.slice(startCol + offset, endCol + offset);\n    var rangeStartRow = this.getRangeStartRow();\n    var rangeEndRow = this.getRangeEndRow();\n    colsToMark.forEach(function (column) {\n      var row = rangeStartRow;\n      var isLastRow = false;\n      do {\n        isLastRow = _this.rowPositionUtils.sameRow(row, rangeEndRow);\n        var cellComp = _this.rowRenderer.getComponentForCell({\n          rowIndex: row.rowIndex,\n          rowPinned: row.rowPinned,\n          column: column\n        });\n        if (cellComp) {\n          _this.markedCellComps.push(cellComp);\n          var eGui = cellComp.getGui();\n          agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-selection-fill-top', _this.rowPositionUtils.sameRow(row, rangeStartRow));\n          agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-selection-fill-bottom', _this.rowPositionUtils.sameRow(row, rangeEndRow));\n          if (isMovingLeft) {\n            _this.isLeft = true;\n            agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-selection-fill-left', column === colsToMark[0]);\n          } else {\n            agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-selection-fill-right', column === agGridCommunity._.last(colsToMark));\n          }\n        }\n        row = _this.cellNavigationService.getRowBelow(row);\n      } while (!isLastRow);\n    });\n  };\n  FillHandle.prototype.reduceHorizontal = function (initialPosition, endPosition) {\n    var _this = this;\n    var allCols = this.columnController.getAllDisplayedColumns();\n    var startCol = allCols.indexOf(endPosition.column);\n    var endCol = allCols.indexOf(initialPosition.column);\n    var colsToMark = allCols.slice(startCol, endCol);\n    var rangeStartRow = this.getRangeStartRow();\n    var rangeEndRow = this.getRangeEndRow();\n    colsToMark.forEach(function (column) {\n      var row = rangeStartRow;\n      var isLastRow = false;\n      do {\n        isLastRow = _this.rowPositionUtils.sameRow(row, rangeEndRow);\n        var cellComp = _this.rowRenderer.getComponentForCell({\n          rowIndex: row.rowIndex,\n          rowPinned: row.rowPinned,\n          column: column\n        });\n        if (cellComp) {\n          _this.markedCellComps.push(cellComp);\n          var eGui = cellComp.getGui();\n          agGridCommunity._.addOrRemoveCssClass(eGui, 'ag-selection-fill-right', column === colsToMark[0]);\n        }\n        row = _this.cellNavigationService.getRowBelow(row);\n      } while (!isLastRow);\n    });\n  };\n  FillHandle.prototype.refresh = function (cellComp) {\n    var cellRange = this.rangeController.getCellRanges()[0];\n    var isColumnRange = !cellRange.startRow || !cellRange.endRow;\n    if (isColumnRange) {\n      this.destroy();\n      return;\n    }\n    _super.prototype.refresh.call(this, cellComp);\n  };\n  FillHandle.TEMPLATE = \"<div class=\\\"ag-fill-handle\\\"></div>\";\n  __decorate$1o([agGridCommunity.Autowired('valueService')], FillHandle.prototype, \"valueService\", void 0);\n  __decorate$1o([agGridCommunity.Autowired('gridOptionsWrapper')], FillHandle.prototype, \"gridOptionsWrapper\", void 0);\n  return FillHandle;\n}(AbstractSelectionHandle);\nvar __extends$2t = undefined && undefined.__extends || function () {\n  var _extendStatics158 = function extendStatics(d, b) {\n    _extendStatics158 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics158(d, b);\n  };\n  return function (d, b) {\n    _extendStatics158(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign$i = undefined && undefined.__assign || function () {\n  __assign$i = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$i.apply(this, arguments);\n};\nvar RangeHandle$1 = /** @class */function (_super) {\n  __extends$2t(RangeHandle, _super);\n  function RangeHandle() {\n    var _this = _super.call(this, RangeHandle.TEMPLATE) || this;\n    _this.type = agGridCommunity.SelectionHandleType.RANGE;\n    _this.rangeFixed = false;\n    return _this;\n  }\n  RangeHandle.prototype.onDrag = function (e) {\n    var lastCellHovered = this.getLastCellHovered();\n    if (!lastCellHovered) {\n      return;\n    }\n    var cellRanges = this.rangeController.getCellRanges();\n    var lastRange = agGridCommunity._.last(cellRanges);\n    if (!this.rangeFixed) {\n      this.fixRangeStartEnd(lastRange);\n      this.rangeFixed = true;\n    }\n    this.endPosition = {\n      rowIndex: lastCellHovered.rowIndex,\n      rowPinned: lastCellHovered.rowPinned,\n      column: lastCellHovered.column\n    };\n    // check if the cell ranges are for a chart\n    if (cellRanges.length === 2 && cellRanges[0].type === agGridCommunity.CellRangeType.DIMENSION && lastRange.type === agGridCommunity.CellRangeType.VALUE) {\n      var rowChanged = !this.rowPositionUtils.sameRow(this.endPosition, this.rangeController.getRangeEndRow(lastRange));\n      if (rowChanged) {\n        // ensure the dimension range is kept in sync with the value range (which has the handle)\n        this.rangeController.updateRangeEnd(cellRanges[0], __assign$i(__assign$i({}, this.endPosition), {\n          column: cellRanges[0].columns[0]\n        }), true);\n      }\n    }\n    this.rangeController.extendLatestRangeToCell(this.endPosition);\n  };\n  RangeHandle.prototype.onDragEnd = function (e) {\n    var cellRange = agGridCommunity._.last(this.rangeController.getCellRanges());\n    this.fixRangeStartEnd(cellRange);\n    this.rangeFixed = false;\n  };\n  RangeHandle.prototype.fixRangeStartEnd = function (cellRange) {\n    var startRow = this.rangeController.getRangeStartRow(cellRange);\n    var endRow = this.rangeController.getRangeEndRow(cellRange);\n    var column = cellRange.columns[0];\n    cellRange.startRow = startRow;\n    cellRange.endRow = endRow;\n    cellRange.startColumn = column;\n  };\n  RangeHandle.TEMPLATE = \"<div class=\\\"ag-range-handle\\\"></div>\";\n  return RangeHandle;\n}(AbstractSelectionHandle);\nvar __extends$2u = undefined && undefined.__extends || function () {\n  var _extendStatics159 = function extendStatics(d, b) {\n    _extendStatics159 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics159(d, b);\n  };\n  return function (d, b) {\n    _extendStatics159(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1p = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar SelectionHandleFactory = /** @class */function (_super) {\n  __extends$2u(SelectionHandleFactory, _super);\n  function SelectionHandleFactory() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  SelectionHandleFactory.prototype.createSelectionHandle = function (type) {\n    return this.createBean(type === agGridCommunity.SelectionHandleType.RANGE ? new RangeHandle$1() : new FillHandle());\n  };\n  SelectionHandleFactory = __decorate$1p([agGridCommunity.Bean('selectionHandleFactory')], SelectionHandleFactory);\n  return SelectionHandleFactory;\n}(agGridCommunity.BeanStub);\nvar RangeSelectionModule = {\n  moduleName: agGridCommunity.ModuleNames.RangeSelectionModule,\n  beans: [RangeController, SelectionHandleFactory],\n  agStackComponents: [{\n    componentName: 'AgFillHandle',\n    componentClass: FillHandle\n  }, {\n    componentName: 'AgRangeHandle',\n    componentClass: RangeHandle$1\n  }],\n  dependantModules: [EnterpriseCoreModule]\n};\nvar GridChartsModule = {\n  moduleName: agGridCommunity.ModuleNames.GridChartsModule,\n  beans: [ChartService, ChartTranslator],\n  dependantModules: [RangeSelectionModule, EnterpriseCoreModule]\n};\nvar __extends$2v = undefined && undefined.__extends || function () {\n  var _extendStatics160 = function extendStatics(d, b) {\n    _extendStatics160 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics160(d, b);\n  };\n  return function (d, b) {\n    _extendStatics160(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1q = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar DetailCellRenderer = /** @class */function (_super) {\n  __extends$2v(DetailCellRenderer, _super);\n  function DetailCellRenderer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.needRefresh = false;\n    _this.loadRowDataVersion = 0;\n    return _this;\n  }\n  DetailCellRenderer.prototype.init = function (params) {\n    var _this = this;\n    // if embedFullWidthRows=true, then this component could be in a pinned section. we should not show detail\n    // component if in the pinned section, on in the main body section.\n    if (params.pinned) {\n      this.setTemplate('<div class=\"ag-details-row\"></div>');\n      return;\n    }\n    this.params = params;\n    var autoHeight = this.gridOptionsWrapper.isDetailRowAutoHeight();\n    this.checkForDeprecations();\n    this.ensureValidRefreshStrategy();\n    this.selectAndSetTemplate(autoHeight);\n    if (agGridCommunity._.exists(this.eDetailGrid)) {\n      this.addThemeToDetailGrid();\n      this.createDetailsGrid(autoHeight);\n      this.registerDetailWithMaster();\n      this.loadRowData();\n      window.setTimeout(function () {\n        // ensure detail grid api still exists (grid may be destroyed when async call tries to set data)\n        if (_this.detailGridOptions.api) {\n          _this.detailGridOptions.api.doLayout();\n        }\n      }, 0);\n    } else {\n      console.warn('ag-Grid: reference to eDetailGrid was missing from the details template. ' + 'Please add ref=\"eDetailGrid\" to the template.');\n    }\n    this.addManagedListener(params.node.parent, agGridCommunity.RowNode.EVENT_DATA_CHANGED, function () {\n      _this.needRefresh = true;\n    });\n    // this.setupAutoGridHeight();\n  };\n\n  DetailCellRenderer.prototype.refresh = function () {\n    var GET_GRID_TO_REFRESH = false;\n    var GET_GRID_TO_DO_NOTHING = true;\n    // if we return true, it means we pretend to the grid\n    // that we have refreshed, so refresh will never happen.\n    var doNotRefresh = !this.needRefresh || this.params.refreshStrategy === 'nothing';\n    if (doNotRefresh) {\n      // we do nothing in this refresh method, and also tell the grid to do nothing\n      return GET_GRID_TO_DO_NOTHING;\n    }\n    // reset flag, so don't refresh again until more data changes.\n    this.needRefresh = false;\n    if (this.params.refreshStrategy === 'everything') {\n      // we want full refresh, so tell the grid to destroy and recreate this cell\n      return GET_GRID_TO_REFRESH;\n    } else {\n      // do the refresh here, and tell the grid to do nothing\n      this.loadRowData();\n      return GET_GRID_TO_DO_NOTHING;\n    }\n  };\n  // this is a user component, and IComponent has \"public destroy()\" as part of the interface.\n  // so we need to override destroy() just to make the method public.\n  DetailCellRenderer.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n  };\n  DetailCellRenderer.prototype.checkForDeprecations = function () {\n    if (this.params.suppressRefresh) {\n      console.warn(\"ag-Grid: as of v23.2.0, cellRendererParams.suppressRefresh for Detail Cell Renderer is no \" + \"longer used. Please set cellRendererParams.refreshStrategy = 'nothing' instead.\");\n      this.params.refreshStrategy = 'nothing';\n    }\n  };\n  DetailCellRenderer.prototype.ensureValidRefreshStrategy = function () {\n    switch (this.params.refreshStrategy) {\n      case 'rows':\n        return;\n      case 'nothing':\n        return;\n      case 'everything':\n        return;\n    }\n    // check for incorrectly supplied refresh strategy\n    if (this.params.refreshStrategy) {\n      console.warn(\"ag-Grid: invalid cellRendererParams.refreshStrategy = '\" + this.params.refreshStrategy + \"' supplied, defaulting to refreshStrategy = 'rows'.\");\n    }\n    // use default strategy\n    this.params.refreshStrategy = 'rows';\n  };\n  DetailCellRenderer.prototype.addThemeToDetailGrid = function () {\n    // this is needed by environment service of the child grid, the class needs to be on\n    // the grid div itself - the browser's CSS on the other hand just inherits from the parent grid theme.\n    var theme = this.environment.getTheme().theme;\n    if (theme) {\n      agGridCommunity._.addCssClass(this.eDetailGrid, theme);\n    }\n  };\n  DetailCellRenderer.prototype.registerDetailWithMaster = function () {\n    var rowId = this.params.node.id;\n    var masterGridApi = this.params.api;\n    var gridInfo = {\n      id: rowId,\n      api: this.detailGridOptions.api,\n      columnApi: this.detailGridOptions.columnApi\n    };\n    var rowNode = this.params.node;\n    // register with api\n    masterGridApi.addDetailGridInfo(rowId, gridInfo);\n    // register with node\n    rowNode.detailGridInfo = gridInfo;\n    this.addDestroyFunc(function () {\n      masterGridApi.removeDetailGridInfo(rowId); // unregister from api\n      rowNode.detailGridInfo = null; // unregister from node\n    });\n  };\n\n  DetailCellRenderer.prototype.selectAndSetTemplate = function (autoHeight) {\n    var _this = this;\n    var setDefaultTemplate = function setDefaultTemplate() {\n      _this.setTemplate(DetailCellRenderer.TEMPLATE);\n      _this.addCssClass(autoHeight ? 'ag-details-row-auto-height' : 'ag-details-row-fixed-height');\n      agGridCommunity._.addCssClass(_this.eDetailGrid, autoHeight ? 'ag-details-grid-auto-height' : 'ag-details-grid-fixed-height');\n    };\n    if (agGridCommunity._.missing(this.params.template)) {\n      // use default template\n      setDefaultTemplate();\n    } else {\n      // use user provided template\n      if (typeof this.params.template === 'string') {\n        this.setTemplate(this.params.template);\n      } else if (typeof this.params.template === 'function') {\n        var templateFunc = this.params.template;\n        var template = templateFunc(this.params);\n        this.setTemplate(template);\n      } else {\n        console.warn('ag-Grid: detailCellRendererParams.template should be function or string');\n        setDefaultTemplate();\n      }\n    }\n  };\n  DetailCellRenderer.prototype.createDetailsGrid = function (autoHeight) {\n    // we clone the detail grid options, as otherwise it would be shared\n    // across many instances, and that would be a problem because we set\n    // api and columnApi into gridOptions\n    var _this = this;\n    var gridOptions = this.params.detailGridOptions;\n    if (agGridCommunity._.missing(gridOptions)) {\n      console.warn('ag-Grid: could not find detail grid options for master detail, ' + 'please set gridOptions.detailCellRendererParams.detailGridOptions');\n    }\n    // IMPORTANT - gridOptions must be cloned\n    this.detailGridOptions = agGridCommunity._.cloneObject(gridOptions);\n    if (autoHeight) {\n      this.detailGridOptions.domLayout = 'autoHeight';\n    }\n    // tslint:disable-next-line\n    new agGridCommunity.Grid(this.eDetailGrid, this.detailGridOptions, {\n      $scope: this.params.$scope,\n      $compile: this.params.$compile,\n      providedBeanInstances: {\n        // a temporary fix for AG-1574\n        // AG-1715 raised to do a wider ranging refactor to improve this\n        agGridReact: this.params.agGridReact,\n        // AG-1716 - directly related to AG-1574 and AG-1715\n        frameworkComponentWrapper: this.params.frameworkComponentWrapper\n      }\n    });\n    this.addDestroyFunc(function () {\n      if (_this.detailGridOptions.api) {\n        _this.detailGridOptions.api.destroy();\n      }\n    });\n  };\n  DetailCellRenderer.prototype.loadRowData = function () {\n    var _this = this;\n    // in case a refresh happens before the last refresh completes (as we depend on async\n    // application logic) we keep track on what the latest call was.\n    this.loadRowDataVersion++;\n    var versionThisCall = this.loadRowDataVersion;\n    var userFunc = this.params.getDetailRowData;\n    if (!userFunc) {\n      console.warn('ag-Grid: could not find getDetailRowData for master / detail, ' + 'please set gridOptions.detailCellRendererParams.getDetailRowData');\n      return;\n    }\n    var successCallback = function successCallback(rowData) {\n      var mostRecentCall = _this.loadRowDataVersion === versionThisCall;\n      if (mostRecentCall) {\n        _this.setRowData(rowData);\n      }\n    };\n    var funcParams = {\n      node: this.params.node,\n      // we take data from node, rather than params.data\n      // as the data could have been updated with new instance\n      data: this.params.node.data,\n      successCallback: successCallback,\n      context: this.gridOptionsWrapper.getContext()\n    };\n    userFunc(funcParams);\n  };\n  DetailCellRenderer.prototype.setRowData = function (rowData) {\n    // ensure detail grid api still exists (grid may be destroyed when async call tries to set data)\n    if (this.detailGridOptions.api) {\n      this.detailGridOptions.api.setRowData(rowData);\n    }\n  };\n  DetailCellRenderer.TEMPLATE = \"<div class=\\\"ag-details-row\\\">\\n            <div ref=\\\"eDetailGrid\\\" class=\\\"ag-details-grid\\\"/>\\n        </div>\";\n  __decorate$1q([agGridCommunity.Autowired('environment')], DetailCellRenderer.prototype, \"environment\", void 0);\n  __decorate$1q([agGridCommunity.RefSelector('eDetailGrid')], DetailCellRenderer.prototype, \"eDetailGrid\", void 0);\n  __decorate$1q([agGridCommunity.Autowired('resizeObserverService')], DetailCellRenderer.prototype, \"resizeObserverService\", void 0);\n  __decorate$1q([agGridCommunity.Autowired('gridOptionsWrapper')], DetailCellRenderer.prototype, \"gridOptionsWrapper\", void 0);\n  return DetailCellRenderer;\n}(agGridCommunity.Component);\nvar MasterDetailModule = {\n  moduleName: agGridCommunity.ModuleNames.MasterDetailModule,\n  beans: [],\n  userComponents: [{\n    componentName: 'agDetailCellRenderer',\n    componentClass: DetailCellRenderer\n  }],\n  dependantModules: [EnterpriseCoreModule]\n};\nvar __extends$2w = undefined && undefined.__extends || function () {\n  var _extendStatics161 = function extendStatics(d, b) {\n    _extendStatics161 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics161(d, b);\n  };\n  return function (d, b) {\n    _extendStatics161(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MenuPanel = /** @class */function (_super) {\n  __extends$2w(MenuPanel, _super);\n  function MenuPanel(wrappedComponent) {\n    var _this = _super.call(this, undefined, true) || this;\n    _this.wrappedComponent = wrappedComponent;\n    _this.setTemplateFromElement(wrappedComponent.getGui());\n    return _this;\n  }\n  MenuPanel.prototype.handleKeyDown = function (e) {\n    switch (e.keyCode) {\n      case agGridCommunity.KeyCode.ESCAPE:\n        {\n          this.closePanel();\n          break;\n        }\n    }\n  };\n  MenuPanel.prototype.onTabKeyDown = function (e) {\n    _super.prototype.onTabKeyDown.call(this, e);\n    if (e.defaultPrevented) {\n      return;\n    }\n    this.closePanel();\n    e.preventDefault();\n  };\n  MenuPanel.prototype.closePanel = function () {\n    var menuItem = this.parentComponent;\n    menuItem.closeSubMenu();\n    setTimeout(function () {\n      return menuItem.getGui().focus();\n    }, 0);\n  };\n  return MenuPanel;\n}(agGridCommunity.ManagedFocusComponent);\nvar __extends$2x = undefined && undefined.__extends || function () {\n  var _extendStatics162 = function extendStatics(d, b) {\n    _extendStatics162 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics162(d, b);\n  };\n  return function (d, b) {\n    _extendStatics162(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1r = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MenuItemComponent = /** @class */function (_super) {\n  __extends$2x(MenuItemComponent, _super);\n  function MenuItemComponent(params) {\n    var _this = _super.call(this) || this;\n    _this.params = params;\n    _this.isActive = false;\n    _this.subMenuIsOpen = false;\n    _this.setTemplate( /* html */\"<div class=\\\"\" + _this.getClassName() + \"\\\" tabindex=\\\"-1\\\" role=\\\"treeitem\\\"></div>\");\n    return _this;\n  }\n  MenuItemComponent.prototype.init = function () {\n    var _this = this;\n    this.addIcon();\n    this.addName();\n    this.addShortcut();\n    this.addSubMenu();\n    this.addTooltip();\n    var eGui = this.getGui();\n    if (this.params.disabled) {\n      this.addCssClass(this.getClassName('disabled'));\n      agGridCommunity._.setAriaDisabled(eGui, true);\n    } else {\n      this.addGuiEventListener('click', function (e) {\n        return _this.onItemSelected(e);\n      });\n      this.addGuiEventListener('keydown', function (e) {\n        if (e.keyCode === agGridCommunity.KeyCode.ENTER || e.keyCode === agGridCommunity.KeyCode.SPACE) {\n          _this.onItemSelected(e);\n        }\n      });\n      this.addGuiEventListener('mouseenter', function () {\n        return _this.onMouseEnter();\n      });\n      this.addGuiEventListener('mouseleave', function () {\n        return _this.onMouseLeave();\n      });\n    }\n    if (this.params.cssClasses) {\n      this.params.cssClasses.forEach(function (it) {\n        return agGridCommunity._.addCssClass(eGui, it);\n      });\n    }\n  };\n  MenuItemComponent.prototype.isDisabled = function () {\n    return !!this.params.disabled;\n  };\n  MenuItemComponent.prototype.openSubMenu = function (activateFirstItem) {\n    var _this = this;\n    if (activateFirstItem === void 0) {\n      activateFirstItem = false;\n    }\n    this.closeSubMenu();\n    if (!this.params.subMenu) {\n      return;\n    }\n    var ePopup = agGridCommunity._.loadTemplate( /* html */\"<div class=\\\"ag-menu\\\" role=\\\"presentation\\\"></div>\");\n    var destroySubMenu;\n    if (this.params.subMenu instanceof Array) {\n      var currentLevel = agGridCommunity._.getAriaLevel(this.getGui());\n      var nextLevel = isNaN(currentLevel) ? 1 : currentLevel + 1;\n      var childMenu_1 = this.createBean(new MenuList(nextLevel));\n      childMenu_1.setParentComponent(this);\n      childMenu_1.addMenuItems(this.params.subMenu);\n      ePopup.appendChild(childMenu_1.getGui());\n      // bubble menu item selected events\n      this.addManagedListener(childMenu_1, MenuItemComponent.EVENT_MENU_ITEM_SELECTED, function (e) {\n        return _this.dispatchEvent(e);\n      });\n      childMenu_1.addGuiEventListener('mouseenter', function () {\n        return _this.cancelDeactivate();\n      });\n      destroySubMenu = function destroySubMenu() {\n        return _this.destroyBean(childMenu_1);\n      };\n      if (activateFirstItem) {\n        setTimeout(function () {\n          return childMenu_1.activateFirstItem();\n        }, 0);\n      }\n    } else {\n      var subMenu_1 = this.params.subMenu;\n      var menuPanel = this.createBean(new MenuPanel(subMenu_1));\n      menuPanel.setParentComponent(this);\n      var subMenuGui_1 = menuPanel.getGui();\n      var mouseEvent_1 = 'mouseenter';\n      var mouseEnterListener_1 = function mouseEnterListener_1() {\n        return _this.cancelDeactivate();\n      };\n      subMenuGui_1.addEventListener(mouseEvent_1, mouseEnterListener_1);\n      destroySubMenu = function destroySubMenu() {\n        return subMenuGui_1.removeEventListener(mouseEvent_1, mouseEnterListener_1);\n      };\n      ePopup.appendChild(subMenuGui_1);\n      if (subMenu_1.afterGuiAttached) {\n        setTimeout(function () {\n          return subMenu_1.afterGuiAttached();\n        }, 0);\n      }\n    }\n    var eGui = this.getGui();\n    var positionCallback = this.popupService.positionPopupForMenu.bind(this.popupService, {\n      eventSource: eGui,\n      ePopup: ePopup\n    });\n    var closePopup = this.popupService.addPopup({\n      modal: true,\n      eChild: ePopup,\n      positionCallback: positionCallback,\n      anchorToElement: eGui\n    });\n    this.subMenuIsOpen = true;\n    agGridCommunity._.setAriaExpanded(eGui, true);\n    this.hideSubMenu = function () {\n      closePopup();\n      _this.subMenuIsOpen = false;\n      agGridCommunity._.setAriaExpanded(eGui, false);\n      destroySubMenu();\n    };\n  };\n  MenuItemComponent.prototype.closeSubMenu = function () {\n    if (!this.hideSubMenu) {\n      return;\n    }\n    this.hideSubMenu();\n    this.hideSubMenu = null;\n    agGridCommunity._.setAriaExpanded(this.getGui(), false);\n  };\n  MenuItemComponent.prototype.isSubMenuOpen = function () {\n    return this.subMenuIsOpen;\n  };\n  MenuItemComponent.prototype.activate = function (openSubMenu) {\n    var _this = this;\n    this.cancelActivate();\n    if (this.params.disabled) {\n      return;\n    }\n    this.isActive = true;\n    this.addCssClass(this.getClassName('active'));\n    this.getGui().focus();\n    if (openSubMenu && this.params.subMenu) {\n      window.setTimeout(function () {\n        if (_this.isAlive() && _this.isActive) {\n          _this.openSubMenu();\n        }\n      }, 300);\n    }\n    this.onItemActivated();\n  };\n  MenuItemComponent.prototype.deactivate = function () {\n    this.cancelDeactivate();\n    this.removeCssClass(this.getClassName('active'));\n    this.isActive = false;\n    if (this.subMenuIsOpen) {\n      this.hideSubMenu();\n    }\n  };\n  MenuItemComponent.prototype.addIcon = function () {\n    if (!this.params.checked && !this.params.icon && this.params.isCompact) {\n      return;\n    }\n    var icon = agGridCommunity._.loadTemplate( /* html */\"<span ref=\\\"eIcon\\\" class=\\\"\" + this.getClassName('part') + \" \" + this.getClassName('icon') + \"\\\" role=\\\"presentation\\\"></span>\");\n    if (this.params.checked) {\n      icon.appendChild(agGridCommunity._.createIconNoSpan('check', this.gridOptionsWrapper));\n    } else if (this.params.icon) {\n      if (agGridCommunity._.isNodeOrElement(this.params.icon)) {\n        icon.appendChild(this.params.icon);\n      } else if (typeof this.params.icon === 'string') {\n        icon.innerHTML = this.params.icon;\n      } else {\n        console.warn('ag-Grid: menu item icon must be DOM node or string');\n      }\n    }\n    this.getGui().appendChild(icon);\n  };\n  MenuItemComponent.prototype.addName = function () {\n    if (!this.params.name && this.params.isCompact) {\n      return;\n    }\n    var name = agGridCommunity._.loadTemplate( /* html */\"<span ref=\\\"eName\\\" class=\\\"\" + this.getClassName('part') + \" \" + this.getClassName('text') + \"\\\">\" + (this.params.name || '') + \"</span>\");\n    this.getGui().appendChild(name);\n  };\n  MenuItemComponent.prototype.addTooltip = function () {\n    if (!this.params.tooltip) {\n      return;\n    }\n    this.tooltip = this.params.tooltip;\n    if (this.gridOptionsWrapper.isEnableBrowserTooltips()) {\n      this.getGui().setAttribute('title', this.tooltip);\n    } else {\n      this.createManagedBean(new agGridCommunity.TooltipFeature(this));\n    }\n  };\n  MenuItemComponent.prototype.getTooltipParams = function () {\n    return {\n      location: 'menu',\n      value: this.tooltip\n    };\n  };\n  MenuItemComponent.prototype.addShortcut = function () {\n    if (!this.params.shortcut && this.params.isCompact) {\n      return;\n    }\n    var shortcut = agGridCommunity._.loadTemplate( /* html */\"<span ref=\\\"eShortcut\\\" class=\\\"\" + this.getClassName('part') + \" \" + this.getClassName('shortcut') + \"\\\">\" + (this.params.shortcut || '') + \"</span>\");\n    this.getGui().appendChild(shortcut);\n  };\n  MenuItemComponent.prototype.addSubMenu = function () {\n    if (!this.params.subMenu && this.params.isCompact) {\n      return;\n    }\n    var pointer = agGridCommunity._.loadTemplate( /* html */\"<span ref=\\\"ePopupPointer\\\" class=\\\"\" + this.getClassName('part') + \" \" + this.getClassName('popup-pointer') + \"\\\"></span>\");\n    var eGui = this.getGui();\n    if (this.params.subMenu) {\n      var iconName = this.gridOptionsWrapper.isEnableRtl() ? 'smallLeft' : 'smallRight';\n      agGridCommunity._.setAriaExpanded(eGui, false);\n      pointer.appendChild(agGridCommunity._.createIconNoSpan(iconName, this.gridOptionsWrapper));\n    }\n    eGui.appendChild(pointer);\n  };\n  MenuItemComponent.prototype.onItemSelected = function (event) {\n    if (this.params.action) {\n      this.params.action();\n    } else {\n      this.openSubMenu(event && event.type === 'keydown');\n    }\n    if (this.params.subMenu && !this.params.action) {\n      return;\n    }\n    var e = {\n      type: MenuItemComponent.EVENT_MENU_ITEM_SELECTED,\n      action: this.params.action,\n      checked: this.params.checked,\n      cssClasses: this.params.cssClasses,\n      disabled: this.params.disabled,\n      icon: this.params.icon,\n      name: this.params.name,\n      shortcut: this.params.shortcut,\n      subMenu: this.params.subMenu,\n      tooltip: this.params.tooltip,\n      event: event\n    };\n    this.dispatchEvent(e);\n  };\n  MenuItemComponent.prototype.onItemActivated = function () {\n    var event = {\n      type: MenuItemComponent.EVENT_MENU_ITEM_ACTIVATED,\n      menuItem: this\n    };\n    this.dispatchEvent(event);\n  };\n  MenuItemComponent.prototype.cancelActivate = function () {\n    if (this.activateTimeoutId) {\n      window.clearTimeout(this.activateTimeoutId);\n      this.activateTimeoutId = 0;\n    }\n  };\n  MenuItemComponent.prototype.cancelDeactivate = function () {\n    if (this.deactivateTimeoutId) {\n      window.clearTimeout(this.deactivateTimeoutId);\n      this.deactivateTimeoutId = 0;\n    }\n  };\n  MenuItemComponent.prototype.onMouseEnter = function () {\n    var _this = this;\n    this.cancelDeactivate();\n    if (this.params.isAnotherSubMenuOpen()) {\n      // wait to see if the user enters the open sub-menu\n      this.activateTimeoutId = window.setTimeout(function () {\n        return _this.activate(true);\n      }, MenuItemComponent.ACTIVATION_DELAY);\n    } else {\n      // activate immediately\n      this.activate(true);\n    }\n  };\n  MenuItemComponent.prototype.onMouseLeave = function () {\n    var _this = this;\n    this.cancelActivate();\n    if (this.isSubMenuOpen()) {\n      // wait to see if the user enters the sub-menu\n      this.deactivateTimeoutId = window.setTimeout(function () {\n        return _this.deactivate();\n      }, MenuItemComponent.ACTIVATION_DELAY);\n    } else {\n      // de-activate immediately\n      this.deactivate();\n    }\n  };\n  MenuItemComponent.prototype.getClassName = function (suffix) {\n    var prefix = this.params.isCompact ? 'ag-compact-menu-option' : 'ag-menu-option';\n    return suffix ? prefix + \"-\" + suffix : prefix;\n  };\n  MenuItemComponent.EVENT_MENU_ITEM_SELECTED = 'menuItemSelected';\n  MenuItemComponent.EVENT_MENU_ITEM_ACTIVATED = 'menuItemActivated';\n  MenuItemComponent.ACTIVATION_DELAY = 80;\n  __decorate$1r([agGridCommunity.Autowired('gridOptionsWrapper')], MenuItemComponent.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1r([agGridCommunity.Autowired('popupService')], MenuItemComponent.prototype, \"popupService\", void 0);\n  __decorate$1r([agGridCommunity.PostConstruct], MenuItemComponent.prototype, \"init\", null);\n  return MenuItemComponent;\n}(agGridCommunity.Component);\nvar __extends$2y = undefined && undefined.__extends || function () {\n  var _extendStatics163 = function extendStatics(d, b) {\n    _extendStatics163 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics163(d, b);\n  };\n  return function (d, b) {\n    _extendStatics163(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign$j = undefined && undefined.__assign || function () {\n  __assign$j = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$j.apply(this, arguments);\n};\nvar __decorate$1s = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MenuList = /** @class */function (_super) {\n  __extends$2y(MenuList, _super);\n  function MenuList(level) {\n    if (level === void 0) {\n      level = 1;\n    }\n    var _this = _super.call(this, /* html */\"<div class=\\\"ag-menu-list\\\" role=\\\"tree\\\"></div>\", true) || this;\n    _this.level = level;\n    _this.menuItems = [];\n    return _this;\n  }\n  MenuList.prototype.onTabKeyDown = function (e) {\n    var parent = this.getParentComponent();\n    var isManaged = parent && parent instanceof agGridCommunity.ManagedFocusComponent;\n    if (!isManaged) {\n      e.preventDefault();\n    }\n    if (e.shiftKey) {\n      this.closeIfIsChild(e);\n    }\n  };\n  MenuList.prototype.handleKeyDown = function (e) {\n    switch (e.keyCode) {\n      case agGridCommunity.KeyCode.UP:\n      case agGridCommunity.KeyCode.RIGHT:\n      case agGridCommunity.KeyCode.DOWN:\n      case agGridCommunity.KeyCode.LEFT:\n        e.preventDefault();\n        this.handleNavKey(e.keyCode);\n        break;\n      case agGridCommunity.KeyCode.ESCAPE:\n        var topMenu = this.findTopMenu();\n        if (topMenu) {\n          this.focusController.focusInto(topMenu.getGui());\n        }\n        break;\n    }\n  };\n  MenuList.prototype.clearActiveItem = function () {\n    if (this.activeMenuItem) {\n      this.activeMenuItem.deactivate();\n      this.activeMenuItem = null;\n    }\n  };\n  MenuList.prototype.addMenuItems = function (menuItems) {\n    var _this = this;\n    if (menuItems == null) {\n      return;\n    }\n    menuItems.forEach(function (menuItemOrString) {\n      if (menuItemOrString === 'separator') {\n        _this.addSeparator();\n      } else if (typeof menuItemOrString === 'string') {\n        console.warn(\"ag-Grid: unrecognised menu item \" + menuItemOrString);\n      } else {\n        _this.addItem(menuItemOrString);\n      }\n    });\n  };\n  MenuList.prototype.addItem = function (menuItemDef) {\n    var _this = this;\n    var menuItem = this.createManagedBean(new MenuItemComponent(__assign$j(__assign$j({}, menuItemDef), {\n      isAnotherSubMenuOpen: function isAnotherSubMenuOpen() {\n        return agGridCommunity._.some(_this.menuItems, function (m) {\n          return m.isSubMenuOpen();\n        });\n      }\n    })));\n    menuItem.setParentComponent(this);\n    agGridCommunity._.setAriaLevel(menuItem.getGui(), this.level);\n    this.menuItems.push(menuItem);\n    this.appendChild(menuItem.getGui());\n    this.addManagedListener(menuItem, MenuItemComponent.EVENT_MENU_ITEM_SELECTED, function (event) {\n      _this.dispatchEvent(event);\n    });\n    this.addManagedListener(menuItem, MenuItemComponent.EVENT_MENU_ITEM_ACTIVATED, function (event) {\n      if (_this.activeMenuItem && _this.activeMenuItem !== event.menuItem) {\n        _this.activeMenuItem.deactivate();\n      }\n      _this.activeMenuItem = event.menuItem;\n    });\n  };\n  MenuList.prototype.activateFirstItem = function () {\n    var item = this.menuItems.filter(function (item) {\n      return !item.isDisabled();\n    })[0];\n    if (!item) {\n      return;\n    }\n    item.activate();\n  };\n  MenuList.prototype.addSeparator = function () {\n    var separatorHtml = /* html */\"\\n            <div class=\\\"ag-menu-separator\\\" aria-hidden=\\\"true\\\">\\n                <div class=\\\"ag-menu-separator-part\\\"></div>\\n                <div class=\\\"ag-menu-separator-part\\\"></div>\\n                <div class=\\\"ag-menu-separator-part\\\"></div>\\n                <div class=\\\"ag-menu-separator-part\\\"></div>\\n            </div>\";\n    this.appendChild(agGridCommunity._.loadTemplate(separatorHtml));\n  };\n  MenuList.prototype.findTopMenu = function () {\n    var parent = this.getParentComponent();\n    if (!parent && this instanceof MenuList) {\n      return this;\n    }\n    while (true) {\n      var nextParent = parent && parent.getParentComponent && parent.getParentComponent();\n      if (!nextParent || !(nextParent instanceof MenuList || nextParent instanceof MenuItemComponent)) {\n        break;\n      }\n      parent = nextParent;\n    }\n    return parent instanceof MenuList ? parent : undefined;\n  };\n  MenuList.prototype.handleNavKey = function (key) {\n    switch (key) {\n      case agGridCommunity.KeyCode.UP:\n      case agGridCommunity.KeyCode.DOWN:\n        var nextItem = this.findNextItem(key === agGridCommunity.KeyCode.UP);\n        if (nextItem && nextItem !== this.activeMenuItem) {\n          nextItem.activate();\n        }\n        return;\n    }\n    var left = this.gridOptionsWrapper.isEnableRtl() ? agGridCommunity.KeyCode.RIGHT : agGridCommunity.KeyCode.LEFT;\n    if (key === left) {\n      this.closeIfIsChild();\n    } else {\n      this.openChild();\n    }\n  };\n  MenuList.prototype.closeIfIsChild = function (e) {\n    var parentItem = this.getParentComponent();\n    if (parentItem && parentItem instanceof MenuItemComponent) {\n      if (e) {\n        e.preventDefault();\n      }\n      parentItem.closeSubMenu();\n      parentItem.getGui().focus();\n    }\n  };\n  MenuList.prototype.openChild = function () {\n    if (this.activeMenuItem) {\n      this.activeMenuItem.openSubMenu(true);\n    }\n  };\n  MenuList.prototype.findNextItem = function (up) {\n    var items = this.menuItems.filter(function (item) {\n      return !item.isDisabled();\n    });\n    if (!items.length) {\n      return;\n    }\n    if (!this.activeMenuItem) {\n      return up ? agGridCommunity._.last(items) : items[0];\n    }\n    if (up) {\n      items.reverse();\n    }\n    var nextItem;\n    var foundCurrent = false;\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n      if (!foundCurrent) {\n        if (item === this.activeMenuItem) {\n          foundCurrent = true;\n        }\n        continue;\n      }\n      nextItem = item;\n      break;\n    }\n    return nextItem || this.activeMenuItem;\n  };\n  MenuList.prototype.destroy = function () {\n    this.clearActiveItem();\n    _super.prototype.destroy.call(this);\n  };\n  __decorate$1s([agGridCommunity.Autowired('gridOptionsWrapper')], MenuList.prototype, \"gridOptionsWrapper\", void 0);\n  return MenuList;\n}(agGridCommunity.ManagedFocusComponent);\nvar __extends$2z = undefined && undefined.__extends || function () {\n  var _extendStatics164 = function extendStatics(d, b) {\n    _extendStatics164 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics164(d, b);\n  };\n  return function (d, b) {\n    _extendStatics164(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1t = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar EnterpriseMenuFactory = /** @class */function (_super) {\n  __extends$2z(EnterpriseMenuFactory, _super);\n  function EnterpriseMenuFactory() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  EnterpriseMenuFactory.prototype.registerGridComp = function (gridPanel) {\n    this.gridPanel = gridPanel;\n  };\n  EnterpriseMenuFactory.prototype.hideActiveMenu = function () {\n    this.destroyBean(this.activeMenu);\n  };\n  EnterpriseMenuFactory.prototype.showMenuAfterMouseEvent = function (column, mouseEvent, defaultTab) {\n    var _this = this;\n    this.showMenu(column, function (menu) {\n      var ePopup = menu.getGui();\n      _this.popupService.positionPopupUnderMouseEvent({\n        type: 'columnMenu',\n        column: column,\n        mouseEvent: mouseEvent,\n        ePopup: ePopup\n      });\n      if (defaultTab) {\n        menu.showTab(defaultTab);\n      }\n    }, defaultTab, undefined, mouseEvent.target);\n  };\n  EnterpriseMenuFactory.prototype.showMenuAfterButtonClick = function (column, eventSource, defaultTab, restrictToTabs) {\n    var _this = this;\n    var multiplier = -1;\n    var alignSide = 'left';\n    if (this.gridOptionsWrapper.isEnableRtl()) {\n      multiplier = 1;\n      alignSide = 'right';\n    }\n    this.showMenu(column, function (menu) {\n      var minDims = menu.getMinDimensions();\n      var minWidth = minDims.width,\n        minHeight = minDims.height;\n      var ePopup = menu.getGui();\n      _this.popupService.positionPopupUnderComponent({\n        type: 'columnMenu',\n        column: column,\n        eventSource: eventSource,\n        ePopup: ePopup,\n        minWidth: minWidth,\n        minHeight: minHeight,\n        alignSide: alignSide,\n        nudgeX: 9 * multiplier,\n        nudgeY: -23,\n        keepWithinBounds: true\n      });\n      if (defaultTab) {\n        menu.showTab(defaultTab);\n      }\n    }, defaultTab, restrictToTabs, eventSource);\n  };\n  EnterpriseMenuFactory.prototype.showMenu = function (column, _positionCallback, defaultTab, restrictToTabs, eventSource) {\n    var _this = this;\n    var menu = this.createBean(new EnterpriseMenu(column, this.lastSelectedTab, restrictToTabs));\n    var eMenuGui = menu.getGui();\n    // need to show filter before positioning, as only after filter\n    // is visible can we find out what the width of it is\n    var hidePopup = this.popupService.addPopup({\n      modal: true,\n      eChild: eMenuGui,\n      closeOnEsc: true,\n      closedCallback: function closedCallback(e) {\n        _this.destroyBean(menu);\n        column.setMenuVisible(false, 'contextMenu');\n        var isKeyboardEvent = e instanceof KeyboardEvent;\n        if (isKeyboardEvent && eventSource && agGridCommunity._.isVisible(eventSource)) {\n          var focusableEl = _this.focusController.findTabbableParent(eventSource);\n          if (focusableEl) {\n            focusableEl.focus();\n          }\n        }\n      },\n      positionCallback: function positionCallback() {\n        _positionCallback(menu);\n      },\n      anchorToElement: this.gridPanel.getGui()\n    });\n    menu.afterGuiAttached({\n      hidePopup: hidePopup\n    });\n    if (!defaultTab) {\n      menu.showTabBasedOnPreviousSelection();\n    }\n    menu.addEventListener(EnterpriseMenu.EVENT_TAB_SELECTED, function (event) {\n      _this.lastSelectedTab = event.key;\n    });\n    column.setMenuVisible(true, \"contextMenu\");\n    this.activeMenu = menu;\n    menu.addEventListener(agGridCommunity.BeanStub.EVENT_DESTROYED, function () {\n      if (_this.activeMenu === menu) {\n        _this.activeMenu = null;\n      }\n    });\n  };\n  EnterpriseMenuFactory.prototype.isMenuEnabled = function (column) {\n    return column.getMenuTabs(EnterpriseMenu.TABS_DEFAULT).length > 0;\n  };\n  __decorate$1t([agGridCommunity.Autowired('popupService')], EnterpriseMenuFactory.prototype, \"popupService\", void 0);\n  __decorate$1t([agGridCommunity.Autowired('gridOptionsWrapper')], EnterpriseMenuFactory.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1t([agGridCommunity.Autowired('focusController')], EnterpriseMenuFactory.prototype, \"focusController\", void 0);\n  EnterpriseMenuFactory = __decorate$1t([agGridCommunity.Bean('menuFactory')], EnterpriseMenuFactory);\n  return EnterpriseMenuFactory;\n}(agGridCommunity.BeanStub);\nvar EnterpriseMenu = /** @class */function (_super) {\n  __extends$2z(EnterpriseMenu, _super);\n  function EnterpriseMenu(column, initialSelection, restrictTo) {\n    var _this = _super.call(this) || this;\n    _this.tabFactories = {};\n    _this.includeChecks = {};\n    _this.timeOfLastColumnChange = Date.now();\n    _this.column = column;\n    _this.initialSelection = initialSelection;\n    _this.tabFactories[EnterpriseMenu.TAB_GENERAL] = _this.createMainPanel.bind(_this);\n    _this.tabFactories[EnterpriseMenu.TAB_FILTER] = _this.createFilterPanel.bind(_this);\n    _this.tabFactories[EnterpriseMenu.TAB_COLUMNS] = _this.createColumnsPanel.bind(_this);\n    _this.includeChecks[EnterpriseMenu.TAB_GENERAL] = function () {\n      return true;\n    };\n    _this.includeChecks[EnterpriseMenu.TAB_FILTER] = function () {\n      return column.isFilterAllowed();\n    };\n    _this.includeChecks[EnterpriseMenu.TAB_COLUMNS] = function () {\n      return true;\n    };\n    _this.restrictTo = restrictTo;\n    return _this;\n  }\n  EnterpriseMenu.prototype.getMinDimensions = function () {\n    return this.tabbedLayout.getMinDimensions();\n  };\n  EnterpriseMenu.prototype.init = function () {\n    var _this = this;\n    var tabs = this.getTabsToCreate().map(function (name) {\n      return _this.createTab(name);\n    });\n    this.tabbedLayout = new agGridCommunity.TabbedLayout({\n      items: tabs,\n      cssClass: 'ag-menu',\n      onActiveItemClicked: this.onHidePopup.bind(this),\n      onItemClicked: this.onTabItemClicked.bind(this)\n    });\n    this.createBean(this.tabbedLayout);\n    if (this.mainMenuList) {\n      this.mainMenuList.setParentComponent(this.tabbedLayout);\n    }\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.onDisplayedColumnsChanged.bind(this));\n  };\n  EnterpriseMenu.prototype.getTabsToCreate = function () {\n    var _this = this;\n    if (this.restrictTo) {\n      return this.restrictTo;\n    }\n    return this.column.getMenuTabs(EnterpriseMenu.TABS_DEFAULT).filter(function (tabName) {\n      return _this.isValidMenuTabItem(tabName);\n    }).filter(function (tabName) {\n      return _this.isNotSuppressed(tabName);\n    }).filter(function (tabName) {\n      return _this.isModuleLoaded(tabName);\n    });\n  };\n  EnterpriseMenu.prototype.isModuleLoaded = function (menuTabName) {\n    if (menuTabName === EnterpriseMenu.TAB_COLUMNS) {\n      return agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.ColumnToolPanelModule);\n    }\n    return true;\n  };\n  EnterpriseMenu.prototype.isValidMenuTabItem = function (menuTabName) {\n    var isValid = true;\n    var itemsToConsider = EnterpriseMenu.TABS_DEFAULT;\n    if (this.restrictTo != null) {\n      isValid = this.restrictTo.indexOf(menuTabName) > -1;\n      itemsToConsider = this.restrictTo;\n    }\n    isValid = isValid && EnterpriseMenu.TABS_DEFAULT.indexOf(menuTabName) > -1;\n    if (!isValid) {\n      console.warn(\"Trying to render an invalid menu item '\" + menuTabName + \"'. Check that your 'menuTabs' contains one of [\" + itemsToConsider + \"]\");\n    }\n    return isValid;\n  };\n  EnterpriseMenu.prototype.isNotSuppressed = function (menuTabName) {\n    return this.includeChecks[menuTabName]();\n  };\n  EnterpriseMenu.prototype.createTab = function (name) {\n    return this.tabFactories[name]();\n  };\n  EnterpriseMenu.prototype.showTabBasedOnPreviousSelection = function () {\n    // show the tab the user was on last time they had a menu open\n    this.showTab(this.initialSelection);\n  };\n  EnterpriseMenu.prototype.showTab = function (toShow) {\n    if (this.tabItemColumns && toShow === EnterpriseMenu.TAB_COLUMNS) {\n      this.tabbedLayout.showItem(this.tabItemColumns);\n    } else if (this.tabItemFilter && toShow === EnterpriseMenu.TAB_FILTER) {\n      this.tabbedLayout.showItem(this.tabItemFilter);\n    } else if (this.tabItemGeneral && toShow === EnterpriseMenu.TAB_GENERAL) {\n      this.tabbedLayout.showItem(this.tabItemGeneral);\n    } else {\n      this.tabbedLayout.showFirstItem();\n    }\n  };\n  EnterpriseMenu.prototype.onTabItemClicked = function (event) {\n    var key = null;\n    switch (event.item) {\n      case this.tabItemColumns:\n        key = EnterpriseMenu.TAB_COLUMNS;\n        break;\n      case this.tabItemFilter:\n        key = EnterpriseMenu.TAB_FILTER;\n        break;\n      case this.tabItemGeneral:\n        key = EnterpriseMenu.TAB_GENERAL;\n        break;\n    }\n    if (key) {\n      this.activateTab(key);\n    }\n  };\n  EnterpriseMenu.prototype.activateTab = function (tab) {\n    var ev = {\n      type: EnterpriseMenu.EVENT_TAB_SELECTED,\n      key: tab\n    };\n    this.dispatchEvent(ev);\n  };\n  EnterpriseMenu.prototype.getMenuItems = function () {\n    var defaultMenuOptions = this.getDefaultMenuOptions();\n    var result;\n    var userFunc = this.gridOptionsWrapper.getMainMenuItemsFunc();\n    if (userFunc) {\n      result = userFunc({\n        column: this.column,\n        api: this.gridOptionsWrapper.getApi(),\n        columnApi: this.gridOptionsWrapper.getColumnApi(),\n        context: this.gridOptionsWrapper.getContext(),\n        defaultItems: defaultMenuOptions\n      });\n    } else {\n      result = defaultMenuOptions;\n    }\n    // GUI looks weird when two separators are side by side. this can happen accidentally\n    // if we remove items from the menu then two separators can edit up adjacent.\n    agGridCommunity._.removeRepeatsFromArray(result, EnterpriseMenu.MENU_ITEM_SEPARATOR);\n    return result;\n  };\n  EnterpriseMenu.prototype.getDefaultMenuOptions = function () {\n    var result = [];\n    var allowPinning = !this.column.getColDef().lockPinned;\n    var rowGroupCount = this.columnController.getRowGroupColumns().length;\n    var doingGrouping = rowGroupCount > 0;\n    var groupedByThisColumn = this.columnController.getRowGroupColumns().indexOf(this.column) >= 0;\n    var allowValue = this.column.isAllowValue();\n    var allowRowGroup = this.column.isAllowRowGroup();\n    var isPrimary = this.column.isPrimary();\n    var pivotModeOn = this.columnController.isPivotMode();\n    var isInMemoryRowModel = this.rowModel.getType() === agGridCommunity.Constants.ROW_MODEL_TYPE_CLIENT_SIDE;\n    var usingTreeData = this.gridOptionsWrapper.isTreeData();\n    var allowValueAgg =\n    // if primary, then only allow aggValue if grouping and it's a value columns\n    isPrimary && doingGrouping && allowValue\n    // secondary columns can always have aggValue, as it means it's a pivot value column\n    || !isPrimary;\n    if (allowPinning) {\n      result.push('pinSubMenu');\n    }\n    if (allowValueAgg) {\n      result.push('valueAggSubMenu');\n    }\n    if (allowPinning || allowValueAgg) {\n      result.push(EnterpriseMenu.MENU_ITEM_SEPARATOR);\n    }\n    result.push('autoSizeThis');\n    result.push('autoSizeAll');\n    result.push(EnterpriseMenu.MENU_ITEM_SEPARATOR);\n    if (allowRowGroup && this.column.isPrimary()) {\n      if (groupedByThisColumn) {\n        result.push('rowUnGroup');\n      } else {\n        result.push('rowGroup');\n      }\n    }\n    result.push(EnterpriseMenu.MENU_ITEM_SEPARATOR);\n    result.push('resetColumns');\n    // only add grouping expand/collapse if grouping in the InMemoryRowModel\n    // if pivoting, we only have expandable groups if grouping by 2 or more columns\n    // as the lowest level group is not expandable while pivoting.\n    // if not pivoting, then any active row group can be expanded.\n    var allowExpandAndContract = isInMemoryRowModel && (usingTreeData || rowGroupCount > (pivotModeOn ? 1 : 0));\n    if (allowExpandAndContract) {\n      result.push('expandAll');\n      result.push('contractAll');\n    }\n    return result;\n  };\n  EnterpriseMenu.prototype.createMainPanel = function () {\n    this.mainMenuList = this.createManagedBean(new MenuList());\n    var menuItems = this.getMenuItems();\n    var menuItemsMapped = this.menuItemMapper.mapWithStockItems(menuItems, this.column);\n    this.mainMenuList.addMenuItems(menuItemsMapped);\n    this.mainMenuList.addEventListener(MenuItemComponent.EVENT_MENU_ITEM_SELECTED, this.onHidePopup.bind(this));\n    this.tabItemGeneral = {\n      title: agGridCommunity._.createIconNoSpan('menu', this.gridOptionsWrapper, this.column),\n      titleLabel: EnterpriseMenu.TAB_GENERAL.replace('MenuTab', ''),\n      bodyPromise: agGridCommunity.Promise.resolve(this.mainMenuList.getGui()),\n      name: EnterpriseMenu.TAB_GENERAL\n    };\n    return this.tabItemGeneral;\n  };\n  EnterpriseMenu.prototype.onHidePopup = function () {\n    this.hidePopupFunc();\n    // this method only gets called when the menu was closed by selection an option\n    // in this case we highlight the cell that was previously highlighted\n    var focusedCell = this.focusController.getFocusedCell();\n    if (focusedCell) {\n      var rowIndex = focusedCell.rowIndex,\n        rowPinned = focusedCell.rowPinned,\n        column = focusedCell.column;\n      this.focusController.setFocusedCell(rowIndex, column, rowPinned, true);\n    }\n  };\n  EnterpriseMenu.prototype.createFilterPanel = function () {\n    var filterWrapper = this.filterManager.getOrCreateFilterWrapper(this.column, 'COLUMN_MENU');\n    var afterFilterAttachedCallback = function afterFilterAttachedCallback(params) {\n      if (!filterWrapper.filterPromise) {\n        return;\n      }\n      // slightly odd block this - this promise will always have been resolved by the time it gets here, so won't be\n      // async (_unless_ in react or similar, but if so why not encountered before now?).\n      // I'd suggest a future improvement would be to remove/replace this promise as this block just wont work if it is\n      // async and is confusing if you don't have this context\n      filterWrapper.filterPromise.then(function (filter) {\n        if (filter.afterGuiAttached) {\n          filter.afterGuiAttached(params);\n        }\n      });\n    };\n    this.tabItemFilter = {\n      title: agGridCommunity._.createIconNoSpan('filter', this.gridOptionsWrapper, this.column),\n      titleLabel: EnterpriseMenu.TAB_FILTER.replace('MenuTab', ''),\n      bodyPromise: filterWrapper.guiPromise,\n      afterAttachedCallback: afterFilterAttachedCallback,\n      name: EnterpriseMenu.TAB_FILTER\n    };\n    return this.tabItemFilter;\n  };\n  EnterpriseMenu.prototype.createColumnsPanel = function () {\n    var eWrapperDiv = document.createElement('div');\n    agGridCommunity._.addCssClass(eWrapperDiv, 'ag-menu-column-select-wrapper');\n    this.columnSelectPanel = this.createManagedBean(new PrimaryColsPanel());\n    var columnsMenuParams = this.column.getColDef().columnsMenuParams;\n    if (!columnsMenuParams) columnsMenuParams = {};\n    this.columnSelectPanel.init(false, {\n      suppressValues: false,\n      suppressPivots: false,\n      suppressRowGroups: false,\n      suppressPivotMode: false,\n      contractColumnSelection: !!columnsMenuParams.contractColumnSelection,\n      suppressColumnExpandAll: !!columnsMenuParams.suppressColumnExpandAll,\n      suppressColumnFilter: !!columnsMenuParams.suppressColumnFilter,\n      suppressColumnSelectAll: !!columnsMenuParams.suppressColumnSelectAll,\n      suppressSideButtons: false,\n      suppressSyncLayoutWithGrid: !!columnsMenuParams.suppressSyncLayoutWithGrid,\n      api: this.gridApi,\n      columnApi: this.columnApi\n    }, 'columnMenu');\n    agGridCommunity._.addCssClass(this.columnSelectPanel.getGui(), 'ag-menu-column-select');\n    eWrapperDiv.appendChild(this.columnSelectPanel.getGui());\n    this.tabItemColumns = {\n      title: agGridCommunity._.createIconNoSpan('columns', this.gridOptionsWrapper, this.column),\n      titleLabel: EnterpriseMenu.TAB_COLUMNS.replace('MenuTab', ''),\n      bodyPromise: agGridCommunity.Promise.resolve(eWrapperDiv),\n      name: EnterpriseMenu.TAB_COLUMNS\n    };\n    return this.tabItemColumns;\n  };\n  EnterpriseMenu.prototype.afterGuiAttached = function (params) {\n    var _this = this;\n    this.tabbedLayout.setAfterAttachedParams({\n      container: 'columnMenu',\n      hidePopup: params.hidePopup\n    });\n    this.hidePopupFunc = params.hidePopup;\n    var initialScroll = this.gridApi.getHorizontalPixelRange().left;\n    // if the user scrolls the grid horizontally, we want to hide the menu, as the menu will not appear in the right location anymore\n    var onBodyScroll = function onBodyScroll(event) {\n      // If the user hides columns using the columns tab in this menu, it will change the size of the\n      // grid content and lead to a bodyScroll event. But we don't want to hide the menu for that kind\n      // of indirect scrolling. Assume that any bodyScroll that happens right after a column change is\n      // caused by that change, and ignore it.\n      var msSinceLastColumnChange = Date.now() - _this.timeOfLastColumnChange;\n      if (msSinceLastColumnChange < 500) {\n        return;\n      }\n      // if h scroll, popup is no longer over the column\n      if (event.direction === 'horizontal') {\n        var newScroll = _this.gridApi.getHorizontalPixelRange().left;\n        if (Math.abs(newScroll - initialScroll) > _this.gridOptionsWrapper.getScrollbarWidth()) {\n          params.hidePopup();\n        }\n      }\n    };\n    this.addDestroyFunc(params.hidePopup);\n    this.addManagedListener(this.eventService, 'bodyScroll', onBodyScroll);\n  };\n  EnterpriseMenu.prototype.getGui = function () {\n    return this.tabbedLayout.getGui();\n  };\n  EnterpriseMenu.prototype.onDisplayedColumnsChanged = function () {\n    this.timeOfLastColumnChange = Date.now();\n  };\n  EnterpriseMenu.EVENT_TAB_SELECTED = 'tabSelected';\n  EnterpriseMenu.TAB_FILTER = 'filterMenuTab';\n  EnterpriseMenu.TAB_GENERAL = 'generalMenuTab';\n  EnterpriseMenu.TAB_COLUMNS = 'columnsMenuTab';\n  EnterpriseMenu.TABS_DEFAULT = [EnterpriseMenu.TAB_GENERAL, EnterpriseMenu.TAB_FILTER, EnterpriseMenu.TAB_COLUMNS];\n  EnterpriseMenu.MENU_ITEM_SEPARATOR = 'separator';\n  __decorate$1t([agGridCommunity.Autowired('columnController')], EnterpriseMenu.prototype, \"columnController\", void 0);\n  __decorate$1t([agGridCommunity.Autowired('filterManager')], EnterpriseMenu.prototype, \"filterManager\", void 0);\n  __decorate$1t([agGridCommunity.Autowired('gridApi')], EnterpriseMenu.prototype, \"gridApi\", void 0);\n  __decorate$1t([agGridCommunity.Autowired('columnApi')], EnterpriseMenu.prototype, \"columnApi\", void 0);\n  __decorate$1t([agGridCommunity.Autowired('gridOptionsWrapper')], EnterpriseMenu.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1t([agGridCommunity.Autowired('menuItemMapper')], EnterpriseMenu.prototype, \"menuItemMapper\", void 0);\n  __decorate$1t([agGridCommunity.Autowired('rowModel')], EnterpriseMenu.prototype, \"rowModel\", void 0);\n  __decorate$1t([agGridCommunity.Autowired('focusController')], EnterpriseMenu.prototype, \"focusController\", void 0);\n  __decorate$1t([agGridCommunity.PostConstruct], EnterpriseMenu.prototype, \"init\", null);\n  return EnterpriseMenu;\n}(agGridCommunity.BeanStub);\nvar __extends$2A = undefined && undefined.__extends || function () {\n  var _extendStatics165 = function extendStatics(d, b) {\n    _extendStatics165 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics165(d, b);\n  };\n  return function (d, b) {\n    _extendStatics165(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1u = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ContextMenuFactory = /** @class */function (_super) {\n  __extends$2A(ContextMenuFactory, _super);\n  function ContextMenuFactory() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  ContextMenuFactory.prototype.registerGridComp = function (gridPanel) {\n    this.gridPanel = gridPanel;\n  };\n  ContextMenuFactory.prototype.hideActiveMenu = function () {\n    this.destroyBean(this.activeMenu);\n  };\n  ContextMenuFactory.prototype.getMenuItems = function (node, column, value) {\n    var defaultMenuOptions = [];\n    if (agGridCommunity._.exists(node) && agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.ClipboardModule)) {\n      if (column) {\n        // only makes sense if column exists, could have originated from a row\n        defaultMenuOptions.push('copy', 'copyWithHeaders', 'paste', 'separator');\n      }\n    }\n    if (this.gridOptionsWrapper.isEnableCharts() && agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.RangeSelectionModule) && agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.GridChartsModule)) {\n      if (this.columnController.isPivotMode()) {\n        defaultMenuOptions.push('pivotChart');\n      }\n      if (this.rangeController && !this.rangeController.isEmpty()) {\n        defaultMenuOptions.push('chartRange');\n      }\n    }\n    if (agGridCommunity._.exists(node)) {\n      // if user clicks a cell\n      var csvModuleMissing = !agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.CsvExportModule);\n      var excelModuleMissing = !agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.ExcelExportModule);\n      var suppressExcel = this.gridOptionsWrapper.isSuppressExcelExport() || excelModuleMissing;\n      var suppressCsv = this.gridOptionsWrapper.isSuppressCsvExport() || csvModuleMissing;\n      var onIPad = agGridCommunity._.isIOSUserAgent();\n      var anyExport = !onIPad && (!suppressExcel || !suppressCsv);\n      if (anyExport) {\n        defaultMenuOptions.push('export');\n      }\n    }\n    if (this.gridOptionsWrapper.getContextMenuItemsFunc()) {\n      var userFunc = this.gridOptionsWrapper.getContextMenuItemsFunc();\n      var params = {\n        node: node,\n        column: column,\n        value: value,\n        defaultItems: defaultMenuOptions.length ? defaultMenuOptions : undefined,\n        api: this.gridOptionsWrapper.getApi(),\n        columnApi: this.gridOptionsWrapper.getColumnApi(),\n        context: this.gridOptionsWrapper.getContext()\n      };\n      return userFunc ? userFunc(params) : undefined;\n    }\n    return defaultMenuOptions;\n  };\n  ContextMenuFactory.prototype.showMenu = function (node, column, value, mouseEvent) {\n    var _this = this;\n    var menuItems = this.getMenuItems(node, column, value);\n    if (menuItems === undefined || agGridCommunity._.missingOrEmpty(menuItems)) {\n      return false;\n    }\n    var menu = new ContextMenu(menuItems);\n    this.createBean(menu);\n    var eMenuGui = menu.getGui();\n    var positionParams = {\n      column: column,\n      rowNode: node,\n      type: 'contextMenu',\n      mouseEvent: mouseEvent,\n      ePopup: eMenuGui,\n      // move one pixel away so that accidentally double clicking\n      // won't show the browser's contextmenu\n      nudgeX: 1,\n      nudgeY: 1\n    };\n    var positionCallback = this.popupService.positionPopupUnderMouseEvent.bind(this.popupService, positionParams);\n    var hidePopup = this.popupService.addPopup({\n      modal: true,\n      eChild: eMenuGui,\n      closeOnEsc: true,\n      closedCallback: function closedCallback() {\n        _this.destroyBean(menu);\n      },\n      click: mouseEvent,\n      positionCallback: positionCallback,\n      // so when browser is scrolled down, the context menu stays on the grid\n      anchorToElement: this.gridPanel.getGui()\n    });\n    menu.afterGuiAttached({\n      container: 'contextMenu',\n      hidePopup: hidePopup\n    });\n    // there should never be an active menu at this point, however it was found\n    // that you could right click a second time just 1 or 2 pixels from the first\n    // click, and another menu would pop up. so somehow the logic for closing the\n    // first menu (clicking outside should close it) was glitchy somehow. an easy\n    // way to avoid this is just remove the old context menu here if it exists.\n    if (this.activeMenu) {\n      this.hideActiveMenu();\n    }\n    this.activeMenu = menu;\n    menu.addEventListener(agGridCommunity.BeanStub.EVENT_DESTROYED, function () {\n      if (_this.activeMenu === menu) {\n        _this.activeMenu = null;\n      }\n    });\n    return true;\n  };\n  __decorate$1u([agGridCommunity.Autowired('popupService')], ContextMenuFactory.prototype, \"popupService\", void 0);\n  __decorate$1u([agGridCommunity.Autowired('gridOptionsWrapper')], ContextMenuFactory.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1u([agGridCommunity.Optional('rangeController')], ContextMenuFactory.prototype, \"rangeController\", void 0);\n  __decorate$1u([agGridCommunity.Autowired('columnController')], ContextMenuFactory.prototype, \"columnController\", void 0);\n  ContextMenuFactory = __decorate$1u([agGridCommunity.Bean('contextMenuFactory')], ContextMenuFactory);\n  return ContextMenuFactory;\n}(agGridCommunity.BeanStub);\nvar ContextMenu = /** @class */function (_super) {\n  __extends$2A(ContextMenu, _super);\n  function ContextMenu(menuItems) {\n    var _this = _super.call(this, '<div class=\"ag-menu\" role=\"presentation\"></div>') || this;\n    _this.menuList = null;\n    _this.focusedCell = null;\n    _this.menuItems = menuItems;\n    return _this;\n  }\n  ContextMenu.prototype.addMenuItems = function () {\n    var menuList = this.createBean(new MenuList());\n    var menuItemsMapped = this.menuItemMapper.mapWithStockItems(this.menuItems, null);\n    menuList.addMenuItems(menuItemsMapped);\n    this.appendChild(menuList);\n    this.menuList = menuList;\n    menuList.addEventListener(MenuItemComponent.EVENT_MENU_ITEM_SELECTED, this.destroy.bind(this));\n  };\n  ContextMenu.prototype.afterGuiAttached = function (params) {\n    if (params.hidePopup) {\n      this.addDestroyFunc(params.hidePopup);\n    }\n    this.focusedCell = this.focusController.getFocusedCell();\n    if (this.menuList) {\n      this.focusController.focusInto(this.menuList.getGui());\n    }\n    // if the body scrolls, we want to hide the menu, as the menu will not appear in the right location anymore\n    this.addManagedListener(this.eventService, 'bodyScroll', this.destroy.bind(this));\n  };\n  ContextMenu.prototype.destroy = function () {\n    var currentFocusedCell = this.focusController.getFocusedCell();\n    if (currentFocusedCell && this.focusedCell && this.cellPositionUtils.equals(currentFocusedCell, this.focusedCell)) {\n      var _a = this.focusedCell,\n        rowIndex = _a.rowIndex,\n        rowPinned = _a.rowPinned,\n        column = _a.column;\n      this.focusController.setFocusedCell(rowIndex, column, rowPinned, true);\n    }\n    _super.prototype.destroy.call(this);\n  };\n  __decorate$1u([agGridCommunity.Autowired('menuItemMapper')], ContextMenu.prototype, \"menuItemMapper\", void 0);\n  __decorate$1u([agGridCommunity.Autowired('focusController')], ContextMenu.prototype, \"focusController\", void 0);\n  __decorate$1u([agGridCommunity.Autowired('cellPositionUtils')], ContextMenu.prototype, \"cellPositionUtils\", void 0);\n  __decorate$1u([agGridCommunity.PostConstruct], ContextMenu.prototype, \"addMenuItems\", null);\n  return ContextMenu;\n}(agGridCommunity.Component);\nvar __extends$2B = undefined && undefined.__extends || function () {\n  var _extendStatics166 = function extendStatics(d, b) {\n    _extendStatics166 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics166(d, b);\n  };\n  return function (d, b) {\n    _extendStatics166(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1v = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MenuItemMapper = /** @class */function (_super) {\n  __extends$2B(MenuItemMapper, _super);\n  function MenuItemMapper() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  MenuItemMapper.prototype.mapWithStockItems = function (originalList, column) {\n    var _this = this;\n    if (!originalList) {\n      return [];\n    }\n    var resultList = [];\n    originalList.forEach(function (menuItemOrString) {\n      var result;\n      if (typeof menuItemOrString === 'string') {\n        result = _this.getStockMenuItem(menuItemOrString, column);\n      } else {\n        result = menuItemOrString;\n      }\n      // if no mapping, can happen when module is not loaded but user tries to use module anyway\n      if (!result) {\n        return;\n      }\n      var resultDef = result;\n      var subMenu = resultDef.subMenu;\n      if (subMenu && subMenu instanceof Array) {\n        resultDef.subMenu = _this.mapWithStockItems(resultDef.subMenu, column);\n      }\n      if (result != null) {\n        resultList.push(result);\n      }\n    });\n    return resultList;\n  };\n  MenuItemMapper.prototype.getStockMenuItem = function (key, column) {\n    var _this = this;\n    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n    var skipHeaderOnAutoSize = this.gridOptionsWrapper.isSkipHeaderOnAutoSize();\n    switch (key) {\n      case 'pinSubMenu':\n        return {\n          name: localeTextFunc('pinColumn', 'Pin Column'),\n          icon: agGridCommunity._.createIconNoSpan('menuPin', this.gridOptionsWrapper, null),\n          subMenu: ['pinLeft', 'pinRight', 'clearPinned']\n        };\n      case 'pinLeft':\n        return {\n          name: localeTextFunc('pinLeft', 'Pin Left'),\n          action: function action() {\n            return _this.columnController.setColumnPinned(column, agGridCommunity.Constants.PINNED_LEFT, \"contextMenu\");\n          },\n          checked: column.isPinnedLeft()\n        };\n      case 'pinRight':\n        return {\n          name: localeTextFunc('pinRight', 'Pin Right'),\n          action: function action() {\n            return _this.columnController.setColumnPinned(column, agGridCommunity.Constants.PINNED_RIGHT, \"contextMenu\");\n          },\n          checked: column.isPinnedRight()\n        };\n      case 'clearPinned':\n        return {\n          name: localeTextFunc('noPin', 'No Pin'),\n          action: function action() {\n            return _this.columnController.setColumnPinned(column, null, \"contextMenu\");\n          },\n          checked: !column.isPinned()\n        };\n      case 'valueAggSubMenu':\n        if (agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.RowGroupingModule, 'Aggregation from Menu')) {\n          return {\n            name: localeTextFunc('valueAggregation', 'Value Aggregation'),\n            icon: agGridCommunity._.createIconNoSpan('menuValue', this.gridOptionsWrapper, null),\n            subMenu: this.createAggregationSubMenu(column)\n          };\n        } else {\n          return null;\n        }\n      case 'autoSizeThis':\n        return {\n          name: localeTextFunc('autosizeThiscolumn', 'Autosize This Column'),\n          action: function action() {\n            return _this.columnController.autoSizeColumn(column, skipHeaderOnAutoSize, \"contextMenu\");\n          }\n        };\n      case 'autoSizeAll':\n        return {\n          name: localeTextFunc('autosizeAllColumns', 'Autosize All Columns'),\n          action: function action() {\n            return _this.columnController.autoSizeAllColumns(skipHeaderOnAutoSize, \"contextMenu\");\n          }\n        };\n      case 'rowGroup':\n        return {\n          name: localeTextFunc('groupBy', 'Group by') + ' ' + agGridCommunity._.escapeString(this.columnController.getDisplayNameForColumn(column, 'header')),\n          action: function action() {\n            return _this.columnController.addRowGroupColumn(column, \"contextMenu\");\n          },\n          icon: agGridCommunity._.createIconNoSpan('menuAddRowGroup', this.gridOptionsWrapper, null)\n        };\n      case 'rowUnGroup':\n        return {\n          name: localeTextFunc('ungroupBy', 'Un-Group by') + ' ' + agGridCommunity._.escapeString(this.columnController.getDisplayNameForColumn(column, 'header')),\n          action: function action() {\n            return _this.columnController.removeRowGroupColumn(column, \"contextMenu\");\n          },\n          icon: agGridCommunity._.createIconNoSpan('menuRemoveRowGroup', this.gridOptionsWrapper, null)\n        };\n      case 'resetColumns':\n        return {\n          name: localeTextFunc('resetColumns', 'Reset Columns'),\n          action: function action() {\n            return _this.columnController.resetColumnState(false, \"contextMenu\");\n          }\n        };\n      case 'expandAll':\n        return {\n          name: localeTextFunc('expandAll', 'Expand All'),\n          action: function action() {\n            return _this.gridApi.expandAll();\n          }\n        };\n      case 'contractAll':\n        return {\n          name: localeTextFunc('collapseAll', 'Collapse All'),\n          action: function action() {\n            return _this.gridApi.collapseAll();\n          }\n        };\n      case 'copy':\n        if (agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.ClipboardModule, 'Copy from Menu')) {\n          return {\n            name: localeTextFunc('copy', 'Copy'),\n            shortcut: localeTextFunc('ctrlC', 'Ctrl+C'),\n            icon: agGridCommunity._.createIconNoSpan('clipboardCopy', this.gridOptionsWrapper, null),\n            action: function action() {\n              return _this.clipboardService.copyToClipboard(false);\n            }\n          };\n        } else {\n          return null;\n        }\n      case 'copyWithHeaders':\n        if (agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.ClipboardModule, 'Copy with Headers from Menu')) {\n          return {\n            name: localeTextFunc('copyWithHeaders', 'Copy with Headers'),\n            // shortcut: localeTextFunc('ctrlC','Ctrl+C'),\n            icon: agGridCommunity._.createIconNoSpan('clipboardCopy', this.gridOptionsWrapper, null),\n            action: function action() {\n              return _this.clipboardService.copyToClipboard(true);\n            }\n          };\n        } else {\n          return null;\n        }\n      case 'paste':\n        if (agGridCommunity.ModuleRegistry.assertRegistered(agGridCommunity.ModuleNames.ClipboardModule, 'Copy with Headers from Menu')) {\n          return {\n            name: localeTextFunc('paste', 'Paste'),\n            shortcut: localeTextFunc('ctrlV', 'Ctrl+V'),\n            disabled: true,\n            icon: agGridCommunity._.createIconNoSpan('clipboardPaste', this.gridOptionsWrapper, null),\n            action: function action() {\n              return _this.clipboardService.pasteFromClipboard();\n            }\n          };\n        } else {\n          return null;\n        }\n      case 'export':\n        var exportSubMenuItems = [];\n        var csvModuleLoaded = agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.CsvExportModule);\n        var excelModuleLoaded = agGridCommunity.ModuleRegistry.isRegistered(agGridCommunity.ModuleNames.ExcelExportModule);\n        if (!this.gridOptionsWrapper.isSuppressCsvExport() && csvModuleLoaded) {\n          exportSubMenuItems.push('csvExport');\n        }\n        if (!this.gridOptionsWrapper.isSuppressExcelExport() && excelModuleLoaded) {\n          exportSubMenuItems.push('excelExport');\n          exportSubMenuItems.push('excelXmlExport');\n        }\n        return {\n          name: localeTextFunc('export', 'Export'),\n          subMenu: exportSubMenuItems,\n          icon: agGridCommunity._.createIconNoSpan('save', this.gridOptionsWrapper, null)\n        };\n      case 'csvExport':\n        return {\n          name: localeTextFunc('csvExport', 'CSV Export'),\n          action: function action() {\n            return _this.gridApi.exportDataAsCsv({});\n          }\n        };\n      case 'excelExport':\n        return {\n          name: localeTextFunc('excelExport', 'Excel Export (.xlsx)&lrm;'),\n          action: function action() {\n            return _this.gridApi.exportDataAsExcel({\n              exportMode: 'xlsx'\n            });\n          }\n        };\n      case 'excelXmlExport':\n        return {\n          name: localeTextFunc('excelXmlExport', 'Excel Export (.xml)&lrm;'),\n          action: function action() {\n            return _this.gridApi.exportDataAsExcel({\n              exportMode: 'xml'\n            });\n          }\n        };\n      case 'separator':\n        return 'separator';\n      default:\n        var chartMenuItem = this.getChartItems(key);\n        if (chartMenuItem) {\n          return chartMenuItem;\n        } else {\n          console.warn(\"ag-Grid: unknown menu item type \" + key);\n          return null;\n        }\n    }\n  };\n  MenuItemMapper.prototype.getChartItems = function (key) {\n    var _this = this;\n    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n    var pivotChartMenuItem = function pivotChartMenuItem(localeKey, defaultText, chartType) {\n      return {\n        name: localeTextFunc(localeKey, defaultText),\n        action: function action() {\n          return _this.chartService.createPivotChart({\n            chartType: chartType\n          });\n        }\n      };\n    };\n    var rangeChartMenuItem = function rangeChartMenuItem(localeKey, defaultText, chartType) {\n      return {\n        name: localeTextFunc(localeKey, defaultText),\n        action: function action() {\n          return _this.chartService.createChartFromCurrentRange(chartType);\n        }\n      };\n    };\n    switch (key) {\n      // case 'pivotChartAndPivotMode':\n      //     return {\n      //         name: localeTextFunc('pivotChartAndPivotMode', 'Pivot Chart & Pivot Mode&lrm;'),\n      //         action: () => this.chartService.pivotChart(ChartType.GroupedColumn),\n      //         icon: _.createIconNoSpan('chart', this.gridOptionsWrapper, null)\n      //     };\n      case 'pivotChart':\n        return {\n          name: localeTextFunc('pivotChart', 'Pivot Chart'),\n          subMenu: ['pivotColumnChart', 'pivotBarChart', 'pivotPieChart', 'pivotLineChart', 'pivotXYChart', 'pivotAreaChart'],\n          icon: agGridCommunity._.createIconNoSpan('chart', this.gridOptionsWrapper, null)\n        };\n      case 'chartRange':\n        return {\n          name: localeTextFunc('chartRange', 'Chart Range'),\n          subMenu: ['rangeColumnChart', 'rangeBarChart', 'rangePieChart', 'rangeLineChart', 'rangeXYChart', 'rangeAreaChart', 'rangeHistogramChart'],\n          icon: agGridCommunity._.createIconNoSpan('chart', this.gridOptionsWrapper, null)\n        };\n      case 'pivotColumnChart':\n        return {\n          name: localeTextFunc('columnChart', 'Column'),\n          subMenu: ['pivotGroupedColumn', 'pivotStackedColumn', 'pivotNormalizedColumn']\n        };\n      case 'pivotGroupedColumn':\n        return pivotChartMenuItem('groupedColumn', 'Grouped&lrm;', agGridCommunity.ChartType.GroupedColumn);\n      case 'pivotStackedColumn':\n        return pivotChartMenuItem('stackedColumn', 'Stacked&lrm;', agGridCommunity.ChartType.StackedColumn);\n      case 'pivotNormalizedColumn':\n        return pivotChartMenuItem('normalizedColumn', '100% Stacked&lrm;', agGridCommunity.ChartType.NormalizedColumn);\n      case 'rangeColumnChart':\n        return {\n          name: localeTextFunc('columnChart', 'Column'),\n          subMenu: ['rangeGroupedColumn', 'rangeStackedColumn', 'rangeNormalizedColumn']\n        };\n      case 'rangeGroupedColumn':\n        return rangeChartMenuItem('groupedColumn', 'Grouped&lrm;', agGridCommunity.ChartType.GroupedColumn);\n      case 'rangeStackedColumn':\n        return rangeChartMenuItem('stackedColumn', 'Stacked&lrm;', agGridCommunity.ChartType.StackedColumn);\n      case 'rangeNormalizedColumn':\n        return rangeChartMenuItem('normalizedColumn', '100% Stacked&lrm;', agGridCommunity.ChartType.NormalizedColumn);\n      case 'pivotBarChart':\n        return {\n          name: localeTextFunc('barChart', 'Bar'),\n          subMenu: ['pivotGroupedBar', 'pivotStackedBar', 'pivotNormalizedBar']\n        };\n      case 'pivotGroupedBar':\n        return pivotChartMenuItem('groupedBar', 'Grouped&lrm;', agGridCommunity.ChartType.GroupedBar);\n      case 'pivotStackedBar':\n        return pivotChartMenuItem('stackedBar', 'Stacked&lrm;', agGridCommunity.ChartType.StackedBar);\n      case 'pivotNormalizedBar':\n        return pivotChartMenuItem('normalizedBar', '100% Stacked&lrm;', agGridCommunity.ChartType.NormalizedBar);\n      case 'rangeBarChart':\n        return {\n          name: localeTextFunc('barChart', 'Bar'),\n          subMenu: ['rangeGroupedBar', 'rangeStackedBar', 'rangeNormalizedBar']\n        };\n      case 'rangeGroupedBar':\n        return rangeChartMenuItem('groupedBar', 'Grouped&lrm;', agGridCommunity.ChartType.GroupedBar);\n      case 'rangeStackedBar':\n        return rangeChartMenuItem('stackedBar', 'Stacked&lrm;', agGridCommunity.ChartType.StackedBar);\n      case 'rangeNormalizedBar':\n        return rangeChartMenuItem('normalizedBar', '100% Stacked&lrm;', agGridCommunity.ChartType.NormalizedBar);\n      case 'pivotPieChart':\n        return {\n          name: localeTextFunc('pieChart', 'Pie'),\n          subMenu: ['pivotPie', 'pivotDoughnut']\n        };\n      case 'pivotPie':\n        return pivotChartMenuItem('pie', 'Pie&lrm;', agGridCommunity.ChartType.Pie);\n      case 'pivotDoughnut':\n        return pivotChartMenuItem('doughnut', 'Doughnut&lrm;', agGridCommunity.ChartType.Doughnut);\n      case 'rangePieChart':\n        return {\n          name: localeTextFunc('pieChart', 'Pie'),\n          subMenu: ['rangePie', 'rangeDoughnut']\n        };\n      case 'rangePie':\n        return rangeChartMenuItem('pie', 'Pie&lrm;', agGridCommunity.ChartType.Pie);\n      case 'rangeDoughnut':\n        return rangeChartMenuItem('doughnut', 'Doughnut&lrm;', agGridCommunity.ChartType.Doughnut);\n      case 'pivotLineChart':\n        return pivotChartMenuItem('line', 'Line&lrm;', agGridCommunity.ChartType.Line);\n      case 'rangeLineChart':\n        return rangeChartMenuItem('line', 'Line&lrm;', agGridCommunity.ChartType.Line);\n      case 'pivotXYChart':\n        return {\n          name: localeTextFunc('xyChart', 'X Y (Scatter)'),\n          subMenu: ['pivotScatter', 'pivotBubble']\n        };\n      case 'pivotScatter':\n        return pivotChartMenuItem('scatter', 'Scatter&lrm;', agGridCommunity.ChartType.Scatter);\n      case 'pivotBubble':\n        return pivotChartMenuItem('bubble', 'Bubble&lrm;', agGridCommunity.ChartType.Bubble);\n      case 'rangeXYChart':\n        return {\n          name: localeTextFunc('xyChart', 'X Y (Scatter)'),\n          subMenu: ['rangeScatter', 'rangeBubble']\n        };\n      case 'rangeScatter':\n        return rangeChartMenuItem('scatter', 'Scatter&lrm;', agGridCommunity.ChartType.Scatter);\n      case 'rangeBubble':\n        return rangeChartMenuItem('bubble', 'Bubble&lrm;', agGridCommunity.ChartType.Bubble);\n      case 'pivotAreaChart':\n        return {\n          name: localeTextFunc('areaChart', 'Area'),\n          subMenu: ['pivotArea', 'pivotStackedArea', 'pivotNormalizedArea']\n        };\n      case 'pivotArea':\n        return pivotChartMenuItem('area', 'Area&lrm;', agGridCommunity.ChartType.Area);\n      case 'pivotStackedArea':\n        return pivotChartMenuItem('stackedArea', 'Stacked&lrm;', agGridCommunity.ChartType.StackedArea);\n      case 'pivotNormalizedArea':\n        return pivotChartMenuItem('normalizedArea', '100% Stacked&lrm;', agGridCommunity.ChartType.NormalizedArea);\n      case 'rangeAreaChart':\n        return {\n          name: localeTextFunc('areaChart', 'Area'),\n          subMenu: ['rangeArea', 'rangeStackedArea', 'rangeNormalizedArea']\n        };\n      case 'rangeArea':\n        return rangeChartMenuItem('area', 'Area&lrm;', agGridCommunity.ChartType.Area);\n      case 'rangeStackedArea':\n        return rangeChartMenuItem('stackedArea', 'Stacked&lrm;', agGridCommunity.ChartType.StackedArea);\n      case 'rangeNormalizedArea':\n        return rangeChartMenuItem('normalizedArea', '100% Stacked&lrm;', agGridCommunity.ChartType.NormalizedArea);\n      case 'rangeHistogramChart':\n        return rangeChartMenuItem('histogramChart', 'Histogram&lrm;', agGridCommunity.ChartType.Histogram);\n      default:\n        return null;\n    }\n  };\n  MenuItemMapper.prototype.createAggregationSubMenu = function (column) {\n    var _this = this;\n    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n    var columnIsAlreadyAggValue = column.isValueActive();\n    var funcNames = this.aggFuncService.getFuncNames(column);\n    var columnToUse;\n    if (column.isPrimary()) {\n      columnToUse = column;\n    } else {\n      var pivotValueColumn = column.getColDef().pivotValueColumn;\n      columnToUse = agGridCommunity._.exists(pivotValueColumn) ? pivotValueColumn : undefined;\n    }\n    var result = [];\n    funcNames.forEach(function (funcName) {\n      result.push({\n        name: localeTextFunc(funcName, funcName),\n        action: function action() {\n          _this.columnController.setColumnAggFunc(columnToUse, funcName, \"contextMenu\");\n          _this.columnController.addValueColumn(columnToUse, \"contextMenu\");\n        },\n        checked: columnIsAlreadyAggValue && columnToUse.getAggFunc() === funcName\n      });\n    });\n    return result;\n  };\n  __decorate$1v([agGridCommunity.Autowired('gridOptionsWrapper')], MenuItemMapper.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1v([agGridCommunity.Autowired('columnController')], MenuItemMapper.prototype, \"columnController\", void 0);\n  __decorate$1v([agGridCommunity.Autowired('gridApi')], MenuItemMapper.prototype, \"gridApi\", void 0);\n  __decorate$1v([agGridCommunity.Optional('clipboardService')], MenuItemMapper.prototype, \"clipboardService\", void 0);\n  __decorate$1v([agGridCommunity.Optional('aggFuncService')], MenuItemMapper.prototype, \"aggFuncService\", void 0);\n  __decorate$1v([agGridCommunity.Optional('chartService')], MenuItemMapper.prototype, \"chartService\", void 0);\n  MenuItemMapper = __decorate$1v([agGridCommunity.Bean('menuItemMapper')], MenuItemMapper);\n  return MenuItemMapper;\n}(agGridCommunity.BeanStub);\nvar MenuModule = {\n  moduleName: agGridCommunity.ModuleNames.MenuModule,\n  beans: [EnterpriseMenuFactory, ContextMenuFactory, MenuItemMapper],\n  dependantModules: [EnterpriseCoreModule]\n};\nvar __extends$2C = undefined && undefined.__extends || function () {\n  var _extendStatics167 = function extendStatics(d, b) {\n    _extendStatics167 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics167(d, b);\n  };\n  return function (d, b) {\n    _extendStatics167(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign$k = undefined && undefined.__assign || function () {\n  __assign$k = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$k.apply(this, arguments);\n};\nvar __decorate$1w = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MultiFilter = /** @class */function (_super) {\n  __extends$2C(MultiFilter, _super);\n  function MultiFilter() {\n    var _this = _super.call(this, /* html */\"<div class=\\\"ag-multi-filter ag-menu-list-compact\\\"></div>\", true) || this;\n    _this.filterDefs = [];\n    _this.filters = [];\n    _this.guiDestroyFuncs = [];\n    _this.activeFilterIndices = [];\n    _this.lastActivatedMenuItem = null;\n    return _this;\n  }\n  MultiFilter.getFilterDefs = function (params) {\n    var filters = params.filters;\n    return filters && filters.length > 0 ? filters : [{\n      filter: 'agTextColumnFilter'\n    }, {\n      filter: 'agSetColumnFilter'\n    }];\n  };\n  MultiFilter.prototype.init = function (params) {\n    var _this = this;\n    this.params = params;\n    this.filterDefs = MultiFilter.getFilterDefs(params);\n    var column = params.column,\n      filterChangedCallback = params.filterChangedCallback;\n    this.column = column;\n    this.filterChangedCallback = filterChangedCallback;\n    var filterPromises = [];\n    agGridCommunity._.forEach(this.filterDefs, function (filterDef, index) {\n      var filterPromise = _this.createFilter(filterDef, index);\n      if (filterPromise != null) {\n        filterPromises.push(filterPromise);\n      }\n    });\n    // we have to refresh the GUI here to ensure that Angular components are not rendered in odd places\n    return agGridCommunity.Promise.all(filterPromises).then(function (filters) {\n      _this.filters = filters;\n      _this.refreshGui('columnMenu');\n    });\n  };\n  MultiFilter.prototype.refreshGui = function (container) {\n    var _this = this;\n    if (container === this.lastOpenedInContainer) {\n      return;\n    }\n    this.clearGui();\n    this.destroyChildren();\n    agGridCommunity._.forEach(this.filters, function (filter, index) {\n      if (index > 0) {\n        _this.appendChild(agGridCommunity._.loadTemplate( /* html */\"<div class=\\\"ag-filter-separator\\\"></div>\"));\n      }\n      var filterDef = _this.filterDefs[index];\n      var filterTitle = _this.getFilterTitle(filter, filterDef);\n      var filterGui;\n      if (filterDef.display === 'subMenu' && container !== 'toolPanel') {\n        // prevent sub-menu being used in tool panel\n        var menuItem = _this.insertFilterMenu(filter, filterTitle);\n        filterGui = menuItem.getGui();\n      } else if (filterDef.display === 'subMenu' || filterDef.display === 'accordion') {\n        // sub-menus should appear as groups in the tool panel\n        var group = _this.insertFilterGroup(filter, filterTitle);\n        filterGui = group.getGui();\n      } else {\n        // display inline\n        filterGui = filter.getGui();\n      }\n      _this.appendChild(filterGui);\n    });\n    this.lastOpenedInContainer = container;\n  };\n  MultiFilter.prototype.getFilterTitle = function (filter, filterDef) {\n    if (filterDef.title != null) {\n      return filterDef.title;\n    }\n    var filterWithoutType = filter;\n    return typeof filterWithoutType.getFilterTitle === 'function' ? filterWithoutType.getFilterTitle() : 'Filter';\n  };\n  MultiFilter.prototype.destroyChildren = function () {\n    agGridCommunity._.forEach(this.guiDestroyFuncs, function (func) {\n      return func();\n    });\n    this.guiDestroyFuncs.length = 0;\n  };\n  MultiFilter.prototype.insertFilterMenu = function (filter, name) {\n    var _this = this;\n    var menuItem = this.createBean(new MenuItemComponent({\n      name: name,\n      subMenu: filter,\n      cssClasses: ['ag-multi-filter-menu-item'],\n      isCompact: true,\n      isAnotherSubMenuOpen: function isAnotherSubMenuOpen() {\n        return false;\n      }\n    }));\n    menuItem.setParentComponent(this);\n    this.guiDestroyFuncs.push(function () {\n      return _this.destroyBean(menuItem);\n    });\n    this.addManagedListener(menuItem, MenuItemComponent.EVENT_MENU_ITEM_ACTIVATED, function (event) {\n      if (_this.lastActivatedMenuItem && _this.lastActivatedMenuItem !== event.menuItem) {\n        _this.lastActivatedMenuItem.deactivate();\n      }\n      _this.lastActivatedMenuItem = event.menuItem;\n    });\n    menuItem.addGuiEventListener('focusin', function () {\n      return menuItem.activate();\n    });\n    menuItem.addGuiEventListener('focusout', function () {\n      if (!menuItem.isSubMenuOpen()) {\n        menuItem.deactivate();\n      }\n    });\n    return menuItem;\n  };\n  MultiFilter.prototype.insertFilterGroup = function (filter, title) {\n    var _this = this;\n    var group = this.createBean(new agGridCommunity.AgGroupComponent({\n      title: title,\n      cssIdentifier: 'multi-filter'\n    }));\n    this.guiDestroyFuncs.push(function () {\n      return _this.destroyBean(group);\n    });\n    group.addItem(filter.getGui());\n    group.toggleGroupExpand(false);\n    if (filter.afterGuiAttached) {\n      var params_1 = {\n        container: this.lastOpenedInContainer,\n        suppressFocus: true\n      };\n      group.addManagedListener(group, agGridCommunity.AgGroupComponent.EVENT_EXPANDED, function () {\n        return filter.afterGuiAttached(params_1);\n      });\n    }\n    return group;\n  };\n  MultiFilter.prototype.isFilterActive = function () {\n    return agGridCommunity._.some(this.filters, function (filter) {\n      return filter.isFilterActive();\n    });\n  };\n  MultiFilter.prototype.getLastActiveFilterIndex = function () {\n    return this.activeFilterIndices.length > 0 ? this.activeFilterIndices[this.activeFilterIndices.length - 1] : null;\n  };\n  MultiFilter.prototype.doesFilterPass = function (params, filterToSkip) {\n    var rowPasses = true;\n    this.filters.forEach(function (filter) {\n      if (!rowPasses || filter === filterToSkip || !filter.isFilterActive()) {\n        return;\n      }\n      rowPasses = filter.doesFilterPass(params);\n    });\n    return rowPasses;\n  };\n  MultiFilter.prototype.getFilterType = function () {\n    return 'multi';\n  };\n  MultiFilter.prototype.getModelFromUi = function () {\n    if (!this.isFilterActive()) {\n      return null;\n    }\n    var model = {\n      filterType: this.getFilterType(),\n      filterModels: agGridCommunity._.map(this.filters, function (filter) {\n        var providedFilter = filter;\n        if (filter.isFilterActive() && typeof providedFilter.getModelFromUi === 'function') {\n          return providedFilter.getModelFromUi();\n        }\n        return null;\n      })\n    };\n    return model;\n  };\n  MultiFilter.prototype.getModel = function () {\n    if (!this.isFilterActive()) {\n      return null;\n    }\n    var model = {\n      filterType: this.getFilterType(),\n      filterModels: agGridCommunity._.map(this.filters, function (filter) {\n        if (filter.isFilterActive()) {\n          return filter.getModel();\n        }\n        return null;\n      })\n    };\n    return model;\n  };\n  MultiFilter.prototype.setModel = function (model) {\n    var setFilterModel = function setFilterModel(filter, model) {\n      return new agGridCommunity.Promise(function (resolve) {\n        var promise = filter.setModel(model);\n        if (promise == null) {\n          resolve();\n        } else {\n          promise.then(function () {\n            return resolve();\n          });\n        }\n      });\n    };\n    var promises = [];\n    if (model == null) {\n      promises = agGridCommunity._.map(this.filters, function (filter) {\n        return setFilterModel(filter, null);\n      });\n    } else {\n      agGridCommunity._.forEach(this.filters, function (filter, index) {\n        var filterModel = model.filterModels.length > index ? model.filterModels[index] : null;\n        promises.push(setFilterModel(filter, filterModel));\n      });\n    }\n    return agGridCommunity.Promise.all(promises).then(function () {});\n  };\n  MultiFilter.prototype.getChildFilterInstance = function (index) {\n    return this.filters[index];\n  };\n  MultiFilter.prototype.afterGuiAttached = function (params) {\n    if (params) {\n      this.refreshGui(params.container);\n    }\n    var filters = this.params.filters;\n    var suppressFocus = filters && agGridCommunity._.some(filters, function (filter) {\n      return filter.display && filter.display !== 'inline';\n    });\n    this.executeFunctionIfExists('afterGuiAttached', __assign$k(__assign$k({}, params || {}), {\n      suppressFocus: suppressFocus\n    }));\n    if (suppressFocus) {\n      // reset focus to the top of the container, and blur\n      this.forceFocusOutOfContainer(true);\n    }\n  };\n  MultiFilter.prototype.onAnyFilterChanged = function () {\n    this.executeFunctionIfExists('onAnyFilterChanged');\n  };\n  MultiFilter.prototype.onNewRowsLoaded = function () {\n    this.executeFunctionIfExists('onNewRowsLoaded');\n  };\n  MultiFilter.prototype.destroy = function () {\n    var _this = this;\n    agGridCommunity._.forEach(this.filters, function (filter) {\n      filter.setModel(null);\n      _this.destroyBean(filter);\n    });\n    this.filters.length = 0;\n    this.destroyChildren();\n    _super.prototype.destroy.call(this);\n  };\n  MultiFilter.prototype.executeFunctionIfExists = function (name) {\n    var params = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n      params[_i - 1] = arguments[_i];\n    }\n    // The first filter is always the \"dominant\" one. By iterating in reverse order we ensure the first filter\n    // always gets the last say\n    agGridCommunity._.forEachReverse(this.filters, function (filter) {\n      var func = filter[name];\n      if (typeof func === 'function') {\n        func.apply(filter, params);\n      }\n    });\n  };\n  MultiFilter.prototype.createFilter = function (filterDef, index) {\n    var _this = this;\n    var _a = this.params,\n      filterModifiedCallback = _a.filterModifiedCallback,\n      _doesRowPassOtherFilter = _a.doesRowPassOtherFilter;\n    var filterInstance;\n    var filterParams = __assign$k(__assign$k({}, this.filterManager.createFilterParams(this.column, this.column.getColDef())), {\n      filterModifiedCallback: filterModifiedCallback,\n      filterChangedCallback: function filterChangedCallback() {\n        return _this.filterChanged(index);\n      },\n      doesRowPassOtherFilter: function doesRowPassOtherFilter(node) {\n        return _doesRowPassOtherFilter(node) && _this.doesFilterPass({\n          node: node,\n          data: node.data\n        }, filterInstance);\n      }\n    });\n    var filterPromise = this.userComponentFactory.newFilterComponent(filterDef, filterParams, 'agTextColumnFilter');\n    if (filterPromise != null) {\n      return filterPromise.then(function (filter) {\n        return filterInstance = filter;\n      });\n    }\n    return filterPromise;\n  };\n  MultiFilter.prototype.filterChanged = function (index) {\n    var changedFilter = this.filters[index];\n    agGridCommunity._.removeFromArray(this.activeFilterIndices, index);\n    if (changedFilter.isFilterActive()) {\n      this.activeFilterIndices.push(index);\n    }\n    this.filterChangedCallback();\n    agGridCommunity._.forEach(this.filters, function (filter) {\n      if (filter === changedFilter) {\n        return;\n      }\n      if (typeof filter.onAnyFilterChanged === 'function') {\n        filter.onAnyFilterChanged();\n      }\n    });\n  };\n  MultiFilter.prototype.onFocusIn = function (e) {\n    if (this.lastActivatedMenuItem != null && !this.lastActivatedMenuItem.getGui().contains(e.target)) {\n      this.lastActivatedMenuItem.deactivate();\n      this.lastActivatedMenuItem = null;\n    }\n  };\n  __decorate$1w([agGridCommunity.Autowired('filterManager')], MultiFilter.prototype, \"filterManager\", void 0);\n  __decorate$1w([agGridCommunity.Autowired('userComponentFactory')], MultiFilter.prototype, \"userComponentFactory\", void 0);\n  return MultiFilter;\n}(agGridCommunity.ManagedFocusComponent);\nvar __extends$2D = undefined && undefined.__extends || function () {\n  var _extendStatics168 = function extendStatics(d, b) {\n    _extendStatics168 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics168(d, b);\n  };\n  return function (d, b) {\n    _extendStatics168(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign$l = undefined && undefined.__assign || function () {\n  __assign$l = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign$l.apply(this, arguments);\n};\nvar __decorate$1x = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MultiFloatingFilterComp = /** @class */function (_super) {\n  __extends$2D(MultiFloatingFilterComp, _super);\n  function MultiFloatingFilterComp() {\n    var _this = _super.call(this, /* html */\"<div class=\\\"ag-multi-floating-filter ag-floating-filter-input\\\"></div>\") || this;\n    _this.floatingFilters = [];\n    return _this;\n  }\n  MultiFloatingFilterComp.prototype.init = function (params) {\n    var _this = this;\n    this.params = params;\n    var filterParams = params.filterParams;\n    var floatingFilterPromises = [];\n    agGridCommunity._.forEach(MultiFilter.getFilterDefs(filterParams), function (filterDef, index) {\n      var floatingFilterParams = __assign$l(__assign$l({}, params), {\n        // set the parent filter instance for each floating filter to the relevant child filter instance\n        parentFilterInstance: function parentFilterInstance(callback) {\n          params.parentFilterInstance(function (parent) {\n            var childFilterInstance = parent.getChildFilterInstance(index);\n            callback(childFilterInstance);\n          });\n        }\n      });\n      var floatingFilterPromise = _this.createFloatingFilter(filterDef, floatingFilterParams);\n      if (floatingFilterPromise != null) {\n        floatingFilterPromises.push(floatingFilterPromise);\n      }\n    });\n    return agGridCommunity.Promise.all(floatingFilterPromises).then(function (floatingFilters) {\n      agGridCommunity._.forEach(floatingFilters, function (floatingFilter, index) {\n        _this.floatingFilters.push(floatingFilter);\n        var gui = floatingFilter.getGui();\n        _this.appendChild(gui);\n        if (index > 0) {\n          agGridCommunity._.setDisplayed(gui, false);\n        }\n      });\n    });\n  };\n  MultiFloatingFilterComp.prototype.onParentModelChanged = function (model, event) {\n    var _this = this;\n    // We don't want to update the floating filter if the floating filter caused the change,\n    // because the UI is already in sync. if we didn't do this, the UI would behave strangely\n    // as it would be updating as the user is typing\n    if (event && event.afterFloatingFilter) {\n      return;\n    }\n    this.params.parentFilterInstance(function (parent) {\n      if (model == null) {\n        agGridCommunity._.forEach(_this.floatingFilters, function (filter, i) {\n          filter.onParentModelChanged(null, event);\n          agGridCommunity._.setDisplayed(filter.getGui(), i === 0);\n        });\n      } else {\n        var lastActiveFloatingFilterIndex_1 = parent.getLastActiveFilterIndex();\n        agGridCommunity._.forEach(_this.floatingFilters, function (filter, i) {\n          var filterModel = model.filterModels.length > i ? model.filterModels[i] : null;\n          filter.onParentModelChanged(filterModel, event);\n          var shouldShow = lastActiveFloatingFilterIndex_1 == null ? i === 0 : i === lastActiveFloatingFilterIndex_1;\n          agGridCommunity._.setDisplayed(filter.getGui(), shouldShow);\n        });\n      }\n    });\n  };\n  MultiFloatingFilterComp.prototype.destroy = function () {\n    this.destroyBeans(this.floatingFilters);\n    this.floatingFilters.length = 0;\n    _super.prototype.destroy.call(this);\n  };\n  MultiFloatingFilterComp.prototype.createFloatingFilter = function (filterDef, params) {\n    var defaultComponentName = agGridCommunity.FloatingFilterWrapper.getDefaultFloatingFilterType(filterDef) || 'agTextColumnFloatingFilter';\n    return this.userComponentFactory.newFloatingFilterComponent(filterDef, params, defaultComponentName);\n  };\n  __decorate$1x([agGridCommunity.Autowired('userComponentFactory')], MultiFloatingFilterComp.prototype, \"userComponentFactory\", void 0);\n  return MultiFloatingFilterComp;\n}(agGridCommunity.Component);\nvar MultiFilterModule = {\n  moduleName: agGridCommunity.ModuleNames.MultiFilterModule,\n  beans: [],\n  userComponents: [{\n    componentName: 'agMultiColumnFilter',\n    componentClass: MultiFilter\n  }, {\n    componentName: 'agMultiColumnFloatingFilter',\n    componentClass: MultiFloatingFilterComp\n  }],\n  dependantModules: [EnterpriseCoreModule]\n};\nvar __extends$2E = undefined && undefined.__extends || function () {\n  var _extendStatics169 = function extendStatics(d, b) {\n    _extendStatics169 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics169(d, b);\n  };\n  return function (d, b) {\n    _extendStatics169(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1y = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar RichSelectRow = /** @class */function (_super) {\n  __extends$2E(RichSelectRow, _super);\n  function RichSelectRow(params) {\n    var _this = _super.call(this, /* html */\"<div class=\\\"ag-rich-select-row\\\"></div>\") || this;\n    _this.params = params;\n    return _this;\n  }\n  RichSelectRow.prototype.setState = function (value, valueFormatted, selected) {\n    var rendererSuccessful = this.populateWithRenderer(value, valueFormatted);\n    if (!rendererSuccessful) {\n      this.populateWithoutRenderer(value, valueFormatted);\n    }\n    agGridCommunity._.addOrRemoveCssClass(this.getGui(), 'ag-rich-select-row-selected', selected);\n  };\n  RichSelectRow.prototype.populateWithoutRenderer = function (value, valueFormatted) {\n    var valueFormattedExits = valueFormatted !== null && valueFormatted !== undefined;\n    var valueToRender = valueFormattedExits ? valueFormatted : value;\n    if (agGridCommunity._.exists(valueToRender) && valueToRender !== '') {\n      // not using innerHTML to prevent injection of HTML\n      // https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML#Security_considerations\n      this.getGui().textContent = valueToRender.toString();\n    } else {\n      // putting in blank, so if missing, at least the user can click on it\n      this.getGui().innerHTML = '&nbsp;';\n    }\n  };\n  RichSelectRow.prototype.populateWithRenderer = function (value, valueFormatted) {\n    var _this = this;\n    // bad coder here - we are not populating all values of the cellRendererParams\n    var params = {\n      value: value,\n      valueFormatted: valueFormatted,\n      api: this.gridOptionsWrapper.getApi()\n    };\n    var cellRendererPromise = this.userComponentFactory.newCellRenderer(this.params, params);\n    if (cellRendererPromise != null) {\n      agGridCommunity._.bindCellRendererToHtmlElement(cellRendererPromise, this.getGui());\n    } else {\n      this.getGui().innerText = params.valueFormatted != null ? params.valueFormatted : params.value;\n    }\n    if (cellRendererPromise) {\n      cellRendererPromise.then(function (childComponent) {\n        _this.addDestroyFunc(function () {\n          _this.getContext().destroyBean(childComponent);\n        });\n      });\n      return true;\n    }\n    return false;\n  };\n  __decorate$1y([agGridCommunity.Autowired('userComponentFactory')], RichSelectRow.prototype, \"userComponentFactory\", void 0);\n  __decorate$1y([agGridCommunity.Autowired('gridOptionsWrapper')], RichSelectRow.prototype, \"gridOptionsWrapper\", void 0);\n  return RichSelectRow;\n}(agGridCommunity.Component);\nvar __extends$2F = undefined && undefined.__extends || function () {\n  var _extendStatics170 = function extendStatics(d, b) {\n    _extendStatics170 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics170(d, b);\n  };\n  return function (d, b) {\n    _extendStatics170(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1z = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar RichSelectCellEditor = /** @class */function (_super) {\n  __extends$2F(RichSelectCellEditor, _super);\n  function RichSelectCellEditor() {\n    var _this = _super.call(this, RichSelectCellEditor.TEMPLATE) || this;\n    _this.selectionConfirmed = false;\n    _this.searchString = '';\n    return _this;\n  }\n  RichSelectCellEditor.prototype.init = function (params) {\n    this.params = params;\n    this.selectedValue = params.value;\n    this.originalSelectedValue = params.value;\n    this.focusAfterAttached = params.cellStartedEdit;\n    var icon = agGridCommunity._.createIconNoSpan('smallDown', this.gridOptionsWrapper);\n    agGridCommunity._.addCssClass(icon, 'ag-rich-select-value-icon');\n    this.eValue.appendChild(icon);\n    this.virtualList = this.getContext().createBean(new agGridCommunity.VirtualList('rich-select'));\n    this.virtualList.setComponentCreator(this.createRowComponent.bind(this));\n    this.eList.appendChild(this.virtualList.getGui());\n    if (agGridCommunity._.exists(this.params.cellHeight)) {\n      this.virtualList.setRowHeight(this.params.cellHeight);\n    }\n    this.renderSelectedValue();\n    if (agGridCommunity._.missing(params.values)) {\n      console.warn('ag-Grid: richSelectCellEditor requires values for it to work');\n      return;\n    }\n    var values = params.values;\n    this.virtualList.setModel({\n      getRowCount: function getRowCount() {\n        return values.length;\n      },\n      getRow: function getRow(index) {\n        return values[index];\n      }\n    });\n    this.addGuiEventListener('keydown', this.onKeyDown.bind(this));\n    var virtualListGui = this.virtualList.getGui();\n    this.addManagedListener(virtualListGui, 'click', this.onClick.bind(this));\n    this.addManagedListener(virtualListGui, 'mousemove', this.onMouseMove.bind(this));\n    var debounceDelay = agGridCommunity._.exists(params.searchDebounceDelay) ? params.searchDebounceDelay : 300;\n    this.clearSearchString = agGridCommunity._.debounce(this.clearSearchString, debounceDelay);\n    if (agGridCommunity._.exists(params.charPress)) {\n      this.searchText(params.charPress);\n    }\n  };\n  RichSelectCellEditor.prototype.onKeyDown = function (event) {\n    var key = event.key;\n    switch (key) {\n      case agGridCommunity.KeyName.ENTER:\n        this.onEnterKeyDown();\n        break;\n      case agGridCommunity.KeyName.DOWN:\n      case agGridCommunity.KeyName.UP:\n        this.onNavigationKeyPressed(event, key);\n        break;\n      default:\n        this.searchText(event);\n    }\n  };\n  RichSelectCellEditor.prototype.onEnterKeyDown = function () {\n    this.selectionConfirmed = true;\n    this.params.stopEditing();\n  };\n  RichSelectCellEditor.prototype.onNavigationKeyPressed = function (event, key) {\n    // if we don't preventDefault the page body and/or grid scroll will move.\n    event.preventDefault();\n    var oldIndex = this.params.values.indexOf(this.selectedValue);\n    var newIndex = key === agGridCommunity.KeyName.UP ? oldIndex - 1 : oldIndex + 1;\n    if (newIndex >= 0 && newIndex < this.params.values.length) {\n      var valueToSelect = this.params.values[newIndex];\n      this.setSelectedValue(valueToSelect);\n    }\n  };\n  RichSelectCellEditor.prototype.searchText = function (key) {\n    if (typeof key !== 'string') {\n      var keyName = key.key;\n      if (keyName === agGridCommunity.KeyName.BACKSPACE) {\n        this.searchString = this.searchString.slice(0, -1);\n        keyName = '';\n      } else if (!agGridCommunity._.isEventFromPrintableCharacter(key)) {\n        return;\n      }\n      this.searchText(keyName);\n      return;\n    }\n    this.searchString += key;\n    this.runSearch();\n    this.clearSearchString();\n  };\n  RichSelectCellEditor.prototype.runSearch = function () {\n    var values = this.params.values;\n    var searchStrings;\n    if (typeof values[0] === 'number' || typeof values[0] === 'string') {\n      searchStrings = values.map(String);\n    }\n    if (typeof values[0] === 'object' && this.params.colDef.keyCreator) {\n      searchStrings = values.map(this.params.colDef.keyCreator);\n    }\n    if (!searchStrings) {\n      return;\n    }\n    var topSuggestion = agGridCommunity._.fuzzySuggestions(this.searchString, searchStrings, true, true)[0];\n    if (!topSuggestion) {\n      return;\n    }\n    var topSuggestionIndex = searchStrings.indexOf(topSuggestion);\n    var topValue = values[topSuggestionIndex];\n    this.setSelectedValue(topValue);\n  };\n  RichSelectCellEditor.prototype.clearSearchString = function () {\n    this.searchString = '';\n  };\n  RichSelectCellEditor.prototype.renderSelectedValue = function () {\n    var _this = this;\n    var valueFormatted = this.params.formatValue(this.selectedValue);\n    var eValue = this.eValue;\n    var params = {\n      value: this.selectedValue,\n      valueFormatted: valueFormatted,\n      api: this.gridOptionsWrapper.getApi()\n    };\n    var promise = this.userComponentFactory.newCellRenderer(this.params, params);\n    if (agGridCommunity._.exists(promise)) {\n      agGridCommunity._.bindCellRendererToHtmlElement(promise, eValue);\n      promise.then(function (renderer) {\n        _this.addDestroyFunc(function () {\n          return _this.getContext().destroyBean(renderer);\n        });\n      });\n    } else {\n      if (agGridCommunity._.exists(this.selectedValue)) {\n        eValue.innerHTML = valueFormatted;\n      } else {\n        agGridCommunity._.clearElement(eValue);\n      }\n    }\n  };\n  RichSelectCellEditor.prototype.setSelectedValue = function (value) {\n    if (this.selectedValue === value) {\n      return;\n    }\n    var index = this.params.values.indexOf(value);\n    if (index === -1) {\n      return;\n    }\n    this.selectedValue = value;\n    this.virtualList.ensureIndexVisible(index);\n    this.virtualList.refresh();\n  };\n  RichSelectCellEditor.prototype.createRowComponent = function (value) {\n    var valueFormatted = this.params.formatValue(value);\n    var row = new RichSelectRow(this.params);\n    this.getContext().createBean(row);\n    row.setState(value, valueFormatted, value === this.selectedValue);\n    return row;\n  };\n  RichSelectCellEditor.prototype.onMouseMove = function (mouseEvent) {\n    var rect = this.virtualList.getGui().getBoundingClientRect();\n    var scrollTop = this.virtualList.getScrollTop();\n    var mouseY = mouseEvent.clientY - rect.top + scrollTop;\n    var row = Math.floor(mouseY / this.virtualList.getRowHeight());\n    var value = this.params.values[row];\n    // not using utils.exist() as want empty string test to pass\n    if (value !== undefined) {\n      this.setSelectedValue(value);\n    }\n  };\n  RichSelectCellEditor.prototype.onClick = function () {\n    this.selectionConfirmed = true;\n    this.params.stopEditing();\n  };\n  // we need to have the gui attached before we can draw the virtual rows, as the\n  // virtual row logic needs info about the gui state\n  RichSelectCellEditor.prototype.afterGuiAttached = function () {\n    var selectedIndex = this.params.values.indexOf(this.selectedValue);\n    // we have to call this here to get the list to have the right height, ie\n    // otherwise it would not have scrolls yet and ensureIndexVisible would do nothing\n    this.virtualList.refresh();\n    if (selectedIndex >= 0) {\n      this.virtualList.ensureIndexVisible(selectedIndex);\n    }\n    // we call refresh again, as the list could of moved, and we need to render the new rows\n    this.virtualList.refresh();\n    if (this.focusAfterAttached) {\n      this.getGui().focus();\n    }\n  };\n  RichSelectCellEditor.prototype.getValue = function () {\n    // NOTE: we don't use valueParser for Set Filter. The user should provide values that are to be\n    // set into the data. valueParser only really makese sense when the user is typing in text (not picking\n    // form a set).\n    return this.selectionConfirmed ? this.selectedValue : this.originalSelectedValue;\n  };\n  // tab index is needed so we can focus, which is needed for keyboard events\n  RichSelectCellEditor.TEMPLATE = \"<div class=\\\"ag-rich-select\\\" tabindex=\\\"-1\\\">\\n            <div ref=\\\"eValue\\\" class=\\\"ag-rich-select-value\\\"></div>\\n            <div ref=\\\"eList\\\" class=\\\"ag-rich-select-list\\\"></div>\\n        </div>\";\n  __decorate$1z([agGridCommunity.Autowired('userComponentFactory')], RichSelectCellEditor.prototype, \"userComponentFactory\", void 0);\n  __decorate$1z([agGridCommunity.Autowired('gridOptionsWrapper')], RichSelectCellEditor.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1z([agGridCommunity.RefSelector('eValue')], RichSelectCellEditor.prototype, \"eValue\", void 0);\n  __decorate$1z([agGridCommunity.RefSelector('eList')], RichSelectCellEditor.prototype, \"eList\", void 0);\n  return RichSelectCellEditor;\n}(agGridCommunity.PopupComponent);\nvar RichSelectModule = {\n  moduleName: agGridCommunity.ModuleNames.RichSelectModule,\n  beans: [],\n  userComponents: [{\n    componentName: 'agRichSelect',\n    componentClass: RichSelectCellEditor\n  }, {\n    componentName: 'agRichSelectCellEditor',\n    componentClass: RichSelectCellEditor\n  }],\n  dependantModules: [EnterpriseCoreModule]\n};\nvar __extends$2G = undefined && undefined.__extends || function () {\n  var _extendStatics171 = function extendStatics(d, b) {\n    _extendStatics171 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics171(d, b);\n  };\n  return function (d, b) {\n    _extendStatics171(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1A = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = undefined && undefined.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar ServerSideBlock = /** @class */function (_super) {\n  __extends$2G(ServerSideBlock, _super);\n  function ServerSideBlock(pageNumber, parentRowNode, params, parentCache) {\n    var _this = _super.call(this, pageNumber, params) || this;\n    _this.params = params;\n    _this.parentRowNode = parentRowNode;\n    _this.parentCache = parentCache;\n    _this.level = parentRowNode.level + 1;\n    _this.groupLevel = params.rowGroupCols ? _this.level < params.rowGroupCols.length : undefined;\n    _this.leafGroup = params.rowGroupCols ? _this.level === params.rowGroupCols.length - 1 : false;\n    return _this;\n  }\n  // no need for @postConstruct, as attached to parent\n  ServerSideBlock.prototype.init = function () {\n    this.usingTreeData = this.gridOptionsWrapper.isTreeData();\n    this.usingMasterDetail = this.gridOptionsWrapper.isMasterDetail();\n    if (!this.usingTreeData && this.groupLevel) {\n      var groupColVo = this.params.rowGroupCols[this.level];\n      this.groupField = groupColVo.field;\n      this.rowGroupColumn = this.columnController.getRowGroupColumns()[this.level];\n    }\n    this.createNodeIdPrefix();\n    _super.prototype.init.call(this);\n  };\n  ServerSideBlock.prototype.setBeans = function (loggerFactory) {\n    this.logger = loggerFactory.create('ServerSideBlock');\n  };\n  ServerSideBlock.prototype.createNodeIdPrefix = function () {\n    var parts = [];\n    var rowNode = this.parentRowNode;\n    // pull keys from all parent nodes, but do not include the root node\n    while (rowNode && rowNode.level >= 0) {\n      parts.push(rowNode.key);\n      rowNode = rowNode.parent;\n    }\n    if (parts.length > 0) {\n      this.nodeIdPrefix = parts.reverse().join('-') + '-';\n    }\n  };\n  ServerSideBlock.prototype.createIdForIndex = function (index) {\n    if (agGridCommunity._.exists(this.nodeIdPrefix)) {\n      return this.nodeIdPrefix + index.toString();\n    } else {\n      return index.toString();\n    }\n  };\n  ServerSideBlock.prototype.getNodeIdPrefix = function () {\n    return this.nodeIdPrefix;\n  };\n  ServerSideBlock.prototype.getRow = function (displayRowIndex) {\n    var bottomPointer = this.getStartRow();\n    // the end row depends on whether all this block is used or not. if the virtual row count\n    // is before the end, then not all the row is used\n    var virtualRowCount = this.parentCache.getVirtualRowCount();\n    var endRow = this.getEndRow();\n    var actualEnd = virtualRowCount < endRow ? virtualRowCount : endRow;\n    var topPointer = actualEnd - 1;\n    if (agGridCommunity._.missing(topPointer) || agGridCommunity._.missing(bottomPointer)) {\n      console.warn(\"ag-grid: error: topPointer = \" + topPointer + \", bottomPointer = \" + bottomPointer);\n      return null;\n    }\n    while (true) {\n      var midPointer = Math.floor((bottomPointer + topPointer) / 2);\n      var currentRowNode = _super.prototype.getRowUsingLocalIndex.call(this, midPointer);\n      // first check current row for index\n      if (currentRowNode.rowIndex === displayRowIndex) {\n        return currentRowNode;\n      }\n      // then check if current row contains a detail row with the index\n      var expandedMasterRow = currentRowNode.master && currentRowNode.expanded;\n      if (expandedMasterRow && currentRowNode.detailNode.rowIndex === displayRowIndex) {\n        return currentRowNode.detailNode;\n      }\n      // then check if child cache contains index\n      var childrenCache = currentRowNode.childrenCache;\n      if (currentRowNode.expanded && childrenCache && childrenCache.isDisplayIndexInCache(displayRowIndex)) {\n        return childrenCache.getRow(displayRowIndex);\n      }\n      // otherwise adjust pointers to continue searching for index\n      if (currentRowNode.rowIndex < displayRowIndex) {\n        bottomPointer = midPointer + 1;\n      } else if (currentRowNode.rowIndex > displayRowIndex) {\n        topPointer = midPointer - 1;\n      } else {\n        console.warn(\"ag-Grid: error: unable to locate rowIndex = \" + displayRowIndex + \" in cache\");\n        return null;\n      }\n    }\n  };\n  ServerSideBlock.prototype.setDataAndId = function (rowNode, data, index) {\n    var _this = this;\n    rowNode.stub = false;\n    if (agGridCommunity._.exists(data)) {\n      // if the user is not providing id's, then we build an id based on the index.\n      // for infinite scrolling, the index is used on it's own. for Server Side Row Model,\n      // we combine the index with the level and group key, so that the id is\n      // unique across the set.\n      //\n      // unique id is needed for selection (so selection can be maintained when\n      // doing server side sorting / filtering) - if user is not providing id's\n      // (and we use the indexes) then selection will not work between sorting &\n      // filtering.\n      //\n      // id's are also used by the row renderer for updating the dom as it identifies\n      // rowNodes by id\n      var idToUse = this.createIdForIndex(index);\n      rowNode.setDataAndId(data, idToUse);\n      if (this.usingTreeData) {\n        var getServerSideGroupKey = this.gridOptionsWrapper.getServerSideGroupKeyFunc();\n        if (agGridCommunity._.exists(getServerSideGroupKey) && getServerSideGroupKey) {\n          rowNode.key = getServerSideGroupKey(rowNode.data);\n        }\n        var isServerSideGroup = this.gridOptionsWrapper.getIsServerSideGroupFunc();\n        if (agGridCommunity._.exists(isServerSideGroup) && isServerSideGroup) {\n          rowNode.group = isServerSideGroup(rowNode.data);\n        }\n      } else if (rowNode.group) {\n        rowNode.key = this.valueService.getValue(this.rowGroupColumn, rowNode);\n        if (rowNode.key === null || rowNode.key === undefined) {\n          agGridCommunity._.doOnce(function () {\n            console.warn(\"null and undefined values are not allowed for server side row model keys\");\n            if (_this.rowGroupColumn) {\n              console.warn(\"column = \" + _this.rowGroupColumn.getId());\n            }\n            console.warn(\"data is \", rowNode.data);\n          }, 'ServerSideBlock-CannotHaveNullOrUndefinedForKey');\n        }\n      } else if (this.usingMasterDetail) {\n        var isRowMasterFunc = this.gridOptionsWrapper.getIsRowMasterFunc();\n        if (agGridCommunity._.exists(isRowMasterFunc) && isRowMasterFunc) {\n          rowNode.master = isRowMasterFunc(rowNode.data);\n        } else {\n          rowNode.master = true;\n        }\n      }\n    } else {\n      rowNode.setDataAndId(undefined, undefined);\n      rowNode.key = null;\n    }\n    if (this.usingTreeData || this.groupLevel) {\n      this.setGroupDataIntoRowNode(rowNode);\n      this.setChildCountIntoRowNode(rowNode);\n    }\n    // this needs to be done AFTER setGroupDataIntoRowNode(), as the height can depend on the group data\n    // getting set, if it's a group node and colDef.autoHeight=true\n    if (agGridCommunity._.exists(data)) {\n      rowNode.setRowHeight(this.gridOptionsWrapper.getRowHeightForNode(rowNode).height);\n    }\n  };\n  ServerSideBlock.prototype.setChildCountIntoRowNode = function (rowNode) {\n    var getChildCount = this.gridOptionsWrapper.getChildCountFunc();\n    if (getChildCount) {\n      rowNode.allChildrenCount = getChildCount(rowNode.data);\n    }\n  };\n  ServerSideBlock.prototype.setGroupDataIntoRowNode = function (rowNode) {\n    var _this = this;\n    var groupDisplayCols = this.columnController.getGroupDisplayColumns();\n    var usingTreeData = this.gridOptionsWrapper.isTreeData();\n    groupDisplayCols.forEach(function (col) {\n      if (usingTreeData) {\n        if (agGridCommunity._.missing(rowNode.groupData)) {\n          rowNode.groupData = {};\n        }\n        rowNode.groupData[col.getColId()] = rowNode.key;\n      } else if (col.isRowGroupDisplayed(_this.rowGroupColumn.getId())) {\n        var groupValue = _this.valueService.getValue(_this.rowGroupColumn, rowNode);\n        if (agGridCommunity._.missing(rowNode.groupData)) {\n          rowNode.groupData = {};\n        }\n        rowNode.groupData[col.getColId()] = groupValue;\n      }\n    });\n  };\n  ServerSideBlock.prototype.loadFromDatasource = function () {\n    var _this = this;\n    var params = this.createLoadParams();\n    window.setTimeout(function () {\n      if (_this.params.datasource) {\n        _this.params.datasource.getRows(params);\n      }\n    }, 0);\n  };\n  ServerSideBlock.prototype.createBlankRowNode = function (rowIndex) {\n    var rowNode = _super.prototype.createBlankRowNode.call(this, rowIndex);\n    rowNode.group = this.groupLevel;\n    rowNode.leafGroup = this.leafGroup;\n    rowNode.level = this.level;\n    rowNode.uiLevel = this.level;\n    rowNode.parent = this.parentRowNode;\n    // stub gets set to true here, and then false when this rowNode gets it's data\n    rowNode.stub = true;\n    if (rowNode.group) {\n      rowNode.expanded = false;\n      rowNode.field = this.groupField;\n      rowNode.rowGroupColumn = this.rowGroupColumn;\n    }\n    return rowNode;\n  };\n  ServerSideBlock.prototype.createGroupKeys = function (groupNode) {\n    var keys = [];\n    var pointer = groupNode;\n    while (pointer && pointer.level >= 0) {\n      keys.push(pointer.key);\n      pointer = pointer.parent;\n    }\n    keys.reverse();\n    return keys;\n  };\n  ServerSideBlock.prototype.isPixelInRange = function (pixel) {\n    return pixel >= this.blockTop && pixel < this.blockTop + this.blockHeight;\n  };\n  ServerSideBlock.prototype.getRowBounds = function (index, virtualRowCount) {\n    var start = this.getStartRow();\n    var end = this.getEndRow();\n    var extractRowBounds = function extractRowBounds(rowNode) {\n      return {\n        rowHeight: rowNode.rowHeight,\n        rowTop: rowNode.rowTop\n      };\n    };\n    for (var i = start; i <= end; i++) {\n      // the blocks can have extra rows in them, if they are the last block\n      // in the cache and the virtual row count doesn't divide evenly by the\n      if (i >= virtualRowCount) {\n        continue;\n      }\n      var rowNode = this.getRowUsingLocalIndex(i);\n      if (rowNode) {\n        if (rowNode.rowIndex === index) {\n          return extractRowBounds(rowNode);\n        }\n        if (rowNode.group && rowNode.expanded && agGridCommunity._.exists(rowNode.childrenCache)) {\n          var serverSideCache = rowNode.childrenCache;\n          if (serverSideCache.isDisplayIndexInCache(index)) {\n            return serverSideCache.getRowBounds(index);\n          }\n        } else if (rowNode.master && rowNode.expanded && agGridCommunity._.exists(rowNode.detailNode)) {\n          if (rowNode.detailNode.rowIndex === index) {\n            return extractRowBounds(rowNode.detailNode);\n          }\n        }\n      }\n    }\n    console.error(\" ag-Grid: looking for invalid row index in Server Side Row Model, index=\" + index);\n    return null;\n  };\n  ServerSideBlock.prototype.getRowIndexAtPixel = function (pixel, virtualRowCount) {\n    var start = this.getStartRow();\n    var end = this.getEndRow();\n    for (var i = start; i <= end; i++) {\n      // the blocks can have extra rows in them, if they are the last block\n      // in the cache and the virtual row count doesn't divide evenly by the\n      if (i >= virtualRowCount) {\n        continue;\n      }\n      var rowNode = this.getRowUsingLocalIndex(i);\n      if (rowNode) {\n        // first check if pixel is in range of current row\n        if (rowNode.isPixelInRange(pixel)) {\n          return rowNode.rowIndex;\n        }\n        // then check if current row contains a detail row with pixel in range\n        var expandedMasterRow = rowNode.master && rowNode.expanded;\n        if (expandedMasterRow && rowNode.detailNode.isPixelInRange(pixel)) {\n          return rowNode.detailNode.rowIndex;\n        }\n        // then check if it's a group row with a child cache with pixel in range\n        if (rowNode.group && rowNode.expanded && agGridCommunity._.exists(rowNode.childrenCache)) {\n          var serverSideCache = rowNode.childrenCache;\n          if (serverSideCache.isPixelInRange(pixel)) {\n            return serverSideCache.getRowIndexAtPixel(pixel);\n          }\n        }\n      }\n    }\n    console.warn(\"ag-Grid: invalid pixel range for server side block \" + pixel);\n    return 0;\n  };\n  ServerSideBlock.prototype.clearDisplayIndexes = function (virtualRowCount) {\n    this.displayIndexEnd = undefined;\n    this.displayIndexStart = undefined;\n    this.forEachRowNode(virtualRowCount, function (rowNode) {\n      rowNode.clearRowTop();\n      rowNode.setRowIndex(undefined);\n      var hasChildCache = rowNode.group && agGridCommunity._.exists(rowNode.childrenCache);\n      if (hasChildCache) {\n        var serverSideCache = rowNode.childrenCache;\n        serverSideCache.clearDisplayIndexes();\n      }\n      var hasDetailNode = rowNode.master && rowNode.detailNode;\n      if (hasDetailNode) {\n        rowNode.detailNode.clearRowTop();\n        rowNode.detailNode.setRowIndex(undefined);\n      }\n    });\n  };\n  ServerSideBlock.prototype.setDisplayIndexes = function (displayIndexSeq, virtualRowCount, nextRowTop) {\n    this.displayIndexStart = displayIndexSeq.peek();\n    this.blockTop = nextRowTop.value;\n    this.forEachRowNode(virtualRowCount, function (rowNode) {\n      // set this row\n      rowNode.setRowIndex(displayIndexSeq.next());\n      rowNode.setRowTop(nextRowTop.value);\n      nextRowTop.value += rowNode.rowHeight;\n      // set child for master / detail\n      var hasDetailRow = rowNode.master;\n      if (hasDetailRow) {\n        if (rowNode.expanded && rowNode.detailNode) {\n          rowNode.detailNode.setRowIndex(displayIndexSeq.next());\n          rowNode.detailNode.setRowTop(nextRowTop.value);\n          nextRowTop.value += rowNode.detailNode.rowHeight;\n        } else if (rowNode.detailNode) {\n          rowNode.detailNode.clearRowTop();\n          rowNode.detailNode.setRowIndex(undefined);\n        }\n      }\n      // set children for SSRM child rows\n      var hasChildCache = rowNode.group && agGridCommunity._.exists(rowNode.childrenCache);\n      if (hasChildCache) {\n        var serverSideCache = rowNode.childrenCache;\n        if (rowNode.expanded) {\n          serverSideCache.setDisplayIndexes(displayIndexSeq, nextRowTop);\n        } else {\n          // we need to clear the row tops, as the row renderer depends on\n          // this to know if the row should be faded out\n          serverSideCache.clearDisplayIndexes();\n        }\n      }\n    });\n    this.displayIndexEnd = displayIndexSeq.peek();\n    this.blockHeight = nextRowTop.value - this.blockTop;\n  };\n  ServerSideBlock.prototype.forEachRowNode = function (virtualRowCount, callback) {\n    var start = this.getStartRow();\n    var end = this.getEndRow();\n    for (var i = start; i <= end; i++) {\n      // the blocks can have extra rows in them, if they are the last block\n      // in the cache and the virtual row count doesn't divide evenly by the\n      if (i >= virtualRowCount) {\n        continue;\n      }\n      var rowNode = this.getRowUsingLocalIndex(i);\n      if (rowNode) {\n        callback(rowNode);\n      }\n    }\n  };\n  ServerSideBlock.prototype.createLoadParams = function () {\n    var groupKeys = this.createGroupKeys(this.parentRowNode);\n    var request = {\n      startRow: this.getStartRow(),\n      endRow: this.getEndRow(),\n      rowGroupCols: this.params.rowGroupCols,\n      valueCols: this.params.valueCols,\n      pivotCols: this.params.pivotCols,\n      pivotMode: this.params.pivotMode,\n      groupKeys: groupKeys,\n      filterModel: this.params.filterModel,\n      sortModel: this.params.sortModel\n    };\n    var params = {\n      successCallback: this.pageLoaded.bind(this, this.getVersion()),\n      failCallback: this.pageLoadFailed.bind(this),\n      request: request,\n      parentNode: this.parentRowNode,\n      api: this.gridApi,\n      columnApi: this.columnApi\n    };\n    return params;\n  };\n  ServerSideBlock.prototype.isDisplayIndexInBlock = function (displayIndex) {\n    return displayIndex >= this.displayIndexStart && displayIndex < this.displayIndexEnd;\n  };\n  ServerSideBlock.prototype.isBlockBefore = function (displayIndex) {\n    return displayIndex >= this.displayIndexEnd;\n  };\n  ServerSideBlock.prototype.getDisplayIndexStart = function () {\n    return this.displayIndexStart;\n  };\n  ServerSideBlock.prototype.getDisplayIndexEnd = function () {\n    return this.displayIndexEnd;\n  };\n  ServerSideBlock.prototype.getBlockHeight = function () {\n    return this.blockHeight;\n  };\n  ServerSideBlock.prototype.getBlockTop = function () {\n    return this.blockTop;\n  };\n  ServerSideBlock.prototype.isGroupLevel = function () {\n    return this.groupLevel;\n  };\n  ServerSideBlock.prototype.getGroupField = function () {\n    return this.groupField;\n  };\n  ServerSideBlock.DefaultBlockSize = 100;\n  __decorate$1A([agGridCommunity.Autowired('columnController')], ServerSideBlock.prototype, \"columnController\", void 0);\n  __decorate$1A([agGridCommunity.Autowired('valueService')], ServerSideBlock.prototype, \"valueService\", void 0);\n  __decorate$1A([agGridCommunity.Autowired('gridOptionsWrapper')], ServerSideBlock.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1A([agGridCommunity.Autowired('columnApi')], ServerSideBlock.prototype, \"columnApi\", void 0);\n  __decorate$1A([agGridCommunity.Autowired('gridApi')], ServerSideBlock.prototype, \"gridApi\", void 0);\n  __decorate$1A([__param(0, agGridCommunity.Qualifier('loggerFactory'))], ServerSideBlock.prototype, \"setBeans\", null);\n  return ServerSideBlock;\n}(agGridCommunity.RowNodeBlock);\nvar __extends$2H = undefined && undefined.__extends || function () {\n  var _extendStatics172 = function extendStatics(d, b) {\n    _extendStatics172 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics172(d, b);\n  };\n  return function (d, b) {\n    _extendStatics172(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1B = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param$1 = undefined && undefined.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar ServerSideCache = /** @class */function (_super) {\n  __extends$2H(ServerSideCache, _super);\n  function ServerSideCache(cacheParams, parentRowNode) {\n    var _this = _super.call(this, cacheParams) || this;\n    // this will always be zero for the top level cache only,\n    // all the other ones change as the groups open and close\n    _this.displayIndexStart = 0;\n    _this.displayIndexEnd = 0; // not sure if setting this one to zero is necessary\n    _this.cacheTop = 0;\n    _this.blockHeights = {};\n    _this.parentRowNode = parentRowNode;\n    return _this;\n  }\n  ServerSideCache.prototype.setBeans = function (loggerFactory) {\n    this.logger = loggerFactory.create('ServerSideCache');\n  };\n  ServerSideCache.prototype.getRowBounds = function (index) {\n    // this.logger.log(`getRowBounds(${index})`);\n    var _this = this;\n    // we return null if row not found\n    // note - cast to \"any\" due to https://github.com/Microsoft/TypeScript/issues/11498\n    // should be RowBounds\n    var result;\n    var blockFound = false;\n    // note - cast to \"any\" due to https://github.com/Microsoft/TypeScript/issues/11498\n    // should be ServerSideBlock\n    var lastBlock = null;\n    this.forEachBlockInOrder(function (block) {\n      if (blockFound) {\n        return;\n      }\n      if (block.isDisplayIndexInBlock(index)) {\n        result = block.getRowBounds(index, _this.getVirtualRowCount());\n        blockFound = true;\n      } else if (block.isBlockBefore(index)) {\n        lastBlock = block;\n      }\n    });\n    if (!blockFound) {\n      var nextRowTop = void 0;\n      var nextRowIndex = void 0;\n      if (lastBlock !== null) {\n        nextRowTop = lastBlock.getBlockTop() + lastBlock.getBlockHeight();\n        nextRowIndex = lastBlock.getDisplayIndexEnd();\n      } else {\n        nextRowTop = this.cacheTop;\n        nextRowIndex = this.displayIndexStart;\n      }\n      var rowsBetween = index - nextRowIndex;\n      result = {\n        rowHeight: this.cacheParams.rowHeight,\n        rowTop: nextRowTop + rowsBetween * this.cacheParams.rowHeight\n      };\n    }\n    // NOTE: what about purged blocks\n    // this.logger.log(`getRowBounds(${index}), result = ${result}`);\n    return result;\n  };\n  ServerSideCache.prototype.destroyBlock = function (block) {\n    _super.prototype.destroyBlock.call(this, block);\n  };\n  ServerSideCache.prototype.getRowIndexAtPixel = function (pixel) {\n    // this.logger.log(`getRowIndexAtPixel(${pixel})`);\n    var _this = this;\n    // we return null if row not found\n    // note - cast to \"any\" due to https://github.com/Microsoft/TypeScript/issues/11498\n    // should be number\n    var result;\n    var blockFound = false;\n    // note - cast to \"any\" due to https://github.com/Microsoft/TypeScript/issues/11498\n    // should be ServerSideBlock\n    var lastBlock;\n    this.forEachBlockInOrder(function (block) {\n      if (blockFound) {\n        return;\n      }\n      if (block.isPixelInRange(pixel)) {\n        result = block.getRowIndexAtPixel(pixel, _this.getVirtualRowCount());\n        blockFound = true;\n      } else if (block.getBlockTop() < pixel) {\n        lastBlock = block;\n      }\n    });\n    if (!blockFound) {\n      var nextRowTop = void 0;\n      var nextRowIndex = void 0;\n      if (lastBlock) {\n        nextRowTop = lastBlock.getBlockTop() + lastBlock.getBlockHeight();\n        nextRowIndex = lastBlock.getDisplayIndexEnd();\n      } else {\n        nextRowTop = this.cacheTop;\n        nextRowIndex = this.displayIndexStart;\n      }\n      var pixelsBetween = pixel - nextRowTop;\n      var rowsBetween = pixelsBetween / this.cacheParams.rowHeight | 0;\n      result = nextRowIndex + rowsBetween;\n    }\n    var lastAllowedIndex = this.getDisplayIndexEnd() - 1;\n    if (result > lastAllowedIndex) {\n      result = lastAllowedIndex;\n    }\n    //NOTE: purged\n    // this.logger.log(`getRowIndexAtPixel(${pixel}) result = ${result}`);\n    return result;\n  };\n  ServerSideCache.prototype.clearDisplayIndexes = function () {\n    var _this = this;\n    this.displayIndexStart = undefined;\n    this.displayIndexEnd = undefined;\n    this.forEachBlockInOrder(function (block) {\n      return block.clearDisplayIndexes(_this.getVirtualRowCount());\n    });\n  };\n  ServerSideCache.prototype.setDisplayIndexes = function (displayIndexSeq, nextRowTop) {\n    var _this = this;\n    this.displayIndexStart = displayIndexSeq.peek();\n    this.cacheTop = nextRowTop.value;\n    var lastBlockId = -1;\n    var blockSize = this.getBlockSize();\n    this.forEachBlockInOrder(function (currentBlock, blockId) {\n      // if we skipped blocks, then we need to skip the row indexes. we assume that all missing\n      // blocks are made up of closed RowNodes only (if they were groups), as we never expire from\n      // the cache if any row nodes are open.\n      var blocksSkippedCount = blockId - lastBlockId - 1;\n      var rowsSkippedCount = blocksSkippedCount * blockSize;\n      if (rowsSkippedCount > 0) {\n        displayIndexSeq.skip(rowsSkippedCount);\n      }\n      for (var i = 1; i <= blocksSkippedCount; i++) {\n        var blockToAddId = blockId - i;\n        if (agGridCommunity._.exists(_this.blockHeights[blockToAddId])) {\n          nextRowTop.value += _this.blockHeights[blockToAddId];\n        } else {\n          nextRowTop.value += blockSize * _this.cacheParams.rowHeight;\n        }\n      }\n      lastBlockId = blockId;\n      currentBlock.setDisplayIndexes(displayIndexSeq, _this.getVirtualRowCount(), nextRowTop);\n      _this.blockHeights[blockId] = currentBlock.getBlockHeight();\n    });\n    // if any blocks missing at the end, need to increase the row index for them also\n    // eg if block size = 10, we have total rows of 25 (indexes 0 .. 24), but first 2 blocks loaded (because\n    // last row was ejected from cache), then:\n    // lastVisitedRow = 19, virtualRowCount = 25, rows not accounted for = 5 (24 - 19)\n    var lastVisitedRow = (lastBlockId + 1) * blockSize - 1;\n    var rowCount = this.getVirtualRowCount();\n    var rowsNotAccountedFor = rowCount - lastVisitedRow - 1;\n    if (rowsNotAccountedFor > 0) {\n      displayIndexSeq.skip(rowsNotAccountedFor);\n      nextRowTop.value += rowsNotAccountedFor * this.cacheParams.rowHeight;\n    }\n    this.displayIndexEnd = displayIndexSeq.peek();\n    this.cacheHeight = nextRowTop.value - this.cacheTop;\n  };\n  // gets called in a) init() above and b) by the grid\n  ServerSideCache.prototype.getRow = function (displayRowIndex, dontCreateBlock) {\n    if (dontCreateBlock === void 0) {\n      dontCreateBlock = false;\n    }\n    // this can happen if asking for a row that doesn't exist in the model,\n    // eg if a cell range is selected, and the user filters so rows no longer\n    // exist\n    if (!this.isDisplayIndexInCache(displayRowIndex)) {\n      return null;\n    }\n    // if we have the block, then this is the block\n    var block = null;\n    // this is the last block that we have BEFORE the right block\n    // note - cast to \"any\" due to https://github.com/Microsoft/TypeScript/issues/11498\n    // should be ServerSideBlock\n    var beforeBlock = null;\n    this.forEachBlockInOrder(function (currentBlock) {\n      if (currentBlock.isDisplayIndexInBlock(displayRowIndex)) {\n        block = currentBlock;\n      } else if (currentBlock.isBlockBefore(displayRowIndex)) {\n        // this will get assigned many times, but the last time will\n        // be the closest block to the required block that is BEFORE\n        beforeBlock = currentBlock;\n      }\n    });\n    // when we are moving rows around, we don't want to trigger loads\n    if (agGridCommunity._.missing(block) && dontCreateBlock) {\n      return null;\n    }\n    var blockSize = this.getBlockSize();\n    // if block not found, we need to load it\n    if (agGridCommunity._.missing(block)) {\n      var blockNumber = void 0;\n      var displayIndexStart_1;\n      var nextRowTop = void 0;\n      // because missing blocks are always fully closed, we can work out\n      // the start index of the block we want by hopping from the closest block,\n      // as we know the row count in closed blocks is equal to the page size\n      if (beforeBlock) {\n        blockNumber = beforeBlock.getBlockNumber() + 1;\n        displayIndexStart_1 = beforeBlock.getDisplayIndexEnd();\n        nextRowTop = beforeBlock.getBlockHeight() + beforeBlock.getBlockTop();\n        var isInRange = function isInRange() {\n          return displayRowIndex >= displayIndexStart_1 && displayRowIndex < displayIndexStart_1 + blockSize;\n        };\n        while (!isInRange()) {\n          displayIndexStart_1 += blockSize;\n          var cachedBlockHeight = this.blockHeights[blockNumber];\n          if (agGridCommunity._.exists(cachedBlockHeight)) {\n            nextRowTop += cachedBlockHeight;\n          } else {\n            nextRowTop += this.cacheParams.rowHeight * blockSize;\n          }\n          blockNumber++;\n        }\n      } else {\n        var localIndex = displayRowIndex - this.displayIndexStart;\n        blockNumber = Math.floor(localIndex / blockSize);\n        displayIndexStart_1 = this.displayIndexStart + blockNumber * blockSize;\n        nextRowTop = this.cacheTop + blockNumber * blockSize * this.cacheParams.rowHeight;\n      }\n      block = this.createBlock(blockNumber, displayIndexStart_1, {\n        value: nextRowTop\n      });\n      this.logger.log(\"block missing, rowIndex = \" + displayRowIndex + \", creating #\" + blockNumber + \", displayIndexStart = \" + displayIndexStart_1);\n    }\n    return block ? block.getRow(displayRowIndex) : null;\n  };\n  ServerSideCache.prototype.getBlockSize = function () {\n    return this.cacheParams.blockSize ? this.cacheParams.blockSize : ServerSideBlock.DefaultBlockSize;\n  };\n  ServerSideCache.prototype.getTopLevelRowDisplayedIndex = function (topLevelIndex) {\n    var blockSize = this.getBlockSize();\n    var blockId = Math.floor(topLevelIndex / blockSize);\n    var block = this.getBlock(blockId);\n    if (block) {\n      // if we found a block, means row is in memory, so we can report the row index directly\n      var rowNode = block.getRowUsingLocalIndex(topLevelIndex, true);\n      return rowNode.rowIndex;\n    } else {\n      // otherwise we need to calculate it from the previous block\n      var blockBefore_1;\n      this.forEachBlockInOrder(function (currentBlock, currentId) {\n        if (blockId > currentId) {\n          // this will get assigned many times, but the last time will\n          // be the closest block to the required block that is BEFORE\n          blockBefore_1 = currentBlock;\n        }\n      });\n      if (blockBefore_1) {\n        // note: the local index is the same as the top level index, two terms for same thing\n        //\n        // get index of the last row before this row\n        // eg if blocksize = 100, then:\n        //   last row of first block is 99 (100 * 1) -1;\n        //   last row of second block is 199 (100 * 2) -1;\n        var lastRowTopLevelIndex = blockSize * (blockBefore_1.getBlockNumber() + 1) - 1;\n        // get the last top level node in the block before the wanted block. this will be the last\n        // loaded displayed top level node.\n        var lastRowNode = blockBefore_1.getRowUsingLocalIndex(lastRowTopLevelIndex, true);\n        // we want the index of the last displayed node, not just the top level node, so if the last top level node\n        // is open, we get the index of the last displayed child node.\n        var lastDisplayedNodeIndexInBlockBefore = void 0;\n        if (lastRowNode.expanded && lastRowNode.childrenCache) {\n          var serverSideCache = lastRowNode.childrenCache;\n          lastDisplayedNodeIndexInBlockBefore = serverSideCache.getDisplayIndexEnd() - 1;\n        } else if (lastRowNode.expanded && lastRowNode.detailNode) {\n          lastDisplayedNodeIndexInBlockBefore = lastRowNode.detailNode.rowIndex;\n        } else {\n          lastDisplayedNodeIndexInBlockBefore = lastRowNode.rowIndex;\n        }\n        // we are guaranteed no rows are open. so the difference between the topTopIndex will be the\n        // same as the difference between the displayed index\n        var indexDiff = topLevelIndex - lastRowTopLevelIndex;\n        return lastDisplayedNodeIndexInBlockBefore + indexDiff;\n      } else {\n        return topLevelIndex;\n      }\n    }\n  };\n  ServerSideCache.prototype.createBlock = function (blockNumber, displayIndex, nextRowTop) {\n    var newBlock = new ServerSideBlock(blockNumber, this.parentRowNode, this.cacheParams, this);\n    this.createBean(newBlock);\n    var displayIndexSequence = new agGridCommunity.NumberSequence(displayIndex);\n    newBlock.setDisplayIndexes(displayIndexSequence, this.getVirtualRowCount(), nextRowTop);\n    this.postCreateBlock(newBlock);\n    return newBlock;\n  };\n  ServerSideCache.prototype.getDisplayIndexEnd = function () {\n    return this.displayIndexEnd;\n  };\n  ServerSideCache.prototype.isDisplayIndexInCache = function (displayIndex) {\n    if (this.getVirtualRowCount() === 0) {\n      return false;\n    }\n    return displayIndex >= this.displayIndexStart && displayIndex < this.displayIndexEnd;\n  };\n  ServerSideCache.prototype.applyTransaction = function (rowDataTransaction) {\n    // if (this.isMaxRowFound() || this.getBlock()) {\n    //     return null;\n    // }\n    var res = {\n      add: [],\n      remove: [],\n      update: []\n    };\n    if (rowDataTransaction.add) {\n      rowDataTransaction.add.forEach(function (item) {});\n    }\n    return res;\n  };\n  ServerSideCache.prototype.getChildCache = function (keys) {\n    var _this = this;\n    if (agGridCommunity._.missingOrEmpty(keys)) {\n      return this;\n    }\n    var nextKey = keys[0];\n    var nextServerSideCache = null;\n    this.forEachBlockInOrder(function (block) {\n      // callback: (rowNode: RowNode, index: number) => void, sequence: NumberSequence, rowCount: number\n      block.forEachNodeShallow(function (rowNode) {\n        if (rowNode.key === nextKey) {\n          nextServerSideCache = rowNode.childrenCache;\n        }\n      }, new agGridCommunity.NumberSequence(), _this.getVirtualRowCount());\n    });\n    if (nextServerSideCache) {\n      var keyListForNextLevel = keys.slice(1, keys.length);\n      return nextServerSideCache ? nextServerSideCache.getChildCache(keyListForNextLevel) : null;\n    } else {\n      return null;\n    }\n  };\n  ServerSideCache.prototype.isPixelInRange = function (pixel) {\n    if (this.getVirtualRowCount() === 0) {\n      return false;\n    }\n    return pixel >= this.cacheTop && pixel < this.cacheTop + this.cacheHeight;\n  };\n  ServerSideCache.prototype.refreshCacheAfterSort = function (changedColumnsInSort, rowGroupColIds) {\n    var _this = this;\n    var level = this.parentRowNode.level + 1;\n    var grouping = level < this.cacheParams.rowGroupCols.length;\n    var shouldPurgeCache;\n    if (grouping) {\n      var groupColVo = this.cacheParams.rowGroupCols[level];\n      var rowGroupBlock = rowGroupColIds.indexOf(groupColVo.id) > -1;\n      var sortingByGroup = changedColumnsInSort.indexOf(groupColVo.id) > -1;\n      shouldPurgeCache = rowGroupBlock && sortingByGroup;\n    } else {\n      shouldPurgeCache = true;\n    }\n    if (shouldPurgeCache) {\n      this.purgeCache();\n    } else {\n      this.forEachBlockInOrder(function (block) {\n        if (block.isGroupLevel()) {\n          var callback = function callback(rowNode) {\n            var nextCache = rowNode.childrenCache;\n            if (nextCache) {\n              nextCache.refreshCacheAfterSort(changedColumnsInSort, rowGroupColIds);\n            }\n          };\n          block.forEachNodeShallow(callback, new agGridCommunity.NumberSequence(), _this.getVirtualRowCount());\n        }\n      });\n    }\n  };\n  __decorate$1B([agGridCommunity.Autowired('gridOptionsWrapper')], ServerSideCache.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1B([__param$1(0, agGridCommunity.Qualifier('loggerFactory'))], ServerSideCache.prototype, \"setBeans\", null);\n  return ServerSideCache;\n}(agGridCommunity.RowNodeCache);\nvar __extends$2I = undefined && undefined.__extends || function () {\n  var _extendStatics173 = function extendStatics(d, b) {\n    _extendStatics173 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics173(d, b);\n  };\n  return function (d, b) {\n    _extendStatics173(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1C = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param$2 = undefined && undefined.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar ServerSideRowModel = /** @class */function (_super) {\n  __extends$2I(ServerSideRowModel, _super);\n  function ServerSideRowModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  // we don't implement as lazy row heights is not supported in this row model\n  ServerSideRowModel.prototype.ensureRowHeightsValid = function (startPixel, endPixel, startLimitIndex, endLimitIndex) {\n    return false;\n  };\n  ServerSideRowModel.prototype.postConstruct = function () {\n    this.rowHeight = this.gridOptionsWrapper.getRowHeightAsNumber();\n    this.addEventListeners();\n  };\n  ServerSideRowModel.prototype.start = function () {\n    var datasource = this.gridOptionsWrapper.getServerSideDatasource();\n    if (datasource) {\n      this.setDatasource(datasource);\n    }\n  };\n  ServerSideRowModel.prototype.destroyDatasource = function () {\n    if (!this.datasource) {\n      return;\n    }\n    if (this.datasource.destroy) {\n      this.datasource.destroy();\n    }\n    this.rowRenderer.datasourceChanged();\n    this.datasource = undefined;\n  };\n  ServerSideRowModel.prototype.setBeans = function (loggerFactory) {\n    this.logger = loggerFactory.create('ServerSideRowModel');\n  };\n  ServerSideRowModel.prototype.applyTransaction = function (rowDataTransaction, route) {\n    this.executeOnCache(route, function (cache) {\n      cache.applyTransaction(rowDataTransaction);\n    });\n  };\n  ServerSideRowModel.prototype.addEventListeners = function () {\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.onColumnRowGroupChanged.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_ROW_GROUP_OPENED, this.onRowGroupOpened.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.onPivotModeChanged.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_EVERYTHING_CHANGED, this.onColumnEverything.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_VALUE_CHANGED, this.onValueChanged.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_COLUMN_PIVOT_CHANGED, this.onColumnPivotChanged.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_FILTER_CHANGED, this.onFilterChanged.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_SORT_CHANGED, this.onSortChanged.bind(this));\n  };\n  ServerSideRowModel.prototype.setDatasource = function (datasource) {\n    this.destroyDatasource();\n    this.datasource = datasource;\n    this.reset();\n  };\n  ServerSideRowModel.prototype.isLastRowFound = function () {\n    if (this.cacheExists()) {\n      return this.rootNode.childrenCache.isMaxRowFound();\n    }\n    return false;\n  };\n  ServerSideRowModel.prototype.onColumnEverything = function () {\n    // this is a hack for one customer only, so they can suppress the resetting of the columns.\n    // The problem the customer had was they were api.setColumnDefs() after the data source came\n    // back with data. So this stops the reload from the grid after the data comes back.\n    // Once we have \"AG-1591 Allow delta changes to columns\" fixed, then this hack can be taken out.\n    if (this.gridOptionsWrapper.isSuppressEnterpriseResetOnNewColumns()) {\n      return;\n    }\n    // every other customer can continue as normal and have it working!!!\n    // check if anything pertaining to fetching data has changed, and if it has, reset, but if\n    // it has not, don't reset\n    var resetRequired;\n    if (!this.cacheParams) {\n      resetRequired = true;\n    } else {\n      var rowGroupColumnVos = this.toValueObjects(this.columnController.getRowGroupColumns());\n      var valueColumnVos = this.toValueObjects(this.columnController.getValueColumns());\n      var pivotColumnVos = this.toValueObjects(this.columnController.getPivotColumns());\n      var sortModelDifferent = !agGridCommunity._.jsonEquals(this.cacheParams.sortModel, this.sortController.getSortModel());\n      var rowGroupDifferent = !agGridCommunity._.jsonEquals(this.cacheParams.rowGroupCols, rowGroupColumnVos);\n      var pivotDifferent = !agGridCommunity._.jsonEquals(this.cacheParams.pivotCols, pivotColumnVos);\n      var valuesDifferent = !agGridCommunity._.jsonEquals(this.cacheParams.valueCols, valueColumnVos);\n      resetRequired = sortModelDifferent || rowGroupDifferent || pivotDifferent || valuesDifferent;\n    }\n    if (resetRequired) {\n      this.reset();\n    }\n  };\n  ServerSideRowModel.prototype.onFilterChanged = function () {\n    this.reset();\n  };\n  // returns back all the cols that were effected by the sorting. eg if we were sorting by col A,\n  // and now we are sorting by col B, the list of impacted cols should be A and B. so if a cache\n  // is impacted by sorting on A or B then it needs to be refreshed. this includes where the cache\n  // was previously sorted by A and then the A sort now needs to be cleared.\n  ServerSideRowModel.prototype.findChangedColumnsInSort = function (newSortModel, oldSortModel) {\n    var allColsInBothSorts = [];\n    [newSortModel, oldSortModel].forEach(function (sortModel) {\n      if (sortModel) {\n        var ids = sortModel.map(function (sm) {\n          return sm.colId;\n        });\n        allColsInBothSorts = allColsInBothSorts.concat(ids);\n      }\n    });\n    var differentSorts = function differentSorts(oldSortItem, newSortItem) {\n      var oldSort = oldSortItem ? oldSortItem.sort : null;\n      var newSort = newSortItem ? newSortItem.sort : null;\n      return oldSort !== newSort;\n    };\n    var differentIndexes = function differentIndexes(oldSortItem, newSortItem) {\n      var oldIndex = oldSortModel.indexOf(oldSortItem);\n      var newIndex = newSortModel.indexOf(newSortItem);\n      return oldIndex !== newIndex;\n    };\n    return allColsInBothSorts.filter(function (colId) {\n      var oldSortItem = agGridCommunity._.find(oldSortModel, function (sm) {\n        return sm.colId === colId;\n      });\n      var newSortItem = agGridCommunity._.find(newSortModel, function (sm) {\n        return sm.colId === colId;\n      });\n      return differentSorts(oldSortItem, newSortItem) || differentIndexes(oldSortItem, newSortItem);\n    });\n  };\n  ServerSideRowModel.prototype.onSortChanged = function () {\n    if (!this.cacheExists()) {\n      return;\n    }\n    var newSortModel = this.extractSortModel();\n    var oldSortModel = this.cacheParams.sortModel;\n    var changedColumnsInSort = this.findChangedColumnsInSort(newSortModel, oldSortModel);\n    this.cacheParams.sortModel = newSortModel;\n    var rowGroupColIds = this.columnController.getRowGroupColumns().map(function (col) {\n      return col.getId();\n    });\n    var serverSideCache = this.rootNode.childrenCache;\n    var sortingWithValueCol = this.isSortingWithValueColumn(changedColumnsInSort);\n    var sortingWithSecondaryCol = this.isSortingWithSecondaryColumn(changedColumnsInSort);\n    var sortAlwaysResets = this.gridOptionsWrapper.isServerSideSortingAlwaysResets();\n    if (sortAlwaysResets || sortingWithValueCol || sortingWithSecondaryCol) {\n      this.reset();\n    } else {\n      serverSideCache.refreshCacheAfterSort(changedColumnsInSort, rowGroupColIds);\n    }\n  };\n  ServerSideRowModel.prototype.onValueChanged = function () {\n    this.reset();\n  };\n  ServerSideRowModel.prototype.onColumnRowGroupChanged = function () {\n    this.reset();\n  };\n  ServerSideRowModel.prototype.onColumnPivotChanged = function () {\n    this.reset();\n  };\n  ServerSideRowModel.prototype.onPivotModeChanged = function () {\n    this.reset();\n  };\n  ServerSideRowModel.prototype.onRowGroupOpened = function (event) {\n    var _this = this;\n    var rowNode = event.node;\n    if (rowNode.expanded) {\n      if (rowNode.master) {\n        this.createDetailNode(rowNode);\n      } else if (agGridCommunity._.missing(rowNode.childrenCache)) {\n        this.createNodeCache(rowNode);\n      }\n    } else if (this.gridOptionsWrapper.isPurgeClosedRowNodes() && agGridCommunity._.exists(rowNode.childrenCache)) {\n      rowNode.childrenCache = this.destroyBean(rowNode.childrenCache);\n    }\n    var shouldAnimate = function shouldAnimate() {\n      var rowAnimationEnabled = _this.gridOptionsWrapper.isAnimateRows();\n      if (rowNode.master) {\n        return rowAnimationEnabled && rowNode.expanded;\n      }\n      return rowAnimationEnabled;\n    };\n    this.updateRowIndexesAndBounds();\n    var modelUpdatedEvent = {\n      type: agGridCommunity.Events.EVENT_MODEL_UPDATED,\n      api: this.gridOptionsWrapper.getApi(),\n      columnApi: this.gridOptionsWrapper.getColumnApi(),\n      newPage: false,\n      newData: false,\n      animate: shouldAnimate(),\n      keepRenderedRows: true\n    };\n    this.eventService.dispatchEvent(modelUpdatedEvent);\n  };\n  ServerSideRowModel.prototype.reset = function () {\n    this.rootNode = new agGridCommunity.RowNode();\n    this.rootNode.group = true;\n    this.rootNode.level = -1;\n    this.createBean(this.rootNode);\n    if (this.datasource) {\n      this.createNewRowNodeBlockLoader();\n      this.cacheParams = this.createCacheParams();\n      this.createNodeCache(this.rootNode);\n      this.updateRowIndexesAndBounds();\n    }\n    // this event: 1) clears selection 2) updates filters 3) shows/hides 'no rows' overlay\n    var rowDataChangedEvent = {\n      type: agGridCommunity.Events.EVENT_ROW_DATA_CHANGED,\n      api: this.gridApi,\n      columnApi: this.columnApi\n    };\n    this.eventService.dispatchEvent(rowDataChangedEvent);\n    // this gets the row to render rows (or remove the previously rendered rows, as it's blank to start).\n    // important to NOT pass in an event with keepRenderedRows or animate, as we want the renderer\n    // to treat the rows as new rows, as it's all new data\n    var modelUpdatedEvent = {\n      type: agGridCommunity.Events.EVENT_MODEL_UPDATED,\n      api: this.gridApi,\n      columnApi: this.columnApi,\n      animate: false,\n      keepRenderedRows: false,\n      newData: false,\n      newPage: false\n    };\n    this.eventService.dispatchEvent(modelUpdatedEvent);\n  };\n  ServerSideRowModel.prototype.createNewRowNodeBlockLoader = function () {\n    this.destroyRowNodeBlockLoader();\n    var maxConcurrentRequests = this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests();\n    var blockLoadDebounceMillis = this.gridOptionsWrapper.getBlockLoadDebounceMillis();\n    this.rowNodeBlockLoader = new agGridCommunity.RowNodeBlockLoader(maxConcurrentRequests, blockLoadDebounceMillis);\n    this.createBean(this.rowNodeBlockLoader);\n  };\n  ServerSideRowModel.prototype.destroyRowNodeBlockLoader = function () {\n    if (this.rowNodeBlockLoader) {\n      this.destroyBean(this.rowNodeBlockLoader);\n      this.rowNodeBlockLoader = undefined;\n    }\n  };\n  ServerSideRowModel.prototype.toValueObjects = function (columns) {\n    var _this = this;\n    return columns.map(function (col) {\n      return {\n        id: col.getId(),\n        aggFunc: col.getAggFunc(),\n        displayName: _this.columnController.getDisplayNameForColumn(col, 'model'),\n        field: col.getColDef().field\n      };\n    });\n  };\n  ServerSideRowModel.prototype.createCacheParams = function () {\n    var rowGroupColumnVos = this.toValueObjects(this.columnController.getRowGroupColumns());\n    var valueColumnVos = this.toValueObjects(this.columnController.getValueColumns());\n    var pivotColumnVos = this.toValueObjects(this.columnController.getPivotColumns());\n    var dynamicRowHeight = this.gridOptionsWrapper.isDynamicRowHeight();\n    var maxBlocksInCache = this.gridOptionsWrapper.getMaxBlocksInCache();\n    if (dynamicRowHeight && maxBlocksInCache >= 0) {\n      console.warn('ag-Grid: Server Side Row Model does not support Dynamic Row Height and Cache Purging. ' + 'Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.');\n      maxBlocksInCache = undefined;\n    }\n    if (maxBlocksInCache >= 0 && this.columnController.isAutoRowHeightActive()) {\n      console.warn('ag-Grid: Server Side Row Model does not support Auto Row Height and Cache Purging. ' + 'Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.');\n      maxBlocksInCache = undefined;\n    }\n    var userProvidedBlockSize = this.gridOptionsWrapper.getCacheBlockSize();\n    var blockSize;\n    if (typeof userProvidedBlockSize == 'number' && userProvidedBlockSize > 0) {\n      blockSize = userProvidedBlockSize;\n    } else {\n      blockSize = ServerSideBlock.DefaultBlockSize;\n    }\n    var params = {\n      // the columns the user has grouped and aggregated by\n      valueCols: valueColumnVos,\n      rowGroupCols: rowGroupColumnVos,\n      pivotCols: pivotColumnVos,\n      pivotMode: this.columnController.isPivotMode(),\n      // sort and filter model\n      filterModel: this.filterManager.getFilterModel(),\n      sortModel: this.extractSortModel(),\n      rowNodeBlockLoader: this.rowNodeBlockLoader,\n      datasource: this.datasource,\n      lastAccessedSequence: new agGridCommunity.NumberSequence(),\n      overflowSize: 1,\n      initialRowCount: 1,\n      maxBlocksInCache: maxBlocksInCache,\n      blockSize: blockSize,\n      rowHeight: this.rowHeight,\n      dynamicRowHeight: dynamicRowHeight\n    };\n    return params;\n  };\n  ServerSideRowModel.prototype.createNodeCache = function (rowNode) {\n    var cache = new ServerSideCache(this.cacheParams, rowNode);\n    this.getContext().createBean(cache);\n    cache.addEventListener(agGridCommunity.RowNodeCache.EVENT_CACHE_UPDATED, this.onCacheUpdated.bind(this));\n    rowNode.childrenCache = cache;\n  };\n  ServerSideRowModel.prototype.onCacheUpdated = function () {\n    this.updateRowIndexesAndBounds();\n    var modelUpdatedEvent = {\n      type: agGridCommunity.Events.EVENT_MODEL_UPDATED,\n      api: this.gridApi,\n      columnApi: this.columnApi,\n      animate: this.gridOptionsWrapper.isAnimateRows(),\n      keepRenderedRows: true,\n      newPage: false,\n      newData: false\n    };\n    this.eventService.dispatchEvent(modelUpdatedEvent);\n  };\n  ServerSideRowModel.prototype.onRowHeightChanged = function () {\n    this.updateRowIndexesAndBounds();\n    var modelUpdatedEvent = {\n      type: agGridCommunity.Events.EVENT_MODEL_UPDATED,\n      api: this.gridOptionsWrapper.getApi(),\n      columnApi: this.gridOptionsWrapper.getColumnApi(),\n      newPage: false,\n      newData: false,\n      animate: true,\n      keepRenderedRows: true\n    };\n    this.eventService.dispatchEvent(modelUpdatedEvent);\n  };\n  ServerSideRowModel.prototype.updateRowIndexesAndBounds = function () {\n    if (this.cacheExists()) {\n      // NOTE: should not be casting here, the RowModel should use IServerSideRowModel interface?\n      var serverSideCache = this.rootNode.childrenCache;\n      this.resetRowTops(serverSideCache);\n      this.setDisplayIndexes(serverSideCache);\n    }\n  };\n  ServerSideRowModel.prototype.setDisplayIndexes = function (cache) {\n    var numberSequence = new agGridCommunity.NumberSequence();\n    var nextRowTop = {\n      value: 0\n    };\n    cache.setDisplayIndexes(numberSequence, nextRowTop);\n  };\n  // resetting row tops is needed for animation, as part of the operation is saving the old location,\n  // which is needed for rows that are transitioning in\n  ServerSideRowModel.prototype.resetRowTops = function (cache) {\n    var numberSequence = new agGridCommunity.NumberSequence();\n    cache.forEachNodeDeep(function (rowNode) {\n      return rowNode.clearRowTop();\n    }, numberSequence);\n  };\n  ServerSideRowModel.prototype.getRow = function (index) {\n    if (this.cacheExists()) {\n      return this.rootNode.childrenCache.getRow(index);\n    }\n    return null;\n  };\n  ServerSideRowModel.prototype.getRowCount = function () {\n    if (!this.cacheExists()) {\n      return 1;\n    }\n    var serverSideCache = this.rootNode.childrenCache;\n    var res = serverSideCache.getDisplayIndexEnd();\n    return res;\n  };\n  ServerSideRowModel.prototype.getTopLevelRowCount = function () {\n    if (!this.cacheExists()) {\n      return 1;\n    }\n    var serverSideCache = this.rootNode.childrenCache;\n    return serverSideCache.getVirtualRowCount();\n  };\n  ServerSideRowModel.prototype.getTopLevelRowDisplayedIndex = function (topLevelIndex) {\n    if (!this.cacheExists()) {\n      return topLevelIndex;\n    }\n    var serverSideCache = this.rootNode.childrenCache;\n    return serverSideCache.getTopLevelRowDisplayedIndex(topLevelIndex);\n  };\n  ServerSideRowModel.prototype.getRowBounds = function (index) {\n    if (!this.cacheExists()) {\n      return {\n        rowTop: 0,\n        rowHeight: this.rowHeight\n      };\n    }\n    var serverSideCache = this.rootNode.childrenCache;\n    return serverSideCache.getRowBounds(index);\n  };\n  ServerSideRowModel.prototype.getRowIndexAtPixel = function (pixel) {\n    if (pixel === 0) {\n      return 0;\n    }\n    if (!this.cacheExists()) {\n      return 0;\n    }\n    var serverSideCache = this.rootNode.childrenCache;\n    return serverSideCache.getRowIndexAtPixel(pixel);\n  };\n  ServerSideRowModel.prototype.getCurrentPageHeight = function () {\n    return this.rowHeight * this.getRowCount();\n  };\n  ServerSideRowModel.prototype.isEmpty = function () {\n    return false;\n  };\n  ServerSideRowModel.prototype.isRowsToRender = function () {\n    return this.cacheExists() && this.getRowCount() > 0;\n  };\n  ServerSideRowModel.prototype.getType = function () {\n    return agGridCommunity.Constants.ROW_MODEL_TYPE_SERVER_SIDE;\n  };\n  ServerSideRowModel.prototype.forEachNode = function (callback) {\n    if (this.cacheExists()) {\n      this.rootNode.childrenCache.forEachNodeDeep(callback);\n    }\n  };\n  ServerSideRowModel.prototype.executeOnCache = function (route, callback) {\n    if (!this.cacheExists()) {\n      return;\n    }\n    var topLevelCache = this.rootNode.childrenCache;\n    var cacheToPurge = topLevelCache.getChildCache(route);\n    if (cacheToPurge) {\n      callback(cacheToPurge);\n    }\n  };\n  ServerSideRowModel.prototype.purgeCache = function (route) {\n    if (route === void 0) {\n      route = [];\n    }\n    this.executeOnCache(route, function (cache) {\n      return cache.purgeCache();\n    });\n  };\n  ServerSideRowModel.prototype.getNodesInRangeForSelection = function (firstInRange, lastInRange) {\n    if (agGridCommunity._.exists(lastInRange) && firstInRange.parent !== lastInRange.parent) {\n      return [];\n    }\n    return firstInRange.parent.childrenCache.getRowNodesInRange(lastInRange, firstInRange);\n  };\n  ServerSideRowModel.prototype.getRowNode = function (id) {\n    var result = null;\n    this.forEachNode(function (rowNode) {\n      if (rowNode.id === id) {\n        result = rowNode;\n      }\n      if (rowNode.detailNode && rowNode.detailNode.id === id) {\n        result = rowNode.detailNode;\n      }\n    });\n    return result;\n  };\n  ServerSideRowModel.prototype.getBlockState = function () {\n    if (this.rowNodeBlockLoader) {\n      return this.rowNodeBlockLoader.getBlockState();\n    }\n    return null;\n  };\n  // always returns true - this is used by the\n  ServerSideRowModel.prototype.isRowPresent = function (rowNode) {\n    var foundRowNode = this.getRowNode(rowNode.id);\n    return !!foundRowNode;\n  };\n  ServerSideRowModel.prototype.extractSortModel = function () {\n    var sortModel = this.sortController.getSortModel();\n    // when using tree data we just return the sort model with the 'ag-Grid-AutoColumn' as is, i.e not broken out\n    // into it's constitute group columns as they are not defined up front and can vary per node.\n    if (this.gridOptionsWrapper.isTreeData()) {\n      return sortModel;\n    }\n    var rowGroupCols = this.toValueObjects(this.columnController.getRowGroupColumns());\n    // find index of auto group column in sort model\n    var autoGroupIndex = -1;\n    for (var i = 0; i < sortModel.length; ++i) {\n      if (sortModel[i].colId === agGridCommunity.Constants.GROUP_AUTO_COLUMN_ID) {\n        autoGroupIndex = i;\n        break;\n      }\n    }\n    // replace auto column with individual group columns\n    if (autoGroupIndex > -1) {\n      var individualGroupCols = rowGroupCols.map(function (group) {\n        return {\n          colId: group.id,\n          sort: sortModel[autoGroupIndex].sort\n        };\n      });\n      // remove auto group column\n      sortModel.splice(autoGroupIndex, 1);\n      var _loop_1 = function _loop_1(i) {\n        var individualGroupCol = individualGroupCols[i];\n        // don't add individual group column if non group column already exists as it gets precedence\n        var sameNonGroupColumnExists = sortModel.some(function (sm) {\n          return sm.colId === individualGroupCol.colId;\n        });\n        if (sameNonGroupColumnExists) {\n          return \"continue\";\n        }\n        sortModel.splice(autoGroupIndex++, 0, individualGroupCol);\n      };\n      // insert individual group columns\n      for (var i = 0; i < individualGroupCols.length; i++) {\n        _loop_1(i);\n      }\n    }\n    // strip out multi-column prefix on colId's\n    if (this.gridOptionsWrapper.isGroupMultiAutoColumn()) {\n      var multiColumnPrefix = agGridCommunity.Constants.GROUP_AUTO_COLUMN_ID + \"-\";\n      for (var i = 0; i < sortModel.length; ++i) {\n        if (sortModel[i].colId.indexOf(multiColumnPrefix) > -1) {\n          sortModel[i].colId = sortModel[i].colId.substr(multiColumnPrefix.length);\n        }\n      }\n    }\n    return sortModel;\n  };\n  ServerSideRowModel.prototype.isSortingWithValueColumn = function (changedColumnsInSort) {\n    var valueColIds = this.columnController.getValueColumns().map(function (col) {\n      return col.getColId();\n    });\n    for (var i = 0; i < changedColumnsInSort.length; i++) {\n      if (valueColIds.indexOf(changedColumnsInSort[i]) > -1) {\n        return true;\n      }\n    }\n    return false;\n  };\n  ServerSideRowModel.prototype.isSortingWithSecondaryColumn = function (changedColumnsInSort) {\n    if (!this.columnController.getSecondaryColumns()) {\n      return false;\n    }\n    var secondaryColIds = this.columnController.getSecondaryColumns().map(function (col) {\n      return col.getColId();\n    });\n    for (var i = 0; i < changedColumnsInSort.length; i++) {\n      if (secondaryColIds.indexOf(changedColumnsInSort[i]) > -1) {\n        return true;\n      }\n    }\n    return false;\n  };\n  ServerSideRowModel.prototype.cacheExists = function () {\n    return agGridCommunity._.exists(this.rootNode) && agGridCommunity._.exists(this.rootNode.childrenCache);\n  };\n  ServerSideRowModel.prototype.createDetailNode = function (masterNode) {\n    if (agGridCommunity._.exists(masterNode.detailNode)) {\n      return masterNode.detailNode;\n    }\n    var detailNode = new agGridCommunity.RowNode();\n    this.getContext().createBean(detailNode);\n    detailNode.detail = true;\n    detailNode.selectable = false;\n    detailNode.parent = masterNode;\n    if (agGridCommunity._.exists(masterNode.id)) {\n      detailNode.id = 'detail_' + masterNode.id;\n    }\n    detailNode.data = masterNode.data;\n    detailNode.level = masterNode.level + 1;\n    var defaultDetailRowHeight = 200;\n    var rowHeight = this.gridOptionsWrapper.getRowHeightForNode(detailNode).height;\n    detailNode.rowHeight = rowHeight ? rowHeight : defaultDetailRowHeight;\n    masterNode.detailNode = detailNode;\n    return detailNode;\n  };\n  ServerSideRowModel.prototype.isLoading = function () {\n    return this.rowNodeBlockLoader ? this.rowNodeBlockLoader.isLoading() : false;\n  };\n  __decorate$1C([agGridCommunity.Autowired('gridOptionsWrapper')], ServerSideRowModel.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1C([agGridCommunity.Autowired('columnController')], ServerSideRowModel.prototype, \"columnController\", void 0);\n  __decorate$1C([agGridCommunity.Autowired('filterManager')], ServerSideRowModel.prototype, \"filterManager\", void 0);\n  __decorate$1C([agGridCommunity.Autowired('sortController')], ServerSideRowModel.prototype, \"sortController\", void 0);\n  __decorate$1C([agGridCommunity.Autowired('gridApi')], ServerSideRowModel.prototype, \"gridApi\", void 0);\n  __decorate$1C([agGridCommunity.Autowired('columnApi')], ServerSideRowModel.prototype, \"columnApi\", void 0);\n  __decorate$1C([agGridCommunity.Autowired('rowRenderer')], ServerSideRowModel.prototype, \"rowRenderer\", void 0);\n  __decorate$1C([agGridCommunity.PostConstruct], ServerSideRowModel.prototype, \"postConstruct\", null);\n  __decorate$1C([agGridCommunity.PreDestroy], ServerSideRowModel.prototype, \"destroyDatasource\", null);\n  __decorate$1C([__param$2(0, agGridCommunity.Qualifier('loggerFactory'))], ServerSideRowModel.prototype, \"setBeans\", null);\n  __decorate$1C([agGridCommunity.PreDestroy], ServerSideRowModel.prototype, \"destroyRowNodeBlockLoader\", null);\n  ServerSideRowModel = __decorate$1C([agGridCommunity.Bean('rowModel')], ServerSideRowModel);\n  return ServerSideRowModel;\n}(agGridCommunity.BeanStub);\nvar ServerSideRowModelModule = {\n  moduleName: agGridCommunity.ModuleNames.ServerSideRowModelModule,\n  rowModels: {\n    'serverSide': ServerSideRowModel\n  },\n  dependantModules: [EnterpriseCoreModule]\n};\nvar ClientSideValuesExtractor = /** @class */function () {\n  function ClientSideValuesExtractor(rowModel, colDef, valueGetter) {\n    this.rowModel = rowModel;\n    this.colDef = colDef;\n    this.valueGetter = valueGetter;\n  }\n  ClientSideValuesExtractor.prototype.extractUniqueValues = function (predicate) {\n    var _this = this;\n    var values = new Set();\n    var keyCreator = this.colDef.keyCreator;\n    this.rowModel.forEachLeafNode(function (node) {\n      // only pull values from rows that have data. this means we skip filler group nodes.\n      if (!node.data || !predicate(node)) {\n        return;\n      }\n      var value = _this.valueGetter(node);\n      if (keyCreator) {\n        value = keyCreator({\n          value: value\n        });\n      }\n      value = agGridCommunity._.makeNull(value);\n      if (value != null && Array.isArray(value)) {\n        agGridCommunity._.forEach(value, function (x) {\n          var formatted = agGridCommunity._.toStringOrNull(agGridCommunity._.makeNull(x));\n          values.add(formatted);\n        });\n      } else {\n        values.add(agGridCommunity._.toStringOrNull(value));\n      }\n    });\n    return agGridCommunity._.values(values);\n  };\n  return ClientSideValuesExtractor;\n}();\nvar SetFilterModelValuesType;\n(function (SetFilterModelValuesType) {\n  SetFilterModelValuesType[SetFilterModelValuesType[\"PROVIDED_LIST\"] = 0] = \"PROVIDED_LIST\";\n  SetFilterModelValuesType[SetFilterModelValuesType[\"PROVIDED_CALLBACK\"] = 1] = \"PROVIDED_CALLBACK\";\n  SetFilterModelValuesType[SetFilterModelValuesType[\"TAKEN_FROM_GRID_VALUES\"] = 2] = \"TAKEN_FROM_GRID_VALUES\";\n})(SetFilterModelValuesType || (SetFilterModelValuesType = {}));\nvar SetValueModel = /** @class */function () {\n  function SetValueModel(rowModel, valueGetter, filterParams, colDef, column, doesRowPassOtherFilters, suppressSorting, setIsLoading, valueFormatterService, translate) {\n    var _this = this;\n    this.filterParams = filterParams;\n    this.colDef = colDef;\n    this.column = column;\n    this.doesRowPassOtherFilters = doesRowPassOtherFilters;\n    this.suppressSorting = suppressSorting;\n    this.setIsLoading = setIsLoading;\n    this.valueFormatterService = valueFormatterService;\n    this.translate = translate;\n    this.localEventService = new agGridCommunity.EventService();\n    this.miniFilterText = null;\n    // The lookup for a set is much faster than the lookup for an array, especially when the length of the array is\n    // thousands of records long, so where lookups are important we use a set.\n    /** Values provided to the filter for use. */\n    this.providedValues = null;\n    /** All possible values for the filter, sorted if required. */\n    this.allValues = [];\n    /** Remaining values when filters from other columns have been applied. */\n    this.availableValues = new Set();\n    /** All values that are currently displayed, after the mini-filter has been applied. */\n    this.displayedValues = [];\n    /** Values that have been selected for this filter. */\n    this.selectedValues = new Set();\n    if (rowModel.getType() === agGridCommunity.Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {\n      this.clientSideValuesExtractor = new ClientSideValuesExtractor(rowModel, colDef, valueGetter);\n    }\n    this.formatter = this.filterParams.textFormatter || agGridCommunity.TextFilter.DEFAULT_FORMATTER;\n    var values = this.filterParams.values;\n    if (values == null) {\n      this.valuesType = SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES;\n    } else {\n      this.valuesType = Array.isArray(values) ? SetFilterModelValuesType.PROVIDED_LIST : SetFilterModelValuesType.PROVIDED_CALLBACK;\n      this.providedValues = values;\n    }\n    this.updateAllValues().then(function (values) {\n      return _this.resetSelectionState(values);\n    });\n  }\n  SetValueModel.prototype.addEventListener = function (eventType, listener, async) {\n    this.localEventService.addEventListener(eventType, listener, async);\n  };\n  SetValueModel.prototype.removeEventListener = function (eventType, listener, async) {\n    this.localEventService.removeEventListener(eventType, listener, async);\n  };\n  /**\n   * Re-fetches the values used in the filter from the value source.\n   * If keepSelection is false, the filter selection will be reset to everything selected,\n   * otherwise the current selection will be preserved.\n   */\n  SetValueModel.prototype.refreshValues = function (keepSelection) {\n    if (keepSelection === void 0) {\n      keepSelection = true;\n    }\n    var currentModel = this.getModel();\n    this.updateAllValues();\n    // ensure model is updated for new values\n    return this.setModel(keepSelection ? currentModel : null);\n  };\n  /**\n   * Overrides the current values being used for the set filter.\n   * If keepSelection is false, the filter selection will be reset to everything selected,\n   * otherwise the current selection will be preserved.\n   */\n  SetValueModel.prototype.overrideValues = function (valuesToUse, keepSelection) {\n    var _this = this;\n    if (keepSelection === void 0) {\n      keepSelection = true;\n    }\n    return new agGridCommunity.Promise(function (resolve) {\n      // wait for any existing values to be populated before overriding\n      _this.allValuesPromise.then(function () {\n        _this.valuesType = SetFilterModelValuesType.PROVIDED_LIST;\n        _this.providedValues = valuesToUse;\n        _this.refreshValues(keepSelection).then(function () {\n          return resolve();\n        });\n      });\n    });\n  };\n  SetValueModel.prototype.refreshAfterAnyFilterChanged = function () {\n    var _this = this;\n    return this.showAvailableOnly() ? this.allValuesPromise.then(function (values) {\n      return _this.updateAvailableValues(values);\n    }) : agGridCommunity.Promise.resolve();\n  };\n  SetValueModel.prototype.updateAllValues = function () {\n    var _this = this;\n    this.allValuesPromise = new agGridCommunity.Promise(function (resolve) {\n      switch (_this.valuesType) {\n        case SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES:\n        case SetFilterModelValuesType.PROVIDED_LIST:\n          {\n            var values = _this.valuesType === SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES ? _this.getValuesFromRows(false) : agGridCommunity._.toStrings(_this.providedValues);\n            var sortedValues = _this.sortValues(values);\n            _this.allValues = sortedValues;\n            resolve(sortedValues);\n            break;\n          }\n        case SetFilterModelValuesType.PROVIDED_CALLBACK:\n          {\n            _this.setIsLoading(true);\n            var callback_1 = _this.providedValues;\n            var params_1 = {\n              success: function success(values) {\n                var processedValues = agGridCommunity._.toStrings(values);\n                _this.setIsLoading(false);\n                var sortedValues = _this.sortValues(processedValues);\n                _this.allValues = sortedValues;\n                resolve(sortedValues);\n              },\n              colDef: _this.colDef\n            };\n            window.setTimeout(function () {\n              return callback_1(params_1);\n            }, 0);\n            break;\n          }\n        default:\n          throw new Error('Unrecognised valuesType');\n      }\n    });\n    this.allValuesPromise.then(function (values) {\n      return _this.updateAvailableValues(values);\n    });\n    return this.allValuesPromise;\n  };\n  SetValueModel.prototype.setValuesType = function (value) {\n    this.valuesType = value;\n  };\n  SetValueModel.prototype.getValuesType = function () {\n    return this.valuesType;\n  };\n  SetValueModel.prototype.isValueAvailable = function (value) {\n    return this.availableValues.has(value);\n  };\n  SetValueModel.prototype.showAvailableOnly = function () {\n    return this.valuesType === SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES && !this.filterParams.suppressRemoveEntries;\n  };\n  SetValueModel.prototype.updateAvailableValues = function (allValues) {\n    var availableValues = this.showAvailableOnly() ? this.sortValues(this.getValuesFromRows(true)) : allValues;\n    this.availableValues = agGridCommunity._.convertToSet(availableValues);\n    this.localEventService.dispatchEvent({\n      type: SetValueModel.EVENT_AVAILABLE_VALUES_CHANGED\n    });\n    this.updateDisplayedValues();\n  };\n  SetValueModel.prototype.sortValues = function (values) {\n    if (this.suppressSorting) {\n      return values;\n    }\n    var comparator = this.filterParams.comparator || this.colDef.comparator || agGridCommunity._.defaultComparator;\n    if (!this.filterParams.excelMode || values.indexOf(null) < 0) {\n      return values.sort(comparator);\n    }\n    // ensure the blank value always appears last\n    return agGridCommunity._.filter(values, function (v) {\n      return v != null;\n    }).sort(comparator).concat(null);\n  };\n  SetValueModel.prototype.getValuesFromRows = function (removeUnavailableValues) {\n    var _this = this;\n    if (removeUnavailableValues === void 0) {\n      removeUnavailableValues = false;\n    }\n    if (!this.clientSideValuesExtractor) {\n      console.error('ag-Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values');\n      return [];\n    }\n    var predicate = function predicate(node) {\n      return !removeUnavailableValues || _this.doesRowPassOtherFilters(node);\n    };\n    return this.clientSideValuesExtractor.extractUniqueValues(predicate);\n  };\n  /** Sets mini filter value. Returns true if it changed from last value, otherwise false. */\n  SetValueModel.prototype.setMiniFilter = function (value) {\n    value = agGridCommunity._.makeNull(value);\n    if (this.miniFilterText === value) {\n      //do nothing if filter has not changed\n      return false;\n    }\n    this.miniFilterText = value;\n    this.updateDisplayedValues();\n    return true;\n  };\n  SetValueModel.prototype.getMiniFilter = function () {\n    return this.miniFilterText;\n  };\n  SetValueModel.prototype.updateDisplayedValues = function () {\n    var _this = this;\n    // if no filter, just display all available values\n    if (this.miniFilterText == null) {\n      this.displayedValues = agGridCommunity._.values(this.availableValues);\n      return;\n    }\n    // if filter present, we filter down the list\n    this.displayedValues = [];\n    // to allow for case insensitive searches, upper-case both filter text and value\n    var formattedFilterText = this.formatter(this.miniFilterText).toUpperCase();\n    var matchesFilter = function matchesFilter(valueToCheck) {\n      return valueToCheck != null && valueToCheck.toUpperCase().indexOf(formattedFilterText) >= 0;\n    };\n    this.availableValues.forEach(function (value) {\n      if (value == null) {\n        if (_this.filterParams.excelMode && matchesFilter(_this.translate('blanks'))) {\n          _this.displayedValues.push(value);\n        }\n      } else {\n        var textFormatterValue = _this.formatter(value);\n        // TODO: should this be applying the text formatter *after* the value formatter?\n        var valueFormatterValue = _this.valueFormatterService.formatValue(_this.column, null, null, textFormatterValue, _this.filterParams.valueFormatter, false);\n        if (matchesFilter(textFormatterValue) || matchesFilter(valueFormatterValue)) {\n          _this.displayedValues.push(value);\n        }\n      }\n    });\n  };\n  SetValueModel.prototype.getDisplayedValueCount = function () {\n    return this.displayedValues.length;\n  };\n  SetValueModel.prototype.getDisplayedValue = function (index) {\n    return this.displayedValues[index];\n  };\n  SetValueModel.prototype.hasSelections = function () {\n    return this.filterParams.defaultToNothingSelected ? this.selectedValues.size > 0 : this.allValues.length !== this.selectedValues.size;\n  };\n  SetValueModel.prototype.getUniqueValueCount = function () {\n    return this.allValues.length;\n  };\n  SetValueModel.prototype.getUniqueValue = function (index) {\n    return this.allValues[index];\n  };\n  SetValueModel.prototype.getValues = function () {\n    return this.allValues.slice();\n  };\n  SetValueModel.prototype.selectAllMatchingMiniFilter = function (clearExistingSelection) {\n    var _this = this;\n    if (clearExistingSelection === void 0) {\n      clearExistingSelection = false;\n    }\n    if (this.miniFilterText == null) {\n      // ensure everything is selected\n      this.selectedValues = agGridCommunity._.convertToSet(this.allValues);\n    } else {\n      // ensure everything that matches the mini filter is selected\n      if (clearExistingSelection) {\n        this.selectedValues.clear();\n      }\n      agGridCommunity._.forEach(this.displayedValues, function (value) {\n        return _this.selectedValues.add(value);\n      });\n    }\n  };\n  SetValueModel.prototype.deselectAllMatchingMiniFilter = function () {\n    var _this = this;\n    if (this.miniFilterText == null) {\n      // ensure everything is deselected\n      this.selectedValues.clear();\n    } else {\n      // ensure everything that matches the mini filter is deselected\n      agGridCommunity._.forEach(this.displayedValues, function (value) {\n        return _this.selectedValues.delete(value);\n      });\n    }\n  };\n  SetValueModel.prototype.selectValue = function (value) {\n    this.selectedValues.add(value);\n  };\n  SetValueModel.prototype.deselectValue = function (value) {\n    if (this.filterParams.excelMode && this.isEverythingVisibleSelected()) {\n      // ensure we're starting from the correct \"everything selected\" state\n      this.resetSelectionState(this.displayedValues);\n    }\n    this.selectedValues.delete(value);\n  };\n  SetValueModel.prototype.isValueSelected = function (value) {\n    return this.selectedValues.has(value);\n  };\n  SetValueModel.prototype.isEverythingVisibleSelected = function () {\n    var _this = this;\n    return agGridCommunity._.filter(this.displayedValues, function (it) {\n      return _this.isValueSelected(it);\n    }).length === this.displayedValues.length;\n  };\n  SetValueModel.prototype.isNothingVisibleSelected = function () {\n    var _this = this;\n    return agGridCommunity._.filter(this.displayedValues, function (it) {\n      return _this.isValueSelected(it);\n    }).length === 0;\n  };\n  SetValueModel.prototype.getModel = function () {\n    return this.hasSelections() ? agGridCommunity._.values(this.selectedValues) : null;\n  };\n  SetValueModel.prototype.setModel = function (model) {\n    var _this = this;\n    return this.allValuesPromise.then(function (values) {\n      if (model == null) {\n        _this.resetSelectionState(values);\n      } else {\n        // select all values from the model that exist in the filter\n        _this.selectedValues.clear();\n        var allValues_1 = agGridCommunity._.convertToSet(values);\n        agGridCommunity._.forEach(model, function (value) {\n          if (allValues_1.has(value)) {\n            _this.selectedValues.add(value);\n          }\n        });\n      }\n    });\n  };\n  SetValueModel.prototype.resetSelectionState = function (values) {\n    if (this.filterParams.defaultToNothingSelected) {\n      this.selectedValues.clear();\n    } else {\n      this.selectedValues = agGridCommunity._.convertToSet(values);\n    }\n  };\n  SetValueModel.EVENT_AVAILABLE_VALUES_CHANGED = 'availableValuesChanged';\n  return SetValueModel;\n}();\nvar __extends$2J = undefined && undefined.__extends || function () {\n  var _extendStatics174 = function extendStatics(d, b) {\n    _extendStatics174 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics174(d, b);\n  };\n  return function (d, b) {\n    _extendStatics174(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1D = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar SetFilterListItem = /** @class */function (_super) {\n  __extends$2J(SetFilterListItem, _super);\n  function SetFilterListItem(value, params, translate, isSelected) {\n    var _this = _super.call(this, SetFilterListItem.TEMPLATE) || this;\n    _this.value = value;\n    _this.params = params;\n    _this.translate = translate;\n    _this.isSelected = isSelected;\n    return _this;\n  }\n  SetFilterListItem.prototype.init = function () {\n    var _this = this;\n    this.render();\n    this.eCheckbox.setValue(this.isSelected, true);\n    this.eCheckbox.onValueChange(function (value) {\n      _this.isSelected = value;\n      var event = {\n        type: SetFilterListItem.EVENT_SELECTION_CHANGED,\n        isSelected: value\n      };\n      _this.dispatchEvent(event);\n    });\n  };\n  SetFilterListItem.prototype.toggleSelected = function () {\n    this.isSelected = !this.isSelected;\n    this.eCheckbox.setValue(this.isSelected);\n  };\n  SetFilterListItem.prototype.render = function () {\n    var _a = this.params,\n      column = _a.column,\n      colDef = _a.colDef;\n    var value = this.value;\n    var formattedValue = null;\n    if (typeof value === 'function') {\n      value = value();\n    } else {\n      formattedValue = this.getFormattedValue(this.params, column, value);\n    }\n    if (this.params.showTooltips) {\n      this.tooltipText = agGridCommunity._.escapeString(formattedValue != null ? formattedValue : value);\n      if (agGridCommunity._.exists(this.tooltipText)) {\n        if (this.gridOptionsWrapper.isEnableBrowserTooltips()) {\n          this.getGui().setAttribute('title', this.tooltipText);\n        } else {\n          this.createManagedBean(new agGridCommunity.TooltipFeature(this));\n        }\n      }\n    }\n    var params = {\n      value: value,\n      valueFormatted: formattedValue,\n      api: this.gridOptionsWrapper.getApi(),\n      context: this.gridOptionsWrapper.getContext()\n    };\n    this.renderCell(colDef, params);\n  };\n  SetFilterListItem.prototype.getTooltipParams = function () {\n    return {\n      location: 'setFilterValue',\n      colDef: this.getComponentHolder(),\n      value: this.tooltipText\n    };\n  };\n  SetFilterListItem.prototype.getFormattedValue = function (filterParams, column, value) {\n    var formatter = filterParams == null ? null : filterParams.valueFormatter;\n    return this.valueFormatterService.formatValue(column, null, null, value, formatter, false);\n  };\n  SetFilterListItem.prototype.renderCell = function (target, params) {\n    var _this = this;\n    var filterParams = target.filterParams;\n    var cellRendererPromise = this.userComponentFactory.newSetFilterCellRenderer(filterParams, params);\n    if (cellRendererPromise == null) {\n      var valueToRender = params.valueFormatted == null ? params.value : params.valueFormatted;\n      this.eCheckbox.setLabel(valueToRender == null ? this.translate('blanks') : valueToRender);\n      return;\n    }\n    cellRendererPromise.then(function (component) {\n      _this.eCheckbox.setLabel(component.getGui());\n      _this.addDestroyFunc(function () {\n        return _this.destroyBean(component);\n      });\n    });\n  };\n  SetFilterListItem.prototype.getComponentHolder = function () {\n    return this.params.column.getColDef();\n  };\n  SetFilterListItem.EVENT_SELECTION_CHANGED = 'selectionChanged';\n  SetFilterListItem.TEMPLATE = \"\\n        <div class=\\\"ag-set-filter-item\\\">\\n            <ag-checkbox ref=\\\"eCheckbox\\\" class=\\\"ag-set-filter-item-checkbox\\\"></ag-checkbox>\\n        </div>\";\n  __decorate$1D([agGridCommunity.Autowired('gridOptionsWrapper')], SetFilterListItem.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1D([agGridCommunity.Autowired('valueFormatterService')], SetFilterListItem.prototype, \"valueFormatterService\", void 0);\n  __decorate$1D([agGridCommunity.Autowired('userComponentFactory')], SetFilterListItem.prototype, \"userComponentFactory\", void 0);\n  __decorate$1D([agGridCommunity.RefSelector('eCheckbox')], SetFilterListItem.prototype, \"eCheckbox\", void 0);\n  __decorate$1D([agGridCommunity.PostConstruct], SetFilterListItem.prototype, \"init\", null);\n  return SetFilterListItem;\n}(agGridCommunity.Component);\nvar DEFAULT_LOCALE_TEXT = {\n  loadingOoo: 'Loading...',\n  blanks: '(Blanks)',\n  searchOoo: 'Search...',\n  selectAll: '(Select All)',\n  selectAllSearchResults: '(Select All Search Results)',\n  noMatches: 'No matches.'\n};\nvar __extends$2K = undefined && undefined.__extends || function () {\n  var _extendStatics175 = function extendStatics(d, b) {\n    _extendStatics175 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics175(d, b);\n  };\n  return function (d, b) {\n    _extendStatics175(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1E = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar SetFilter = /** @class */function (_super) {\n  __extends$2K(SetFilter, _super);\n  function SetFilter() {\n    var _this = _super.call(this, 'setFilter') || this;\n    // To make the filtering super fast, we store the values in an object, and check for the boolean value.\n    // Although Set would be a more natural choice of data structure, its performance across browsers is\n    // significantly worse than using an object: https://jsbench.me/hdk91jbw1h/\n    _this.appliedModelValues = null;\n    return _this;\n  }\n  // unlike the simple filters, nothing in the set filter UI shows/hides.\n  // maybe this method belongs in abstractSimpleFilter???\n  SetFilter.prototype.updateUiVisibility = function () {};\n  SetFilter.prototype.createBodyTemplate = function () {\n    return (/* html */\"\\n            <div class=\\\"ag-set-filter\\\">\\n                <div ref=\\\"eFilterLoading\\\" class=\\\"ag-filter-loading ag-hidden\\\">\" + this.translateForSetFilter('loadingOoo') + \"</div>\\n                <ag-input-text-field class=\\\"ag-mini-filter\\\" ref=\\\"eMiniFilter\\\"></ag-input-text-field>\\n                <div ref=\\\"eFilterNoMatches\\\" class=\\\"ag-filter-no-matches ag-hidden\\\">\" + this.translateForSetFilter('noMatches') + \"</div>\\n                <div ref=\\\"eSetFilterList\\\" class=\\\"ag-set-filter-list\\\" role=\\\"presentation\\\"></div>\\n            </div>\"\n    );\n  };\n  SetFilter.prototype.handleKeyDown = function (e) {\n    if (e.defaultPrevented) {\n      return;\n    }\n    switch (e.which || e.keyCode) {\n      case agGridCommunity.KeyCode.SPACE:\n        this.handleKeySpace(e);\n        break;\n      case agGridCommunity.KeyCode.ENTER:\n        this.handleKeyEnter(e);\n        break;\n    }\n  };\n  SetFilter.prototype.handleKeySpace = function (e) {\n    if (!this.eSetFilterList.contains(document.activeElement)) {\n      return;\n    }\n    var currentItem = this.virtualList.getLastFocusedRow();\n    if (currentItem != null) {\n      var component = this.virtualList.getComponentAt(currentItem);\n      if (component) {\n        e.preventDefault();\n        component.toggleSelected();\n      }\n    }\n  };\n  SetFilter.prototype.handleKeyEnter = function (e) {\n    if (this.setFilterParams.excelMode) {\n      e.preventDefault();\n      // in Excel Mode, hitting Enter is the same as pressing the Apply button\n      this.onBtApply(false, false, e);\n      if (this.setFilterParams.excelMode === 'mac') {\n        // in Mac version, select all the input text\n        this.eMiniFilter.getInputElement().select();\n      }\n    }\n  };\n  SetFilter.prototype.getCssIdentifier = function () {\n    return 'set-filter';\n  };\n  SetFilter.prototype.resetUiToDefaults = function () {\n    var _this = this;\n    this.setMiniFilter(null);\n    return this.valueModel.setModel(null).then(function () {\n      return _this.refresh();\n    });\n  };\n  SetFilter.prototype.setModelIntoUi = function (model) {\n    var _this = this;\n    this.setMiniFilter(null);\n    if (model instanceof Array) {\n      var message_1 = 'ag-Grid: The Set Filter Model is no longer an array and models as arrays are ' + 'deprecated. Please check the docs on what the set filter model looks like. Future versions of ' + 'ag-Grid will have the array version of the model removed.';\n      agGridCommunity._.doOnce(function () {\n        return console.warn(message_1);\n      }, 'setFilter.modelAsArray');\n    }\n    // also supporting old filter model for backwards compatibility\n    var values = model == null ? null : model instanceof Array ? model : model.values;\n    return this.valueModel.setModel(values).then(function () {\n      return _this.refresh();\n    });\n  };\n  SetFilter.prototype.getModelFromUi = function () {\n    var values = this.valueModel.getModel();\n    if (!values) {\n      return null;\n    }\n    if (this.gridOptionsWrapper.isEnableOldSetFilterModel()) {\n      // this is a hack, it breaks casting rules, to apply with old model\n      return values;\n    }\n    return {\n      values: values,\n      filterType: this.getFilterType()\n    };\n  };\n  SetFilter.prototype.getModel = function () {\n    return _super.prototype.getModel.call(this);\n  };\n  SetFilter.prototype.getFilterType = function () {\n    return 'set';\n  };\n  SetFilter.prototype.getValueModel = function () {\n    return this.valueModel;\n  };\n  SetFilter.prototype.areModelsEqual = function (a, b) {\n    // both are missing\n    if (a == null && b == null) {\n      return true;\n    }\n    return a != null && b != null && agGridCommunity._.areEqual(a.values, b.values);\n  };\n  SetFilter.prototype.setParams = function (params) {\n    var _this = this;\n    this.applyExcelModeOptions(params);\n    _super.prototype.setParams.call(this, params);\n    this.checkSetFilterDeprecatedParams(params);\n    this.setFilterParams = params;\n    this.valueModel = new SetValueModel(params.rowModel, params.valueGetter, params, params.colDef, params.column, params.doesRowPassOtherFilter, params.suppressSorting, function (loading) {\n      return _this.showOrHideLoadingScreen(loading);\n    }, this.valueFormatterService, function (key) {\n      return _this.translateForSetFilter(key);\n    });\n    this.initialiseFilterBodyUi();\n    if (params.rowModel.getType() === agGridCommunity.Constants.ROW_MODEL_TYPE_CLIENT_SIDE && !params.values && !params.suppressSyncValuesAfterDataChange) {\n      this.addEventListenersForDataChanges();\n    }\n  };\n  SetFilter.prototype.applyExcelModeOptions = function (params) {\n    // apply default options to match Excel behaviour, unless they have already been specified\n    if (params.excelMode === 'windows') {\n      if (!params.buttons) {\n        params.buttons = ['apply', 'cancel'];\n      }\n      if (params.closeOnApply == null) {\n        params.closeOnApply = true;\n      }\n    } else if (params.excelMode === 'mac') {\n      if (!params.buttons) {\n        params.buttons = ['reset'];\n      }\n      if (params.applyMiniFilterWhileTyping == null) {\n        params.applyMiniFilterWhileTyping = true;\n      }\n      if (params.debounceMs == null) {\n        params.debounceMs = 500;\n      }\n    }\n  };\n  SetFilter.prototype.checkSetFilterDeprecatedParams = function (params) {\n    if (params.syncValuesLikeExcel) {\n      var message_2 = 'ag-Grid: since version 22.x, the Set Filter param syncValuesLikeExcel is no longer' + ' used as this is the default behaviour. To turn this default behaviour off, use the' + ' param suppressSyncValuesAfterDataChange';\n      agGridCommunity._.doOnce(function () {\n        return console.warn(message_2);\n      }, 'syncValuesLikeExcel deprecated');\n    }\n    if (params.selectAllOnMiniFilter) {\n      var message_3 = 'ag-Grid: since version 22.x, the Set Filter param selectAllOnMiniFilter is no longer' + ' used as this is the default behaviour.';\n      agGridCommunity._.doOnce(function () {\n        return console.warn(message_3);\n      }, 'selectAllOnMiniFilter deprecated');\n    }\n    if (params.suppressSyncValuesAfterDataChange) {\n      var message_4 = 'ag-Grid: since version 23.1, the Set Filter param suppressSyncValuesAfterDataChange has' + ' been deprecated and will be removed in a future major release.';\n      agGridCommunity._.doOnce(function () {\n        return console.warn(message_4);\n      }, 'suppressSyncValuesAfterDataChange deprecated');\n    }\n    if (params.suppressRemoveEntries) {\n      var message_5 = 'ag-Grid: since version 23.1, the Set Filter param suppressRemoveEntries has' + ' been deprecated and will be removed in a future major release.';\n      agGridCommunity._.doOnce(function () {\n        return console.warn(message_5);\n      }, 'suppressRemoveEntries deprecated');\n    }\n  };\n  SetFilter.prototype.addEventListenersForDataChanges = function () {\n    var _this = this;\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_ROW_DATA_UPDATED, function () {\n      return _this.syncAfterDataChange();\n    });\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_CELL_VALUE_CHANGED, function (event) {\n      // only interested in changes to do with this column\n      if (event.column === _this.setFilterParams.column) {\n        _this.syncAfterDataChange();\n      }\n    });\n  };\n  SetFilter.prototype.syncAfterDataChange = function (refreshValues, keepSelection) {\n    var _this = this;\n    if (refreshValues === void 0) {\n      refreshValues = true;\n    }\n    if (keepSelection === void 0) {\n      keepSelection = true;\n    }\n    var promise = agGridCommunity.Promise.resolve();\n    if (refreshValues) {\n      promise = this.valueModel.refreshValues(keepSelection);\n    } else if (!keepSelection) {\n      promise = this.valueModel.setModel(null);\n    }\n    promise.then(function () {\n      _this.refresh();\n      _this.onBtApply(false, true);\n    });\n  };\n  /** @deprecated since version 23.2. The loading screen is displayed automatically when the set filter is retrieving values. */\n  SetFilter.prototype.setLoading = function (loading) {\n    var message = 'ag-Grid: since version 23.2, setLoading has been deprecated. The loading screen is displayed automatically when the set filter is retrieving values.';\n    agGridCommunity._.doOnce(function () {\n      return console.warn(message);\n    }, 'setFilter.setLoading');\n    this.showOrHideLoadingScreen(loading);\n  };\n  SetFilter.prototype.showOrHideLoadingScreen = function (isLoading) {\n    agGridCommunity._.setDisplayed(this.eFilterLoading, isLoading);\n  };\n  SetFilter.prototype.initialiseFilterBodyUi = function () {\n    this.initVirtualList();\n    this.initMiniFilter();\n  };\n  SetFilter.prototype.initVirtualList = function () {\n    var _this = this;\n    var virtualList = this.virtualList = this.createBean(new agGridCommunity.VirtualList('filter'));\n    var eSetFilterList = this.getRefElement('eSetFilterList');\n    if (eSetFilterList) {\n      eSetFilterList.appendChild(virtualList.getGui());\n    }\n    var cellHeight = this.setFilterParams.cellHeight;\n    if (cellHeight != null) {\n      virtualList.setRowHeight(cellHeight);\n    }\n    virtualList.setComponentCreator(function (value) {\n      return _this.createSetListItem(value);\n    });\n    var model;\n    if (this.setFilterParams.suppressSelectAll) {\n      model = new ModelWrapper(this.valueModel);\n    } else {\n      model = new ModelWrapperWithSelectAll(this.valueModel, function () {\n        return _this.isSelectAllSelected();\n      });\n    }\n    virtualList.setModel(model);\n  };\n  SetFilter.prototype.getSelectAllLabel = function () {\n    var key = this.valueModel.getMiniFilter() == null || !this.setFilterParams.excelMode ? 'selectAll' : 'selectAllSearchResults';\n    return this.translateForSetFilter(key);\n  };\n  SetFilter.prototype.createSetListItem = function (value) {\n    var _this = this;\n    if (value === SetFilter.SELECT_ALL_VALUE) {\n      var listItem_1 = this.createBean(new SetFilterListItem(function () {\n        return _this.getSelectAllLabel();\n      }, this.setFilterParams, function (key) {\n        return _this.translateForSetFilter(key);\n      }, this.isSelectAllSelected()));\n      listItem_1.addEventListener(SetFilterListItem.EVENT_SELECTION_CHANGED, function (e) {\n        return _this.onSelectAll(e.isSelected);\n      });\n      return listItem_1;\n    }\n    var listItem = this.createBean(new SetFilterListItem(value, this.setFilterParams, function (key) {\n      return _this.translateForSetFilter(key);\n    }, this.valueModel.isValueSelected(value)));\n    listItem.addEventListener(SetFilterListItem.EVENT_SELECTION_CHANGED, function (e) {\n      return _this.onItemSelected(value, e.isSelected);\n    });\n    return listItem;\n  };\n  SetFilter.prototype.initMiniFilter = function () {\n    var _this = this;\n    var eMiniFilter = this.eMiniFilter;\n    agGridCommunity._.setDisplayed(eMiniFilter.getGui(), !this.setFilterParams.suppressMiniFilter);\n    eMiniFilter.setValue(this.valueModel.getMiniFilter());\n    eMiniFilter.onValueChange(function () {\n      return _this.onMiniFilterInput();\n    });\n    eMiniFilter.setInputAriaLabel('Search filter values');\n    this.addManagedListener(eMiniFilter.getInputElement(), 'keypress', function (e) {\n      return _this.onMiniFilterKeyPress(e);\n    });\n  };\n  // we need to have the GUI attached before we can draw the virtual rows, as the\n  // virtual row logic needs info about the GUI state\n  SetFilter.prototype.afterGuiAttached = function (params) {\n    _super.prototype.afterGuiAttached.call(this, params);\n    this.refreshVirtualList();\n    if (this.setFilterParams.excelMode) {\n      this.resetUiToActiveModel();\n    }\n    var eMiniFilter = this.eMiniFilter;\n    eMiniFilter.setInputPlaceholder(this.translateForSetFilter('searchOoo'));\n    if (!params || !params.suppressFocus) {\n      eMiniFilter.getFocusableElement().focus();\n    }\n  };\n  SetFilter.prototype.applyModel = function () {\n    var _this = this;\n    if (this.setFilterParams.excelMode && this.valueModel.isEverythingVisibleSelected()) {\n      // In Excel, if the filter is applied with all visible values selected, then any active filter on the\n      // column is removed. This ensures the filter is removed in this situation.\n      this.valueModel.selectAllMatchingMiniFilter();\n    }\n    var result = _super.prototype.applyModel.call(this);\n    if (result) {\n      // keep appliedModelValues in sync with the applied model\n      var appliedModel = this.getModel();\n      if (appliedModel) {\n        this.appliedModelValues = {};\n        agGridCommunity._.forEach(appliedModel.values, function (value) {\n          return _this.appliedModelValues[value] = true;\n        });\n      } else {\n        this.appliedModelValues = null;\n      }\n    }\n    return result;\n  };\n  SetFilter.prototype.isModelValid = function (model) {\n    return this.setFilterParams.excelMode ? model == null || model.values.length > 0 : true;\n  };\n  SetFilter.prototype.doesFilterPass = function (params) {\n    var _this = this;\n    if (this.appliedModelValues == null) {\n      return true;\n    }\n    var _a = this.setFilterParams,\n      valueGetter = _a.valueGetter,\n      keyCreator = _a.colDef.keyCreator;\n    var value = valueGetter(params.node);\n    if (keyCreator) {\n      value = keyCreator({\n        value: value\n      });\n    }\n    value = agGridCommunity._.makeNull(value);\n    if (Array.isArray(value)) {\n      return agGridCommunity._.some(value, function (v) {\n        return _this.appliedModelValues[agGridCommunity._.makeNull(v)] === true;\n      });\n    }\n    // Comparing against a value performs better than just checking for undefined\n    // https://jsbench.me/hdk91jbw1h/\n    return this.appliedModelValues[value] === true;\n  };\n  SetFilter.prototype.onNewRowsLoaded = function () {\n    var valuesType = this.valueModel.getValuesType();\n    var keepSelection = this.isNewRowsActionKeep();\n    this.syncAfterDataChange(valuesType === SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES, keepSelection);\n  };\n  //noinspection JSUnusedGlobalSymbols\n  /**\n   * Public method provided so the user can change the value of the filter once\n   * the filter has been already started\n   * @param options The options to use.\n   */\n  SetFilter.prototype.setFilterValues = function (options) {\n    var _this = this;\n    this.valueModel.overrideValues(options, this.isNewRowsActionKeep()).then(function () {\n      _this.refresh();\n      _this.onUiChanged();\n    });\n  };\n  //noinspection JSUnusedGlobalSymbols\n  /**\n   * Public method provided so the user can reset the values of the filter once that it has started.\n   */\n  SetFilter.prototype.resetFilterValues = function () {\n    this.valueModel.setValuesType(SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES);\n    this.syncAfterDataChange(true, this.isNewRowsActionKeep());\n  };\n  SetFilter.prototype.refreshFilterValues = function () {\n    var _this = this;\n    this.valueModel.refreshValues().then(function () {\n      _this.refresh();\n      _this.onUiChanged();\n    });\n  };\n  SetFilter.prototype.onAnyFilterChanged = function () {\n    var _this = this;\n    // don't block the current action when updating the values for this filter\n    setTimeout(function () {\n      return _this.valueModel.refreshAfterAnyFilterChanged().then(function () {\n        return _this.refresh();\n      });\n    }, 0);\n  };\n  SetFilter.prototype.onMiniFilterInput = function () {\n    if (this.valueModel.setMiniFilter(this.eMiniFilter.getValue())) {\n      if (this.setFilterParams.applyMiniFilterWhileTyping) {\n        this.filterOnAllVisibleValues(false);\n      } else {\n        this.updateUiAfterMiniFilterChange();\n      }\n    }\n  };\n  SetFilter.prototype.updateUiAfterMiniFilterChange = function () {\n    if (this.setFilterParams.excelMode) {\n      if (this.valueModel.getMiniFilter() == null) {\n        this.resetUiToActiveModel();\n      } else {\n        this.valueModel.selectAllMatchingMiniFilter(true);\n        this.refresh();\n        this.onUiChanged();\n      }\n    } else {\n      this.refresh();\n    }\n    this.showOrHideResults();\n  };\n  SetFilter.prototype.showOrHideResults = function () {\n    var hideResults = this.valueModel.getMiniFilter() != null && this.valueModel.getDisplayedValueCount() < 1;\n    agGridCommunity._.setDisplayed(this.eNoMatches, hideResults);\n    agGridCommunity._.setDisplayed(this.eSetFilterList, !hideResults);\n  };\n  SetFilter.prototype.resetUiToActiveModel = function () {\n    var _this = this;\n    this.eMiniFilter.setValue(null, true);\n    this.valueModel.setMiniFilter(null);\n    this.setModelIntoUi(this.getModel()).then(function () {\n      return _this.onUiChanged(false, 'prevent');\n    });\n  };\n  SetFilter.prototype.onMiniFilterKeyPress = function (e) {\n    if (agGridCommunity._.isKeyPressed(e, agGridCommunity.KeyCode.ENTER) && !this.setFilterParams.excelMode) {\n      this.filterOnAllVisibleValues();\n    }\n  };\n  SetFilter.prototype.filterOnAllVisibleValues = function (applyImmediately) {\n    if (applyImmediately === void 0) {\n      applyImmediately = true;\n    }\n    this.valueModel.selectAllMatchingMiniFilter(true);\n    this.refresh();\n    this.onUiChanged(false, applyImmediately ? 'immediately' : 'debounce');\n    this.showOrHideResults();\n  };\n  SetFilter.prototype.focusRowIfAlive = function (rowIndex) {\n    var _this = this;\n    window.setTimeout(function () {\n      if (_this.isAlive()) {\n        _this.virtualList.focusRow(rowIndex);\n      }\n    }, 0);\n  };\n  SetFilter.prototype.onSelectAll = function (isSelected) {\n    if (isSelected) {\n      this.valueModel.selectAllMatchingMiniFilter();\n    } else {\n      this.valueModel.deselectAllMatchingMiniFilter();\n    }\n    var focusedRow = this.virtualList.getLastFocusedRow();\n    this.refresh();\n    this.onUiChanged();\n    this.focusRowIfAlive(focusedRow);\n  };\n  SetFilter.prototype.onItemSelected = function (value, isSelected) {\n    if (isSelected) {\n      this.valueModel.selectValue(value);\n    } else {\n      this.valueModel.deselectValue(value);\n    }\n    var focusedRow = this.virtualList.getLastFocusedRow();\n    this.refresh();\n    this.onUiChanged();\n    this.focusRowIfAlive(focusedRow);\n  };\n  SetFilter.prototype.setMiniFilter = function (newMiniFilter) {\n    this.eMiniFilter.setValue(newMiniFilter);\n    this.onMiniFilterInput();\n  };\n  SetFilter.prototype.getMiniFilter = function () {\n    return this.valueModel.getMiniFilter();\n  };\n  /** @deprecated since version 23.2. Please use setModel instead. */\n  SetFilter.prototype.selectEverything = function () {\n    var message = 'ag-Grid: since version 23.2, selectEverything has been deprecated. Please use setModel instead.';\n    agGridCommunity._.doOnce(function () {\n      return console.warn(message);\n    }, 'setFilter.selectEverything');\n    this.valueModel.selectAllMatchingMiniFilter();\n    this.refresh();\n  };\n  /** @deprecated since version 23.2. Please use setModel instead. */\n  SetFilter.prototype.selectNothing = function () {\n    var message = 'ag-Grid: since version 23.2, selectNothing has been deprecated. Please use setModel instead.';\n    agGridCommunity._.doOnce(function () {\n      return console.warn(message);\n    }, 'setFilter.selectNothing');\n    this.valueModel.deselectAllMatchingMiniFilter();\n    this.refresh();\n  };\n  /** @deprecated since version 23.2. Please use setModel instead. */\n  SetFilter.prototype.unselectValue = function (value) {\n    var message = 'ag-Grid: since version 23.2, unselectValue has been deprecated. Please use setModel instead.';\n    agGridCommunity._.doOnce(function () {\n      return console.warn(message);\n    }, 'setFilter.unselectValue');\n    this.valueModel.deselectValue(value);\n    this.refresh();\n  };\n  /** @deprecated since version 23.2. Please use setModel instead. */\n  SetFilter.prototype.selectValue = function (value) {\n    var message = 'ag-Grid: since version 23.2, selectValue has been deprecated. Please use setModel instead.';\n    agGridCommunity._.doOnce(function () {\n      return console.warn(message);\n    }, 'setFilter.selectValue');\n    this.valueModel.selectValue(value);\n    this.refresh();\n  };\n  SetFilter.prototype.refresh = function () {\n    this.virtualList.refresh();\n  };\n  /** @deprecated since version 23.2. Please use getModel instead. */\n  SetFilter.prototype.isValueSelected = function (value) {\n    var message = 'ag-Grid: since version 23.2, isValueSelected has been deprecated. Please use getModel instead.';\n    agGridCommunity._.doOnce(function () {\n      return console.warn(message);\n    }, 'setFilter.isValueSelected');\n    return this.valueModel.isValueSelected(value);\n  };\n  /** @deprecated since version 23.2. Please use getModel instead. */\n  SetFilter.prototype.isEverythingSelected = function () {\n    var message = 'ag-Grid: since version 23.2, isEverythingSelected has been deprecated. Please use getModel instead.';\n    agGridCommunity._.doOnce(function () {\n      return console.warn(message);\n    }, 'setFilter.isEverythingSelected');\n    return this.valueModel.isEverythingVisibleSelected();\n  };\n  /** @deprecated since version 23.2. Please use getModel instead. */\n  SetFilter.prototype.isNothingSelected = function () {\n    var message = 'ag-Grid: since version 23.2, isNothingSelected has been deprecated. Please use getModel instead.';\n    agGridCommunity._.doOnce(function () {\n      return console.warn(message);\n    }, 'setFilter.isNothingSelected');\n    return this.valueModel.isNothingVisibleSelected();\n  };\n  /** @deprecated since version 23.2. Please use getValues instead. */\n  SetFilter.prototype.getUniqueValueCount = function () {\n    var message = 'ag-Grid: since version 23.2, getUniqueValueCount has been deprecated. Please use getValues instead.';\n    agGridCommunity._.doOnce(function () {\n      return console.warn(message);\n    }, 'setFilter.getUniqueValueCount');\n    return this.valueModel.getUniqueValueCount();\n  };\n  /** @deprecated since version 23.2. Please use getValues instead. */\n  SetFilter.prototype.getUniqueValue = function (index) {\n    var message = 'ag-Grid: since version 23.2, getUniqueValue has been deprecated. Please use getValues instead.';\n    agGridCommunity._.doOnce(function () {\n      return console.warn(message);\n    }, 'setFilter.getUniqueValue');\n    return this.valueModel.getUniqueValue(index);\n  };\n  SetFilter.prototype.getValues = function () {\n    return this.valueModel.getValues();\n  };\n  SetFilter.prototype.refreshVirtualList = function () {\n    if (this.setFilterParams.refreshValuesOnOpen) {\n      this.refreshFilterValues();\n    } else {\n      this.refresh();\n    }\n  };\n  SetFilter.prototype.translateForSetFilter = function (key) {\n    var translate = this.gridOptionsWrapper.getLocaleTextFunc();\n    return translate(key, DEFAULT_LOCALE_TEXT[key]);\n  };\n  SetFilter.prototype.isSelectAllSelected = function () {\n    if (!this.setFilterParams.defaultToNothingSelected) {\n      // everything selected by default\n      if (this.valueModel.hasSelections() && this.valueModel.isNothingVisibleSelected()) {\n        return false;\n      }\n      if (this.valueModel.isEverythingVisibleSelected()) {\n        return true;\n      }\n    } else {\n      // nothing selected by default\n      if (this.valueModel.hasSelections() && this.valueModel.isEverythingVisibleSelected()) {\n        return true;\n      }\n      if (this.valueModel.isNothingVisibleSelected()) {\n        return false;\n      }\n    }\n    return undefined;\n  };\n  SetFilter.prototype.destroy = function () {\n    if (this.virtualList != null) {\n      this.virtualList.destroy();\n      this.virtualList = null;\n    }\n    _super.prototype.destroy.call(this);\n  };\n  SetFilter.SELECT_ALL_VALUE = '__AG_SELECT_ALL__';\n  __decorate$1E([agGridCommunity.RefSelector('eMiniFilter')], SetFilter.prototype, \"eMiniFilter\", void 0);\n  __decorate$1E([agGridCommunity.RefSelector('eFilterLoading')], SetFilter.prototype, \"eFilterLoading\", void 0);\n  __decorate$1E([agGridCommunity.RefSelector('eSetFilterList')], SetFilter.prototype, \"eSetFilterList\", void 0);\n  __decorate$1E([agGridCommunity.RefSelector('eFilterNoMatches')], SetFilter.prototype, \"eNoMatches\", void 0);\n  __decorate$1E([agGridCommunity.Autowired('valueFormatterService')], SetFilter.prototype, \"valueFormatterService\", void 0);\n  return SetFilter;\n}(agGridCommunity.ProvidedFilter);\nvar ModelWrapper = /** @class */function () {\n  function ModelWrapper(model) {\n    this.model = model;\n  }\n  ModelWrapper.prototype.getRowCount = function () {\n    return this.model.getDisplayedValueCount();\n  };\n  ModelWrapper.prototype.getRow = function (index) {\n    return this.model.getDisplayedValue(index);\n  };\n  ModelWrapper.prototype.isRowSelected = function (index) {\n    return this.model.isValueSelected(this.getRow(index));\n  };\n  return ModelWrapper;\n}();\nvar ModelWrapperWithSelectAll = /** @class */function () {\n  function ModelWrapperWithSelectAll(model, isSelectAllSelected) {\n    this.model = model;\n    this.isSelectAllSelected = isSelectAllSelected;\n  }\n  ModelWrapperWithSelectAll.prototype.getRowCount = function () {\n    return this.model.getDisplayedValueCount() + 1;\n  };\n  ModelWrapperWithSelectAll.prototype.getRow = function (index) {\n    return index === 0 ? SetFilter.SELECT_ALL_VALUE : this.model.getDisplayedValue(index - 1);\n  };\n  ModelWrapperWithSelectAll.prototype.isRowSelected = function (index) {\n    return index === 0 ? this.isSelectAllSelected() : this.model.isValueSelected(this.getRow(index - 1));\n  };\n  return ModelWrapperWithSelectAll;\n}();\nvar __extends$2L = undefined && undefined.__extends || function () {\n  var _extendStatics176 = function extendStatics(d, b) {\n    _extendStatics176 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics176(d, b);\n  };\n  return function (d, b) {\n    _extendStatics176(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1F = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar SetFloatingFilterComp = /** @class */function (_super) {\n  __extends$2L(SetFloatingFilterComp, _super);\n  function SetFloatingFilterComp() {\n    var _this = _super.call(this, /* html */\"\\n            <div class=\\\"ag-floating-filter-input\\\" role=\\\"presentation\\\">\\n                <ag-input-text-field ref=\\\"eFloatingFilterText\\\"></ag-input-text-field>\\n            </div>\") || this;\n    _this.availableValuesListenerAdded = false;\n    return _this;\n  }\n  // this is a user component, and IComponent has \"public destroy()\" as part of the interface.\n  // so we need to override destroy() just to make the method public.\n  SetFloatingFilterComp.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n  };\n  SetFloatingFilterComp.prototype.init = function (params) {\n    var displayName = this.columnController.getDisplayNameForColumn(params.column, 'header', true);\n    this.eFloatingFilterText.setDisabled(true).setInputAriaLabel(displayName + \" Filter Input\").addGuiEventListener('click', function () {\n      return params.showParentFilter();\n    });\n    this.params = params;\n  };\n  SetFloatingFilterComp.prototype.onParentModelChanged = function (parentModel) {\n    this.lastKnownModel = parentModel;\n    this.updateSetFilterText();\n  };\n  SetFloatingFilterComp.prototype.addAvailableValuesListener = function () {\n    var _this = this;\n    this.params.parentFilterInstance(function (setFilter) {\n      var setValueModel = setFilter.getValueModel();\n      // unlike other filters, what we show in the floating filter can be different, even\n      // if another filter changes. this is due to how set filter restricts its values based\n      // on selections in other filters, e.g. if you filter Language to English, then the set filter\n      // on Country will only show English speaking countries. Thus the list of items to show\n      // in the floating filter can change.\n      _this.addManagedListener(setValueModel, SetValueModel.EVENT_AVAILABLE_VALUES_CHANGED, function () {\n        return _this.updateSetFilterText();\n      });\n    });\n    this.availableValuesListenerAdded = true;\n  };\n  SetFloatingFilterComp.prototype.updateSetFilterText = function () {\n    var _this = this;\n    if (!this.lastKnownModel) {\n      this.eFloatingFilterText.setValue('');\n      return;\n    }\n    if (!this.availableValuesListenerAdded) {\n      this.addAvailableValuesListener();\n    }\n    // also supporting old filter model for backwards compatibility\n    var values = this.lastKnownModel instanceof Array ? this.lastKnownModel : this.lastKnownModel.values;\n    if (!values) {\n      this.eFloatingFilterText.setValue('');\n      return;\n    }\n    this.params.parentFilterInstance(function (setFilter) {\n      var valueModel = setFilter.getValueModel();\n      var availableValues = agGridCommunity._.filter(values, function (v) {\n        return valueModel.isValueAvailable(v);\n      });\n      var localeTextFunc = _this.gridOptionsWrapper.getLocaleTextFunc();\n      // format all the values, if a formatter is provided\n      var formattedValues = agGridCommunity._.map(availableValues, function (value) {\n        var formattedValue = _this.valueFormatterService.formatValue(_this.params.column, null, null, value);\n        var valueToRender = formattedValue != null ? formattedValue : value;\n        return valueToRender == null ? localeTextFunc('blanks', DEFAULT_LOCALE_TEXT['blanks']) : valueToRender;\n      });\n      var arrayToDisplay = formattedValues.length > 10 ? formattedValues.slice(0, 10).concat('...') : formattedValues;\n      var valuesString = \"(\" + formattedValues.length + \") \" + arrayToDisplay.join(',');\n      _this.eFloatingFilterText.setValue(valuesString);\n    });\n  };\n  __decorate$1F([agGridCommunity.RefSelector('eFloatingFilterText')], SetFloatingFilterComp.prototype, \"eFloatingFilterText\", void 0);\n  __decorate$1F([agGridCommunity.Autowired('valueFormatterService')], SetFloatingFilterComp.prototype, \"valueFormatterService\", void 0);\n  __decorate$1F([agGridCommunity.Autowired('gridOptionsWrapper')], SetFloatingFilterComp.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1F([agGridCommunity.Autowired('columnController')], SetFloatingFilterComp.prototype, \"columnController\", void 0);\n  return SetFloatingFilterComp;\n}(agGridCommunity.Component);\nvar SetFilterModule = {\n  moduleName: agGridCommunity.ModuleNames.SetFilterModule,\n  beans: [],\n  userComponents: [{\n    componentName: 'agSetColumnFilter',\n    componentClass: SetFilter\n  }, {\n    componentName: 'agSetColumnFloatingFilter',\n    componentClass: SetFloatingFilterComp\n  }],\n  dependantModules: [EnterpriseCoreModule]\n};\nvar __extends$2M = undefined && undefined.__extends || function () {\n  var _extendStatics177 = function extendStatics(d, b) {\n    _extendStatics177 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics177(d, b);\n  };\n  return function (d, b) {\n    _extendStatics177(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1G = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar StatusBarService = /** @class */function (_super) {\n  __extends$2M(StatusBarService, _super);\n  // tslint:disable-next-line\n  function StatusBarService() {\n    var _this = _super.call(this) || this;\n    _this.allComponents = {};\n    return _this;\n  }\n  StatusBarService.prototype.registerStatusPanel = function (key, component) {\n    this.allComponents[key] = component;\n  };\n  StatusBarService.prototype.getStatusPanel = function (key) {\n    return this.allComponents[key];\n  };\n  StatusBarService = __decorate$1G([agGridCommunity.Bean('statusBarService')], StatusBarService);\n  return StatusBarService;\n}(agGridCommunity.BeanStub);\nvar __extends$2N = undefined && undefined.__extends || function () {\n  var _extendStatics178 = function extendStatics(d, b) {\n    _extendStatics178 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics178(d, b);\n  };\n  return function (d, b) {\n    _extendStatics178(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1H = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar StatusBar = /** @class */function (_super) {\n  __extends$2N(StatusBar, _super);\n  function StatusBar() {\n    return _super.call(this, StatusBar.TEMPLATE) || this;\n  }\n  StatusBar.prototype.postConstruct = function () {\n    if (this.gridOptions.statusBar && this.gridOptions.statusBar.statusPanels) {\n      var leftStatusPanelComponents = this.gridOptions.statusBar.statusPanels.filter(function (componentConfig) {\n        return componentConfig.align === 'left';\n      });\n      this.createAndRenderComponents(leftStatusPanelComponents, this.eStatusBarLeft);\n      var centerStatusPanelComponents = this.gridOptions.statusBar.statusPanels.filter(function (componentConfig) {\n        return componentConfig.align === 'center';\n      });\n      this.createAndRenderComponents(centerStatusPanelComponents, this.eStatusBarCenter);\n      var rightStatusPanelComponents = this.gridOptions.statusBar.statusPanels.filter(function (componentConfig) {\n        return !componentConfig.align || componentConfig.align === 'right';\n      });\n      this.createAndRenderComponents(rightStatusPanelComponents, this.eStatusBarRight);\n    } else {\n      this.setDisplayed(false);\n    }\n  };\n  StatusBar.prototype.createAndRenderComponents = function (statusBarComponents, ePanelComponent) {\n    var _this = this;\n    var componentDetails = [];\n    statusBarComponents.forEach(function (componentConfig) {\n      var params = {\n        api: _this.gridOptionsWrapper.getApi(),\n        columnApi: _this.gridOptionsWrapper.getColumnApi(),\n        context: _this.gridOptionsWrapper.getContext()\n      };\n      var promise = _this.userComponentFactory.newStatusPanelComponent(componentConfig, params);\n      componentDetails.push({\n        // default to the component name if no key supplied\n        key: componentConfig.key || componentConfig.statusPanel,\n        promise: promise\n      });\n    });\n    agGridCommunity.Promise.all(componentDetails.map(function (details) {\n      return details.promise;\n    })).then(function () {\n      componentDetails.forEach(function (componentDetail) {\n        componentDetail.promise.then(function (component) {\n          var destroyFunc = function destroyFunc() {\n            _this.getContext().destroyBean(component);\n          };\n          if (_this.isAlive()) {\n            _this.statusBarService.registerStatusPanel(componentDetail.key, component);\n            ePanelComponent.appendChild(component.getGui());\n            _this.addDestroyFunc(destroyFunc);\n          } else {\n            destroyFunc();\n          }\n        });\n      });\n    });\n  };\n  StatusBar.TEMPLATE = \"<div class=\\\"ag-status-bar\\\">\\n            <div ref=\\\"eStatusBarLeft\\\" class=\\\"ag-status-bar-left\\\"></div>\\n            <div ref=\\\"eStatusBarCenter\\\" class=\\\"ag-status-bar-center\\\"></div>\\n            <div ref=\\\"eStatusBarRight\\\" class=\\\"ag-status-bar-right\\\"></div>\\n        </div>\";\n  __decorate$1H([agGridCommunity.Autowired('gridOptionsWrapper')], StatusBar.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1H([agGridCommunity.Autowired('gridOptions')], StatusBar.prototype, \"gridOptions\", void 0);\n  __decorate$1H([agGridCommunity.Autowired('userComponentFactory')], StatusBar.prototype, \"userComponentFactory\", void 0);\n  __decorate$1H([agGridCommunity.Autowired('statusBarService')], StatusBar.prototype, \"statusBarService\", void 0);\n  __decorate$1H([agGridCommunity.RefSelector('eStatusBarLeft')], StatusBar.prototype, \"eStatusBarLeft\", void 0);\n  __decorate$1H([agGridCommunity.RefSelector('eStatusBarCenter')], StatusBar.prototype, \"eStatusBarCenter\", void 0);\n  __decorate$1H([agGridCommunity.RefSelector('eStatusBarRight')], StatusBar.prototype, \"eStatusBarRight\", void 0);\n  __decorate$1H([agGridCommunity.PostConstruct], StatusBar.prototype, \"postConstruct\", null);\n  return StatusBar;\n}(agGridCommunity.Component);\nvar __extends$2O = undefined && undefined.__extends || function () {\n  var _extendStatics179 = function extendStatics(d, b) {\n    _extendStatics179 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics179(d, b);\n  };\n  return function (d, b) {\n    _extendStatics179(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1I = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar NameValueComp = /** @class */function (_super) {\n  __extends$2O(NameValueComp, _super);\n  function NameValueComp() {\n    return _super.call(this, NameValueComp.TEMPLATE) || this;\n  }\n  NameValueComp.prototype.setLabel = function (key, defaultValue) {\n    // we want to hide until the first value comes in\n    this.setDisplayed(false);\n    var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n    this.eLabel.innerHTML = localeTextFunc(key, defaultValue);\n  };\n  NameValueComp.prototype.setValue = function (value) {\n    this.eValue.innerHTML = value;\n  };\n  NameValueComp.TEMPLATE = \"<div class=\\\"ag-status-name-value\\\">  \\n            <span ref=\\\"eLabel\\\"></span>:&nbsp;\\n            <span ref=\\\"eValue\\\" class=\\\"ag-status-name-value-value\\\"></span>\\n        </div>\";\n  __decorate$1I([agGridCommunity.Autowired('gridOptionsWrapper')], NameValueComp.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1I([agGridCommunity.RefSelector('eLabel')], NameValueComp.prototype, \"eLabel\", void 0);\n  __decorate$1I([agGridCommunity.RefSelector('eValue')], NameValueComp.prototype, \"eValue\", void 0);\n  return NameValueComp;\n}(agGridCommunity.Component);\nvar __extends$2P = undefined && undefined.__extends || function () {\n  var _extendStatics180 = function extendStatics(d, b) {\n    _extendStatics180 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics180(d, b);\n  };\n  return function (d, b) {\n    _extendStatics180(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1J = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar TotalAndFilteredRowsComp = /** @class */function (_super) {\n  __extends$2P(TotalAndFilteredRowsComp, _super);\n  function TotalAndFilteredRowsComp() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  TotalAndFilteredRowsComp.prototype.postConstruct = function () {\n    // this component is only really useful with client side row model\n    if (this.gridApi.getModel().getType() !== 'clientSide') {\n      console.warn(\"ag-Grid: agTotalAndFilteredRowCountComponent should only be used with the client side row model.\");\n      return;\n    }\n    this.setLabel('totalAndFilteredRows', 'Rows');\n    this.addCssClass('ag-status-panel');\n    this.addCssClass('ag-status-panel-total-and-filtered-row-count');\n    this.setDisplayed(true);\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_MODEL_UPDATED, this.onDataChanged.bind(this));\n  };\n  TotalAndFilteredRowsComp.prototype.onDataChanged = function () {\n    var rowCount = agGridCommunity._.formatNumberCommas(this.getFilteredRowCountValue());\n    var totalRowCount = agGridCommunity._.formatNumberCommas(this.getTotalRowCount());\n    if (rowCount === totalRowCount) {\n      this.setValue(rowCount);\n    } else {\n      var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n      this.setValue(rowCount + \" \" + localeTextFunc('of', 'of') + \" \" + totalRowCount);\n    }\n  };\n  TotalAndFilteredRowsComp.prototype.getFilteredRowCountValue = function () {\n    var filteredRowCount = 0;\n    this.gridApi.forEachNodeAfterFilter(function (node) {\n      if (!node.group) {\n        filteredRowCount++;\n      }\n    });\n    return filteredRowCount;\n  };\n  TotalAndFilteredRowsComp.prototype.getTotalRowCount = function () {\n    var totalRowCount = 0;\n    this.gridApi.forEachNode(function (node) {\n      if (!node.group) {\n        totalRowCount++;\n      }\n    });\n    return totalRowCount;\n  };\n  TotalAndFilteredRowsComp.prototype.init = function () {};\n  // this is a user component, and IComponent has \"public destroy()\" as part of the interface.\n  // so we need to override destroy() just to make the method public.\n  TotalAndFilteredRowsComp.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n  };\n  __decorate$1J([agGridCommunity.Autowired('gridApi')], TotalAndFilteredRowsComp.prototype, \"gridApi\", void 0);\n  __decorate$1J([agGridCommunity.PostConstruct], TotalAndFilteredRowsComp.prototype, \"postConstruct\", null);\n  return TotalAndFilteredRowsComp;\n}(NameValueComp);\nvar __extends$2Q = undefined && undefined.__extends || function () {\n  var _extendStatics181 = function extendStatics(d, b) {\n    _extendStatics181 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics181(d, b);\n  };\n  return function (d, b) {\n    _extendStatics181(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1K = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar FilteredRowsComp = /** @class */function (_super) {\n  __extends$2Q(FilteredRowsComp, _super);\n  function FilteredRowsComp() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  FilteredRowsComp.prototype.postConstruct = function () {\n    this.setLabel('filteredRows', 'Filtered');\n    // this component is only really useful with client side row model\n    if (this.gridApi.getModel().getType() !== 'clientSide') {\n      console.warn(\"ag-Grid: agFilteredRowCountComponent should only be used with the client side row model.\");\n      return;\n    }\n    this.addCssClass('ag-status-panel');\n    this.addCssClass('ag-status-panel-filtered-row-count');\n    this.setDisplayed(true);\n    var listener = this.onDataChanged.bind(this);\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_MODEL_UPDATED, listener);\n  };\n  FilteredRowsComp.prototype.onDataChanged = function () {\n    var totalRowCountValue = this.getTotalRowCountValue();\n    var filteredRowCountValue = this.getFilteredRowCountValue();\n    this.setValue(agGridCommunity._.formatNumberCommas(filteredRowCountValue));\n    this.setDisplayed(totalRowCountValue !== filteredRowCountValue);\n  };\n  FilteredRowsComp.prototype.getTotalRowCountValue = function () {\n    var totalRowCount = 0;\n    this.gridApi.forEachNode(function (node) {\n      return totalRowCount += 1;\n    });\n    return totalRowCount;\n  };\n  FilteredRowsComp.prototype.getFilteredRowCountValue = function () {\n    var filteredRowCount = 0;\n    this.gridApi.forEachNodeAfterFilter(function (node) {\n      if (!node.group) {\n        filteredRowCount += 1;\n      }\n    });\n    return filteredRowCount;\n  };\n  FilteredRowsComp.prototype.init = function () {};\n  // this is a user component, and IComponent has \"public destroy()\" as part of the interface.\n  // so we need to override destroy() just to make the method public.\n  FilteredRowsComp.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n  };\n  __decorate$1K([agGridCommunity.Autowired('gridApi')], FilteredRowsComp.prototype, \"gridApi\", void 0);\n  __decorate$1K([agGridCommunity.PostConstruct], FilteredRowsComp.prototype, \"postConstruct\", null);\n  return FilteredRowsComp;\n}(NameValueComp);\nvar __extends$2R = undefined && undefined.__extends || function () {\n  var _extendStatics182 = function extendStatics(d, b) {\n    _extendStatics182 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics182(d, b);\n  };\n  return function (d, b) {\n    _extendStatics182(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1L = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar TotalRowsComp = /** @class */function (_super) {\n  __extends$2R(TotalRowsComp, _super);\n  function TotalRowsComp() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  TotalRowsComp.prototype.postConstruct = function () {\n    this.setLabel('totalRows', 'Total Rows');\n    // this component is only really useful with client side row model\n    if (this.gridApi.getModel().getType() !== 'clientSide') {\n      console.warn(\"ag-Grid: agTotalRowCountComponent should only be used with the client side row model.\");\n      return;\n    }\n    this.addCssClass('ag-status-panel');\n    this.addCssClass('ag-status-panel-total-row-count');\n    this.setDisplayed(true);\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_MODEL_UPDATED, this.onDataChanged.bind(this));\n  };\n  TotalRowsComp.prototype.onDataChanged = function () {\n    this.setValue(agGridCommunity._.formatNumberCommas(this.getRowCountValue()));\n  };\n  TotalRowsComp.prototype.getRowCountValue = function () {\n    var totalRowCount = 0;\n    this.gridApi.forEachLeafNode(function (node) {\n      return totalRowCount += 1;\n    });\n    return totalRowCount;\n  };\n  TotalRowsComp.prototype.init = function () {};\n  // this is a user component, and IComponent has \"public destroy()\" as part of the interface.\n  // so we need to override destroy() just to make the method public.\n  TotalRowsComp.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n  };\n  __decorate$1L([agGridCommunity.Autowired('gridApi')], TotalRowsComp.prototype, \"gridApi\", void 0);\n  __decorate$1L([agGridCommunity.PostConstruct], TotalRowsComp.prototype, \"postConstruct\", null);\n  return TotalRowsComp;\n}(NameValueComp);\nvar __extends$2S = undefined && undefined.__extends || function () {\n  var _extendStatics183 = function extendStatics(d, b) {\n    _extendStatics183 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics183(d, b);\n  };\n  return function (d, b) {\n    _extendStatics183(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1M = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar SelectedRowsComp = /** @class */function (_super) {\n  __extends$2S(SelectedRowsComp, _super);\n  function SelectedRowsComp() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  SelectedRowsComp.prototype.postConstruct = function () {\n    if (!this.isValidRowModel()) {\n      console.warn(\"ag-Grid: agSelectedRowCountComponent should only be used with the client and server side row model.\");\n      return;\n    }\n    this.setLabel('selectedRows', 'Selected');\n    this.addCssClass('ag-status-panel');\n    this.addCssClass('ag-status-panel-selected-row-count');\n    var selectedRowCount = this.gridApi.getSelectedRows().length;\n    this.setValue(agGridCommunity._.formatNumberCommas(selectedRowCount));\n    this.setDisplayed(selectedRowCount > 0);\n    var eventListener = this.onRowSelectionChanged.bind(this);\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_MODEL_UPDATED, eventListener);\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_SELECTION_CHANGED, eventListener);\n  };\n  SelectedRowsComp.prototype.isValidRowModel = function () {\n    // this component is only really useful with client or server side rowmodels\n    var rowModelType = this.gridApi.getModel().getType();\n    return rowModelType === 'clientSide' || rowModelType === 'serverSide';\n  };\n  SelectedRowsComp.prototype.onRowSelectionChanged = function () {\n    var selectedRowCount = this.gridApi.getSelectedRows().length;\n    this.setValue(agGridCommunity._.formatNumberCommas(selectedRowCount));\n    this.setDisplayed(selectedRowCount > 0);\n  };\n  SelectedRowsComp.prototype.init = function () {};\n  // this is a user component, and IComponent has \"public destroy()\" as part of the interface.\n  // so we need to override destroy() just to make the method public.\n  SelectedRowsComp.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n  };\n  __decorate$1M([agGridCommunity.Autowired('gridApi')], SelectedRowsComp.prototype, \"gridApi\", void 0);\n  __decorate$1M([agGridCommunity.PostConstruct], SelectedRowsComp.prototype, \"postConstruct\", null);\n  return SelectedRowsComp;\n}(NameValueComp);\nvar __extends$2T = undefined && undefined.__extends || function () {\n  var _extendStatics184 = function extendStatics(d, b) {\n    _extendStatics184 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics184(d, b);\n  };\n  return function (d, b) {\n    _extendStatics184(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1N = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar AggregationComp = /** @class */function (_super) {\n  __extends$2T(AggregationComp, _super);\n  function AggregationComp() {\n    return _super.call(this, AggregationComp.TEMPLATE) || this;\n  }\n  // this is a user component, and IComponent has \"public destroy()\" as part of the interface.\n  // so we need to override destroy() just to make the method public.\n  AggregationComp.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n  };\n  AggregationComp.prototype.postConstruct = function () {\n    if (!this.isValidRowModel()) {\n      console.warn(\"ag-Grid: agAggregationComponent should only be used with the client and server side row model.\");\n      return;\n    }\n    this.avgAggregationComp.setLabel('average', 'Average');\n    this.countAggregationComp.setLabel('count', 'Count');\n    this.minAggregationComp.setLabel('min', 'Min');\n    this.maxAggregationComp.setLabel('max', 'Max');\n    this.sumAggregationComp.setLabel('sum', 'Sum');\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_RANGE_SELECTION_CHANGED, this.onRangeSelectionChanged.bind(this));\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_MODEL_UPDATED, this.onRangeSelectionChanged.bind(this));\n  };\n  AggregationComp.prototype.isValidRowModel = function () {\n    // this component is only really useful with client or server side rowmodels\n    var rowModelType = this.gridApi.getModel().getType();\n    return rowModelType === 'clientSide' || rowModelType === 'serverSide';\n  };\n  AggregationComp.prototype.init = function () {};\n  AggregationComp.prototype.setAggregationComponentValue = function (aggFuncName, value, visible) {\n    var statusBarValueComponent = this.getAggregationValueComponent(aggFuncName);\n    if (agGridCommunity._.exists(statusBarValueComponent) && statusBarValueComponent) {\n      statusBarValueComponent.setValue(agGridCommunity._.formatNumberTwoDecimalPlacesAndCommas(value));\n      statusBarValueComponent.setDisplayed(visible);\n    }\n  };\n  AggregationComp.prototype.getAggregationValueComponent = function (aggFuncName) {\n    // converts user supplied agg name to our reference - eg: sum => sumAggregationComp\n    var refComponentName = aggFuncName + \"AggregationComp\";\n    // if the user has specified the agAggregationPanelComp but no aggFuncs we show the all\n    // if the user has specified the agAggregationPanelComp and aggFuncs, then we only show the aggFuncs listed\n    var statusBarValueComponent = null;\n    var aggregationPanelConfig = agGridCommunity._.exists(this.gridOptions.statusBar) && this.gridOptions.statusBar ? agGridCommunity._.find(this.gridOptions.statusBar.statusPanels, function (panel) {\n      return panel.statusPanel === 'agAggregationComponent';\n    }) : null;\n    if (agGridCommunity._.exists(aggregationPanelConfig) && aggregationPanelConfig) {\n      // a little defensive here - if no statusPanelParams show it, if componentParams we also expect aggFuncs\n      if (!agGridCommunity._.exists(aggregationPanelConfig.statusPanelParams) || agGridCommunity._.exists(aggregationPanelConfig.statusPanelParams) && agGridCommunity._.exists(aggregationPanelConfig.statusPanelParams.aggFuncs) && agGridCommunity._.exists(agGridCommunity._.find(aggregationPanelConfig.statusPanelParams.aggFuncs, function (func) {\n        return func === aggFuncName;\n      }))) {\n        statusBarValueComponent = this[refComponentName];\n      }\n    } else {\n      // components not specified - assume we can show this component\n      statusBarValueComponent = this[refComponentName];\n    }\n    // either we can't find it (which would indicate a typo or similar user side), or the user has deliberately\n    // not listed the component in aggFuncs\n    return statusBarValueComponent;\n  };\n  AggregationComp.prototype.onRangeSelectionChanged = function () {\n    var _this = this;\n    var cellRanges = this.rangeController ? this.rangeController.getCellRanges() : undefined;\n    var sum = 0;\n    var count = 0;\n    var numberCount = 0;\n    var min = null;\n    var max = null;\n    var cellsSoFar = {};\n    if (cellRanges && !agGridCommunity._.missingOrEmpty(cellRanges)) {\n      cellRanges.forEach(function (cellRange) {\n        var currentRow = _this.rangeController.getRangeStartRow(cellRange);\n        var lastRow = _this.rangeController.getRangeEndRow(cellRange);\n        while (true) {\n          var finishedAllRows = agGridCommunity._.missing(currentRow) || !currentRow || _this.rowPositionUtils.before(lastRow, currentRow);\n          if (finishedAllRows || !currentRow || !cellRange.columns) {\n            break;\n          }\n          cellRange.columns.forEach(function (col) {\n            if (currentRow === null) {\n              return;\n            }\n            // we only want to include each cell once, in case a cell is in multiple ranges\n            var cellId = _this.cellPositionUtils.createId({\n              rowPinned: currentRow.rowPinned,\n              column: col,\n              rowIndex: currentRow.rowIndex\n            });\n            if (cellsSoFar[cellId]) {\n              return;\n            }\n            cellsSoFar[cellId] = true;\n            var rowNode = _this.rowRenderer.getRowNode(currentRow);\n            if (agGridCommunity._.missing(rowNode)) {\n              return;\n            }\n            var value = _this.valueService.getValue(col, rowNode);\n            // if empty cell, skip it, doesn't impact count or anything\n            if (agGridCommunity._.missing(value) || value === '') {\n              return;\n            }\n            // see if value is wrapped, can happen when doing count() or avg() functions\n            if (value.value) {\n              value = value.value;\n            }\n            if (typeof value === 'string') {\n              value = Number(value);\n            }\n            if (typeof value === 'number' && !isNaN(value)) {\n              sum += value;\n              if (max === null || value > max) {\n                max = value;\n              }\n              if (min === null || value < min) {\n                min = value;\n              }\n              numberCount++;\n            }\n            count++;\n          });\n          currentRow = _this.cellNavigationService.getRowBelow(currentRow);\n        }\n      });\n    }\n    var gotResult = count > 1;\n    var gotNumberResult = numberCount > 1;\n    // we show count even if no numbers\n    this.setAggregationComponentValue('count', count, gotResult);\n    // show if numbers found\n    this.setAggregationComponentValue('sum', sum, gotNumberResult);\n    this.setAggregationComponentValue('min', min, gotNumberResult);\n    this.setAggregationComponentValue('max', max, gotNumberResult);\n    this.setAggregationComponentValue('avg', sum / numberCount, gotNumberResult);\n  };\n  AggregationComp.TEMPLATE = \"<div class=\\\"ag-status-panel ag-status-panel-aggregations\\\">\\n            <ag-name-value ref=\\\"avgAggregationComp\\\"></ag-name-value>\\n            <ag-name-value ref=\\\"countAggregationComp\\\"></ag-name-value>\\n            <ag-name-value ref=\\\"minAggregationComp\\\"></ag-name-value>\\n            <ag-name-value ref=\\\"maxAggregationComp\\\"></ag-name-value>\\n            <ag-name-value ref=\\\"sumAggregationComp\\\"></ag-name-value>\\n        </div>\";\n  __decorate$1N([agGridCommunity.Optional('rangeController')], AggregationComp.prototype, \"rangeController\", void 0);\n  __decorate$1N([agGridCommunity.Autowired('valueService')], AggregationComp.prototype, \"valueService\", void 0);\n  __decorate$1N([agGridCommunity.Autowired('cellNavigationService')], AggregationComp.prototype, \"cellNavigationService\", void 0);\n  __decorate$1N([agGridCommunity.Autowired('rowRenderer')], AggregationComp.prototype, \"rowRenderer\", void 0);\n  __decorate$1N([agGridCommunity.Autowired('gridOptionsWrapper')], AggregationComp.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1N([agGridCommunity.Autowired('gridOptions')], AggregationComp.prototype, \"gridOptions\", void 0);\n  __decorate$1N([agGridCommunity.Autowired('gridApi')], AggregationComp.prototype, \"gridApi\", void 0);\n  __decorate$1N([agGridCommunity.Autowired('cellPositionUtils')], AggregationComp.prototype, \"cellPositionUtils\", void 0);\n  __decorate$1N([agGridCommunity.Autowired('rowPositionUtils')], AggregationComp.prototype, \"rowPositionUtils\", void 0);\n  __decorate$1N([agGridCommunity.RefSelector('sumAggregationComp')], AggregationComp.prototype, \"sumAggregationComp\", void 0);\n  __decorate$1N([agGridCommunity.RefSelector('countAggregationComp')], AggregationComp.prototype, \"countAggregationComp\", void 0);\n  __decorate$1N([agGridCommunity.RefSelector('minAggregationComp')], AggregationComp.prototype, \"minAggregationComp\", void 0);\n  __decorate$1N([agGridCommunity.RefSelector('maxAggregationComp')], AggregationComp.prototype, \"maxAggregationComp\", void 0);\n  __decorate$1N([agGridCommunity.RefSelector('avgAggregationComp')], AggregationComp.prototype, \"avgAggregationComp\", void 0);\n  __decorate$1N([agGridCommunity.PostConstruct], AggregationComp.prototype, \"postConstruct\", null);\n  return AggregationComp;\n}(agGridCommunity.Component);\nvar StatusBarModule = {\n  moduleName: agGridCommunity.ModuleNames.StatusBarModule,\n  beans: [StatusBarService],\n  agStackComponents: [{\n    componentName: 'AgStatusBar',\n    componentClass: StatusBar\n  }, {\n    componentName: 'AgNameValue',\n    componentClass: NameValueComp\n  }],\n  userComponents: [{\n    componentName: 'agAggregationComponent',\n    componentClass: AggregationComp\n  }, {\n    componentName: 'agSelectedRowCountComponent',\n    componentClass: SelectedRowsComp\n  }, {\n    componentName: 'agTotalRowCountComponent',\n    componentClass: TotalRowsComp\n  }, {\n    componentName: 'agFilteredRowCountComponent',\n    componentClass: FilteredRowsComp\n  }, {\n    componentName: 'agTotalAndFilteredRowCountComponent',\n    componentClass: TotalAndFilteredRowsComp\n  }],\n  dependantModules: [EnterpriseCoreModule]\n};\nvar __extends$2U = undefined && undefined.__extends || function () {\n  var _extendStatics185 = function extendStatics(d, b) {\n    _extendStatics185 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics185(d, b);\n  };\n  return function (d, b) {\n    _extendStatics185(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1O = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ViewportRowModel = /** @class */function (_super) {\n  __extends$2U(ViewportRowModel, _super);\n  function ViewportRowModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    // rowRenderer tells us these\n    _this.firstRow = -1;\n    _this.lastRow = -1;\n    // datasource tells us this\n    _this.rowCount = -1;\n    _this.rowNodesByIndex = {};\n    return _this;\n  }\n  // we don't implement as lazy row heights is not supported in this row model\n  ViewportRowModel.prototype.ensureRowHeightsValid = function (startPixel, endPixel, startLimitIndex, endLimitIndex) {\n    return false;\n  };\n  ViewportRowModel.prototype.init = function () {\n    this.rowHeight = this.gridOptionsWrapper.getRowHeightAsNumber();\n    this.addManagedListener(this.eventService, agGridCommunity.Events.EVENT_VIEWPORT_CHANGED, this.onViewportChanged.bind(this));\n  };\n  ViewportRowModel.prototype.start = function () {\n    if (this.gridOptionsWrapper.getViewportDatasource()) {\n      this.setViewportDatasource(this.gridOptionsWrapper.getViewportDatasource());\n    }\n  };\n  ViewportRowModel.prototype.isLastRowFound = function () {\n    return true;\n  };\n  ViewportRowModel.prototype.destroyDatasource = function () {\n    if (!this.viewportDatasource) {\n      return;\n    }\n    if (this.viewportDatasource.destroy) {\n      this.viewportDatasource.destroy();\n    }\n    this.rowRenderer.datasourceChanged();\n    this.firstRow = -1;\n    this.lastRow = -1;\n  };\n  ViewportRowModel.prototype.calculateFirstRow = function (firstRenderedRow) {\n    var bufferSize = this.gridOptionsWrapper.getViewportRowModelBufferSize();\n    var pageSize = this.gridOptionsWrapper.getViewportRowModelPageSize();\n    var afterBuffer = firstRenderedRow - bufferSize;\n    if (afterBuffer < 0) {\n      return 0;\n    }\n    return Math.floor(afterBuffer / pageSize) * pageSize;\n  };\n  ViewportRowModel.prototype.calculateLastRow = function (lastRenderedRow) {\n    if (lastRenderedRow === -1) {\n      return lastRenderedRow;\n    }\n    var bufferSize = this.gridOptionsWrapper.getViewportRowModelBufferSize();\n    var pageSize = this.gridOptionsWrapper.getViewportRowModelPageSize();\n    var afterBuffer = lastRenderedRow + bufferSize;\n    var result = Math.ceil(afterBuffer / pageSize) * pageSize;\n    var lastRowIndex = this.rowCount - 1;\n    return Math.min(result, lastRowIndex);\n  };\n  ViewportRowModel.prototype.onViewportChanged = function (event) {\n    var newFirst = this.calculateFirstRow(event.firstRow);\n    var newLast = this.calculateLastRow(event.lastRow);\n    if (this.firstRow !== newFirst || this.lastRow !== newLast) {\n      this.firstRow = newFirst;\n      this.lastRow = newLast;\n      this.purgeRowsNotInViewport();\n      if (this.viewportDatasource) {\n        this.viewportDatasource.setViewportRange(this.firstRow, this.lastRow);\n      }\n    }\n  };\n  ViewportRowModel.prototype.purgeRowsNotInViewport = function () {\n    var _this = this;\n    Object.keys(this.rowNodesByIndex).forEach(function (indexStr) {\n      var index = parseInt(indexStr, 10);\n      if (index < _this.firstRow || index > _this.lastRow) {\n        delete _this.rowNodesByIndex[index];\n      }\n    });\n  };\n  ViewportRowModel.prototype.setViewportDatasource = function (viewportDatasource) {\n    this.destroyDatasource();\n    this.viewportDatasource = viewportDatasource;\n    this.rowCount = 0;\n    if (!viewportDatasource.init) {\n      console.warn('ag-Grid: viewport is missing init method.');\n    } else {\n      viewportDatasource.init({\n        setRowCount: this.setRowCount.bind(this),\n        setRowData: this.setRowData.bind(this),\n        getRow: this.getRow.bind(this)\n      });\n    }\n  };\n  ViewportRowModel.prototype.getType = function () {\n    return agGridCommunity.Constants.ROW_MODEL_TYPE_VIEWPORT;\n  };\n  ViewportRowModel.prototype.getRow = function (rowIndex) {\n    if (!this.rowNodesByIndex[rowIndex]) {\n      this.rowNodesByIndex[rowIndex] = this.createBlankRowNode(rowIndex);\n    }\n    return this.rowNodesByIndex[rowIndex];\n  };\n  ViewportRowModel.prototype.getRowNode = function (id) {\n    var result = null;\n    this.forEachNode(function (rowNode) {\n      if (rowNode.id === id) {\n        result = rowNode;\n      }\n    });\n    return result;\n  };\n  ViewportRowModel.prototype.getRowCount = function () {\n    return this.rowCount;\n  };\n  ViewportRowModel.prototype.getRowIndexAtPixel = function (pixel) {\n    if (this.rowHeight !== 0) {\n      // avoid divide by zero error\n      return Math.floor(pixel / this.rowHeight);\n    }\n    return 0;\n  };\n  ViewportRowModel.prototype.getRowBounds = function (index) {\n    return {\n      rowHeight: this.rowHeight,\n      rowTop: this.rowHeight * index\n    };\n  };\n  ViewportRowModel.prototype.getTopLevelRowCount = function () {\n    return this.getRowCount();\n  };\n  ViewportRowModel.prototype.getTopLevelRowDisplayedIndex = function (topLevelIndex) {\n    return topLevelIndex;\n  };\n  ViewportRowModel.prototype.getCurrentPageHeight = function () {\n    return this.rowCount * this.rowHeight;\n  };\n  ViewportRowModel.prototype.isEmpty = function () {\n    return this.rowCount > 0;\n  };\n  ViewportRowModel.prototype.isRowsToRender = function () {\n    return this.rowCount > 0;\n  };\n  ViewportRowModel.prototype.getNodesInRangeForSelection = function (firstInRange, lastInRange) {\n    var firstIndex = agGridCommunity._.missing(firstInRange) ? 0 : firstInRange.rowIndex;\n    var lastIndex = lastInRange.rowIndex;\n    var firstNodeOutOfRange = firstIndex < this.firstRow || firstIndex > this.lastRow;\n    var lastNodeOutOfRange = lastIndex < this.firstRow || lastIndex > this.lastRow;\n    if (firstNodeOutOfRange || lastNodeOutOfRange) {\n      return [];\n    }\n    var result = [];\n    var startIndex = firstIndex <= lastIndex ? firstIndex : lastIndex;\n    var endIndex = firstIndex <= lastIndex ? lastIndex : firstIndex;\n    for (var i = startIndex; i <= endIndex; i++) {\n      result.push(this.rowNodesByIndex[i]);\n    }\n    return result;\n  };\n  ViewportRowModel.prototype.forEachNode = function (callback) {\n    var _this = this;\n    var callbackCount = 0;\n    Object.keys(this.rowNodesByIndex).forEach(function (indexStr) {\n      var index = parseInt(indexStr, 10);\n      var rowNode = _this.rowNodesByIndex[index];\n      callback(rowNode, callbackCount);\n      callbackCount++;\n    });\n  };\n  ViewportRowModel.prototype.setRowData = function (rowData) {\n    var _this = this;\n    agGridCommunity._.iterateObject(rowData, function (indexStr, dataItem) {\n      var index = parseInt(indexStr, 10);\n      // we should never keep rows that we didn't specifically ask for, this\n      // guarantees the contract we have with the server.\n      if (index >= _this.firstRow && index <= _this.lastRow) {\n        var rowNode = _this.rowNodesByIndex[index];\n        // the abnormal case is we requested a row even though the grid didn't need it\n        // as a result of the paging and buffer (ie the row is off screen), in which\n        // case we need to create a new node now\n        if (agGridCommunity._.missing(rowNode)) {\n          rowNode = _this.createBlankRowNode(index);\n          _this.rowNodesByIndex[index] = rowNode;\n        }\n        // now we deffo have a row node, so set in the details\n        // if the grid already asked for this row (the normal case), then we would\n        // of put a placeholder node in place.\n        rowNode.setDataAndId(dataItem, index.toString());\n      }\n    });\n  };\n  ViewportRowModel.prototype.createBlankRowNode = function (rowIndex) {\n    var rowNode = new agGridCommunity.RowNode();\n    this.createBean(rowNode);\n    rowNode.setRowHeight(this.rowHeight);\n    rowNode.setRowTop(this.rowHeight * rowIndex);\n    rowNode.setRowIndex(rowIndex);\n    return rowNode;\n  };\n  ViewportRowModel.prototype.setRowCount = function (rowCount, keepRenderedRows) {\n    if (keepRenderedRows === void 0) {\n      keepRenderedRows = false;\n    }\n    if (rowCount === this.rowCount) {\n      return;\n    }\n    this.rowCount = rowCount;\n    var event = {\n      type: agGridCommunity.Events.EVENT_MODEL_UPDATED,\n      api: this.gridApi,\n      columnApi: this.columnApi,\n      newData: false,\n      newPage: false,\n      keepRenderedRows: keepRenderedRows,\n      animate: false\n    };\n    this.eventService.dispatchEvent(event);\n  };\n  ViewportRowModel.prototype.isRowPresent = function (rowNode) {\n    return false;\n  };\n  __decorate$1O([agGridCommunity.Autowired('gridOptionsWrapper')], ViewportRowModel.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1O([agGridCommunity.Autowired('gridApi')], ViewportRowModel.prototype, \"gridApi\", void 0);\n  __decorate$1O([agGridCommunity.Autowired('columnApi')], ViewportRowModel.prototype, \"columnApi\", void 0);\n  __decorate$1O([agGridCommunity.Autowired('rowRenderer')], ViewportRowModel.prototype, \"rowRenderer\", void 0);\n  __decorate$1O([agGridCommunity.PostConstruct], ViewportRowModel.prototype, \"init\", null);\n  __decorate$1O([agGridCommunity.PreDestroy], ViewportRowModel.prototype, \"destroyDatasource\", null);\n  ViewportRowModel = __decorate$1O([agGridCommunity.Bean('rowModel')], ViewportRowModel);\n  return ViewportRowModel;\n}(agGridCommunity.BeanStub);\nvar ViewportRowModelModule = {\n  moduleName: agGridCommunity.ModuleNames.ViewportRowModelModule,\n  rowModels: {\n    'viewport': ViewportRowModel\n  },\n  dependantModules: [EnterpriseCoreModule]\n};\nvar __extends$2V = undefined && undefined.__extends || function () {\n  var _extendStatics186 = function extendStatics(d, b) {\n    _extendStatics186 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics186(d, b);\n  };\n  return function (d, b) {\n    _extendStatics186(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1P = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ClipboardService = /** @class */function (_super) {\n  __extends$2V(ClipboardService, _super);\n  function ClipboardService() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  ClipboardService.prototype.registerGridCore = function (gridCore) {\n    this.gridCore = gridCore;\n  };\n  ClipboardService.prototype.init = function () {\n    this.logger = this.loggerFactory.create('ClipboardService');\n    if (this.rowModel.getType() === agGridCommunity.Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {\n      this.clientSideRowModel = this.rowModel;\n    }\n  };\n  ClipboardService.prototype.pasteFromClipboard = function () {\n    var _this = this;\n    this.logger.log('pasteFromClipboard');\n    this.executeOnTempElement(function (textArea) {\n      return textArea.focus();\n    }, function (element) {\n      var data = element.value;\n      if (agGridCommunity._.missingOrEmpty(data)) {\n        return;\n      }\n      var parsedData = agGridCommunity._.stringToArray(data, _this.gridOptionsWrapper.getClipboardDeliminator());\n      var userFunc = _this.gridOptionsWrapper.getProcessDataFromClipboardFunc();\n      if (userFunc) {\n        parsedData = userFunc({\n          data: parsedData\n        });\n      }\n      if (agGridCommunity._.missingOrEmpty(parsedData)) {\n        return;\n      }\n      if (_this.gridOptionsWrapper.isSuppressLastEmptyLineOnPaste()) {\n        _this.removeLastLineIfBlank(parsedData);\n      }\n      var pasteOperation = function pasteOperation(cellsToFlash, updatedRowNodes, focusedCell, changedPath) {\n        var rangeActive = _this.rangeController && _this.rangeController.isMoreThanOneCell();\n        var pasteIntoRange = rangeActive && !_this.hasOnlyOneValueToPaste(parsedData);\n        if (pasteIntoRange) {\n          _this.pasteIntoActiveRange(parsedData, cellsToFlash, updatedRowNodes, changedPath);\n        } else {\n          _this.pasteStartingFromFocusedCell(parsedData, cellsToFlash, updatedRowNodes, focusedCell, changedPath);\n        }\n      };\n      _this.doPasteOperation(pasteOperation);\n    });\n  };\n  // common code to paste operations, e.g. paste to cell, paste to range, and copy range down\n  ClipboardService.prototype.doPasteOperation = function (pasteOperationFunc) {\n    var api = this.gridOptionsWrapper.getApi();\n    var columnApi = this.gridOptionsWrapper.getColumnApi();\n    var source = 'clipboard';\n    this.eventService.dispatchEvent({\n      type: agGridCommunity.Events.EVENT_PASTE_START,\n      api: api,\n      columnApi: columnApi,\n      source: source\n    });\n    var changedPath;\n    if (this.clientSideRowModel) {\n      var onlyChangedColumns = this.gridOptionsWrapper.isAggregateOnlyChangedColumns();\n      changedPath = new agGridCommunity.ChangedPath(onlyChangedColumns, this.clientSideRowModel.getRootNode());\n    }\n    var cellsToFlash = {};\n    var updatedRowNodes = [];\n    var focusedCell = this.focusController.getFocusedCell();\n    pasteOperationFunc(cellsToFlash, updatedRowNodes, focusedCell, changedPath);\n    if (changedPath) {\n      this.clientSideRowModel.doAggregate(changedPath);\n    }\n    this.rowRenderer.refreshCells();\n    this.dispatchFlashCells(cellsToFlash);\n    this.fireRowChanged(updatedRowNodes);\n    if (focusedCell) {\n      this.focusController.setFocusedCell(focusedCell.rowIndex, focusedCell.column, focusedCell.rowPinned, true);\n    }\n    this.eventService.dispatchEvent({\n      type: agGridCommunity.Events.EVENT_PASTE_END,\n      api: api,\n      columnApi: columnApi,\n      source: source\n    });\n  };\n  ClipboardService.prototype.pasteIntoActiveRange = function (clipboardData, cellsToFlash, updatedRowNodes, changedPath) {\n    var _this = this;\n    // true if clipboard data can be evenly pasted into range, otherwise false\n    var abortRepeatingPasteIntoRows = this.getRangeSize() % clipboardData.length != 0;\n    var indexOffset = 0,\n      dataRowIndex = 0;\n    var rowCallback = function rowCallback(currentRow, rowNode, columns, index) {\n      var atEndOfClipboardData = index - indexOffset >= clipboardData.length;\n      if (atEndOfClipboardData) {\n        if (abortRepeatingPasteIntoRows) {\n          return;\n        }\n        // increment offset and reset data index to repeat paste of data\n        indexOffset += dataRowIndex;\n        dataRowIndex = 0;\n      }\n      var currentRowData = clipboardData[index - indexOffset];\n      // otherwise we are not the first row, so copy\n      updatedRowNodes.push(rowNode);\n      var processCellFromClipboardFunc = _this.gridOptionsWrapper.getProcessCellFromClipboardFunc();\n      columns.forEach(function (column, idx) {\n        if (!column.isCellEditable(rowNode) || column.isSuppressPaste(rowNode)) {\n          return;\n        }\n        // repeat data for columns we don't have data for - happens when to range is bigger than copied data range\n        if (idx >= currentRowData.length) {\n          idx = idx % currentRowData.length;\n        }\n        var newValue = _this.processCell(rowNode, column, currentRowData[idx], agGridCommunity.Constants.EXPORT_TYPE_DRAG_COPY, processCellFromClipboardFunc);\n        _this.valueService.setValue(rowNode, column, newValue, agGridCommunity.Constants.SOURCE_PASTE);\n        if (changedPath) {\n          changedPath.addParentNode(rowNode.parent, [column]);\n        }\n        var cellId = _this.cellPositionUtils.createIdFromValues(currentRow.rowIndex, column, currentRow.rowPinned);\n        cellsToFlash[cellId] = true;\n      });\n      dataRowIndex++;\n    };\n    this.iterateActiveRanges(false, rowCallback);\n  };\n  ClipboardService.prototype.pasteStartingFromFocusedCell = function (parsedData, cellsToFlash, updatedRowNodes, focusedCell, changedPath) {\n    if (!focusedCell) {\n      return;\n    }\n    var currentRow = {\n      rowIndex: focusedCell.rowIndex,\n      rowPinned: focusedCell.rowPinned\n    };\n    var columnsToPasteInto = this.columnController.getDisplayedColumnsStartingAt(focusedCell.column);\n    if (this.hasOnlyOneValueToPaste(parsedData)) {\n      this.pasteSingleValue(parsedData, updatedRowNodes, cellsToFlash, changedPath);\n    } else {\n      this.pasteMultipleValues(parsedData, currentRow, updatedRowNodes, columnsToPasteInto, cellsToFlash, agGridCommunity.Constants.EXPORT_TYPE_CLIPBOARD, changedPath);\n    }\n  };\n  ClipboardService.prototype.hasOnlyOneValueToPaste = function (parsedData) {\n    return parsedData.length === 1 && parsedData[0].length === 1;\n  };\n  ClipboardService.prototype.copyRangeDown = function () {\n    var _this = this;\n    if (!this.rangeController || this.rangeController.isEmpty()) {\n      return;\n    }\n    var firstRowValues = [];\n    var pasteOperation = function pasteOperation(cellsToFlash, updatedRowNodes, focusedCell, changedPath) {\n      var processCellForClipboardFunc = _this.gridOptionsWrapper.getProcessCellForClipboardFunc();\n      var processCellFromClipboardFunc = _this.gridOptionsWrapper.getProcessCellFromClipboardFunc();\n      var rowCallback = function rowCallback(currentRow, rowNode, columns) {\n        // take reference of first row, this is the one we will be using to copy from\n        if (!firstRowValues.length) {\n          // two reasons for looping through columns\n          columns.forEach(function (column) {\n            // get the initial values to copy down\n            var value = _this.processCell(rowNode, column, _this.valueService.getValue(column, rowNode), agGridCommunity.Constants.EXPORT_TYPE_DRAG_COPY, processCellForClipboardFunc);\n            firstRowValues.push(value);\n          });\n        } else {\n          // otherwise we are not the first row, so copy\n          updatedRowNodes.push(rowNode);\n          columns.forEach(function (column, index) {\n            if (!column.isCellEditable(rowNode) || column.isSuppressPaste(rowNode)) {\n              return;\n            }\n            var firstRowValue = _this.processCell(rowNode, column, firstRowValues[index], agGridCommunity.Constants.EXPORT_TYPE_DRAG_COPY, processCellFromClipboardFunc);\n            _this.valueService.setValue(rowNode, column, firstRowValue, agGridCommunity.Constants.SOURCE_PASTE);\n            if (changedPath) {\n              changedPath.addParentNode(rowNode.parent, [column]);\n            }\n            var cellId = _this.cellPositionUtils.createIdFromValues(currentRow.rowIndex, column, currentRow.rowPinned);\n            cellsToFlash[cellId] = true;\n          });\n        }\n      };\n      _this.iterateActiveRanges(true, rowCallback);\n    };\n    this.doPasteOperation(pasteOperation);\n  };\n  ClipboardService.prototype.removeLastLineIfBlank = function (parsedData) {\n    // remove last row if empty, excel puts empty last row in\n    var lastLine = agGridCommunity._.last(parsedData);\n    var lastLineIsBlank = lastLine && lastLine.length === 1 && lastLine[0] === '';\n    if (lastLineIsBlank) {\n      agGridCommunity._.removeFromArray(parsedData, lastLine);\n    }\n  };\n  ClipboardService.prototype.fireRowChanged = function (rowNodes) {\n    var _this = this;\n    if (!this.gridOptionsWrapper.isFullRowEdit()) {\n      return;\n    }\n    rowNodes.forEach(function (rowNode) {\n      var event = {\n        type: agGridCommunity.Events.EVENT_ROW_VALUE_CHANGED,\n        node: rowNode,\n        data: rowNode.data,\n        rowIndex: rowNode.rowIndex,\n        rowPinned: rowNode.rowPinned,\n        context: _this.gridOptionsWrapper.getContext(),\n        api: _this.gridOptionsWrapper.getApi(),\n        columnApi: _this.gridOptionsWrapper.getColumnApi()\n      };\n      _this.eventService.dispatchEvent(event);\n    });\n  };\n  ClipboardService.prototype.pasteMultipleValues = function (clipboardGridData, currentRow, updatedRowNodes, columnsToPasteInto, cellsToFlash, type, changedPath) {\n    var _this = this;\n    clipboardGridData.forEach(function (clipboardRowData) {\n      // if we have come to end of rows in grid, then skip\n      if (!currentRow) {\n        return;\n      }\n      var rowNode = _this.rowPositionUtils.getRowNode(currentRow);\n      if (rowNode) {\n        updatedRowNodes.push(rowNode);\n        clipboardRowData.forEach(function (value, index) {\n          return _this.updateCellValue(rowNode, columnsToPasteInto[index], value, currentRow, cellsToFlash, type, changedPath);\n        });\n        // move to next row down for next set of values\n        currentRow = _this.cellNavigationService.getRowBelow({\n          rowPinned: currentRow.rowPinned,\n          rowIndex: currentRow.rowIndex\n        });\n      }\n    });\n    return currentRow;\n  };\n  ClipboardService.prototype.pasteSingleValue = function (parsedData, updatedRowNodes, cellsToFlash, changedPath) {\n    var _this = this;\n    var value = parsedData[0][0];\n    var rowCallback = function rowCallback(currentRow, rowNode, columns) {\n      updatedRowNodes.push(rowNode);\n      columns.forEach(function (column) {\n        return _this.updateCellValue(rowNode, column, value, currentRow, cellsToFlash, agGridCommunity.Constants.EXPORT_TYPE_CLIPBOARD, changedPath);\n      });\n    };\n    this.iterateActiveRanges(false, rowCallback);\n  };\n  ClipboardService.prototype.updateCellValue = function (rowNode, column, value, currentRow, cellsToFlash, type, changedPath) {\n    if (!rowNode || !currentRow || !column || !column.isCellEditable(rowNode) || column.isSuppressPaste(rowNode)) {\n      return;\n    }\n    var processedValue = this.processCell(rowNode, column, value, type, this.gridOptionsWrapper.getProcessCellFromClipboardFunc());\n    this.valueService.setValue(rowNode, column, processedValue, agGridCommunity.Constants.SOURCE_PASTE);\n    var cellId = this.cellPositionUtils.createIdFromValues(currentRow.rowIndex, column, currentRow.rowPinned);\n    cellsToFlash[cellId] = true;\n    if (changedPath) {\n      changedPath.addParentNode(rowNode.parent, [column]);\n    }\n  };\n  ClipboardService.prototype.copyToClipboard = function (includeHeaders) {\n    this.logger.log(\"copyToClipboard: includeHeaders = \" + includeHeaders);\n    // don't override 'includeHeaders' if it has been explicitly set to 'false'\n    if (includeHeaders == null) {\n      includeHeaders = this.gridOptionsWrapper.isCopyHeadersToClipboard();\n    }\n    var focusedCell = this.focusController.getFocusedCell();\n    var selectedRowsToCopy = !this.selectionController.isEmpty() && !this.gridOptionsWrapper.isSuppressCopyRowsToClipboard();\n    // default is copy range if exists, otherwise rows\n    if (this.rangeController && this.rangeController.isMoreThanOneCell()) {\n      this.copySelectedRangeToClipboard(includeHeaders);\n    } else if (selectedRowsToCopy) {\n      // otherwise copy selected rows if they exist\n      this.copySelectedRowsToClipboard(includeHeaders);\n    } else if (this.focusController.isAnyCellFocused()) {\n      // if there is a focused cell, copy this\n      this.copyFocusedCellToClipboard(includeHeaders);\n    } else {\n      // lastly if no focused cell, try range again. this can happen\n      // if use has cellSelection turned off (so no focused cell)\n      // but has a cell clicked, so there exists a cell range\n      // of exactly one cell (hence the first 'if' above didn't\n      // get executed).\n      this.copySelectedRangeToClipboard(includeHeaders);\n    }\n    if (focusedCell) {\n      this.focusController.setFocusedCell(focusedCell.rowIndex, focusedCell.column, focusedCell.rowPinned, true);\n    }\n  };\n  ClipboardService.prototype.iterateActiveRanges = function (onlyFirst, rowCallback, columnCallback) {\n    var _this = this;\n    if (!this.rangeController || this.rangeController.isEmpty()) {\n      return;\n    }\n    var cellRanges = this.rangeController.getCellRanges();\n    if (onlyFirst) {\n      this.iterateActiveRange(cellRanges[0], rowCallback, columnCallback, true);\n    } else {\n      cellRanges.forEach(function (range, idx) {\n        return _this.iterateActiveRange(range, rowCallback, columnCallback, idx === cellRanges.length - 1);\n      });\n    }\n  };\n  ClipboardService.prototype.iterateActiveRange = function (range, rowCallback, columnCallback, isLastRange) {\n    if (!this.rangeController) {\n      return;\n    }\n    var currentRow = this.rangeController.getRangeStartRow(range);\n    var lastRow = this.rangeController.getRangeEndRow(range);\n    if (columnCallback && range.columns) {\n      columnCallback(range.columns);\n    }\n    var rangeIndex = 0;\n    var isLastRow = false;\n    // the currentRow could be missing if the user sets the active range manually, and sets a range\n    // that is outside of the grid (eg. sets range rows 0 to 100, but grid has only 20 rows).\n    while (!isLastRow && currentRow != null) {\n      var rowNode = this.rowPositionUtils.getRowNode(currentRow);\n      isLastRow = this.rowPositionUtils.sameRow(currentRow, lastRow);\n      rowCallback(currentRow, rowNode, range.columns, rangeIndex++, isLastRow && isLastRange);\n      currentRow = this.cellNavigationService.getRowBelow(currentRow);\n    }\n  };\n  ClipboardService.prototype.copySelectedRangeToClipboard = function (includeHeaders) {\n    var _this = this;\n    if (includeHeaders === void 0) {\n      includeHeaders = false;\n    }\n    if (!this.rangeController || this.rangeController.isEmpty()) {\n      return;\n    }\n    var deliminator = this.gridOptionsWrapper.getClipboardDeliminator();\n    var data = '';\n    var cellsToFlash = {};\n    // adds columns to the data\n    var columnCallback = function columnCallback(columns) {\n      if (!includeHeaders) {\n        return;\n      }\n      var processHeaderForClipboardFunc = _this.gridOptionsWrapper.getProcessHeaderForClipboardFunc();\n      var columnNames = columns.map(function (column) {\n        var name = _this.columnController.getDisplayNameForColumn(column, 'clipboard', true);\n        return _this.processHeader(column, name, processHeaderForClipboardFunc) || '';\n      });\n      data += columnNames.join(deliminator) + '\\r\\n';\n    };\n    // adds cell values to the data\n    var rowCallback = function rowCallback(currentRow, rowNode, columns, _2, isLastRow) {\n      var processCellForClipboardFunc = _this.gridOptionsWrapper.getProcessCellForClipboardFunc();\n      columns.forEach(function (column, index) {\n        var value = _this.valueService.getValue(column, rowNode);\n        var processedValue = _this.processCell(rowNode, column, value, agGridCommunity.Constants.EXPORT_TYPE_CLIPBOARD, processCellForClipboardFunc);\n        if (index != 0) {\n          data += deliminator;\n        }\n        if (agGridCommunity._.exists(processedValue)) {\n          data += processedValue;\n        }\n        var cellId = _this.cellPositionUtils.createIdFromValues(currentRow.rowIndex, column, currentRow.rowPinned);\n        cellsToFlash[cellId] = true;\n      });\n      if (!isLastRow) {\n        data += '\\r\\n';\n      }\n    };\n    this.iterateActiveRanges(false, rowCallback, columnCallback);\n    this.copyDataToClipboard(data);\n    this.dispatchFlashCells(cellsToFlash);\n  };\n  ClipboardService.prototype.copyFocusedCellToClipboard = function (includeHeaders) {\n    var _a;\n    if (includeHeaders === void 0) {\n      includeHeaders = false;\n    }\n    var focusedCell = this.focusController.getFocusedCell();\n    if (focusedCell == null) {\n      return;\n    }\n    var cellId = this.cellPositionUtils.createId(focusedCell);\n    var currentRow = {\n      rowPinned: focusedCell.rowPinned,\n      rowIndex: focusedCell.rowIndex\n    };\n    var rowNode = this.rowPositionUtils.getRowNode(currentRow);\n    var column = focusedCell.column;\n    var value = this.valueService.getValue(column, rowNode);\n    var processedValue = this.processCell(rowNode, column, value, agGridCommunity.Constants.EXPORT_TYPE_CLIPBOARD, this.gridOptionsWrapper.getProcessCellForClipboardFunc());\n    processedValue = agGridCommunity._.missing(processedValue) ? '' : processedValue.toString();\n    var data;\n    if (includeHeaders) {\n      var headerValue = this.columnController.getDisplayNameForColumn(column, 'clipboard', true);\n      data = this.processHeader(column, headerValue, this.gridOptionsWrapper.getProcessHeaderForClipboardFunc()) + '\\r\\n' + processedValue;\n    } else {\n      data = processedValue;\n    }\n    this.copyDataToClipboard(data);\n    this.dispatchFlashCells((_a = {}, _a[cellId] = true, _a));\n  };\n  ClipboardService.prototype.dispatchFlashCells = function (cellsToFlash) {\n    var _this = this;\n    window.setTimeout(function () {\n      var event = {\n        type: agGridCommunity.Events.EVENT_FLASH_CELLS,\n        cells: cellsToFlash,\n        api: _this.gridApi,\n        columnApi: _this.columnApi\n      };\n      _this.eventService.dispatchEvent(event);\n    }, 0);\n  };\n  ClipboardService.prototype.processCell = function (rowNode, column, value, type, func) {\n    if (func) {\n      var params = {\n        column: column,\n        node: rowNode,\n        value: value,\n        api: this.gridOptionsWrapper.getApi(),\n        columnApi: this.gridOptionsWrapper.getColumnApi(),\n        context: this.gridOptionsWrapper.getContext(),\n        type: type\n      };\n      return func(params);\n    }\n    return value;\n  };\n  ClipboardService.prototype.processHeader = function (column, value, func) {\n    if (func) {\n      var params = {\n        column: column,\n        api: this.gridOptionsWrapper.getApi(),\n        columnApi: this.gridOptionsWrapper.getColumnApi(),\n        context: this.gridOptionsWrapper.getContext()\n      };\n      return func(params);\n    }\n    return value;\n  };\n  ClipboardService.prototype.copySelectedRowsToClipboard = function (includeHeaders, columnKeys) {\n    if (includeHeaders === void 0) {\n      includeHeaders = false;\n    }\n    var params = {\n      columnKeys: columnKeys,\n      skipHeader: !includeHeaders,\n      skipFooters: true,\n      suppressQuotes: true,\n      columnSeparator: this.gridOptionsWrapper.getClipboardDeliminator(),\n      onlySelected: true,\n      processCellCallback: this.gridOptionsWrapper.getProcessCellForClipboardFunc(),\n      processHeaderCallback: this.gridOptionsWrapper.getProcessHeaderForClipboardFunc()\n    };\n    var data = this.csvCreator.getDataAsCsv(params);\n    this.copyDataToClipboard(data);\n  };\n  ClipboardService.prototype.copyDataToClipboard = function (data) {\n    var userProvidedFunc = this.gridOptionsWrapper.getSendToClipboardFunc();\n    if (userProvidedFunc) {\n      userProvidedFunc({\n        data: data\n      });\n    } else {\n      this.executeOnTempElement(function (element) {\n        element.value = data || ' '; // has to be non-empty value or execCommand will not do anything\n        element.select();\n        element.focus();\n        var result = document.execCommand('copy');\n        if (!result) {\n          console.warn('ag-grid: Browser did not allow document.execCommand(\\'copy\\'). Ensure ' + 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise ' + 'the browser will prevent it for security reasons.');\n        }\n      });\n    }\n  };\n  ClipboardService.prototype.executeOnTempElement = function (callbackNow, callbackAfter) {\n    var eTempInput = document.createElement('textarea');\n    eTempInput.style.width = '1px';\n    eTempInput.style.height = '1px';\n    eTempInput.style.top = '0px';\n    eTempInput.style.left = '0px';\n    eTempInput.style.position = 'absolute';\n    eTempInput.style.opacity = '0.0';\n    var guiRoot = this.gridCore.getRootGui();\n    guiRoot.appendChild(eTempInput);\n    try {\n      callbackNow(eTempInput);\n    } catch (err) {\n      console.warn('ag-grid: Browser does not support document.execCommand(\\'copy\\') for clipboard operations');\n    }\n    //It needs 100 otherwise OS X seemed to not always be able to paste... Go figure...\n    if (callbackAfter) {\n      window.setTimeout(function () {\n        callbackAfter(eTempInput);\n        guiRoot.removeChild(eTempInput);\n      }, 100);\n    } else {\n      guiRoot.removeChild(eTempInput);\n    }\n  };\n  ClipboardService.prototype.getRangeSize = function () {\n    var ranges = this.rangeController.getCellRanges();\n    var startRangeIndex = 0;\n    var endRangeIndex = 0;\n    if (ranges.length > 0) {\n      startRangeIndex = this.rangeController.getRangeStartRow(ranges[0]).rowIndex;\n      endRangeIndex = this.rangeController.getRangeEndRow(ranges[0]).rowIndex;\n    }\n    return startRangeIndex - endRangeIndex + 1;\n  };\n  __decorate$1P([agGridCommunity.Autowired('csvCreator')], ClipboardService.prototype, \"csvCreator\", void 0);\n  __decorate$1P([agGridCommunity.Autowired('loggerFactory')], ClipboardService.prototype, \"loggerFactory\", void 0);\n  __decorate$1P([agGridCommunity.Autowired('selectionController')], ClipboardService.prototype, \"selectionController\", void 0);\n  __decorate$1P([agGridCommunity.Optional('rangeController')], ClipboardService.prototype, \"rangeController\", void 0);\n  __decorate$1P([agGridCommunity.Autowired('rowModel')], ClipboardService.prototype, \"rowModel\", void 0);\n  __decorate$1P([agGridCommunity.Autowired('valueService')], ClipboardService.prototype, \"valueService\", void 0);\n  __decorate$1P([agGridCommunity.Autowired('focusController')], ClipboardService.prototype, \"focusController\", void 0);\n  __decorate$1P([agGridCommunity.Autowired('rowRenderer')], ClipboardService.prototype, \"rowRenderer\", void 0);\n  __decorate$1P([agGridCommunity.Autowired('columnController')], ClipboardService.prototype, \"columnController\", void 0);\n  __decorate$1P([agGridCommunity.Autowired('cellNavigationService')], ClipboardService.prototype, \"cellNavigationService\", void 0);\n  __decorate$1P([agGridCommunity.Autowired('gridOptionsWrapper')], ClipboardService.prototype, \"gridOptionsWrapper\", void 0);\n  __decorate$1P([agGridCommunity.Autowired('columnApi')], ClipboardService.prototype, \"columnApi\", void 0);\n  __decorate$1P([agGridCommunity.Autowired('gridApi')], ClipboardService.prototype, \"gridApi\", void 0);\n  __decorate$1P([agGridCommunity.Autowired('cellPositionUtils')], ClipboardService.prototype, \"cellPositionUtils\", void 0);\n  __decorate$1P([agGridCommunity.Autowired('rowPositionUtils')], ClipboardService.prototype, \"rowPositionUtils\", void 0);\n  __decorate$1P([agGridCommunity.PostConstruct], ClipboardService.prototype, \"init\", null);\n  ClipboardService = __decorate$1P([agGridCommunity.Bean('clipboardService')], ClipboardService);\n  return ClipboardService;\n}(agGridCommunity.BeanStub);\nvar ClipboardModule = {\n  moduleName: agGridCommunity.ModuleNames.ClipboardModule,\n  beans: [ClipboardService],\n  dependantModules: [EnterpriseCoreModule, CsvExportModule]\n};\nagGridCommunity.ModuleRegistry.register(ColumnsToolPanelModule, false);\nagGridCommunity.ModuleRegistry.register(ExcelExportModule, false);\nagGridCommunity.ModuleRegistry.register(FiltersToolPanelModule, false);\nagGridCommunity.ModuleRegistry.register(GridChartsModule, false);\nagGridCommunity.ModuleRegistry.register(MasterDetailModule, false);\nagGridCommunity.ModuleRegistry.register(MenuModule, false);\nagGridCommunity.ModuleRegistry.register(MultiFilterModule, false);\nagGridCommunity.ModuleRegistry.register(RangeSelectionModule, false);\nagGridCommunity.ModuleRegistry.register(RichSelectModule, false);\nagGridCommunity.ModuleRegistry.register(RowGroupingModule, false);\nagGridCommunity.ModuleRegistry.register(ServerSideRowModelModule, false);\nagGridCommunity.ModuleRegistry.register(SetFilterModule, false);\nagGridCommunity.ModuleRegistry.register(SideBarModule, false);\nagGridCommunity.ModuleRegistry.register(StatusBarModule, false);\nagGridCommunity.ModuleRegistry.register(ViewportRowModelModule, false);\nagGridCommunity.ModuleRegistry.register(ClipboardModule, false);\nObject.defineProperty(exports, 'VirtualList', {\n  enumerable: true,\n  get: function get() {\n    return agGridCommunity.VirtualList;\n  }\n});\nexports.LicenseManager = LicenseManager;\nexports.SetFilter = SetFilter;"],"names":["_extendStatics","_extendStatics2","_extendStatics3","_extendStatics4","ExpandState","agGridCommunity","__extends","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","this","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","LicenseManager","_super","_this","apply","watermarkMessage","undefined","LicenseManager_1","validateLicense","_","missingOrEmpty","licenseKey","outputMissingLicenseKey","_a","extractLicenseComponents","md5","license","version","isTrial","exists","validateLicenseKeyForVersion","validateLegacyKey","outputInvalidLicenseKey","extractExpiry","restrictionHashed","substring","lastIndexOf","Date","parseInt","decode","cleanedLicenseKey","replace","hashStart","extractBracketedInformation","getLicenseDetails","valid","expiry","isNaN","getTime","formatDate","isDisplayWatermark","getWatermarkMessage","date","day","getDate","monthIndex","getMonth","year","getFullYear","getGridReleaseDate","RELEASE_INFORMATION","input","n","o","u","a","keystr","t","f","e","indexOf","charAt","String","fromCharCode","utf8_decode","charCodeAt","setLicenseKey","matches","split","filter","v","map","value","match","validateForTrial","gridReleaseDate","current","formattedExpiryDate","formattedReleaseDate","outputIncompatibleVersion","now","outputExpiredTrialKey","console","error","Autowired","PreConstruct","Bean","BeanStub","__extends$1","__decorate$1","MD5","ieCompatibility","init","md5cycle","x","k","ff","gg","hh","ii","add32","cmn","q","s","md51","state","md5blk","tail","md5blks","rhex","hex_chr","j","hex","join","add32Compat","add32Std","y","lsw","PostConstruct","__extends$2","__decorate$2","WatermarkComp","call","postConstruct","show","shouldDisplayWatermark","addOrRemoveCssClass","getGui","eLicenseTextRef","innerText","licenseManager","window","setTimeout","addCssClass","isWhiteListURL","location","hostname","search","RefSelector","Component","EnterpriseCoreModule","moduleName","ModuleNames","beans","agStackComponents","componentName","componentClass","__extends$3","__decorate$3","_extendStatics5","_extendStatics6","_extendStatics7","_extendStatics8","_extendStatics9","_extendStatics10","_extendStatics11","_extendStatics12","_extendStatics13","PrimaryColsHeaderPanel","TEMPLATE","createExpandIcons","addManagedListener","eExpand","onExpandClicked","bind","keyCode","KeyCode","SPACE","eSelect","getInputElement","onSelectClicked","eFilterTextField","onValueChange","onFilterTextChanged","onMiniFilterKeyPress","eventService","Events","EVENT_NEW_COLUMNS_LOADED","showOrHideOptions","setInputAriaLabel","params","columnController","isReady","appendChild","eExpandChecked","createIconNoSpan","gridOptionsWrapper","eExpandUnchecked","eExpandIndeterminate","setExpandState","EXPANDED","showFilter","suppressColumnFilter","showSelect","suppressColumnSelectAll","showExpand","suppressColumnExpandAll","groupsPresent","isPrimaryColumnGroupsPresent","translate","getLocaleTextFunc","setInputPlaceholder","setDisplayed","onFilterTextChangedDebounced","debounce","filterText","getValue","dispatchEvent","type","DEBOUNCE_DELAY","isKeyPressed","ENTER","selectState","expandState","COLLAPSED","INDETERMINATE","setSelectionState","setValue","ColumnModelItem","displayName","columnOrGroup","dept","group","expanded","EventService","columnGroup","children","column","isGroup","getDisplayName","getColumnGroup","getColumn","getDept","isExpanded","getChildren","isPassesFilter","passesFilter","setExpanded","EVENT_EXPANDED_CHANGED","setPassesFilter","addEventListener","eventType","listener","removeEventListener","__extends$4","__decorate$4","ToolPanelColumnGroupComp","modelItem","allowDragging","focusWrapper","processingColumnStateChange","columnDept","setTemplate","eDragHandle","cbSelect","insertAdjacentElement","getDisplayNameForOriginalColumnGroup","missing","eLabel","innerHTML","setupExpandContract","EVENT_COLUMN_PIVOT_MODE_CHANGED","onColumnStateChanged","onLabelClicked","AgCheckbox","EVENT_CHANGED","onCheckboxChanged","onExpandChanged","handleKeyDown","setOpenClosedIcons","setupDragging","addVisibilityListenersToAllChildren","refreshAriaExpanded","refreshAriaLabel","CssClassApplier","addToolPanelClassesFromColDef","getColGroupDef","LEFT","preventDefault","RIGHT","isSelectable","onSelectAllChanged","isSelected","getLeafColumns","forEach","Column","EVENT_VISIBLE_CHANGED","EVENT_VALUE_CHANGED","EVENT_PIVOT_CHANGED","EVENT_ROW_GROUP_CHANGED","dragSource","DragSourceType","ToolPanel","eElement","dragItemName","getDragItem","createDragItem","dragAndDropService","addDragSource","addDestroyFunc","removeDragSource","visibleState","col","getId","isVisible","columns","eGroupClosedIcon","createIcon","eGroupOpenedIcon","onExpandOrContractClicked","touchListener","TouchListener","eColumnGroupIcons","EVENT_TAP","destroy","nextState","onChangeCommon","event","selected","getVisibleLeafColumns","childColumns","extractCols","child","push","modelItemUtils","selectAllChildren","setAriaLabel","selectedValue","workOutSelectedValue","readOnlyValue","workOutReadOnlyValue","setReadOnly","pivotMode","isPivotMode","visibleLeafColumns","checkedCount","uncheckedCount","getColDef","lockVisible","isColumnChecked","colsThatCanAction","isAnyFunctionAllowed","pivoted","isPivotActive","grouped","isRowGroupActive","aggregated","isValueActive","oldState","folderOpen","setAriaExpanded","cbValue","isReadOnly","toggle","setSelected","__extends$5","__decorate$5","ToolPanelColumnComp","groupsExist","getDisplayNameForColumn","displayNameSanitised","escapeString","indent","isFunctionsReadOnly","setColumn","checkboxReadOnly","anyFunctionActive","isAnyFunctionActive","functionsReadOnly","noFunctionsAllowed","checkboxPassive","isFunctionsPassive","setPassive","isExpandable","warn","__extends$6","__decorate$6","ColumnModel","items","getRowCount","getRow","index","PrimaryColsListPanel","destroyColumnItemFuncs","destroyColumnTree","allColsTree","suppressSyncLayoutWithGrid","EVENT_COLUMN_MOVED","onColumnsChanged","EVENT_COLUMN_EVERYTHING_CHANGED","EVENT_COLUMN_PIVOT_CHANGED","EVENT_COLUMN_ROW_GROUP_CHANGED","EVENT_COLUMN_VALUE_CHANGED","EVENT_COLUMN_VISIBLE","fireSelectionChangedEvent","expandGroupsByDefault","contractColumnSelection","virtualList","createManagedBean","VirtualList","setComponentCreator","item","listItemElement","createComponentFromItem","renderedGroup","getContext","createBean","columnComp","pivotModeActive","buildTreeFromWhatGridIsDisplaying","buildTreeFromProvidedColumnDefs","markFilteredColumns","flattenAndFilterModel","colDefService","syncLayoutWithGrid","setColumnLayout","colDefs","columnTree","createColumnTree","buildListModel","some","colDef","getPrimaryColumnTree","columnExpandedListener","onColumnExpanded","recursivelyBuild","tree","parentList","OriginalColumnGroup","createGroupItem","createColumnItem","suppressColumnsToolPanel","isPadding","removeFunc","addListeners","displayedColsList","recursiveFunc","setModel","focusedRow","getLastFocusedRow","refresh","focusRowIfAlive","notifyListeners","rowIndex","isAlive","focusRow","forEachItem","callback","doSetExpandedAll","setGroupsExpanded","expand","groupIds","expandedGroupIds","groupId","unrecognisedGroupIds","includes","getExpandState","expandedCount","notExpandedCount","doSetSelectedAll","selectAllChecked","getSelectionState","checked","isAllowPivot","isAllowRowGroup","isAllowValue","setFilterText","toLowerCase","recursivelyCheckFilter","parentPasses","atLeastOneChildPassed","groupPasses_1","childPasses","filterPasses","fireGroupExpandedEvent","selectionState","PreDestroy","__extends$7","__decorate$7","PivotModePanel","createTemplate","cbPivotMode","localeTextFunc","setLabel","onBtPivotMode","onPivotModeChanged","newValue","setPivotMode","api","getApi","refreshHeader","__extends$8","__decorate$8","AggregationStage","execute","noValueColumns","getValueColumns","noUserAgg","getGroupRowAggNodesFunc","changedPathActive","changedPath","isActive","aggDetails","createAggDetails","recursivelyCreateAggData","pivotActive","measureColumns","pivotColumns","getPivotColumns","valueColumns","forEachChangedNodeDepthFirst","rowNode","hasChildren","aggData","setAggData","level","notPivoting","isSuppressAggAtRootLevel","aggregateRowNode","aggResult","measureColumnsMissing","pivotColumnsMissing","userFunc","childrenAfterFilter","aggregateRowNodeUsingValuesOnly","aggregateRowNodeUsingValuesAndPivot","sibling","result","pivotColumnDefs","pivotStage","getPivotColumnDefs","pivotTotalColumnIds","valueColDef","values","keys","pivotKeys","valueColumn","pivotValueColumn","colId","leafGroup","getValuesFromMappedSet","childrenMapped","getValuesPivotNonLeaf","aggregateValues","getAggFunc","totalColDef","aggResults","changedValueColumns","getValueColumnsForNode","notChangedValueColumns","getNotValueColumnsForNode","values2d","getValuesNormal","oldValues","node","mappedSet","mapPointer","valueService","valueColumnCount","rowCount","childNode","aggFuncOrString","aggFunc","aggFuncService","deprecationWarning","doOnce","data","gridApi","columnApi","context","thisArg","val","__extends$9","__decorate$9","GroupStage","groupIdSequence","NumberSequence","usingTreeData","isTreeData","getDataPath","getDataPathFunc","details","createGroupingDetails","transactions","handleTransaction","afterColsChanged","afterColumnsChanged","shotgunResetEverything","sortGroupsWithComparator","rootNode","selectableService","updateSelectableAfterGrouping","rowNodeTransactions","rowNodeOrder","groupedCols","getRowGroupColumns","includeParents","isSuppressParentsInRowNodes","expandByDefault","getGroupDefaultExpanded","groupedColCount","tran","existsAndNotEmpty","add","insertNodes","remove","removeNodes","update","moveNodesInWrongPath","sortChildren","sortRowNodesByOrder","childrenAfterGroup","comparator","getDefaultGroupSortComparator","recursiveSort","sort","getExistingPathForNode","res","pointer","parent","rowGroupColumn","field","reverse","childNodes","addParentNode","infoToKeyMapper","oldPath","newPath","getGroupInfo","areEqual","moveNode","removeNodesInStages","insertOneNode","setData","newParent","leafRowNodes","removeNodesFromParents","postRemoveCreateFillerNodes","postRemoveRemoveEmptyGroups","forEachParentGroup","nodesToRemove","batchRemover","BatchRemover","nodeToRemove","removeFromParent","parentNode","removeFromAllLeafChildren","flush","newGroupNode_1","findParentForNode","allLeafChildren","updateHasChildren","checkAgain","_loop_1","mapKey","getChildrenMappedKey","parentRowNode","isEmptyRowGroupNode","groupShouldBeRemoved","removeFromChildrenAfterGroup","removeFromArray","setRowTop","addToParent","areGroupColsEqual","d1","d2","skipStage","oldGroupingDetails","newRowNodes","isMove","path","parentGroup","swapGroupWithUserNode","nextNode","groupInfo","getOrCreateNextNode","fillerGroup","userGroup","groupData","rowGroupIndex","createGroup","groupNode","RowNode","getGroupDisplayColumns","isRowGroupDisplayed","getColId","id","ID_PREFIX_ROW_GROUP","next","setAllChildrenCount","getGroupInfoFromCallback","getGroupInfoFromGroupColumns","groupCol","getKeyForNode","keyExists","allSets","allParents","getSet","nodeDetails","__extends$a","__decorate$a","__spreadArrays","il","jl","PivotColDefService","PivotColDefService_1","createPivotColumnDefs","uniqueValues","pivotColumnGroupDefs","levelsDeep","columnIdSequence","recursivelyAddGroup","addRowGroupTotals","addExpandablePivotGroups","addPivotTotalsToGroups","cloneObject","parentChildren","primaryPivotColumns","iterateObject","newPivotKeys","groupDef","headerName","columnGroupShow","valueGroup_1","colDef_1","createColDef","measureColumn","columnName","userComparator","pivotComparator","headerNameComparator","isSuppressExpandablePivotGroups","getPivotColumnGroupTotals","recursivelyAddSubTotals","acc","childAcc_1","Map","grp","firstGroup_1","get","merge","def","pivotValueColId","arr","has","set","insertAfter","valueCols","aggFuncs","valueCol","sameAggFuncs","recursivelyAddPivotTotal","colIds","childColIds","concat","unshift","getPivotRowTotals","slice","extractColIdsForValueColumn","this_1","createRowGroupTotal","valueGroup","PIVOT_ROW_TOTAL_PREFIX","colDefToCopy","assign","hide","m1","m2","existingList","updatedList","__extends$b","__decorate$b","PivotStage","executePivotOn","executePivotOff","aggregationColumnsHashLastTime","isSecondaryColumnsPresent","setSecondaryColumns","setInactive","bucketUpRowNodes","uniqueValuesChanged","setUniqueValues","aggregationColumns","aggregationColumnsHash","aggregationFuncsHash","toString","aggregationColumnsChanged","aggregationFuncsChanged","aggregationFuncsHashLastTime","pivotColDefService","newValues","JSON","stringify","recursivelySearchForLeafNodes","bucketRowNode","bucketChildren","pivotIndex","mappedChildren","pivotColumn","result_1","__extends$c","__decorate$c","AggFuncService","aggFuncsMap","initialised","AggFuncService_1","initialiseWithDefaultAggregations","addAggFuncs","getAggFuncs","AGG_SUM","aggSum","AGG_FIRST","aggFirst","AGG_LAST","aggLast","AGG_MIN","aggMin","AGG_MAX","aggMax","AGG_COUNT","aggCount","AGG_AVG","aggAvg","getDefaultAggFunc","allKeys","getFuncNames","sumInKeysList","sumInFuncs","addAggFunc","name","userAllowedFuncs","allowedAggFuncs","clear","BigInt","last","toNumber","sum","count","value_1","valueToAdd","_extendStatics14","_extendStatics15","_extendStatics16","_extendStatics17","_extendStatics18","_extendStatics19","_extendStatics20","_extendStatics21","_extendStatics22","_extendStatics23","_extendStatics24","_extendStatics25","_extendStatics26","stylesMap","registeredNumberFmts","registeredFonts","registeredFills","registeredBorders","registeredCellStyleXfs","registeredCellXfs","registeredCellStyles","_extendStatics27","_extendStatics28","_extendStatics29","RowType","__extends$d","__decorate$d","DropZoneColumnComp","dragSourceDropTarget","ghost","horizontal","popupShowing","addElementClasses","eText","eButton","setupComponents","defaultIconName","DragAndDropService","ICON_HIDE","setTextValue","setupRemove","addGuiEventListener","onShowAggFuncSelection","mouseEvent","agEvent","EVENT_COLUMN_REMOVE","stopPropagation","displayValue","aggFuncString","displayValueSanitised","rows","ePopup","loadTemplate","style","top","left","width","clientWidth","hidePopup","popupService","addPopup","modal","eChild","closeOnEsc","closedCallback","destroyBean","createAggSelect","positionPopupUnderComponent","eventSource","keepWithinBounds","aggFuncStringTranslated","AggItemComp","event_1","EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST","setColumnAggFunc","el","suffix","direction","Optional","itemSelected","__extends$e","BaseDropZonePanel","STATE_NOT_DRAGGING","guiDestroyFunctions","childColumnComponents","eColumnDropList","document","createElement","isHorizontal","setBeans","destroyGui","func","clearElement","refreshGui","setupDropTarget","dropTarget","getContainer","getIconName","onDragging","onDragEnter","onDragLeave","onDragStop","isInterestedIn","addDropTarget","HeaderCell","checkInsertIndex","draggingEvent","newIndex","getNewHorizontalInsertIndex","getNewVerticalInsertIndex","changed","insertIndex","hDirection","enableRtl","isEnableRtl","goingLeft","HorizontalDirection","Left","mouseX","clientX","childColumn","rect","getBoundingClientRect","rectX","right","vDirection","clientY","VerticalDirection","Down","bottom","checkDragStartedBySelf","STATE_REARRANGE_COLUMNS","potentialDndColumns","dragColumns","STATE_NEW_COLUMNS_IN","goodDragColumns","isColumnDroppable","isPotentialDndColumns","removeColumns","success","addColumns","rearrangeColumns","columnsToRemove","newColumnList","getExistingColumns","updateColumns","columnsToAdd","colsToAddNoDuplicates","insertArrayIntoArray","getNonGhostColumns","scrollTop","addIconAndTitleToGui","addEmptyMessageToGui","addColumnsToGui","existingColumns","nonGhostColumns","addingGhosts","itemsToAddToGui","columnComponent","createColumnComponent","addArrow","eGroupIcon","icon","eTitleBar","isExistingColumnsEmpty","eTitle","title","eMessage","emptyMessage","eParent","__extends$f","__decorate$e","RowGroupDropZonePanel","passBeansUp","loggerFactory","dragAndDropIcon","ICON_GROUP","isPrimary","EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST","setRowGroupColumns","ICON_NOT_ALLOWED","__extends$g","__decorate$f","PivotDropZonePanel","checkVisibility","getPivotPanelShow","EVENT_COLUMN_PIVOT_CHANGE_REQUEST","setPivotColumns","ICON_PIVOT","__extends$h","__decorate$g","GridHeaderDropZones","setGui","createNorthPanel","onRowGroupChanged","topPanelGui","dropPanelVisibleListener","onDropPanelVisible","rowGroupComp","pivotComp","EVENT_DISPLAYED_CHANGED","bothDisplayed","isDisplayed","rowGroupPanelShow","getRowGroupPanelShow","Constants","ALWAYS","ONLY_WHEN_GROUPING","grouping","isRowGroupEmpty","RowGroupingModule","dependantModules","__extends$i","__decorate$h","ValuesDropZonePanel","ICON_AGGREGATE","EVENT_COLUMN_VALUE_CHANGE_REQUEST","setValueColumns","__extends$j","__decorate$i","PrimaryColsPanel","primaryColsHeaderPanel","hideFilter","hideSelect","primaryColsListPanel","onGroupExpanded","onSelectionChange","onExpandAll","onCollapseAll","onSelectAll","onUnselectAll","onFilterChanged","expandGroups","collapseGroups","ManagedFocusComponent","__extends$k","__decorate$j","ColumnToolPanel","childDestroyFuncs","setVisible","visible","defaultParams","suppressSideButtons","suppressPivotMode","suppressRowGroups","suppressValues","suppressPivots","mergeDeep","isRowGroupingModuleLoaded","pivotModePanel","primaryColsPanel","rowGroupDropZonePanel","valuesDropZonePanel","pivotDropZonePanel","setLastVisible","pivotModeListener_1","setPivotModeSectionVisible","insertBefore","firstChild","setRowGroupsSectionVisible","setValuesSectionVisible","setPivotSectionVisible","eGui","querySelectorAll","columnDrop","removeCssClass","lastVisible","ModuleRegistry","assertRegistered","expandColumnGroups","collapseColumnGroups","destroyChildren","__extends$l","__decorate$k","HorizontalResizeComp","setElementToResize","elementToResize","finishedWithResizeFunc","horizontalResizeService","addResizeBar","eResizeBar","dragStartPixels","onResizeStart","onResizing","onResizeEnd","setInverted","startingWidth","offsetWidth","delta","inverted","newWidth","Math","max","floor","__extends$m","__decorate$l","SideBarButtonsComp","buttonComps","getFocusableElement","TAB","shiftKey","focusController","findNextFocusableElement","headerPosition","headerPositionUtils","findColAtEdgeForHeaderRow","focusHeaderPosition","setToolPanelDefs","toolPanelDefs","addButtonComp","setActiveButton","comp","getToolPanelId","buttonComp","SideBarButtonComp","EVENT_TOGGLE_BUTTON_CLICKED","EVENT_SIDE_BAR_BUTTON_CLICKED","toolPanelId","clearButtons","destroyBeans","toolPanelDef","template","eIconWrapper","iconKey","eToggleButton","onButtonPressed","labelKey","labelDefault","__extends$n","__decorate$m","ToolPanelWrapper","setToolPanelDef","getColumnApi","componentPromise","userComponentFactory","newToolPanelComponent","then","setToolPanelComponent","setupResize","resizeBar","compInstance","toolPanelCompInstance","getToolPanelInstance","setResizerSizerSide","side","isLeft","__extends$o","__decorate$n","SideBarComp","toolPanelWrappers","sideBarButtonsComp","onToolPanelButtonClicked","setSideBarDef","openedItem","openToolPanel","clearDownUi","destroyToolPanelWrappers","sideBar","getSideBar","sideBarExists","toolPanels","shouldDisplaySideBar","hiddenByDefault","setupToolPanels","setSideBarPosition","position","defaultToolPanel","resizerSide","wrapper","defs","toolPanel","ColumnToolPanelModule","FiltersToolPanelModule","currentlyOpenedKey","raiseToolPanelVisibleEvent","toolPanelWrapper","EVENT_TOOL_PANEL_VISIBLE_CHANGED","source","close","isToolPanelShowing","activeToolPanel","reset","__extends$p","__decorate$o","ToolPanelColDefService","isColGroupDef","invalidColIds","createDummyColGroup","abstractColDef","depth","children_1","setChildren","getPrimaryColumn","mappedResults","syncLayoutCallback","leafPathTrees","getLeafPathTrees","mergeLeafPathTrees","getLeafPathTree","childDef","leafPathTree","getGroupId","getOriginalParent","allPrimaryGridColumns","getAllGridColumns","showRowGroup","pathA","pathB","mergeTrees","treeA","treeB","mergeResult","groupToMerge","addChildrenToGroup","mergeColDefs","first","second","currentGroup","groupToAdd","existingChildIds","childGroupAlreadyExists","lastChild","lastChildIsDifferent","subGroupIsSplit","subGroup","SideBarModule","__decorate$p","ModelItemUtils","colTree","cols","extractAllLeafColumns","setAllColumns","setAllPivot","setAllVisible","allItems","colStateItems","applyColumnState","setAllPivotPassive","setAllPivotActive","copyOfPivotColumns","copyOfValueColumns","copyOfRowGroupColumns","pivotChanged","valueChanged","rowGroupChanged","action","event_2","event_3","rowGroup","pivot","ColumnsToolPanelModule","userComponents","coreFactory","jsonDate","toJSON","properties","prefixedAttributes","prefix","cp","dc","dcterms","dcmitype","xsi","textNode","rawMap","contentTypeFactory","config","ContentType","Extension","PartName","contentTypesFactory","xmlns","getColorChildren","props","lastClr","colorScheme","getFont","typeface","script","panose","fontScheme","utf8_encode","getPropertyVal","getGs","pos","schemeColor","satMod","lumMod","tint","shade","getSolidFill","getGradFill","rotWithShape","gs1","gs2","gs3","lin","ang","scaled","getLine","w","cap","cmpd","algn","lim","getEffectStyle","shadow","blurRad","dist","dir","formatScheme","themeElements","officeTheme","buildSharedString","sharedStrings","strings","uniqueCount","numberFormatFactory","numberFormat","formatCode","numFmtId","numberFormatMap","numberFormatsFactory","numberFormats","fontFactory","font","size","colorTheme","_b","color","_c","family","scheme","italic","bold","strike","outline","underline","theme","rgb","lUnder","toLocaleLowerCase","fontsFactory","fonts","fillFactory","fill","patternType","fgTheme","fgTint","fgRgb","bgRgb","bgIndexed","pf","indexed","fillsFactory","fills","getBorderColor","convertLegacyColor","borderFactory","border","diagonal","leftChildren","rightChildren","topChildren","bottomChildren","diagonalChildren","mappedNames","None","Dot","Dash","Double","DashDot","DashDotDot","SlantDashDot","mediumBorders","convertLegacyBorder","weight","namedWeight","mappedName","substr","bordersFactory","borders","convertLegacyHorizontalAlignment","alignment","Automatic","Center","Right","Fill","Justify","CenterAcrossSelection","Distributed","JustifyDistributed","convertLegacyVerticalAlignment","Top","Bottom","getReadingOrderId","readingOrder","alignmentFactory","rotate","shrinkToFit","vertical","wrapText","textRotation","protectionFactory","protection","locked","protected","hidden","hideFormula","xfFactory","xf","borderId","fillId","fontId","xfId","applyAlignment","applyProtection","applyBorder","applyFont","applyNumberFormat","cellStylesXfsFactory","cellXfsFactory","borderFactory$1","cellStyle","builtinId","cellStylesFactory","cellStyles","resetStylesheetValues","base","registerFont","fontName","strikeThrough","utf8Name","convertedColor","familyId","getFamilyId","findIndex","currentFont","registerStyle","convertedPattern","convertedFillColor","convertedPatternColor","interior","currentFill","currentBorder","currentNumberFmt","pattern","Solid","Gray50","Gray75","Gray25","HorzStripe","VertStripe","ReverseDiagStripe","DiagStripe","DiagCross","ThickDiagCross","ThinHorzStripe","ThinVertStripe","ThinReverseDiagStripe","ThinDiagStripe","ThinHorzCross","ThinDiagCross","Gray125","Gray0625","patternColor","bottomStyle","topStyle","leftStyle","rightStyle","bottomColor","topColor","leftColor","rightColor","borderBottom","borderTop","borderLeft","borderRight","lineStyle","clS","clC","crS","crC","ctS","ctC","_d","cbS","cbC","registerBorders","format","currentFormat","registerNumberFmt","stylesheetFactory","cellStylesXfs","cellXfs","defaultPivotStyle","defaultTableStyle","sheetFactory","idx","sheetId","sheetsFactory","names","workbookFactory","columnFactory","min","bestFit","excelWidth","customWidth","ceil","getExcelCellWidth","cellFactory","ref","styleId","convertedType","toUpperCase","convertLegacyType","obj","__spreadArrays$1","rowFactory","collapsed","height","cells","rowIdx","mergeMap","posCounter","cell","mergeAcross","excelPos","mergedCells","getExcelColumnName","splice","addEmptyCells","ht","customHeight","customFormat","mergeCell","getMergedCells","currentRow","lastCol","merges","currentCell","cellIdx","start","outputRow","end","range","prevCol","currentMin","updateColMinMax","colIdx","tableIdx","worksheetFactory","table","relationshipFactory","Id","Type","Target","relationshipsFactory","__extends$q","__decorate$q","ExcelXlsxFactory","createSharedStrings","createXmlPart","body","xmlFactory","createHeader","encoding","standalone","createXml","createExcel","styles","worksheets","sheetNames","worksheet","registerStyles","createWorksheet","createCore","createContentTypes","createRels","rs","createStylesheet","createTheme","createWorkbook","createWorkbookRels","workbook","ss","html","excelWorkbook","Width","MergeAcross","StyleID","row","it","ws","Name","documentProperties","getTemplate","styleProperties","Vertical","Horizontal","Indent","ReadingOrder","Rotate","ShrinkToFit","VerticalText","verticalText","WrapText","Position","LineStyle","Weight","Color","Bold","FontName","Italic","Outline","Shadow","Size","StrikeThrough","Underline","VerticalAlign","verticalAlign","CharSet","charSet","Family","Pattern","PatternColor","Protected","HideFormula","Format","ID","__extends$r","__decorate$r","ExcelXmlFactory","header","excelXmlHeader","docProps","eWorkbook","wb","boolean","docProperties","stylesXmlElement","styleXmlElement","compose","addProperty","property","options","__extends$s","__decorate$s","BaseGridSerializingSession","groupColumns","processCellCallback","processHeaderCallback","processGroupHeaderCallback","processRowGroupCallback","prepare","columnsToExport","extractHeaderValue","getHeaderName","extractRowCellValue","valueForCell","groupIndex","isGroupMultiAutoColumn","isGroupUseEntireRow","createValueForGroupNode","processCell","GridSerializer","serialize","gridSerializingSession","rowSkipper","shouldRowBeSkipped","skipSingleChildrenGroup","isGroupRemoveSingleChildren","skipLowestSingleChildrenGroup","isGroupRemoveLowestSingleChildren","rowModelNormal","rowModel","getType","ROW_MODEL_TYPE_CLIENT_SIDE","onlySelectedNonStandardModel","onlySelected","columnKeys","getGridColumns","allColumns","GROUP_AUTO_COLUMN_ID","getAllPrimaryColumns","getAllDisplayedColumns","customHeader","addCustomContent","columnGroups","groupInstanceIdCreator","GroupInstanceIdCreator","displayedGroups","displayedGroupCreator","createDisplayedGroups","getGridBalancedTree","recursivelyAddHeaderGroups","skipHeader","gridRowIterator_1","onNewHeaderRow","onColumn","pinnedRowModel","forEachPinnedTopRow","processRow","forEachPivotNode","forEachNode","onlySelectedAllPages","selectionController","getSelectedNodes","forEachNodeAfterFilterAndSort","shouldSkipLowestGroup","shouldSkipCurrentGroup","allChildrenCount","skipGroups","skipFooters","footer","skipPinnedTop","rowPinned","skipPinnedBottom","rowAccumulator","onNewBodyRow","getCustomContentBelowRow","content","forEachPinnedBottomRow","customFooter","parse","directChildrenHeaderGroups","columnGroupChild","ColumnGroup","doAddHeaderHeader","gridRowIterator","onNewHeaderGroupingRow","columnIndex","getDisplayNameForColumnGroup","_extendStatics30","_extendStatics31","_extendStatics32","_extendStatics33","_extendStatics34","_extendStatics35","_extendStatics36","EXPAND_STATE","__extends$t","__decorate$t","CsvSerializingSession","isFirstLine","suppressQuotes","columnSeparator","test","beginNewLine","putInQuotes","appendEmptyCells","onNewHeaderGroupingRowColumn","span","onNewHeaderRowColumn","onNewBodyRowColumn","EXPORT_TYPE_CSV","stringValue","BaseCreator","export","userParams","isExportSuppressed","getMergedParamsAndData","mergedParams","fileName","getDefaultFileName","getDefaultFileExtension","downloader","download","packageFile","getData","mergeDefaultParams","gridSerializer","createSerializingSession","baseParams","getDefaultExportParams","Blob","navigator","msSaveOrOpenBlob","getMimeType","CsvCreator","exportDataAsCsv","getDataAsCsv","isSuppressCsvExport","__decorate$u","Downloader","element","url_1","URL","createObjectURL","setAttribute","display","MouseEvent","bubbles","cancelable","view","removeChild","revokeObjectURL","__extends$u","__decorate$v","LINE_SEPARATOR$1","XmlFactory","headerElement","headerStart","xmlElement","booleanTransformer","prefixedSet","returnAttributeIfPopulated","xmlValue","__extends$v","__decorate$w","crcTable","ZipContainer","folders","files","addFolder","created","addFolders","paths","addFile","clearStream","getContent","mimeType","textOutput","buildFileStream","uInt8Output","buildUint8Array","fData","totalFiles","len","foData","lL","cL","_i","totalFiles_1","currentFile","getHeader","fileHeader","folderHeader","buildFolderEnd","offset","decToHex","utfPath","isUTF8","time","convertTime","dt","convertDate","extraFields","uExtraFieldPath","getFromCrc32Table","tLen","cLen","lLen","uint8","Uint8Array","crc","getHours","getMinutes","getSeconds","CsvExportModule","__extends$w","__spreadArrays$2","ExcelXmlSerializingSession","mixedStyles","mixedStyleCounter","stylesByIds","baseExcelStyles","excelStyles","customContent","convertColumnToExcel","currentCells","headerRowHeight","styleIds","styleLinker","HEADER_GROUPING","createMergedCell","onNewRow","onNewHeaderColumn","onNewBodyColumn","rowHeight","onNewColumnAccumulator","nameForCol","HEADER","createCell","longestRow","reduce","sheetName","excelFactory","excelStyleId","EXPORT_TYPE_EXCEL","BODY","addNewMixedStyle","excelID","getDataTypeForValue","isNumeric","excelId","resultantStyle","excelStyle","deepCloneObject","styleExists","actualStyle","typeTransformed","dataType","suppressTextAsCDATA","cdataStart","cdataEnd","cdataEndRegex","RegExp","massageText","Number","valueOf","numOfCells","columnWidth","getActualWidth","__extends$x","ExcelXlsxSerializingSession","stringList","stringMap","getStringPosition","__extends$y","__assign","__decorate$x","ExcelCreator","exportDataAsExcel","setExportMode","exportMode","getDataAsExcelXml","getExportMode","isXlsx","xlsxFactory","excelXmlFactory","gridOptions","rowType","colIndex","applicableStyles","stylingService","processAllCellClasses","$scope","className","isSuppressExcelExport","zipContainer","ExcelExportModule","__extends$z","__decorate$y","_extendStatics37","_extendStatics38","_extendStatics39","_extendStatics40","_extendStatics41","_extendStatics42","PointerEvents","FiltersToolPanelHeaderPanel","preConstruct","onSearchTextChanged","showFilterSearch","suppressFilterSearch","suppressExpandAll","filterGroupsPresent","isFilterAllowed","onSearchTextChangedDebounced","searchText","currentExpandState","__extends$A","__decorate$z","ToolPanelFilterComp","hideHeader","eFilterName","eFilterToolPanelHeader","toggleExpanded","EVENT_FILTER_OPENED","onFilterOpened","addInIcon","eFilterIcon","isFilterActive","removeAttribute","EVENT_FILTER_CHANGED","getColumnFilterName","addCssClassToTitleBar","cssClass","iconName","eIcon","filterManager","collapse","container","filterPromise","getOrCreateFilterWrapper","underlyingFilter","agFilterToolPanelBody","afterGuiAttached","refreshFilter","refreshVirtualList","__extends$B","__decorate$A","ToolPanelFilterGroupComp","childFilterComps","expandedCallback","filterGroupComp","cssIdentifier","setGroupTitle","setAlignItems","filterComp","addItem","addExpandCollapseListeners","addFilterChangedListeners","refreshFilters","isColumnGroup","getFilterGroupName","filterGroupName","getFilterGroupId","hideGroupItem","hideItem","hideGroup","forEachToolPanelFilterChild","expandListener","collapseListener","AgGroupComponent","EVENT_EXPANDED","EVENT_COLLAPSED","group_1","column_1","toggleGroupExpand","getColumnGroupName","getColumnName","setTitle","destroyFilters","__extends$C","__decorate$B","FiltersToolPanelListPanel","filterGroupComps","syncFilterLayout","toolPanelColDefService","setFiltersLayout","recursivelyAddComps","setFirstAndLastVisible","searchFilterText","searchFilters","fireExpandedEvent","flatten","recursivelyAddFilterGroupComps","shouldDisplayFilter","filtersExistInChildren","suppressFiltersToolPanel","newDepth","expandFilterGroups","updatedGroupIds","updateGroupExpandState","filterGroup","expandFilters","updatedColIds","anyChildrenChanged_1","updateFilterExpandState","unrecognisedColIds","updateExpandCounts","performFilterSearch","searchFilter","firstVisible","groupName","recursivelySearch","filterItem","groupNamePasses","alreadyPassed","anyChildPasses","containsClass","firstIdx","lastIdx","__extends$D","__decorate$C","FiltersToolPanel","listenerDestroyFuncs","filtersToolPanelHeaderPanel","filtersToolPanelListPanel","hideExpand","hideSearch","onSearchChanged","setFilterLayout","collapseFilterGroups","collapseFilters","__extends$E","__decorate$D","ChartDatasource","isRowModelServerSide","pivoting","updatePivotKeysForSSRM","extractRowsFromGridRowModel","aggregateRowsByDimension","extractedRowData","columnNames","groupNodeIndexes","groupsToRemove","modelLastRow","gridRowModel","numRows","endRow","startRow","dimensionCols","getGridColumn","valueObject","valueString","labels","getGroupLabels","l","groupKey","ChartDataModel","DEFAULT_CATEGORY","columnNamesArr","groupIndexesToRemove_1","_1","dataFromGrid","lastColId","dataAggregated","currentMap","groupItem_1","__children","groupItem","dataToAgg","aggregationStage","secondaryColumns","getSecondaryColumns","pivotKeySeparator","extractPivotKeySeparator","firstSecondaryCol","extractSeparator","childId","getParent","initialLabel","__extends$F","__decorate$E","__spreadArrays$3","dimensionColState","valueColState","detached","pivotChart","chartType","chartThemeName","referenceCellRange","cellRange","suppressChartRanges","unlinkChart","chartId","generateId","datasource","updateCellRanges","updatedColState","valueCellRange","getAllChartColumns","allColsFromRanges","getAllColumnsFromRanges","updateColumnState","setDimensionCellRange","setValueCellRange","resetColumnState","syncDimensionCellRange","updateData","chartData","isGroupActive","isGrouping","getSelectedDimension","groupDimensionSelected","isPivotChart","getChartId","getValueColState","displayNameMapper","getDimensionColState","getCellRanges","dimensionCellRange","getCellRangeParams","cellRanges","firstCellRange","rowStartIndex","rowStartPinned","rowEndIndex","rowEndPinned","setChartType","getChartType","setChartThemeName","getChartThemeName","isSuppressChartRanges","isDetached","toggleDetached","getSelectedValueColState","cs","getSelectedValueCols","createCellRange","startColumn","CellRangeType","DIMENSION","convertToSet","getColDisplayName","getRowIndexes","rangeController","getRangeStartRow","getRangeEndRow","displayedCols","Set","chartDataType","isNumberCol","rowRenderer","getRowNode","cellValue","extractLeafData","childRow","random","allCols","isInitialising","hasSelectedDimension","order","defaultCategory","chartTranslator","valueColumnsFromReferenceRange","shift","updatedCol","idsMatch","orderedColIds","reorderColState","colsInRange","selectedDimensionColState","selectedValueCols","orderedColIds_1","VALUE","selectedDimension","Padding","BBox","isValid","isFinite","dilate","containsPoint","render","ctx","noParams","save","resetTransform","setTransform","strokeStyle","lineWidth","strokeRect","label","fillStyle","textBaseline","fillText","restore","Matrix","elements","setElements","setIdentityElements","enumerable","configurable","AxB","A","B","C","m11","m12","m21","m22","m31","m32","o11","o12","o21","o22","o31","o32","multiplySelf","other","multiply","preMultiplySelf","inverse","rD","inverseTo","invertSelf","clone","transformPoint","transformBBox","bbox","radius","h","xx","xy","yx","yy","h_w","h_h","cx","cy","sx","sqrt","sy","abs","toContext","identity","transform","flyweight","matrix","createId","instance","Error","Node","tag","NaN","isContainerNode","_children","childSet","inverseMatrix","_dirtyTransform","_scalingX","_scalingY","_scalingCenterX","_scalingCenterY","_rotationCenterX","_rotationCenterY","_rotation","_translationX","_translationY","_dirty","_visible","pointerEvents","All","isNode","_setScene","_scene","_setParent","_parent","countChildren","MAX_SAFE_INTEGER","append","nodes","scene","dirty","inverseTransformPoint","dirtyTransform","rotation","PI","pickNode","hit","computeBBox","computeBBoxCenter","computeTransformMatrix","scx","scy","bbcx","bbcy","scalingX","scalingY","scalingCenterX","scalingCenterY","rcx","rcy","cos","sin","rotationCenterX","rotationCenterY","tx","translationX","ty","translationY","tx4","ty4","pow","chainObjects","prop","object","parts","isArray","part","cloneUnlessOtherwiseSpecified","isMergeableObject","deepMerge","emptyTarget","defaultArrayMerge","getKeys","getOwnPropertySymbols","symbol","propertyIsEnumerable","getEnumerableOwnPropertySymbols","propertyIsOnObject","mergeObject","destination","propertyIsUnsafe","customMerge","getMergeFunction","defaultIsMergeableObject","isNonNullObject","isSpecial","arrayMerge","sourceIsArray","isObject","_extendStatics43","_extendStatics44","__extends$G","Shape","lastInstanceId","_fillOpacity","_strokeOpacity","_fill","defaultStyles","_stroke","stroke","_strokeWidth","strokeWidth","_lineDash","lineDash","_lineDashOffset","lineDashOffset","_lineCap","lineCap","_lineJoin","lineJoin","_opacity","opacity","onShadowChange","_fillShadow","fillShadow","_strokeShadow","strokeShadow","createInstance","shape","restoreOwnStyles","getOwnPropertyNames","restoreAllStyles","restoreOverriddenStyles","protoStyles","getPrototypeOf","align","oldValue","identical","fillStroke","pixelRatio","canvas","globalAlpha","fillOpacity","enabled","shadowColor","shadowOffsetX","xOffset","shadowOffsetY","yOffset","shadowBlur","blur","strokeOpacity","setLineDash","isPointInPath","HdpiCanvas","_container","_pixelRatio","userSelect","setPixelRatio","resize","_canvas","freeze","toImage","img","src","getDataURL","toDataURL","trim","dataUrl","binary","atob","array","blob","href","click","ratio","devicePixelRatio","overrideScale","imageRendering","_width","_height","round","_textMeasuringContext","_svgText","svg","createElementNS","classList","visibility","svgText","_has","textMetrics","textMeasuringContext","measureText","actualBoundingBoxDescent","userAgent","getTransform","text","textAlign","getTextSize","metrics","actualBoundingBoxAscent","measureSvgText","cache","textSizeCache","fontCache","size_1","textContent","getBBox","scale","overrides","$save","$restore","$setTransform","name_1","__extends$H","Text","_x","_y","lineBreakRegex","lines","_text","_dirtyFont","_fontSize","_fontFamily","_textAlign","_textBaseline","_lineHeight","splitText","str","dirtyFont","_font","fontStyle","fontWeight","fontSize","fontFamily","_fontStyle","_fontWeight","getPreciseBBox","getApproximateBBox","actualBoundingBoxLeft","point","isPointInStroke","strokeText","__assign$1","Observable","allPropertyListeners","allEventListeners","addPropertyListener","scope","propertyListeners","scopes_1","scopes","removePropertyListener","delete","notifyPropertyListeners","eventListeners","scopes_2","notifyEventListeners","types","listeners","fireEvent","privateKeyPrefix","reactive","events","privateKey","privateKeyEvents","events_1","_extendStatics45","__extends$I","__decorate$F","Caption","padding","interpolateNumber","msA","msB","setTime","nb","na","interpolateValue","clamper","domain","_extendStatics46","ContinuousScale","unknown","_clamp","_domain","_range","untransform","_interpolate","rescale","setDomain","getDomain","piecewise","bimap","output","normalize","interpolate","xt","x0","x1","y0","y1","convert","invert","__extends$J","ticks","step","tickStep","absStep","fractionDigits","log","LN10","NumericTicks","e10","e5","e2","rawStep","tickIncrement","power","_extendStatics47","_extendStatics48","_extendStatics49","__extends$K","LinearScale","nice","i0","i1","stop","__extends$L","Group","Infinity","parent_1","EnterNode","datum","Selection","groups","parents","select","selectAll","Class","appendFn","creator","selector","numGroups","subgroups","groupSize","subgroup","subnode","selectByClass","selectByTag","selectAllByClass","selectAllByTag","selectNone","selectorAll","groupCount","groupLength","each","cb","groups0","groups1","m0","m","group0","group1","attr","attrFn","enterGroups","exitGroups","setDatum","data_1","updateGroups","parent_2","dataSize","enterGroup","updateGroup","exitGroup","bindKey","bindIndex","previous","enter","exit","keyValues","nodeByKeyValue","keyValue","keyPrefix","__extends$M","Line","_x1","_y1","_x2","_y2","x2","y2","beginPath","moveTo","lineTo","twoPi","normalizeAngle360","radians","toRadians","degrees","sign","cubicRoots","linearRoot","D","roots","t1","t2","quadraticRoots","Q","R","third","S","T","Im","t_1","theta","acos","thirdA","twoSqrtQ","t3","segmentIntersection","ax1","ay1","ax2","ay2","bx1","by1","bx2","by2","ua","ub","cubicSegmentIntersections","px1","py1","px2","py2","px3","py3","px4","py4","intersections","bx","bezierCoefficients","by","tt","ttt","P1","P2","P3","P4","_extendStatics50","Path2D","commands","_closedPath","closePath","arcTo","rx","ry","fA","fS","hdx","hdy","sinPhi","cosPhi","xp","yp","ratX","ratY","lambda","cpx","cpy","theta1","atan2","deltaTheta","cubicArc","arcToAlt","phi","theta2","anticlockwise","temp","f90","sinTheta1","cosTheta1","rightAngle","lastX","tan","sinPhi2","cosPhi2","C2x","C2y","deCasteljau","points","newPoints","approximateCurve","xy_1","quadraticCurveTo","cubicCurveTo","cx1","cy1","cx2","cy2","cn","ox","oy","px","py","intersectionCount","ci","pi","fromString","setFromString","parseSvgPath","splitCommandsRe","strParams","matchParamsRe","command","parseFloat","prettifySvgPath","lastCommand","checkQuadraticCP","quadraticCommandRe","checkCubicCP","cubicCommandRe","out","toPrettyString","toSvg","xmlDeclaration","toDebugSvg","toCubicPaths","cubicPathToString","__extends$N","Path","_dirtyPath","_svgPath","closedPath","updatePath","dirtyPath","appendPath","isEqual","epsilon","toFixed","fractionOrSignificantDigits","_extendStatics51","ArcType","__extends$O","Tags","Arc","_centerX","_centerY","_radiusX","_radiusY","_startAngle","_endAngle","_counterClockwise","_type","Open","startAngle","endAngle","centerX","centerY","radiusX","radiusY","counterClockwise","Chord","Round","fullPie","_extendStatics52","ChartAxisDirection","ChartAxisPosition","AxisTick","AxisLabel","mirrored","parallel","_format","onFormatChange","Axis","lineNode","line","tick","translation","_visibleRange","_title","_gridLength","gridStyle","_radialGrid","requestedRange","groupSelection","onTickFormatChange","updateRange","rr","vr","visibleRange","inRange","tolerance","inRangeEx","tickFormat","tickFormatter","oldTitle","requestedRangeMin","requestedRangeMax","parallelLabels","labelRotation","halfBandwidth","bandwidth","sideFlag","parallelFlipRotation","parallelFlipFlag","regularFlipRotation","regularFlipFlag","alignFlag","Tick","gridLength","radialGrid","GridLine","styleCount_1","gridLines","angularGridLength_1","arc","gridLine","labelSelection","formatter","labelX","autoRotation","titleVisible","titleNode","excludeTitle","titleRotationFlag","labelBBox","__extends$P","flipChartAxisDirection","X","Y","_extendStatics53","_extendStatics54","ChartAxis","boundSeries","_position","__extends$Q","NumberAxis","_nice","_min","_max","clamp","BandScale","ordinalRange","_bandwidth","_paddingInner","_paddingOuter","_round","_align","reversed","__extends$R","CategoryAxis","paddingInner","paddingOuter","find","predicate","finiteExtent","numericExtent","calculatedExtent","findMinMax","values_1","findLargestMinMax","totals","totals_1","total","copy","TreeNode","number","subtreeLeft","subtreeRight","screenX","screenY","leafCount","prelim","mod","ancestor","change","getLeftSibling","getLeftmostSibling","nextLeft","thread","nextRight","getSiblings","ticksToTree","pad","root","pathParts","lastPartIndex","pathPart","partIndex","existingNode","isNotLeaf","insertTick","moveSubtree","wm","wp","vim","defaultAncestor","firstWalk","distance","defaultAncestor_1","vop","vip","vom","sip","sop","sim","som","apportion","executeShifts","midpoint","leftSibling","Dimensions","secondWalk","layout","thirdWalk","treeLayout","TreeLayout","_extendStatics55","_extendStatics56","dimensions","leafNodes","nonLeafNodes","shiftX","shiftY","flipX","xSteps","ySteps","existingSpacingX","existingSpacingY","screenDimensions","offsetX","offsetY","__extends$S","GroupedCategoryAxisLabel","grid","GroupedCategoryAxis","tickScale","longestSeparatorLength","labelColor","gridLineSelection","axisLineSelection","separatorSelection","tickTree","tickTreeLayout","resizeTickTree","lineHeight","rangeStart","rangeEnd","treeLabels","isLabelTree","updateGridLines","enterGridLines","updateLabels","enterLabels","labelFormatter","maxLeafLabelWidth","labelGrid","separatorData","minX","updateSeparators","enterSeparators","lineCount","updateAxisLines","enterAxisLines","styles_1","includeTitle","__extends$T","t0","TimeInterval","_floor","_offset","d0","ms","CountableTimeInterval","_count","_field","every","field_1","millisecond","milliseconds","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationMonth","durationYear","getMilliseconds","seconds","minute","minutes","hour","hours","setHours","days","setDate","tzMinuteDelta","getTimezoneOffset","weekday","getDay","weeks","sunday","monday","thursday","month","months","setMonth","years","setFullYear","complexBisectRight","list","lo","hi","ascendingComparator","mid","utcDay","setUTCHours","setUTCDate","getUTCDate","utcYear","setUTCMonth","setUTCFullYear","getUTCFullYear","weekday$1","getUTCDay","utcSunday","utcMonday","utcThursday","localDate","H","M","L","utcDate","UTC","formatLookup","newYear","locale","numberRe","percentRe","requoteRe","requote","formatRe","pads","string","timeLocale","lDateTime","dateTime","lDate","lTime","lPeriods","periods","lWeekdays","lShortWeekdays","shortDays","lMonths","lShortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","formatDayOfMonth","formatMilliseconds","formatUnixTimestamp","formatUnixTimestampSeconds","dayOfWeek","yearStart","z","formatLiteralPercent","utcFormats","getUTCMonth","formatUTCDayOfMonth","formatUTCMilliseconds","getUTCHours","getUTCMinutes","getUTCSeconds","parses","exec","parseSpecifier","parseDayOfMonth","parseHour24","U","V","W","Z","newParse","specifier","newDate","day$1","week","newFormat","pad_1","code","char","getUTCMilliseconds","utcFormat","utcParse","formatLocale","_extendStatics57","_extendStatics58","_extendStatics59","RectSizing","__extends$U","TimeScale","tickIntervals","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","formatYear","defaultTickFormat","tickInterval","interval","tickCount","__extends$V","TimeAxis","Scene","animationFrameId","_root","debug","renderFrameIndex","renderBoundingBoxes","_frameIndex","pendingSize","clearRect","fillRect","frameIndex","requestAnimationFrame","cancelRender","cancelAnimationFrame","bezierCurveTo","__extends$W","_extendStatics60","_extendStatics61","_extendStatics62","_extendStatics63","_extendStatics64","_extendStatics65","_extendStatics66","_extendStatics67","_extendStatics68","Rect","_radius","_crisp","effectiveStrokeWidth","_sizing","Content","crisp","sizing","Border","borderSizing","halfWidth","halfHeight","al","__extends$X","Marker","_size","half","__extends$Y","Square","hs","__extends$Z","MarkerLabel","_marker","_markerSize","_spacing","marker","markerSize","spacing","__extends$_","Circle","__extends$$","Cross","__extends$10","Diamond","__extends$11","Heart","rad","degree","__extends$12","Plus","__extends$13","Triangle","getMarker","_extendStatics69","LegendOrientation","LegendPosition","__extends$14","__decorate$G","_extendStatics70","_extendStatics71","_extendStatics72","_extendStatics73","LegendLabel","LegendMarker","LegendItem","paddingX","paddingY","changeListener","layoutChangeListener","Legend","itemSelection","oldSize","orientation","onDataChange","onEnabledChange","onPositionChange","onMarkerShapeChange","performLayout","updateSelection","MarkerShape","itemId","enterSelection","itemCount","bboxes","itemMarker","itemLabel","markerLabel","itemHeight","paddedItemsWidth","paddedItemsHeight","columnCount","itemsWidth","itemsHeight","columnCount_1","startX","startY","markerFill","markerStroke","markerStrokeWidth","markerFillOpacity","markerStrokeOpacity","getDatumForPoint","SizeMonitor","NativeResizeObserver","ResizeObserver","resizeObserver","entries","entries_1","entry","contentRect","checkSize","setInterval","clientHeight","ready","observe","unobserve","requestAnimationFrameId","__extends$15","__decorate$H","Series","directions","tooltipEnabled","showInLegend","scheduleLayout","scheduleData","setColors","strokes","directionKeys","getNodeData","fireNodeClickEvent","toggleSeriesItem","onHighlightChange","fixNumericExtent","extent","__extends$16","__decorate$I","SeriesMarker","maxSize","__extends$17","CartesianSeries","CartesianSeriesMarker","__extends$18","__assign$2","__decorate$J","toTooltipHtml","defaults","titleColor","titleBackgroundColor","Chart","defaultTooltipClass","_extendStatics74","_extendStatics75","_extendStatics76","_extendStatics77","_extendStatics78","_extendStatics79","_extendStatics80","_extendStatics81","background","legend","legendAutoPadding","captionAutoPadding","_data","_autoSize","_axes","_series","_axesChanged","_seriesChanged","layoutCallbackId","_performLayout","layoutPending","dataCallbackId","_onMouseDown","onMouseDown","_onMouseUp","onMouseUp","_onMouseMove","onMouseMove","_onMouseOut","onMouseOut","_onClick","onClick","_tooltipClass","tooltipTracking","_element","autoSize","onLayoutChange","onLegendPositionChange","tooltipElement","tooltipClass","tooltipDocuments","styleElement","head","querySelector","setupDomListeners","onCaptionChange","series","chart_1","tooltipParent","cleanupDomListeners","axis","detachAxis","linkedTo","attachAxis","axesChanged","seriesRoot","removeAllSeries","addSeries","dehighlightDatum","dataPending","before","allSeries","beforeIndex","initSeries","seriesChanged","chart","updateLegend","onSeriesNodeClick","freeSeries","addSeriesAfter","after","afterIndex","removeSeries","assignSeriesToAxes","axes","axisName","assignAxesToSeries","force","directionToAxesMap","directionAxes","findMatchingAxis","xAxis","yAxis","axisKeys","clearTimeout","processData","legendData","listSeriesItems","positionCaptions","subtitle","subtitleVisible","paddingTop","titleBBox","subtitleBBox","positionLegend","legendBBox","legendGroup","legendSpacing","chartElement","pickSeriesNode","seriesRect","pickClosestSeriesNodeDatum","closestDatum","minDistance","hitPoint","p1","p2","nodeDatum","lastPick","pick","showTooltip","onSeriesDatumPick","hideTooltip","canvasRect","pageX","pageXOffset","pageY","pageYOffset","toggleTooltip","checkSeriesNodeClick","checkLegendClick","id_1","meta","highlightDatum","getTooltipHtml","highlightedDatum","updateTooltipClass","constrained","tooltipRect","maxLeft","innerWidth","__extends$19","ClipRect","_enabled","clip","__extends$1a","RangeHandle","_gripLineGap","_gripLineLength","ax","ay","axw","ayh","dx","gripLineGap","dy","gripLineLength","__extends$1b","RangeMask","minRange","onRangeChange","computeVisibleRangeBBox","maxX","__extends$1c","RangeSelector","minHandle","maxHandle","mask","updateHandles","NavigatorMask","rangeMask","rm","NavigatorHandle","rangeHandle","rh","Navigator","minHandleDragging","maxHandleDragging","panHandleOffset","_margin","updateAxes","clipSeries","cursor","getRatio","stopHandleDragging","__extends$1d","CartesianChart","_seriesRoot","shrinkRect","legendPadding","margin","bottomAxesHeight","axisThickness","domains_1","__extends$1e","GroupedCategoryChart","domains","isNumericX","domain_1","__extends$1f","PolarSeries","__extends$1g","PolarSeriesMarker","__decorate$K","PolarChart","equal","length_1","flags","interpolatePattern","_extendStatics82","_extendStatics83","_extendStatics84","BarSeriesNodeTag","__extends$1h","__decorate$L","AreaSeries","areaGroup","strokeGroup","markerGroup","areaSelection","strokeSelection","markerSelection","markerSelectionData","seriesItemEnabled","xData","yData","yDomain","_xKey","xName","_yKeys","yNames","highlightStyle","seriesItemEnabled_1","_normalizedTo","absValue","updateMarkerNodes","xKey","yKeys","keysFound","yKey","yMin","yMax","normalizedTo","yMinMax","yLargestMinMax","stack","selectionData","generateSelectionData","areaSelectionData","updateAreaSelection","updateStrokeSelection","updateMarkerSelection","xScale","yScale","xDatum","yDatum","seriesDatum","prevMin","prevMax","curr","prev","yValue","areaPoints","updateAreas","enterAreas","updateStrokes","enterStrokes","updateMarkers","enterMarkers","markerFormatter","highlightFill","highlightStroke","highlighted","markerFormat","tooltipFormat","tooltipRenderer","xValue","yKeyIndex","yName","valueName","formatName","locales","toLocaleString","toDateString","__extends$1i","__decorate$M","Label","__extends$1j","__decorate$N","__spreadArrays$4","_extendStatics85","_extendStatics86","_extendStatics87","HistogramSeriesNodeTag","BarSeriesLabel","BarSeries","rectGroup","textGroup","rectSelection","textSelection","flipXY","groupScale","_xName","_yNames","_shadow","updateRectNodes","stackValues","generateNodeData","labelFontStyle","labelFontWeight","labelFontSize","labelFontFamily","barWidth","nodeData","category","barX","bottomY","yValueIsNumber","labelText","updateRectSelection","updateTextSelection","updateTextNodes","updateRects","enterRects","Bar","rectFill","rectStroke","updateTexts","enterTexts","labelEnabled","enabledSeriesItems","__extends$1k","__decorate$O","LineSeries","xDomain","nodeSelection","_yKey","onMarkerEnabledChange","isContinuousX","isContinuousY","updateNodes","updateLinePath","updateNodeSelection","getXYDatums","linePath","prevXInRange","nextXYDatums","xyDatums","xInRange","nextXInRange","xString","yString","__extends$1l","__decorate$P","ScatterSeries","sizeData","sizeScale","sizeName","labelName","sizeKey","__extends$1m","__decorate$Q","__spreadArrays$5","_extendStatics88","_extendStatics89","PieNodeTag","HistogramSeriesLabel","aggregationFunctions","bin","mean","HistogramBin","domainMin","domainMax","aggregatedValue","frequency","addDatum","domainWidth","calculateAggregatedValue","aggregationName","aggregationFunction","getY","areaPlot","relativeHeight","HistogramSeries","binnedData","_areaPlot","_yName","_bins","bins","_aggregation","aggregation","_binCount","binCount","deriveBins","binStarts","binSize","firstBinEnd","placeDataInBins","derivedBins","sortedData","currentBin","NEGATIVE_INFINITY","firstBin","lastBin","xMin","xMax","binOfData","xDomainMin","xDomainMax","xMinPx","xMaxPx","yZeroPx","yMaxPx","selectionDatumLabel","Bin","rangeMin","rangeMax","__extends$1n","Sector","_centerOffset","_innerRadius","_outerRadius","_angleOffset","outerRadius","angleOffset","midAngle","innerRadius","centerOffset","g","fromHexString","nameToHex","fromRgbaString","hexRe","shortHexRe","rgbRe","rgbaRe","fromArray","fromHSB","alpha","HSBtoRGB","padHex","toHexString","toRgbaString","components","toHSB","RGBtoHSB","rc","gc","bc","derive","hueShift","saturationFactor","brightnessFactor","opacityFactor","hsb","rgba","brighter","darker","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","__extends$1o","__decorate$R","_extendStatics90","PieSeriesLabel","minAngle","PieSeriesCallout","colors","PieSeries","radiusScale","groupSelectionData","angleScale","angle","callout","angleKey","angleName","_fills","_strokes","outerRadiusOffset","innerRadiusOffset","radiusKey","angleData","angleDataTotal","angleDataRatios","labelData","useRadiusKey","radiusData","radii","maxDatum_1","halfPi","datumIndex","midCos","midSin","labelMinAngle","labelVisible","midAngle180","quadrantStart","updateGroupSelection","Callout","outerRadii","centerOffsets","sector","sectorFill","sectorStroke","calloutColors","calloutLength","calloutStrokeWidth","offset_1","fontStyle_1","fontWeight_1","fontSize_1","fontFamily_1","color_1","labelRadius","radiusName","angleValue","formattedAngleValue","radiusValue","fills_1","strokes_1","__extends$1p","__decorate$S","DropShadow","setUTCSeconds","setUTCMinutes","__assign$3","palette","ChartTheme","createChartConfigPerSeries","getDefaults","mergeOptions_1","overrides_1","common","seriesTypes","seriesType","cartesian","cartesianSeriesTypes","polar","polarSeriesTypes","chartConfig","getPalette","getAxisDefaults","getSeriesDefaults","getBarSeriesDefaults","getCartesianSeriesMarkerDefaults","getChartDefaults","typeToAliases","alias","getConfig","mergeWithParentDefaults","mergeOptions","proto","setSeriesColors","seriesOptions","firstColorIndex","colorCount","getSeriesColorCount","cartesianDefaults","groupedCategory","bar","scatter","area","histogram","pie","_extendStatics91","_extendStatics92","_extendStatics93","_extendStatics94","_extendStatics95","_extendStatics96","_extendStatics97","_extendStatics98","_extendStatics99","__extends$1q","__assign$4","DarkTheme","fontColor","axisDefaults","seriesLabelDefaults","chartDefaults","__extends$1r","palette$1","MaterialLight","__extends$1s","palette$2","MaterialDark","__extends$1t","palette$3","PastelLight","__extends$1u","palette$4","PastelDark","__extends$1v","palette$5","SolarLight","__extends$1w","palette$6","SolarDark","__extends$1x","palette$7","VividLight","__extends$1y","palette$8","VividDark","__assign$5","commonChartMappings","chartMeta","constructorParams","setAsIs","seriesDefaults","columnSeriesDefaults","shadowMapping","labelDefaults","barLabelMapping","axisMappings","mappings","groupedCategoryChartMapping","groupedCategoryChartMeta","__assign$6","__spreadArrays$6","lightTheme","darkTheme","lightThemes","darkThemes","themes","getChartTheme","stockTheme","baseTheme","AgChart","createComponent","pathToSeriesTypeMap","actualSeriesTypeMap","component","provideDefaultType","mapping","provideDefaultOptions","skipKeys","constructorParamValues","param","subComponents","subComponent","keyPath","updateSeries","configs","prevSeries","newSeries","axesToAdd","axesToUpdate","_loop_2","axisToUpdate","axisToAdd","configs_1","outerLoop","provideDefaultChartType","skipThemeKey","enabledKey","isChartConfig","themeDefaults","isExplicitlyDisabled","_extendStatics100","_extendStatics101","_extendStatics102","_extendStatics103","_extendStatics104","__extends$1z","__decorate$T","ChartController","model","setChartRange","EVENT_RANGE_SELECTION_CHANGED","updateForRangeChange","setCellRanges","updateForGridChange","EVENT_COLUMN_PINNED","EVENT_MODEL_UPDATED","EVENT_CELL_VALUE_CHANGED","updateForDataChange","raiseChartUpdatedEvent","raiseChartRangeSelectionChangedEvent","updateForPanelChange","getChartModel","getThemeName","chartOptions","chartProxy","getChartOptions","getChart","getChartImageDataURL","getThemes","getChartThemes","getPalettes","customPalette","getCustomPalette","themeName","isStockTheme","lookupCustomChartTheme","raiseChartOptionsChangedEvent","getColStateForMenu","isDefaultCategorySelected","silent","detachChartRange","setChartProxy","getChartProxy","isActiveXYChart","ChartType","Scatter","Bubble","isChartLinked","EVENT_CHART_UPDATED","EVENT_CHART_RANGE_SELECTION_CHANGED","__extends$1A","__decorate$U","__spreadArrays$7","ChartDataPanel","chartController","columnComps","updatePanels","clearComponents","currentChartType","getSeriesLabel_1","generateGetSeriesLabel","createCategoriesGroupComponent","createSeriesGroupComponent","addComponent","eDiv","addChangeListener","columnState","AgAbstractField","categoriesGroupComp","getCategoryGroupTitle","suppressEnabledCheckbox","suppressOpenCloseIcons","inputName","getCompId","AgRadioButton","setInputName","seriesGroupComp","getSeriesGroupTitle","pairedModeToggle","AgToggleButton","chartProxy_1","setLabelAlignment","setLabelWidth","setInputWidth","getSeriesOption","setSeriesOption","getSeriesLabel","addDragHandle","ChartPanel","ICON_MOVE","onDragStopped","isBubble","isInPairedMode","selectedValuesCount","indexToAxisLabel","axisLabel","escapedLabel","dragItem","__extends$1B","__decorate$V","FontPanel","activeComps","fontGroup","initGroup","initFontFamilySelect","initFontWeightStyleSelect","initFontSizeSelect","initFontColorPicker","addCompToPanel","setEnabled","hideEnabledCheckbox","hideOpenCloseIcons","onEnableChange","families","initialFont","initialValue","valueIndex","capitalisedFontValue","capitalise","familySelect","addOptions","setFont","sizes","sizeSelect","weightStyles","selectedOption","weightStyleSelect","selectedWeightStyle","colorPicker","newColor","destroyActiveComps","__extends$1C","__decorate$W","LegendPanel","activePanels","initLegendGroup","initLegendPosition","initLegendPadding","initLegendItems","initLabelPanel","getChartOption","setChartOption","positions","legendPositionSelect","legendPaddingSlider","setTextFieldWidth","setMaxValue","initSlider","expression","maxValue","markerSizeSlider","markerStrokeSlider","markerPaddingSlider","itemPaddingXSlider","itemPaddingYSlider","fontPanelComp","destroyActivePanels","panel","__extends$1D","__decorate$X","ShadowPanel","shadowGroup","shadowBlurSlider","shadowXOffsetSlider","shadowYOffsetSlider","initSeriesShadow","getShadowEnabled","setShadowProperty","shadowColorPicker","initInput","minValue","getShadowProperty","setMinValue","initLineOpacitySlider","seriesLineOpacitySlider","setStep","initFillOpacitySlider","seriesFillOpacitySlider","initFontPanelParams","_extendStatics105","_extendStatics106","_extendStatics107","_extendStatics108","__extends$1E","__decorate$Y","BarSeriesPanel","seriesGroup","initSeriesTooltips","initSeriesStrokeWidth","initOpacity","initShadowPanel","seriesTooltipsToggle","seriesStrokeWidthSlider","labelPanelComp","shadowPanelComp","__extends$1F","__decorate$Z","AxisTicksPanel","axisTicksGroup","initAxisTicks","axisTicksColorPicker","getAxisProperty","setAxisProperty","axisTicksWidthSlider","axisTicksSizeSlider","__extends$1G","__decorate$_","AxisPanel","axisGroup","initAxis","initAxisLabels","axisColorInput","axisLineWidthSlider","options_1","xAxisTypeSelect","axisTicksComp","addAdditionalLabelComps","createAngleComp","updateFunc","rotationInput","AgAngleSelect","degreesSymbol","createLabelUpdateFunc","axisPosition","xRotationLabel","yRotationLabel","labelPaddingSlider","AgSlider","__extends$1H","__decorate$$","NavigatorPanel","navigatorGroup","initNavigator","navigatorHeightSlider","cloneUnlessOtherwiseSpecified$1","deepMerge$1","emptyTarget$1","defaultArrayMerge$1","getKeys$1","getEnumerableOwnPropertySymbols$1","propertyIsOnObject$1","mergeObject$1","propertyIsUnsafe$1","getMergeFunction$1","defaultIsMergeableObject$1","isNonNullObject$1","isSpecial$1","__assign$7","ChartProxy","chartProxyParams","isDarkTheme","getFontColor","getAxisGridColor","getBackgroundColor","getChartPaddingOption","recreateChart","destroyChart","createChart","downloadChart","initChartOptions","initChartTheme","getDefaultOptionsFromTheme","chartTheme","processChartOptions","originalOptions","overriddenOptions","safeOptions","getDefaultOptions","overridePalette","paletteOverridden","getSelectedTheme","gridOptionsThemeOverrides","getGridOptionsChartThemeOverrides","apiThemeOverrides","apiChartThemeOverrides","themeOverrides_1","mergeThemeOverrides","customChartThemes","customChartTheme","integratedToStandaloneChartType","integratedChartType","GroupedBar","StackedBar","NormalizedBar","GroupedColumn","StackedColumn","NormalizedColumn","Area","StackedArea","NormalizedArea","Histogram","Pie","Doughnut","allowPaletteOverride","fillsOverridden","strokesOverridden","invalidFills","invalidStrokes","getStandaloneChartType","standaloneChartType","availableThemes","setTitleOption","getTitleOption","setChartPaddingOption","EVENT_CHART_OPTIONS_CHANGED","getDefaultFontOptions","getDefaultDropShadowOptions","getPredefinedPalette","getDefaultChartOptions","transformData","categoryKey","_extendStatics109","_extendStatics110","_extendStatics111","_extendStatics112","_extendStatics113","_extendStatics114","_extendStatics115","_extendStatics116","_extendStatics117","_extendStatics118","_extendStatics119","_extendStatics120","_extendStatics121","_extendStatics122","_extendStatics123","_extendStatics124","_extendStatics125","_extendStatics126","_extendStatics127","_extendStatics128","_extendStatics129","_extendStatics130","_extendStatics131","_extendStatics132","_extendStatics133","_extendStatics134","_extendStatics135","_extendStatics136","_extendStatics137","_extendStatics138","_extendStatics139","_extendStatics140","_extendStatics141","_extendStatics142","_extendStatics143","_extendStatics144","_extendStatics145","_extendStatics146","_extendStatics147","_extendStatics148","_extendStatics149","_extendStatics150","_extendStatics151","_extendStatics152","_extendStatics153","_extendStatics154","_extendStatics155","_extendStatics156","_extendStatics157","_extendStatics158","_extendStatics159","_extendStatics160","_extendStatics161","_extendStatics162","_extendStatics163","_extendStatics164","_extendStatics165","_extendStatics166","_extendStatics167","_extendStatics168","_extendStatics169","_extendStatics170","_extendStatics171","_extendStatics172","_extendStatics173","SetFilterModelValuesType","__extends$1I","__assign$8","CartesianChartProxy","axisTypeToClassMap","xAxisType","yAxisType","updateLabelRotation","categoryId","isHorizontalChart","axisType","axisKey","themeOverrides","userThemeOverrideRotation","commonRotation","cartesianRotation","chartTypeRotation","getDefaultAxisOptions","fontOptions","axisColor","getDefaultCartesianChartOptions","getAxisClass","baseAxisType","baseAxis","getYAxis","getXAxis","isTimeAxis","testDatum","testValue","getXAxisDefaults","__extends$1J","__assign$9","ScatterChartProxy","getMarkersEnabled","tooltip","renderer","paired","agChartOptions","parentElement","fields","seriesDefinitions","getSeriesDefinitions","existingSeriesById","reduceRight","xField","yField","sizeField","labelFieldDefinition","previousSeries","seriesDefinition","existingSeries","xFieldDefinition","yFieldDefinition","sizeFieldDefinition","getTooltipsEnabled","isBubbleChart","xField_1","__extends$1K","__decorate$10","MarkersPanel","seriesMarkersGroup","initMarkers","shouldHideEnabledCheckbox","seriesMarkerShapeSelect","seriesMarkerMinSizeSlider","seriesMarkerSizeSlider","seriesMarkerStrokeWidthSlider","__extends$1L","__decorate$11","LineSeriesPanel","initSeriesGroup","initSeriesLineWidth","initMarkersPanel","seriesLineWidthSlider","markersPanelComp","__extends$1M","__decorate$12","CalloutPanel","calloutGroup","initCalloutOptions","calloutLengthSlider","calloutStrokeWidthSlider","labelOffsetSlider","__extends$1N","__decorate$13","PieSeriesPanel","calloutPanelComp","__extends$1O","__decorate$14","PaddingPanel","chartPaddingGroup","initChartPaddingItems","paddingTopSlider","paddingRightSlider","paddingBottomSlider","paddingLeftSlider","__extends$1P","__decorate$15","BackgroundPanel","chartBackgroundGroup","initColorPicker","__extends$1Q","__decorate$16","TitlePanel","initFontPanel","hasTitle","fontPanelParams","newTitle","disabledTitle","__extends$1R","__decorate$17","chartGroup","initTitles","initPaddingPanel","initBackgroundPanel","titlePanelComp","paddingPanelComp","backgroundPanelComp","__extends$1S","__decorate$18","AreaSeriesPanel","__extends$1T","__decorate$19","ScatterSeriesPanel","__extends$1U","__decorate$1a","HistogramSeriesPanel","initBins","seriesBinCountSlider","__extends$1V","__decorate$1b","ChartFormattingPanel","panels","createPanels","destroyPanels","__extends$1W","__decorate$1c","MiniChart","tooltipName","__extends$1X","__decorate$1d","MiniChartWithAxes","axisOvershoot","addAxes","leftAxis","bottomAxis","__extends$1Y","MiniColumn","bars","updateColors","__extends$1Z","MiniStackedColumn","yScaleDomain","__extends$1_","MiniNormalizedColumn","__extends$1$","MiniBar","__extends$20","MiniStackedBar","xScaleDomain","__extends$21","MiniNormalizedBar","__extends$22","MiniDoughnut","centerRadiusScaler","center","angles","sectors","__extends$23","MiniPie","__extends$24","MiniLine","clipRect","__extends$25","MiniScatter","__extends$26","MiniBubble","__extends$27","MiniArea","pathData","areas","__extends$28","MiniStackedArea","__extends$29","MiniNormalizedArea","__extends$2a","MiniHistogram","__extends$2b","__decorate$1e","MiniChartsContainer","wrappers","chartGroups","barGroup","pieGroup","lineGroup","scatterGroup","histogramGroup","groupComponent","MiniClass","miniWrapper","refreshSelected","__extends$2c","__decorate$1f","ChartSettingsPanel","miniCharts","cardItems","activePaletteIndex","palettes","resetPalettes","ePrevBtn","eNextBtn","setActivePalette","getPrev","getNext","shallowCompare","eCardSelector","destroyMiniCharts","isActivePalette","miniChartsContainer","eMiniChartsContainer","addCardLink","eNavBar","radioCssClass","link","animationDirection","isAnimating","currentPalette","currentGui","futurePalette","nextGui","multiplier","final","getAbsoluteWidth","animatingClass","__extends$2d","__decorate$1g","TabbedChartMenu","tabs","chartIcons","controller","panelType","createTab","getPanelClass","tab","tabbedLayout","TabbedLayout","ChildClass","eWrapperDiv","titleEl","translatedTitle","titleLabel","bodyPromise","Promise","resolve","getMinDimensions","updateCurrentChartType","showTab","tabItem","showItem","parentComponent","TAB_DATA","TAB_FORMAT","EVENT_TAB_SELECTED","TAB_MAIN","__extends$2e","__decorate$1h","ChartMenu","eChartContainer","eMenuPanelContainer","buttons","chartSettings","showMenu","chartFormat","chartLink","chartUnlink","chartDownload","saveChart","menuVisible","createButtons","refreshMenuClasses","getToolbarOptions","tabOptions","toolbarItemsFunc","getChartToolbarItemsFunc","defaultItems","option","ignoreOptions","active","chartToolbarOptions","gui","button","buttonConfig","buttonEl","EVENT_DOWNLOAD_CHART","createMenuPanel","defaultTab","chartMenuPanelWidth","menuPanel","AgPanel","minWidth","closable","hideTitleBar","setParentComponent","tabbedMenu","EVENT_DESTROYED","setBodyComponent","contains","hideMenu","showContainer","showParent","getWidth","tabName","hideParent","__extends$2f","__assign$a","__decorate$1i","TitleEdit","chartMenu","endEditing","destroyableChartListeners","destroyDbleClickListener","startEditing","destroyMouseMoveListener","inTitle","maximumInputWidth","inputWidth","inputElement","inputStyle","inputValue","inputRect","focus","__extends$2g","__assign$b","BarChartProxy","isColumn","isColumnChart","barSeries","isGrouped","isNormalized","__extends$2h","__assign$c","AreaChartProxy","updateAreaChart","areaSeries","fieldIds","__extends$2i","__assign$d","LineChartProxy","lineSeries","__extends$2j","PolarChartProxy","__extends$2k","__assign$e","PieChartProxy","minRequiredAngle","existingSeriesId","pieSeriesField","pieSeries","__extends$2l","__assign$f","DoughnutChartProxy","doughnutChart","seriesMap","__extends$2m","__assign$g","HistogramChartProxy","__extends$2n","__decorate$1j","GridChartComp","availableChartThemes","modelParams","isRtl","validateCustomThemes","insideDialog","addDialog","addMenu","addTitleEditComp","setActiveChartCellRange","raiseChartCreatedEvent","suppliedThemes","getCustomChartThemes","getAllKeysInObjects","customThemeName","processChartOptionsFunc","getProcessChartOptionsFunc","chartThemeOverrides","environment","isThemeDark","eChart","getDocument","createChartProxy","titleEdit","getChartThemeOverrides","getBestDialogSize","chartDialog","AgDialog","resizable","movable","maximizable","centered","popupParent","getPopupParent","maxWidth","maxHeight","getAbsoluteHeight","width_1","height_1","eMenuContainer","eTitleEditContainer","shouldRecreateChart","updateChart","getCurrentChartType","handleEmptyChart","chartUpdateParams","getChartDataType","pivotModeDisabled","minFieldsRequired","isEmptyChart","isEmpty","eEmpty","getUnderlyingChart","refreshCanvasSize","getInnerHeight","getInnerWidth","focusEvent","relatedTarget","clearFocusedCell","chartModel","EVENT_CHART_CREATED","raiseChartDestroyedEvent","EVENT_CHART_DESTROYED","__extends$2o","__decorate$1k","ChartService","activeCharts","activeChartComps","getChartModels","models","createChartFromCurrentRange","selectedRange","getSelectedRange","createRangeChart","createCellRangeFromCellRangeParams","chartContainer","createPivotChart","chartAllRangeParams","createChartContainerFunc","getCreateChartContainerFunc","chartComp","chartRef","createChartRef","getTheme","ranges","destroyAllActiveCharts","__extends$2p","__decorate$1l","ChartTranslator","ChartTranslator_1","toTranslate","DEFAULT_TRANSLATIONS","pivotChartTitle","rangeChartTitle","settings","categories","xyValues","thickness","xType","automatic","xRotation","yRotation","titlePlaceholder","minSize","markerPadding","itemSpacing","itemPaddingX","itemPaddingY","layoutHorizontalSpacing","layoutVerticalSpacing","offsets","tooltips","markers","normal","boldItalic","predefined","histogramBinCount","groupedColumnTooltip","stackedColumnTooltip","normalizedColumnTooltip","groupedBarTooltip","stackedBarTooltip","normalizedBarTooltip","pieTooltip","doughnutTooltip","lineTooltip","groupedAreaTooltip","stackedAreaTooltip","normalizedAreaTooltip","scatterTooltip","bubbleTooltip","histogramTooltip","noDataToChart","pivotChartRequiresPivotMode","__extends$2q","__decorate$1m","__spreadArrays$8","RangeController","bodyScrollListener","onBodyScroll","dragging","registerGridComp","gridPanel","autoScrollService","AutoScrollService","logger","removeAllCellRanges","EVENT_COLUMN_GROUP_OPENED","refreshLastRangeStart","onColumnVisibleChange","beforeCols","dispatchChangedEvent","lastRange","refreshRangeStart","isContiguousRange","rangeColumns","allPositions","rowPositionUtils","getPinnedTopRowCount","PINNED_TOP","pinnedBottomRowCount","getPinnedBottomRowCount","PINNED_BOTTOM","setRangeToCell","appendRange","isEnableRangeSelection","calculateColumnsBetween","isSuppressMultiRangeSelection","rowForCell","sameRow","newestRangeStartCell","extendLatestRangeToCell","cellPosition","updateRangeEnd","endColumn","colsToAdd","isLastCellOfRange","moveColInCellRange","colToMove","moveToFront","otherCols","getRangeEdgeColumns","allIndices","extendLatestRangeInDirection","startCell","firstCol","endCellIndex","endCellFloating","endCell","newEndCell","cellNavigationService","getNextCellToFocus","setCellRange","columnStart","columnEnd","addCellRange","newRange","getColumnWithValidation","isMoreThanOneCell","lastMouseEvent","isCellInAnyRange","getCellRangeCount","isCellInSpecificRange","columnInRange","rowInRange","isRowInRange","lastRow","isLastRow","rangeFirstIndexColumn","rangeLastIndexColumn","lastRangeColumn","isBottomRightCell","isRightColumn","makeNull","floating","firstRow","thisRow","equalsFirstRow","equalsLastRow","afterFirstRow","beforeLastRow","getDraggingRange","draggingRange","onDragStart","ctrlKey","metaKey","multiKeyPressed","multiSelectKeyPressed","mouseCell","mouseEventService","getCellPositionForEvent","extendRange","draggingCell","mouseRowPosition","addScrollEventListener","isMouseAndStartInPinned","skipVerticalScroll","check","cellPositionUtils","equals","ensureCleared","removeScrollEventListener","started","finished","columnFrom","columnTo","isSameColumn","fromIndex","toIndex","firstIndex","lastIndex","tickingInterval","getBodyClientRect","getDomLayout","DOM_LAYOUT_NORMAL","isHorizontalScrollShowing","tickLeft","tickRight","tickUp","tickDown","ensureTickingStarted","doTick","tickAmount","vScrollPosition","getVScrollPosition","hScrollPosition","getHScrollPosition","setVerticalScrollPosition","setHorizontalScrollPosition","clearInterval","__extends$2r","__decorate$1n","AbstractSelectionHandle","changedCalculatedValues","shouldDestroyOnEndDragging","dragService","onDrag","onDragEnd","clearValues","getDraggingCssClass","preventRangeExtension","isDragging","getCellComp","cellComp","setCellComp","getCellRange","rangeStartRow","setRangeStartRow","rangeEndRow","setRangeEndRow","getLastCellHovered","lastCellHovered","cellHoverListener","getGridCore","getRootGui","updateValuesOnMove","SelectionHandleType","FILL","oldCellComp","removeListeners","__extends$2s","__assign$h","__decorate$1o","__spreadArrays$9","FillHandle","markedCellComps","cellValues","isUp","isReduce","initialXY","getNormalisedPosition","newX","newY","diffX","diffY","allowedDirection","getFillHandleDirection","dragAxis","initialPosition","getCellPosition","markPathFrom","finalRange","isX","initialRange","colLen","lastCellMarked","raiseFillStartEvent","handleValueChanged","raiseFillEndEvent","fillStartEvent","EVENT_FILL_START","fillEndEvent","EVENT_FILL_END","initialRangeEndRow","initialRangeStartRow","finalRangeEndRow","finalRangeStartRow","isVertical","isSuppressClearOnFillReduction","withinInitialRange","initialValues","resetValues","iterateAcrossCells","fillValues","getRowAbove","getRowBelow","updateInitialSet","currentValue","processValues","isCellEditable","setDataValue","clearCellsInRange","userFillOperation","getFillOperation","userResult","currentIndex","currentCellValue","allNumbers","asFloat","altKey","findLineByLeastSquares","clearMarkedPath","clearCellValues","currentPosition","isBefore","reduceVertical","extendVertical","initialColumn","currentColumn","displayedColumns","initialIndex","reduceHorizontal","extendHorizontal","endPosition","isMovingUp","rowPos","cellPos","cellInRange","isInitialRow","getComponentForCell","celPos","isMovingLeft","startCol","endCol","colsToMark","__extends$2t","__assign$i","RangeHandle$1","RANGE","rangeFixed","fixRangeStartEnd","__extends$2u","__decorate$1p","SelectionHandleFactory","createSelectionHandle","RangeSelectionModule","GridChartsModule","__extends$2v","__decorate$1q","DetailCellRenderer","needRefresh","loadRowDataVersion","pinned","autoHeight","isDetailRowAutoHeight","checkForDeprecations","ensureValidRefreshStrategy","selectAndSetTemplate","eDetailGrid","addThemeToDetailGrid","createDetailsGrid","registerDetailWithMaster","loadRowData","detailGridOptions","doLayout","EVENT_DATA_CHANGED","refreshStrategy","suppressRefresh","rowId","masterGridApi","gridInfo","addDetailGridInfo","detailGridInfo","removeDetailGridInfo","setDefaultTemplate","templateFunc","domLayout","Grid","$compile","providedBeanInstances","agGridReact","frameworkComponentWrapper","versionThisCall","getDetailRowData","successCallback","rowData","setRowData","MasterDetailModule","__extends$2w","MenuPanel","wrappedComponent","setTemplateFromElement","ESCAPE","closePanel","onTabKeyDown","defaultPrevented","menuItem","closeSubMenu","__extends$2x","__decorate$1r","MenuItemComponent","subMenuIsOpen","getClassName","addIcon","addName","addShortcut","addSubMenu","addTooltip","disabled","setAriaDisabled","onItemSelected","onMouseEnter","onMouseLeave","cssClasses","isDisabled","openSubMenu","activateFirstItem","subMenu","destroySubMenu","currentLevel","getAriaLevel","nextLevel","childMenu_1","MenuList","addMenuItems","EVENT_MENU_ITEM_SELECTED","cancelDeactivate","subMenu_1","subMenuGui_1","mouseEvent_1","mouseEnterListener_1","positionCallback","positionPopupForMenu","closePopup","anchorToElement","hideSubMenu","isSubMenuOpen","activate","cancelActivate","onItemActivated","deactivate","isCompact","isNodeOrElement","isEnableBrowserTooltips","TooltipFeature","getTooltipParams","shortcut","EVENT_MENU_ITEM_ACTIVATED","activateTimeoutId","deactivateTimeoutId","isAnotherSubMenuOpen","ACTIVATION_DELAY","__extends$2y","__assign$j","__decorate$1s","menuItems","getParentComponent","closeIfIsChild","UP","DOWN","handleNavKey","topMenu","findTopMenu","focusInto","clearActiveItem","activeMenuItem","menuItemOrString","addSeparator","menuItemDef","setAriaLevel","nextParent","nextItem","findNextItem","openChild","parentItem","up","foundCurrent","__extends$2z","__decorate$1t","EnterpriseMenuFactory","hideActiveMenu","activeMenu","showMenuAfterMouseEvent","menu","positionPopupUnderMouseEvent","showMenuAfterButtonClick","restrictToTabs","alignSide","minDims","minHeight","nudgeX","nudgeY","_positionCallback","EnterpriseMenu","lastSelectedTab","eMenuGui","setMenuVisible","KeyboardEvent","focusableEl","findTabbableParent","showTabBasedOnPreviousSelection","isMenuEnabled","getMenuTabs","TABS_DEFAULT","initialSelection","restrictTo","tabFactories","includeChecks","timeOfLastColumnChange","TAB_GENERAL","createMainPanel","TAB_FILTER","createFilterPanel","TAB_COLUMNS","createColumnsPanel","getTabsToCreate","onActiveItemClicked","onHidePopup","onItemClicked","onTabItemClicked","mainMenuList","EVENT_DISPLAYED_COLUMNS_CHANGED","onDisplayedColumnsChanged","isValidMenuTabItem","isNotSuppressed","isModuleLoaded","menuTabName","isRegistered","itemsToConsider","toShow","tabItemColumns","tabItemFilter","tabItemGeneral","showFirstItem","activateTab","ev","getMenuItems","defaultMenuOptions","getDefaultMenuOptions","getMainMenuItemsFunc","removeRepeatsFromArray","MENU_ITEM_SEPARATOR","allowPinning","lockPinned","rowGroupCount","doingGrouping","groupedByThisColumn","allowValue","allowRowGroup","pivotModeOn","isInMemoryRowModel","allowValueAgg","menuItemsMapped","menuItemMapper","mapWithStockItems","hidePopupFunc","focusedCell","getFocusedCell","setFocusedCell","filterWrapper","guiPromise","afterAttachedCallback","columnSelectPanel","columnsMenuParams","setAfterAttachedParams","initialScroll","getHorizontalPixelRange","newScroll","getScrollbarWidth","__extends$2A","__decorate$1u","ContextMenuFactory","ClipboardModule","isEnableCharts","csvModuleMissing","excelModuleMissing","suppressExcel","suppressCsv","isIOSUserAgent","getContextMenuItemsFunc","ContextMenu","positionParams","menuList","currentFocusedCell","__extends$2B","__decorate$1v","MenuItemMapper","originalList","resultList","getStockMenuItem","resultDef","skipHeaderOnAutoSize","isSkipHeaderOnAutoSize","setColumnPinned","PINNED_LEFT","isPinnedLeft","PINNED_RIGHT","isPinnedRight","isPinned","createAggregationSubMenu","autoSizeColumn","autoSizeAllColumns","addRowGroupColumn","removeRowGroupColumn","expandAll","collapseAll","clipboardService","copyToClipboard","pasteFromClipboard","exportSubMenuItems","csvModuleLoaded","excelModuleLoaded","chartMenuItem","getChartItems","pivotChartMenuItem","localeKey","defaultText","chartService","rangeChartMenuItem","columnToUse","columnIsAlreadyAggValue","funcNames","funcName","addValueColumn","MenuModule","__extends$2C","__assign$k","__decorate$1w","MultiFilter","filterDefs","filters","guiDestroyFuncs","activeFilterIndices","lastActivatedMenuItem","getFilterDefs","filterChangedCallback","filterPromises","filterDef","createFilter","all","lastOpenedInContainer","clearGui","filterGui","filterTitle","getFilterTitle","insertFilterMenu","insertFilterGroup","filterWithoutType","params_1","suppressFocus","getLastActiveFilterIndex","doesFilterPass","filterToSkip","rowPasses","getFilterType","getModelFromUi","filterType","filterModels","providedFilter","getModel","setFilterModel","promise","promises","filterModel","getChildFilterInstance","executeFunctionIfExists","forceFocusOutOfContainer","onAnyFilterChanged","onNewRowsLoaded","forEachReverse","filterInstance","filterModifiedCallback","_doesRowPassOtherFilter","doesRowPassOtherFilter","filterParams","createFilterParams","filterChanged","newFilterComponent","changedFilter","onFocusIn","__extends$2D","__assign$l","__decorate$1x","MultiFloatingFilterComp","floatingFilters","floatingFilterPromises","floatingFilterParams","parentFilterInstance","childFilterInstance","floatingFilterPromise","createFloatingFilter","floatingFilter","onParentModelChanged","afterFloatingFilter","lastActiveFloatingFilterIndex_1","shouldShow","defaultComponentName","FloatingFilterWrapper","getDefaultFloatingFilterType","newFloatingFilterComponent","MultiFilterModule","__extends$2E","__decorate$1y","RichSelectRow","setState","valueFormatted","populateWithRenderer","populateWithoutRenderer","valueToRender","cellRendererPromise","newCellRenderer","bindCellRendererToHtmlElement","childComponent","__extends$2F","__decorate$1z","RichSelectCellEditor","selectionConfirmed","searchString","originalSelectedValue","focusAfterAttached","cellStartedEdit","eValue","createRowComponent","eList","cellHeight","setRowHeight","renderSelectedValue","onKeyDown","virtualListGui","debounceDelay","searchDebounceDelay","clearSearchString","charPress","KeyName","onEnterKeyDown","onNavigationKeyPressed","stopEditing","oldIndex","valueToSelect","setSelectedValue","runSearch","keyName","BACKSPACE","isEventFromPrintableCharacter","searchStrings","keyCreator","topSuggestion","fuzzySuggestions","topValue","formatValue","ensureIndexVisible","getScrollTop","mouseY","getRowHeight","selectedIndex","PopupComponent","RichSelectModule","__extends$2G","__decorate$1A","__param","paramIndex","decorator","ServerSideBlock","pageNumber","parentCache","groupLevel","rowGroupCols","usingMasterDetail","isMasterDetail","groupColVo","groupField","createNodeIdPrefix","nodeIdPrefix","createIdForIndex","getNodeIdPrefix","displayRowIndex","bottomPointer","getStartRow","virtualRowCount","getVirtualRowCount","getEndRow","topPointer","midPointer","currentRowNode","getRowUsingLocalIndex","master","detailNode","childrenCache","isDisplayIndexInCache","setDataAndId","stub","idToUse","getServerSideGroupKey","getServerSideGroupKeyFunc","isServerSideGroup","getIsServerSideGroupFunc","isRowMasterFunc","getIsRowMasterFunc","setGroupDataIntoRowNode","setChildCountIntoRowNode","getRowHeightForNode","getChildCount","getChildCountFunc","groupDisplayCols","groupValue","loadFromDatasource","createLoadParams","getRows","createBlankRowNode","uiLevel","createGroupKeys","isPixelInRange","pixel","blockTop","blockHeight","getRowBounds","extractRowBounds","rowTop","serverSideCache","getRowIndexAtPixel","clearDisplayIndexes","displayIndexEnd","displayIndexStart","forEachRowNode","clearRowTop","setRowIndex","setDisplayIndexes","displayIndexSeq","nextRowTop","peek","groupKeys","request","pivotCols","sortModel","pageLoaded","getVersion","failCallback","pageLoadFailed","isDisplayIndexInBlock","displayIndex","isBlockBefore","getDisplayIndexStart","getDisplayIndexEnd","getBlockHeight","getBlockTop","isGroupLevel","getGroupField","DefaultBlockSize","Qualifier","RowNodeBlock","__extends$2H","__decorate$1B","__param$1","ServerSideCache","cacheParams","cacheTop","blockHeights","blockFound","lastBlock","forEachBlockInOrder","block","nextRowIndex","rowsBetween","destroyBlock","lastAllowedIndex","lastBlockId","blockSize","getBlockSize","currentBlock","blockId","blocksSkippedCount","rowsSkippedCount","skip","blockToAddId","lastVisitedRow","rowsNotAccountedFor","cacheHeight","dontCreateBlock","beforeBlock","displayIndexStart_1","blockNumber","getBlockNumber","cachedBlockHeight","localIndex","createBlock","getTopLevelRowDisplayedIndex","topLevelIndex","blockBefore_1","getBlock","currentId","lastRowTopLevelIndex","lastRowNode","lastDisplayedNodeIndexInBlockBefore","newBlock","displayIndexSequence","postCreateBlock","applyTransaction","rowDataTransaction","getChildCache","nextKey","nextServerSideCache","forEachNodeShallow","keyListForNextLevel","refreshCacheAfterSort","changedColumnsInSort","rowGroupColIds","shouldPurgeCache","rowGroupBlock","sortingByGroup","purgeCache","nextCache","RowNodeCache","__extends$2I","__decorate$1C","__param$2","ServerSideRowModel","ensureRowHeightsValid","startPixel","endPixel","startLimitIndex","endLimitIndex","getRowHeightAsNumber","addEventListeners","getServerSideDatasource","setDatasource","destroyDatasource","datasourceChanged","route","executeOnCache","onColumnRowGroupChanged","EVENT_ROW_GROUP_OPENED","onRowGroupOpened","onColumnEverything","onValueChanged","onColumnPivotChanged","EVENT_SORT_CHANGED","onSortChanged","isLastRowFound","cacheExists","isMaxRowFound","isSuppressEnterpriseResetOnNewColumns","resetRequired","rowGroupColumnVos","toValueObjects","valueColumnVos","pivotColumnVos","sortModelDifferent","jsonEquals","sortController","getSortModel","rowGroupDifferent","pivotDifferent","valuesDifferent","findChangedColumnsInSort","newSortModel","oldSortModel","allColsInBothSorts","ids","sm","oldSortItem","newSortItem","differentSorts","differentIndexes","extractSortModel","sortingWithValueCol","isSortingWithValueColumn","sortingWithSecondaryCol","isSortingWithSecondaryColumn","isServerSideSortingAlwaysResets","createDetailNode","createNodeCache","isPurgeClosedRowNodes","updateRowIndexesAndBounds","rowAnimationEnabled","modelUpdatedEvent","newPage","newData","animate","isAnimateRows","keepRenderedRows","createNewRowNodeBlockLoader","createCacheParams","rowDataChangedEvent","EVENT_ROW_DATA_CHANGED","destroyRowNodeBlockLoader","maxConcurrentRequests","getMaxConcurrentDatasourceRequests","blockLoadDebounceMillis","getBlockLoadDebounceMillis","rowNodeBlockLoader","RowNodeBlockLoader","dynamicRowHeight","isDynamicRowHeight","maxBlocksInCache","getMaxBlocksInCache","isAutoRowHeightActive","userProvidedBlockSize","getCacheBlockSize","getFilterModel","lastAccessedSequence","overflowSize","initialRowCount","EVENT_CACHE_UPDATED","onCacheUpdated","onRowHeightChanged","resetRowTops","numberSequence","forEachNodeDeep","getTopLevelRowCount","getCurrentPageHeight","isRowsToRender","ROW_MODEL_TYPE_SERVER_SIDE","cacheToPurge","getNodesInRangeForSelection","firstInRange","lastInRange","getRowNodesInRange","getBlockState","isRowPresent","autoGroupIndex","individualGroupCols","individualGroupCol","multiColumnPrefix","valueColIds","secondaryColIds","masterNode","detail","selectable","isLoading","ServerSideRowModelModule","rowModels","ClientSideValuesExtractor","valueGetter","extractUniqueValues","forEachLeafNode","formatted","toStringOrNull","_extendStatics174","_extendStatics175","_extendStatics176","_extendStatics177","_extendStatics178","_extendStatics179","_extendStatics180","_extendStatics181","_extendStatics182","_extendStatics183","_extendStatics184","_extendStatics185","_extendStatics186","SetValueModel","doesRowPassOtherFilters","suppressSorting","setIsLoading","valueFormatterService","localEventService","miniFilterText","providedValues","allValues","availableValues","displayedValues","selectedValues","clientSideValuesExtractor","textFormatter","TextFilter","DEFAULT_FORMATTER","valuesType","TAKEN_FROM_GRID_VALUES","PROVIDED_LIST","PROVIDED_CALLBACK","updateAllValues","resetSelectionState","async","refreshValues","keepSelection","currentModel","overrideValues","valuesToUse","allValuesPromise","refreshAfterAnyFilterChanged","showAvailableOnly","updateAvailableValues","getValuesFromRows","toStrings","sortedValues","sortValues","callback_1","processedValues","setValuesType","getValuesType","isValueAvailable","suppressRemoveEntries","EVENT_AVAILABLE_VALUES_CHANGED","updateDisplayedValues","defaultComparator","excelMode","removeUnavailableValues","setMiniFilter","getMiniFilter","formattedFilterText","matchesFilter","valueToCheck","textFormatterValue","valueFormatterValue","valueFormatter","getDisplayedValueCount","getDisplayedValue","hasSelections","defaultToNothingSelected","getUniqueValueCount","getUniqueValue","getValues","selectAllMatchingMiniFilter","clearExistingSelection","deselectAllMatchingMiniFilter","selectValue","deselectValue","isEverythingVisibleSelected","isValueSelected","isNothingVisibleSelected","allValues_1","__extends$2J","__decorate$1D","SetFilterListItem","eCheckbox","EVENT_SELECTION_CHANGED","toggleSelected","formattedValue","getFormattedValue","showTooltips","tooltipText","renderCell","getComponentHolder","newSetFilterCellRenderer","DEFAULT_LOCALE_TEXT","loadingOoo","blanks","searchOoo","selectAllSearchResults","noMatches","__extends$2K","__decorate$1E","SetFilter","appliedModelValues","updateUiVisibility","createBodyTemplate","translateForSetFilter","which","handleKeySpace","handleKeyEnter","eSetFilterList","activeElement","currentItem","getComponentAt","setFilterParams","onBtApply","eMiniFilter","getCssIdentifier","resetUiToDefaults","valueModel","setModelIntoUi","isEnableOldSetFilterModel","getValueModel","areModelsEqual","setParams","applyExcelModeOptions","checkSetFilterDeprecatedParams","loading","showOrHideLoadingScreen","initialiseFilterBodyUi","suppressSyncValuesAfterDataChange","addEventListenersForDataChanges","closeOnApply","applyMiniFilterWhileTyping","debounceMs","syncValuesLikeExcel","selectAllOnMiniFilter","EVENT_ROW_DATA_UPDATED","syncAfterDataChange","setLoading","eFilterLoading","initVirtualList","initMiniFilter","getRefElement","createSetListItem","suppressSelectAll","ModelWrapper","ModelWrapperWithSelectAll","isSelectAllSelected","getSelectAllLabel","SELECT_ALL_VALUE","listItem_1","listItem","suppressMiniFilter","onMiniFilterInput","resetUiToActiveModel","applyModel","appliedModel","isModelValid","isNewRowsActionKeep","setFilterValues","onUiChanged","resetFilterValues","refreshFilterValues","filterOnAllVisibleValues","updateUiAfterMiniFilterChange","showOrHideResults","hideResults","eNoMatches","applyImmediately","newMiniFilter","selectEverything","selectNothing","unselectValue","isEverythingSelected","isNothingSelected","refreshValuesOnOpen","ProvidedFilter","isRowSelected","__extends$2L","__decorate$1F","SetFloatingFilterComp","availableValuesListenerAdded","eFloatingFilterText","setDisabled","showParentFilter","parentModel","lastKnownModel","updateSetFilterText","addAvailableValuesListener","setFilter","setValueModel","formattedValues","arrayToDisplay","valuesString","SetFilterModule","__extends$2M","__decorate$1G","StatusBarService","allComponents","registerStatusPanel","getStatusPanel","__extends$2N","__decorate$1H","StatusBar","statusBar","statusPanels","leftStatusPanelComponents","componentConfig","createAndRenderComponents","eStatusBarLeft","centerStatusPanelComponents","eStatusBarCenter","rightStatusPanelComponents","eStatusBarRight","statusBarComponents","ePanelComponent","componentDetails","newStatusPanelComponent","statusPanel","componentDetail","destroyFunc","statusBarService","__extends$2O","__decorate$1I","NameValueComp","defaultValue","__extends$2P","__decorate$1J","TotalAndFilteredRowsComp","onDataChanged","formatNumberCommas","getFilteredRowCountValue","totalRowCount","getTotalRowCount","filteredRowCount","forEachNodeAfterFilter","__extends$2Q","__decorate$1K","FilteredRowsComp","totalRowCountValue","getTotalRowCountValue","filteredRowCountValue","__extends$2R","__decorate$1L","TotalRowsComp","getRowCountValue","__extends$2S","__decorate$1M","SelectedRowsComp","isValidRowModel","selectedRowCount","getSelectedRows","eventListener","onRowSelectionChanged","rowModelType","__extends$2T","__decorate$1N","AggregationComp","avgAggregationComp","countAggregationComp","minAggregationComp","maxAggregationComp","sumAggregationComp","onRangeSelectionChanged","setAggregationComponentValue","aggFuncName","statusBarValueComponent","getAggregationValueComponent","formatNumberTwoDecimalPlacesAndCommas","refComponentName","aggregationPanelConfig","statusPanelParams","numberCount","cellsSoFar","cellId","gotResult","gotNumberResult","StatusBarModule","__extends$2U","__decorate$1O","ViewportRowModel","rowNodesByIndex","EVENT_VIEWPORT_CHANGED","onViewportChanged","getViewportDatasource","setViewportDatasource","viewportDatasource","calculateFirstRow","firstRenderedRow","bufferSize","getViewportRowModelBufferSize","pageSize","getViewportRowModelPageSize","afterBuffer","calculateLastRow","lastRenderedRow","lastRowIndex","newFirst","newLast","purgeRowsNotInViewport","setViewportRange","indexStr","setRowCount","ROW_MODEL_TYPE_VIEWPORT","firstNodeOutOfRange","lastNodeOutOfRange","endIndex","callbackCount","dataItem","ViewportRowModelModule","__extends$2V","__decorate$1P","ClipboardService","registerGridCore","gridCore","clientSideRowModel","executeOnTempElement","textArea","parsedData","stringToArray","getClipboardDeliminator","getProcessDataFromClipboardFunc","isSuppressLastEmptyLineOnPaste","removeLastLineIfBlank","doPasteOperation","cellsToFlash","updatedRowNodes","hasOnlyOneValueToPaste","pasteIntoActiveRange","pasteStartingFromFocusedCell","pasteOperationFunc","EVENT_PASTE_START","onlyChangedColumns","isAggregateOnlyChangedColumns","ChangedPath","getRootNode","doAggregate","refreshCells","dispatchFlashCells","fireRowChanged","EVENT_PASTE_END","clipboardData","abortRepeatingPasteIntoRows","getRangeSize","indexOffset","dataRowIndex","iterateActiveRanges","currentRowData","processCellFromClipboardFunc","getProcessCellFromClipboardFunc","isSuppressPaste","EXPORT_TYPE_DRAG_COPY","SOURCE_PASTE","createIdFromValues","columnsToPasteInto","getDisplayedColumnsStartingAt","pasteSingleValue","pasteMultipleValues","EXPORT_TYPE_CLIPBOARD","copyRangeDown","firstRowValues","processCellForClipboardFunc","getProcessCellForClipboardFunc","firstRowValue","lastLine","rowNodes","isFullRowEdit","EVENT_ROW_VALUE_CHANGED","clipboardGridData","clipboardRowData","updateCellValue","processedValue","includeHeaders","isCopyHeadersToClipboard","selectedRowsToCopy","isSuppressCopyRowsToClipboard","copySelectedRangeToClipboard","copySelectedRowsToClipboard","isAnyCellFocused","copyFocusedCellToClipboard","onlyFirst","rowCallback","columnCallback","iterateActiveRange","isLastRange","rangeIndex","deliminator","_2","processHeaderForClipboardFunc","getProcessHeaderForClipboardFunc","processHeader","copyDataToClipboard","headerValue","EVENT_FLASH_CELLS","csvCreator","userProvidedFunc","getSendToClipboardFunc","execCommand","callbackNow","callbackAfter","eTempInput","guiRoot","err","startRangeIndex","endRangeIndex","register","exports"],"sourceRoot":""}